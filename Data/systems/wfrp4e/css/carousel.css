/*Control bar button*/
#controls .scene-control > i::after, #controls li[data-control="combat-carousel"]::after {
    position: absolute;
    content: " ";
    width: 53px;
    height: 53px;
    left: -12px;
    top: -12px;
    z-index: -2;
    opacity: 0.88;
}

#controls li[data-control="combat-carousel"] {
    position: relative;
}

#controls li[data-control="combat-carousel"]::after {
    left: 0px;
    top: 0px;
}

/*Combat Carousel*/
.active-combatant-wrapper {
    display: none!important;
}

#combat-carousel.wfrp4e.wrapper.fixed-mode {
    top: 0!important;
}

#combat-carousel.wfrp4e .splide__track {
    overflow: visible;
}

#combat-carousel.wfrp4e:hover{
    background: none;
    border: none;
}

#combat-carousel.wfrp4e .carousel-icon {
    display: none;
}

#combat-carousel.wfrp4e .card {
    border: none;
    background: none;
    padding: 0;
}


#combat-carousel.wfrp4e .avatar {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: baseline;
    border-radius: 50%;
    box-shadow: 0 0 20px #000;
}

#combat-carousel.wfrp4e .avatar::before {
    content: "";
    position: absolute;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: url(../ui/combat-carousel/frames/chat-background.webp);
    background-size: contain;
    z-index: -1;
}

#combat-carousel.wfrp4e.wrapper .container::after {
    content: "";
    position: absolute;
    width: 106%;
    height: 106%;
    left: -3%;
    top: -3%;
    background: url(../ui/combat-carousel/frames/avatar.webp);
    background-size: contain;
    z-index: 15;
    border-radius: 50%;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}
#combat-carousel.wfrp4e .card.is-active .container::after {
    content: "";
    position: absolute;
    width: 106%;
    height: 106%;
    left: -3%;
    top: -3%;
    background: url(../ui/combat-carousel/frames/avatar_red.webp);
    background-size: contain;
    z-index: 15;
}

#combat-carousel.wfrp4e .card.is-active::after {
    content: "";
    position: absolute;
    background: url(../ui/combat-carousel/frames/extra.webp);
    background-size: 100% 100%;
    z-index: 11;
}

#combat-carousel.wfrp4e.wrapper.lg .card.is-active::after{
    width: 176px;
    height: 188px;
    left: -37px;
    top: -41px;
}
#combat-carousel.wfrp4e.wrapper.med .card.is-active::after{
    width: 156px;
    height: 163px;
    left: -39px;
    top: -38px;
}
#combat-carousel.wfrp4e.wrapper.sm .card.is-active::after{
    width: 122px;
    height: 123px;
    left: -31px;
    top: -26px;
}
#combat-carousel.wfrp4e.wrapper.xs .card.is-active::after{
    width: 75px;
    height: 79px;
    left: -16px;
    top: -18px;
}

#combat-carousel.wfrp4e.wrapper.lg .container {
    margin: 5px;
}
#combat-carousel.wfrp4e.wrapper.med .container {
    margin: 4px;
}
#combat-carousel.wfrp4e.wrapper.sm .container {
    margin: 4px;
}
#combat-carousel.wfrp4e.wrapper.xs .container {
    margin: 2px;
}

#combat-carousel.wfrp4e.wrapper.lg .avatar,
#combat-carousel.wfrp4e.wrapper.lg .container{
    width: 110px;
    height: 110px;
}
#combat-carousel.wfrp4e.wrapper.med .avatar,
#combat-carousel.wfrp4e.wrapper.med .container{
    width: 92px;
    height: 92px;
}
#combat-carousel.wfrp4e.wrapper.sm .avatar,
#combat-carousel.wfrp4e.wrapper.sm .container{
    width: 72px;
    height: 72px;
}
#combat-carousel.wfrp4e.wrapper.xs .avatar,
#combat-carousel.wfrp4e.wrapper.xs .container{
    width: 46px;
    height: 46px;
}

#combat-carousel.wfrp4e .container::before {
    content: "";
    position: absolute;
    width: 120%;
    height: 106%;
    left: -10%;
    top: -1%;
    background: url(../ui/combat-carousel/bg/health_bg.webp);
    background-size: 100% 100%;
    z-index: -1;
}

#combat-carousel.wfrp4e .card.is-active {
    margin: 30px 16px 0 16px;
    transform: scale(1.1);
}

#combat-carousel.wfrp4e .splide__slide:hover:not(.combat-round) {
    margin: 30px 16px 0 16px;
    transform: scale(1.1);
}

#combat-carousel.wfrp4e .initiative {
    position: absolute;
    right: -1px;
    bottom: -7px;
    background: url(../ui/combat-carousel/frames/value.webp);
    width: 38px;
    height: 38px;
    background-size: contain;
    text-align: center;
    z-index: 999;
}

#combat-carousel.wfrp4e .card.is-active .initiative {
    position: absolute;
    right: -1px;
    bottom: -7px;
    background: url(../ui/combat-carousel/frames/value_red.webp);
    width: 38px;
    height: 38px;
    background-size: contain;
    text-align: center;
    z-index: 999;
}

#combat-carousel.wfrp4e .initiative .fa-2x {
    position: relative;
}

#combat-carousel.wfrp4e .initiative .roll-init{
    position: relative;
    display: block;
    overflow: hidden;
    width: 100%;
    height: 100%;
}

#combat-carousel.wfrp4e .initiative input{
    position: relative;
    top: 3px;
    color: var(--main-text-light-color)!important;
}

#combat-carousel.wfrp4e .initiative input[type="text"].fa-stack-1x {
    position: absolute;
    color: var(--main-text-light-color)
}

#combat-carousel.wfrp4e .initiative .roll-init .initiative-icon{
    display: none;
}

#combat-carousel.wfrp4e .combat-controls a {
    background: none;
    border: none;

    color: #98968a;
}

#combat-carousel.wfrp4e .combat-controls a i{
    z-index: 2;
}

#combat-carousel.wfrp4e .combat-controls a::before {
    content: "";
    position: absolute;
    width: 120%;
    height: 120%;
    left: -10%;
    top: -10%;
    background: url(../ui/combat-carousel/frames/value.webp);
    background-size: 100% 100%;
    z-index: 1;
}

#combat-carousel.wfrp4e .encounter-info {
    background: none;
    border: none;
    color: #98968a;
}

#combat-carousel.wfrp4e .encounter-info > div {
    z-index: 3;
}

#combat-carousel.wfrp4e .encounter-info::before {
    content: "";
    position: absolute;
    width: 180%;
    height: 140%;
    left: -35%;
    top: -20%;
    background: url(../ui/combat-carousel/bg/health_bg.webp);
    background-size: 100% 100%;
    z-index: -1;
}

#combat-carousel.wfrp4e .encounter-controls {
    background: none;
    border: none;
    color: #98968a;

    left: -17px;

    width: 65px;
    height: 50px;
}
#combat-carousel.wfrp4e .encounter-controls::before {
    content: "";
    position: absolute;
    width: 140%;
    height: 120%;
    left: -21%;
    top: -12%;
    background: url(../ui/combat-carousel/bg/health_bg.webp);
    background-size: 100% 100%;
    z-index: -1;
 }

#combat-carousel.wfrp4e .encounter-controls .encounter-control {
    flex: 0 0 25%;
}

#combat-carousel.wfrp4e .drag-handle {
    left: 7px;
    font-size: 1.3rem;
}

#combat-carousel.wfrp4e .drag-handle::before {
    content: "";
    position: absolute;
    width: 39px;
    height: 39px;
    left: -10px;
    top: -8px;
    background: url(../ui/combat-carousel/frames/value.webp);
    background-size: 100% 100%;
    z-index: -1;
}

#combat-carousel.wfrp4e meter {
    width: 86%;
    margin-left: 7%;
    position: relative;
}

#combat-carousel.wfrp4e .effects {
    height: 100%;
    justify-content: center;

    bottom: auto;
    top: 0;
    z-index: 90;
    flex-flow: column;
    left: -7px;
}

#combat-carousel.wfrp4e .effect {
    position: relative;
    margin: 2px;
    background: none;
}
#combat-carousel.wfrp4e .effect::after {
    position: absolute;
    content: "";
    left: -2px;
    top: -2px;
    width: 130%;
    height: 130%;
    background: url(../ui/combat-carousel/bg/orb.webp);
    background-size: 100% 100%;
    z-index: -1;
}

#combat-carousel.wfrp4e .splide__slide:hover .name {
    background: none;
    border: none;
}

#combat-carousel.wfrp4e .container .tracker-indicators:has(i.fa-skull) {
    display: none;
}

.tracker-indicators {
    display: none;
}

#controls li[data-control="combat-carousel"] img {
    opacity: 0;
}

#controls li[data-control="combat-carousel"]::before{
    position: absolute;
    content: " ";
    width: 30px;
    height: 30px;
    left: 3px;
    top: 3px;

    background-color: white;
    -webkit-mask: url("/modules/combat-carousel/icons/combat-carousel-solid2.svg") no-repeat center;
    mask: url("/modules/combat-carousel/icons/combat-carousel-solid2.svg") no-repeat center;
}

/* Firefox old*/
@-moz-keyframes blink {
    0% {
        opacity:0.7;
    }
    50% {
        opacity:1;
    }
    100% {
        opacity:0.7;
    }
}

@-webkit-keyframes blink {
    0% {
        opacity:0.7;
    }
    50% {
        opacity:1;
    }
    100% {
        opacity:0.7;
    }
}
/* IE */
@-ms-keyframes blink {
    0% {
        opacity:0.7;
    }
    50% {
        opacity:1;
    }
    100% {
        opacity:0.7;
    }
}
/* Opera and prob css3 final iteration */
@keyframes blink {
    0% {
        opacity:0.7;
    }
    50% {
        opacity:1;
    }
    100% {
        opacity:0.7;
    }
}