import{DiceSystem as t,DiceSFX as i}from"./api.js";class ShaderUtils{static applyDiceSoNiceShader(t){void 0!==this.emissive&&game.dice3d.DiceFactory.realisticLighting&&ShaderUtils.selectiveBloomShaderFragment(t),this.userData.iridescent&&ShaderUtils.iridescentShaderFragment(t),"MeshPhysicalMaterial"==t.shaderName&&t.iridescence&&ShaderUtils.iridescenceShaderFragment(t),Hooks.callAll("diceSoNiceShaderOnBeforeCompile",t,this),this.userData.shader=t}static selectiveBloomShaderFragment(t){t.uniforms.globalBloom=game.dice3d.uniforms.globalBloom,t.fragmentShader=`\n\t\t\tuniform float globalBloom;\n\t\t\t${t.fragmentShader}\n\t\t`.replace("#include <dithering_fragment>","#include <dithering_fragment>\n\t\t\tif (globalBloom > 0.5) {\n\t\t\t\t#ifdef USE_EMISSIVEMAP\n\t\t\t\t\tgl_FragColor.rgb = emissiveColor.rgb * emissive * totalEmissiveRadiance;\n\t\t\t\t#else\n\t\t\t\t\tgl_FragColor.rgb = vec3(0.0);\n\t\t\t\t#endif\n\t\t\t}\n\t\t")}static iridescenceShaderFragment(t){t.fragmentShader=t.fragmentShader.replace("#include <lights_physical_fragment>","#include <lights_physical_fragment>\n\t\t\t\t#ifdef USE_IRIDESCENCE\n\t\t\t\t\tmaterial.iridescence = iridescence;\n\t\t\t\t\t#ifdef USE_IRIDESCENCEMAP\n\t\t\t\t\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).b;\n\t\t\t\t\t#endif\n\t\t\t\t#endif")}static iridescentShaderFragment(t){t.uniforms.iridescenceLookUp=game.dice3d.uniforms.iridescenceLookUp,t.uniforms.iridescenceNoise=game.dice3d.uniforms.iridescenceNoise,t.uniforms.boost=game.dice3d.uniforms.boost,t.vertexShader=`\n\t\t\tvarying vec3 viWorldPosition;\n\t\t\tvarying vec3 viWorldNormal;\n\t\t\t${t.vertexShader}\n\t\t`.replace("#include <fog_vertex>","#include <fog_vertex>\n\t\t\tviWorldPosition = worldPosition.xyz;\n\t\t\tviWorldNormal = mat3(modelMatrix) * normalize(normal);\n\t\t\t"),t.fragmentShader=`\n\t\t\tvarying vec3 viWorldPosition;\n\t\t\tvarying vec3 viWorldNormal;\n\t\t\t\n\t\t\tuniform sampler2D iridescenceLookUp;\n\t\t\tuniform sampler2D iridescenceNoise;\n\t\t\tuniform float boost;\n\t\t\t${t.fragmentShader}\n\t\t`.replace("#include <transmission_fragment>","vec3 viewWorldDir = normalize(viWorldPosition - cameraPosition);\n\t\t\tvec3 iNormal = normalize(viWorldNormal); \n\t\t\tfloat NdotV = max(-dot(viewWorldDir, iNormal), 0.0);\n\t\t\tfloat fresnelFactor = pow(1.0 - NdotV, 5.0);\n\t\t\tfloat noise = texture2D(iridescenceNoise, vUv/2.0).r;\n\t\t\tvec3 airy = texture2D(iridescenceLookUp, vec2(NdotV * .99, noise)).xyz;\n\t\t\t\n\t\t\tif(metalnessFactor >= 1.0) {\n\t\t\t\ttotalSpecular = totalSpecular  * airy * boost;\n\t\t\t}\n\n\t\t\t#include <transmission_fragment>")}}class AssetsLoader{static cache={};constructor(){}async load(t=[]){Array.isArray(t)||(t=[t]);const i=await Promise.all(t.map((t=>this.loadAsset(t)))),r={};return i.forEach((t=>{const i=Object.keys(t)[0];r[i]=t[i]})),r}async loadAsset(t){if(AssetsLoader.cache[t])return await AssetsLoader.cache[t];const i=(async()=>{if(t.endsWith(".json")){const i=await fetch(t);if(!i.ok)throw new Error(`Failed to load JSON asset: ${t}`);const r=await i.json(),a=await this.loadSpriteSheet(t,r);return{[t]:a}}{const i=await this.loadImage(t),r={source:i,frame:{x:0,y:0,w:i.width,h:i.height}};return{[t]:r}}})();AssetsLoader.cache[t]=i;const r=await i;return AssetsLoader.cache[t]=r,r}async loadSpriteSheet(t,i){const r=t.substring(0,t.lastIndexOf("/")+1),a=r+i.meta.image,o=await this.loadImage(a),l={};for(const[t,r]of Object.entries(i.frames))l[t]={source:o,frame:r.frame};return i.meta.related_multi_packs&&await Promise.all(i.meta.related_multi_packs.map((t=>this.loadAdditionalPack(r+t,l)))),l}async loadAdditionalPack(t,i){const r=await fetch(t);if(!r.ok)throw new Error(`Failed to load additional spritesheet: ${t}`);const a=await r.json(),o=await this.loadImage(t.substring(0,t.lastIndexOf("/")+1)+a.meta.image);for(const[t,r]of Object.entries(a.frames))i[t]={source:o,frame:r.frame}}async loadImage(t){return AssetsLoader.cache[t]?AssetsLoader.cache[t]:new Promise(((i,r)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{AssetsLoader.cache[t]=a,i(a)},a.onerror=()=>{r(new Error(`Failed to load image: ${t}`))},a.src=t}))}}class DicePreset{constructor(t,i=""){i=i||t,this.type=t,this.term="Die",this.shape=i||t,this.scale=1,this.labels=[],this.valueMap=null,this.values=[],this.bumps=[],this.emissiveMaps=[],this.emissive=0,this.emissiveIntensity=1,this.mass=300,this.inertia=13,this.geometry=null,this.model=null,this.system="standard",this.modelLoaded=!1,this.modelLoading=!1,this.modelFile=null,this.internalAdd=!1,this.atlas=null,this.appearance={labelColor:"#FFFFFF",diceColor:"#000000",outlineColor:"#000000",edgeColor:"#000000",texture:"none",material:"auto",font:"auto",colorset:"custom"}}setValues(t=1,i=20,r=1){this.values=this.range(t,i,r),t<1&&this.setValueMap(t,i,r)}setValueMap(t,i,r){let a={},o=1;for(let l=t;l<=i;l+=r)a[l]=o,o++;this.valueMap=a}registerFaces(t){for(let i of["labels","bumps","emissiveMaps"])if(t[i]&&Object.keys(t[i]).length>0){let r=[];if(r.push(""),["d2","d10"].includes(this.shape)||r.push(""),"d4"==this.shape){const a=Object.values(t[i]);let o=a[0],l=a[1],c=a[2],h=a[3];r=[[[],[0,0,0],[l,h,c],[o,c,h],[l,o,h],[o,l,c]],[[],[0,0,0],[l,c,h],[c,o,h],[l,h,o],[c,l,o]],[[],[0,0,0],[h,c,l],[c,h,o],[h,l,o],[c,o,l]],[[],[0,0,0],[h,l,c],[o,h,c],[h,o,l],[o,c,l]]]}else Array.prototype.push.apply(r,Object.values(t[i]));switch(i){case"labels":this.labels=r;break;case"bumps":this.bumps=r;break;case"emissiveMaps":this.emissiveMaps=r}}}setLabels(t){this.labels=t,this.unloadModel()}setBumpMaps(t){this.bumps=t,this.unloadModel()}setEmissiveMaps(t){this.emissiveMaps=t,this.unloadModel()}setAtlas(t){this.atlas=t,this.unloadModel()}unloadModel(){this.modelLoaded=!1,this.modelLoading=!1}loadTextures(){return this.modelLoaded||!1!==this.modelLoading||(this.modelLoading=new Promise((async(t,i)=>{try{const i=new AssetsLoader;let r={};if(this.atlas){let t=await i.load(this.atlas);t=t[this.atlas],r.labels=await this.loadTextureType(this.labels,t,i),this.bumps&&(r.bumps=await this.loadTextureType(this.bumps,t,i)),this.emissiveMaps&&(r.emissiveMaps=await this.loadTextureType(this.emissiveMaps,t,i))}else r.labels=await this.loadTextureType(this.labels,{},i),this.bumps&&(r.bumps=await this.loadTextureType(this.bumps,{},i)),this.emissiveMaps&&(r.emissiveMaps=await this.loadTextureType(this.emissiveMaps,{},i));this.registerFaces(r),this.modelLoaded=!0,t()}catch(t){i(t)}}))),this.modelLoading}async loadTextureType(t,i,r){const a=[],o=/\.(png|jpg|jpeg|gif|webp)$/i;for(let l=0;l<t.length;l++){const c=t[l];if(c&&c.match(o))if(i[c])a[l]=i[c];else{const t=await r.load([c]);a[l]=t[c]}else a[l]=c}return a}range(t,i,r=1){for(var a=[t],o=t;o<i;)a.push(o+=r||1);return a}setModel(t){this.modelFile=t,this.modelLoaded=!1}loadModel(t=null){return this.modelLoaded||!1!==this.modelLoading||(this.modelLoading=new Promise(((i,r)=>{t.load(this.modelFile,(t=>{t.scene.traverse((function(t){if(t.isMesh){t.castShadow=!0,t.material.onBeforeCompile=ShaderUtils.applyDiceSoNiceShader;const i=game.dice3d.box.anisotropy;null!==t.material.map&&(t.material.map.anisotropy=i),null!==t.material.normalMap&&(t.material.normalMap.anisotropy=i),null!==t.material.emissiveMap&&(t.material.emissiveMap.anisotropy=i),null!==t.material.roughnessMap&&(t.material.roughnessMap.anisotropy=i),null!==t.material.metalnessMap&&(t.material.metalnessMap.anisotropy=i),t.layers.enableAll(),Hooks.callAll("diceSoNiceOnMaterialReady",t.material,null)}})),this.model=t,this.modelLoaded=!0,Hooks.callAll("diceSoNiceModelLoaded",this),i(t)}))}))),this.modelLoading}}const r=[],a=[];let o;o=new DicePreset("d2"),o.setLabels(["1","2"]),o.setValues(1,2),o.inertia=8,o.mass=400,o.scale=.9,r.push(o),o=new DicePreset("dc","d2"),o.term="Coin",o.setAtlas("modules/dice-so-nice/textures/standard.json"),o.setLabels(["tail.webp","heads.webp"]),o.setBumpMaps(["tail_bump.webp","heads_bump.webp"]),o.setValues(0,1),o.inertia=8,o.scale=.9,o.colorset="coin_default",r.push(o),o=new DicePreset("d4"),o.setLabels(["1","2","3","4"]),o.setValues(1,4),o.inertia=5,o.scale=1.2,r.push(o),o=new DicePreset("d6"),o.setLabels(["1","2","3","4","5","6"]),o.setValues(1,6),o.scale=.9,r.push(o),o=new DicePreset("d3","d6"),o.setLabels(["1","2","3"]),o.setValues(1,3),o.scale=.9,r.push(o),o=new DicePreset("df","d6"),o.term="FateDie",o.setLabels(["−"," ","+"]),o.setValues(-1,1),o.scale=.9,r.push(o),o=new DicePreset("d8"),o.setLabels(["1","2","3","4","5","6","7","8"]),o.setValues(1,8),r.push(o),o=new DicePreset("d10"),o.setLabels(["1","2","3","4","5","6","7","8","9","0"]),o.setValues(1,10),o.mass=450,o.inertia=9,o.scale=.9,r.push(o),o=new DicePreset("d5","d10"),o.setLabels(["1","2","3","4","5"]),o.setValues(1,5),o.mass=450,o.inertia=9,o.scale=.9,r.push(o),o=new DicePreset("d100","d10"),o.setLabels(["10","20","30","40","50","60","70","80","90","00"]),o.setValues(10,100,10),o.mass=450,o.inertia=9,o.scale=.9,r.push(o),o=new DicePreset("d12"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12"]),o.setValues(1,12),o.mass=450,o.inertia=8,o.scale=.9,r.push(o),o=new DicePreset("d14"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12","13","14"]),o.setValues(1,14),o.mass=450,o.inertia=8,o.scale=1,r.push(o),o=new DicePreset("d7","d14"),o.setLabels(["1","2","3","4","5","6","7"]),o.setValues(1,7),o.mass=450,o.inertia=8,o.scale=1,r.push(o),o=new DicePreset("d16"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"]),o.setValues(1,16),o.mass=450,o.inertia=8,o.scale=1,r.push(o),o=new DicePreset("d20"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]),o.setValues(1,20),o.mass=500,o.scale=1,o.inertia=6,r.push(o),o=new DicePreset("d24"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"]),o.setValues(1,24),o.mass=500,o.scale=1,o.inertia=10,r.push(o),o=new DicePreset("d30"),o.setLabels(["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]),o.setValues(1,30),o.mass=500,o.scale=1,o.inertia=10,r.push(o),a.push({type:"d6",atlas:"modules/dice-so-nice/textures/dot.json",labels:["d6-1.webp","d6-2.webp","d6-3.webp","d6-4.webp","d6-5.webp","d6-6.webp"],bumpMaps:["d6-1-b.webp","d6-2-b.webp","d6-3-b.webp","d6-4-b.webp","d6-5-b.webp","d6-6-b.webp"],system:"dot"}),a.push({type:"d6",atlas:"modules/dice-so-nice/textures/dot.json",labels:["d6-1-black.webp","d6-2-black.webp","d6-3-black.webp","d6-4-black.webp","d6-5-black.webp","d6-6-black.webp"],bumpMaps:["d6-1-b.webp","d6-2-b.webp","d6-3-b.webp","d6-4-b.webp","d6-5-b.webp","d6-6-b.webp"],system:"dot_b"}),a.push({type:"d2",labels:["1","F"],font:"FoundryVTT",system:"foundry_vtt",fontScale:1.2}),a.push({type:"d4",labels:["1","2","3","E"],font:"FoundryVTT",system:"foundry_vtt",fontScale:.8}),a.push({type:"d6",labels:["1","2","3","4","5","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"df",labels:["−"," ","+"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d3",labels:["1","2","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d8",labels:["1","2","3","4","5","6","7","F"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d10",labels:["1","2","3","4","5","6","7","8","9","E"],font:"FoundryVTT",system:"foundry_vtt",fontScale:.9}),a.push({type:"d5",labels:["1","2","3","4","E"],font:"FoundryVTT",system:"foundry_vtt",fontScale:.9}),a.push({type:"d100",labels:["10","20","30","40","50","60","70","80","90","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d12",labels:["1","2","3","4","5","6","7","8","9","10","11","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d14",labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d7",labels:["1","2","3","4","5","6","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d16",labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d20",labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","F"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d24",labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","F"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"d30",labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","E"],font:"FoundryVTT",system:"foundry_vtt"}),a.push({type:"df",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["df-m.webp","df-0.webp","df-p.webp"],emissiveMaps:["df-m.webp","df-0.webp","df-p.webp"],emissive:16777215,emissiveIntensity:2,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d2",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d2-1.webp","d2-2.webp"],emissiveMaps:["d2-1.webp","d2-2.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"dc",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["dc-h.webp","dc-t.webp"],emissiveMaps:["dc-h.webp","dc-t.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d4",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d4-1.webp","d4-2.webp","d4-3.webp","d4-4.webp"],emissiveMaps:["d4-1.webp","d4-2.webp","d4-3.webp","d4-4.webp"],emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d6",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d6-1.webp","d6-2.webp","d6-3.webp","d6-4.webp","d6-5.webp","d6-6.webp"],emissiveMaps:["d6-1.webp","d6-2.webp","d6-3.webp","d6-4.webp","d6-5.webp","d6-6.webp"],emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d8",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d8-1.webp","d8-2.webp","d8-3.webp","d8-4.webp","d8-5.webp","d8-6.webp","d8-7.webp","d8-8.webp"],emissiveMaps:["d8-1.webp","d8-2.webp","d8-3.webp","d8-4.webp","d8-5.webp","d8-6.webp","d8-7.webp","d8-8.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d10",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d10-1.webp","d10-2.webp","d10-3.webp","d10-4.webp","d10-5.webp","d10-6.webp","d10-7.webp","d10-8.webp","d10-9.webp","d10-0.webp"],emissiveMaps:["d10-1.webp","d10-2.webp","d10-3.webp","d10-4.webp","d10-5.webp","d10-6.webp","d10-7.webp","d10-8.webp","d10-9.webp","d10-0.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d12",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d12-1.webp","d12-2.webp","d12-3.webp","d12-4.webp","d12-5.webp","d12-6.webp","d12-7.webp","d12-8.webp","d12-9.webp","d12-10.webp","d12-11.webp","d12-12.webp"],emissiveMaps:["d12-1.webp","d12-2.webp","d12-3.webp","d12-4.webp","d12-5.webp","d12-6.webp","d12-7.webp","d12-8.webp","d12-9.webp","d12-10.webp","d12-11.webp","d12-12.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d100",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d100-10.webp","d100-20.webp","d100-30.webp","d100-40.webp","d100-50.webp","d100-60.webp","d100-70.webp","d100-80.webp","d100-90.webp","d100-00.webp"],emissiveMaps:["d100-10.webp","d100-20.webp","d100-30.webp","d100-40.webp","d100-50.webp","d100-60.webp","d100-70.webp","d100-80.webp","d100-90.webp","d100-00.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"}),a.push({type:"d20",atlas:"modules/dice-so-nice/textures/spectrum-0.json",labels:["d20-1.webp","d20-2.webp","d20-3.webp","d20-4.webp","d20-5.webp","d20-6.webp","d20-7.webp","d20-8.webp","d20-9.webp","d20-10.webp","d20-11.webp","d20-12.webp","d20-13.webp","d20-14.webp","d20-15.webp","d20-16.webp","d20-17.webp","d20-18.webp","d20-19.webp","d20-20.webp"],emissiveMaps:["d20-1.webp","d20-2.webp","d20-3.webp","d20-4.webp","d20-5.webp","d20-6.webp","d20-7.webp","d20-8.webp","d20-9.webp","d20-10.webp","d20-11.webp","d20-12.webp","d20-13.webp","d20-14.webp","d20-15.webp","d20-16.webp","d20-17.webp","d20-18.webp","d20-19.webp","d20-20.webp"],emissiveIntensity:2,emissive:16777215,colorset:"spectrum_default",system:"spectrum"});const l={none:{name:"DICESONICE.TextureNone",composite:"source-over",source:"",bump:""},cloudy:{name:"DICESONICE.TextureCloudsTransparent",composite:"destination-in",atlas:"modules/dice-so-nice/textures/standard.json",source:"cloudy.webp",bump:"cloudy.alt.webp"},cloudy_2:{name:"DICESONICE.TextureClouds",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"cloudy.alt.webp",bump:"cloudy.alt.webp"},fire:{name:"DICESONICE.TextureFire",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"fire.webp",bump:"fire.webp"},marble:{name:"DICESONICE.TextureMarble",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"marble.webp",bump:"",material:"glass"},water:{name:"DICESONICE.TextureWaterTransparent",composite:"destination-in",atlas:"modules/dice-so-nice/textures/standard.json",source:"water.webp",bump:"water.webp",material:"glass"},water_2:{name:"DICESONICE.TextureWater",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"water.webp",bump:"water.webp",material:"glass"},ice:{name:"DICESONICE.TextureIceTransparent",composite:"destination-in",atlas:"modules/dice-so-nice/textures/standard.json",source:"ice.webp",bump:"ice.webp",material:"glass"},ice_2:{name:"DICESONICE.TextureIce",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"ice.webp",bump:"ice.webp",material:"glass"},paper:{name:"DICESONICE.TexturePaper",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"paper.webp",bump:"paper_bump.webp",material:"wood"},speckles:{name:"DICESONICE.TextureSpeckles",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"speckles.webp",bump:"speckles.webp"},glitter:{name:"DICESONICE.TextureGlitter",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"glitter.webp",bump:"glitter_bump.webp"},glitter_2:{name:"DICESONICE.TextureGlitterTransparent",composite:"destination-in",atlas:"modules/dice-so-nice/textures/standard.json",source:"glitter-alpha.webp",bump:""},stars:{name:"DICESONICE.TextureStars",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"stars.webp",bump:"stars.webp"},stainedglass:{name:"DICESONICE.TextureStainedGlass",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"stainedglass.webp",bump:"stainedglass_bump.webp",material:"iridescent"},skulls:{name:"DICESONICE.TextureSkulls",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"skulls.webp",bump:"skulls.webp"},leopard:{name:"DICESONICE.TextureLeopard",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"leopard.webp",bump:"leopard.webp",material:"wood"},tiger:{name:"DICESONICE.TextureTiger",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"tiger.webp",bump:"tiger.webp",material:"wood"},cheetah:{name:"DICESONICE.TextureCheetah",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"cheetah.webp",bump:"cheetah.webp",material:"wood"},dragon:{name:"Dragon",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"dragon.webp",bump:"dragon_bump.webp"},lizard:{name:"Lizard",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"lizard.webp",bump:"lizard_bump.webp"},bird:{name:"Bird",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"feather.webp",bump:"feather_bump.webp"},astral:{name:"DICESONICE.TextureAstralSea",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"astral.webp",bump:"stars.webp"},wood:{name:"DICESONICE.TextureWood",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"wood.webp",bump:"wood.webp",material:"wood"},metal:{name:"DICESONICE.TextureMetal",composite:"multiply",atlas:"modules/dice-so-nice/textures/standard.json",source:"metal.webp",bump:"",material:"metal"},stone:{name:"DICESONICE.TextureStone",composite:"soft-light",atlas:"modules/dice-so-nice/textures/standard.json",source:"stone.webp",bump:"stone.webp",material:"stone"},radial:{name:"DICESONICE.TextureRadial",composite:"source-over",atlas:"modules/dice-so-nice/textures/standard.json",source:"radial.webp",bump:""},bronze01:{name:"DICESONICE.TextureBronze1",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze01.webp",material:"metal",bump:""},bronze02:{name:"DICESONICE.TextureBronze2",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze02.webp",material:"metal",bump:""},bronze03:{name:"DICESONICE.TextureBronze3",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze03.webp",material:"metal",bump:""},bronze03a:{name:"DICESONICE.TextureBronze3a",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze03a.webp",material:"metal",bump:""},bronze03b:{name:"DICESONICE.TextureBronze3b",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze03b.webp",material:"metal",bump:""},bronze04:{name:"DICESONICE.TextureBronze4",composite:"difference",atlas:"modules/dice-so-nice/textures/standard.json",source:"bronze04.webp",material:"metal",bump:""}},c={coin_default:{name:"coin_default",description:"DICESONICE.ColorCoinDefault",category:"DICESONICE.AcquiredTaste",foreground:"#f6c928",background:"#f6c928",outline:"none",edge:"#f6c928",texture:"metal",visibility:"hidden"},spectrum_default:{name:"spectrum_default",description:"DICESONICE.ColorSpectrumDefault",category:"DICESONICE.AcquiredTaste",foreground:"#ffffff",background:"#000000",outline:"#ffffff",edge:"#000000",texture:"none",visibility:"hidden",material:"pristine"},radiant:{name:"radiant",description:"DICESONICE.ColorRadiant",category:"DICESONICE.DamageTypes",foreground:"#F9B333",background:"#FFFFFF",outline:"gray",texture:"paper"},fire:{name:"fire",description:"DICESONICE.ColorFire",category:"DICESONICE.DamageTypes",foreground:"#f8d84f",background:["#f8d84f","#f9b02d","#f43c04","#910200","#4c1009"],outline:"black",texture:"fire"},ice:{name:"ice",description:"DICESONICE.ColorIce",category:"DICESONICE.DamageTypes",foreground:"#60E9FF",background:["#214fa3","#3c6ac1","#253f70","#0b56e2","#09317a"],outline:"black",texture:"ice"},cold:{name:"cold",description:"DICESONICE.ColorCold",category:"DICESONICE.DamageTypes",foreground:"#60E9FF",background:["#214fa3","#3c6ac1","#253f70","#0b56e2","#09317a"],outline:"black",texture:"ice_2"},poison:{name:"poison",description:"DICESONICE.ColorPoison",category:"DICESONICE.DamageTypes",foreground:"#D6A8FF",background:["#313866","#504099","#66409e","#934fc3","#c949fc"],outline:"black",texture:"cloudy"},acid:{name:"acid",description:"DICESONICE.ColorAcid",category:"DICESONICE.DamageTypes",foreground:"#A9FF70",background:["#a6ff00","#83b625","#5ace04","#69f006","#b0f006","#93bc25"],outline:"black",texture:"marble",material:"plastic"},thunder:{name:"thunder",description:"DICESONICE.ColorThunder",category:"DICESONICE.DamageTypes",foreground:"#FFC500",background:"#7D7D7D",outline:"black",texture:"cloudy"},lightning:{name:"lightning",description:"DICESONICE.ColorLightning",category:"DICESONICE.DamageTypes",foreground:"#FFC500",background:["#f17105","#f3ca40","#eddea4","#df9a57","#dea54b"],outline:"#7D7D7D",texture:"ice"},air:{name:"air",description:"DICESONICE.ColorAir",category:"DICESONICE.DamageTypes",foreground:"#ffffff",background:["#d0e5ea","#c3dee5","#a4ccd6","#8dafb7","#80a4ad"],outline:"black",texture:"cloudy"},water:{name:"water",description:"DICESONICE.ColorWater",category:"DICESONICE.DamageTypes",foreground:"#60E9FF",background:["#87b8c4","#77a6b2","#6b98a3","#5b8691","#4b757f"],outline:"black",texture:"water"},earth:{name:"earth",description:"DICESONICE.ColorEarth",category:"DICESONICE.DamageTypes",foreground:"#6C9943",background:["#346804","#184200","#527f22","#3a1d04","#56341a","#331c17","#5a352a","#302210"],outline:"black",texture:"speckles"},force:{name:"force",description:"DICESONICE.ColorForce",category:"DICESONICE.DamageTypes",foreground:"white",background:["#FF97FF","#FF68FF","#C651C6"],outline:"#570000",texture:"stars"},psychic:{name:"psychic",description:"DICESONICE.ColorPsychic",category:"DICESONICE.DamageTypes",foreground:"#D6A8FF",background:["#313866","#504099","#66409E","#934FC3","#C949FC","#313866"],outline:"black",texture:"speckles"},necrotic:{name:"necrotic",description:"DICESONICE.ColorNecrotic",category:"DICESONICE.DamageTypes",foreground:"#ffffff",background:"#6F0000",outline:"black",texture:"skulls"},breebaby:{name:"breebaby",description:"DICESONICE.ColorPastelSunset",category:"DICESONICE.ThemesSoNice",foreground:["#5E175E","#564A5E","#45455E","#3D5A5E","#1E595E","#5E3F3D","#5E1E29","#283C5E","#25295E"],background:["#FE89CF","#DFD4F2","#C2C2E8","#CCE7FA","#A1D9FC","#F3C3C2","#EB8993","#8EA1D2","#7477AD"],outline:"white",texture:"marble",material:"plastic"},pinkdreams:{name:"pinkdreams",description:"DICESONICE.ColorPinkDreams",category:"DICESONICE.ThemesSoNice",foreground:"white",background:["#ff007c","#df73ff","#f400a1","#df00ff","#ff33cc"],outline:"#570000",texture:"skulls"},inspired:{name:"inspired",description:"DICESONICE.ColorInspired",category:"DICESONICE.ThemesSoNice",foreground:"#FFD800",background:"#C4C4B6",outline:"#000000",texture:"stone"},bloodmoon:{name:"bloodmoon",description:"DICESONICE.ColorBloodMoon",category:"DICESONICE.ThemesSoNice",foreground:"#CDB800",background:"#6F0000",outline:"black",texture:"marble",material:"plastic"},starynight:{name:"starynight",description:"DICESONICE.ColorStaryNight",category:"DICESONICE.ThemesSoNice",foreground:"#4F708F",background:["#091636","#233660","#4F708F","#8597AD","#E2E2E2"],outline:"white",texture:"speckles"},glitterparty:{name:"glitterparty",description:"DICESONICE.ColorGlitterParty",category:"DICESONICE.ThemesSoNice",foreground:"white",background:["#FFB5F5","#7FC9FF","#A17FFF"],outline:"none",texture:"glitter"},astralsea:{name:"astralsea",description:"DICESONICE.ColorAstralSea",category:"DICESONICE.ThemesSoNice",foreground:"#565656",background:"white",outline:"none",texture:"astral"},foundry:{name:"foundry",description:"DICESONICE.ColorFoundry",category:"DICESONICE.ThemesSoNice",foreground:"#000000",background:"#ffffff",outline:"none",edge:"#000000",texture:"radial"},dragons:{name:"dragons",description:"DICESONICE.ColorDragons",category:"DICESONICE.AcquiredTaste",foreground:"#FFFFFF",background:["#B80000","#4D5A5A","#5BB8FF","#7E934E","#FFFFFF","#F6ED7C","#7797A3","#A78437","#862C1A","#FFDF8A"],outline:"black",texture:["dragon","lizard"],description:"Here be Dragons"},birdup:{name:"birdup",description:"DICESONICE.ColorBirdUp",category:"DICESONICE.AcquiredTaste",foreground:"#FFFFFF",background:["#F11602","#FFC000","#6EC832","#0094BC","#05608D","#FEABB3","#F75680","#F3F0DF","#C7A57F"],outline:"black",texture:"bird",description:"Bird Up!"},tigerking:{name:"tigerking",description:"DICESONICE.ColorTigerKing",category:"DICESONICE.AcquiredTaste",foreground:"#ffffff",background:"#FFCC40",outline:"black",texture:["leopard","tiger","cheetah"]},toxic:{name:"toxic",description:"DICESONICE.ColorToxic",category:"DICESONICE.AcquiredTaste",foreground:"#A9FF70",background:["#a6ff00","#83b625","#5ace04","#69f006","#b0f006","#93bc25"],outline:"black",texture:"fire"},rainbow:{name:"rainbow",description:"DICESONICE.ColorRainblow",category:"DICESONICE.Colors",foreground:["#FF5959","#FFA74F","#FFFF56","#59FF59","#2374FF","#00FFFF","#FF59FF"],background:["#900000","#CE3900","#BCBC00","#00B500","#00008E","#008282","#A500A5"],outline:"black",texture:"none"},random:{name:"random",description:"DICESONICE.ColorRaNdOm",category:"DICESONICE.Colors",foreground:[],outline:[],background:[],texture:[]},black:{name:"black",description:"DICESONICE.ColorBlack",category:"DICESONICE.Colors",foreground:"#ffffff",background:"#000000",outline:"black",texture:"none"},white:{name:"white",description:"DICESONICE.ColorWhite",category:"DICESONICE.Colors",foreground:"#000000",background:"#FFFFFF",outline:"#FFFFFF",texture:"none"},grey:{name:"grey",description:"DICESONICE.ColorGrey",category:"DICESONICE.Colors",foreground:"#FFFFFF",background:"#888888",outline:"#000000",texture:"none"},red:{name:"red",description:"DICESONICE.ColorRed",category:"DICESONICE.Colors",foreground:"#FFFFFF",background:"#FF0000",outline:"none",texture:"none"},blue:{name:"blue",description:"DICESONICE.ColorBlue",category:"DICESONICE.Colors",foreground:"#FFFFFF",background:"#0000FF",outline:"none",texture:"none"},green:{name:"green",description:"DICESONICE.ColorGreen",category:"DICESONICE.Colors",foreground:"#FFFFFF",background:"#00FF00",outline:"none",texture:"none"},yellow:{name:"yellow",description:"DICESONICE.ColorYellow",category:"DICESONICE.Colors",foreground:"#000000",background:"#FFFF00",outline:"none",texture:"none"},pink:{name:"pink",description:"DICESONICE.ColorPink",category:"DICESONICE.Colors",foreground:"#FFFFFF",background:"#FF00FF",outline:"none",texture:"none"},cyan:{name:"cyan",description:"DICESONICE.ColorCyan",category:"DICESONICE.Colors",foreground:"#000000",background:"#00FFFF",outline:"none",texture:"none"},prism:{name:"prism",description:"DICESONICE.ColorPrism",category:"DICESONICE.AcquiredTaste",foreground:"#FFFFFF",background:"#FFFFFF",outline:"black",texture:"stainedglass"},bronze:{name:"bronze",description:"DICESONICE.ColorBronze",category:"DICESONICE.ThemesSoNice",foreground:["#FF9159","#FFB066","#FFBF59","#FFD059"],background:["#705206","#7A4E06","#643100","#7A2D06"],outline:["#3D2D03","#472D04","#301700","#471A04"],edge:["#FF5D0D","#FF7B00","#FFA20D","#FFBA0D"],texture:[["bronze01","bronze02","bronze03","bronze03b","bronze03b","bronze04"]]},custom:{name:"custom",description:"DICESONICE.ColorCustom",category:"DICESONICE.Colors",foreground:"",background:"",outline:"",edge:"",texture:"none"}},h={d2:1,d4:1,d6:1.3,d8:1.1,d10:1,d12:1.1,d14:.5,d16:.5,d20:1,d24:1,d30:.75,d3:1.3,d5:1,d7:.5,df:2,d100:.75};class DiceColors{static diceTextures={};static diceBumps={};static loadTextures(t,i){const r=[],a=Object.entries(t);for(const[t,i]of a)i.atlas?r.push(i.atlas):(i.source&&""!==i.source&&r.push(i.source),i.bump&&""!==i.bump&&r.push(i.bump));(new AssetsLoader).load(r).then((t=>{for(const[i,r]of a)r.atlas?(r.source&&""!==r.source&&(DiceColors.diceTextures[i]=t[r.atlas][r.source]),r.bump&&""!==r.bump&&(DiceColors.diceBumps[i]=t[r.atlas][r.bump])):(r.source&&""!==r.source&&(DiceColors.diceTextures[i]=t[r.source]),r.bump&&""!==r.bump&&(DiceColors.diceBumps[i]=t[r.bump]));i(t)}))}static getTexture(t){if(Array.isArray(t)){let i=[];for(let r=0,a=t.length;r<a;r++)("string"==typeof t[r]||Array.isArray(t[r]))&&i.push(this.getTexture(t[r]));return i}if(!t||""==t)return{name:"",texture:"",material:"plastic"};if("none"==t)return{name:"none",texture:"",material:"plastic"};if("random"==t){let t=Object.keys(DiceColors.diceTextures);return this.getTexture(t[Math.floor(Math.random()*t.length)])}return DiceColors.diceTextures?null!=DiceColors.diceTextures[t]?(l[t].material||(l[t].material="plastic"),DiceColors.diceBumps[t]||(DiceColors.diceBumps[t]=""),{name:t,bump:DiceColors.diceBumps[t],material:l[t].material,texture:DiceColors.diceTextures[t],composite:l[t].composite}):{name:"",texture:""}:t}static randomColor(){let t=[];t[0]=Math.floor(254*Math.random()),t[1]=Math.floor(254*Math.random()),t[2]=Math.floor(254*Math.random());let i=(299*parseInt(t[0])+587*parseInt(t[1])+114*parseInt(t[2]))/1e3>126?"rgb(30,30,30)":"rgb(230,230,230)";return{background:"rgb("+t[0]+","+t[1]+","+t[2]+")",foreground:i}}static initColorSets(t=null){let i;if(t){let r={};r[t.name]=t,i=Object.entries(r)}else i=Object.entries(c);for(const[t,r]of i)c[t].id=t,"custom"!=r.texture&&(c[t].texture=this.getTexture(r.texture)),"object"==typeof c[t].texture&&(c[t].texture.id=r.texture),c[t].material||(c[t].material=""),c[t].font||(c[t].font="Arial"),c[t].fontScale?c[t].fontScale=foundry.utils.mergeObject(h,c[t].fontScale,{inplace:!1,performDeletions:!0}):c[t].fontScale=h,c[t].visibility||(c[t].visibility="visible");if(!t)for(let t=0;t<10;t++){let t=this.randomColor(),i=this.getTexture("random");""!=i.name?(c.random.foreground.push(t.foreground),c.random.background.push(t.background),c.random.outline.push(t.background),c.random.texture.push(i)):(c.random.foreground.push(t.foreground),c.random.background.push(t.background),c.random.outline.push("black"),c.random.texture.push(""))}}static getColorSet(t){return{...c[t]||c.custom}}static setColorCustom(t="#FFFFFF",i="#000000",r="#FFFFFF",a="#FFFFFF"){c.custom.foreground=t,c.custom.background=i,c.custom.outline=r,c.custom.edge=a}}const u={d2:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"29D8FA3F-1F04-4F5A-985B-16353BAB0B2C",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[88.93379974365234,.0001336209534201771,-4.532903671264648,88.93379974365234,.0001336209534201771,-4.532903671264648,88.93379974365234,.0001336209534201771,-4.532903671264648,90.8361587524414,-6830116763012484e-20,-2.6535863876342773,90.8361587524414,-6830116763012484e-20,-2.6535863876342773,84.580078125,-27.482694625854492,4.547501087188721,84.580078125,-27.482694625854492,4.547501087188721,86.38970947265625,-28.07042121887207,2.668496608734131,27.482057571411133,-84.58028411865234,-4.547504901885986,27.482057571411133,-84.58028411865234,-4.547504901885986,28.06978416442871,-86.38990783691406,-2.6685009002685547,27.481149673461914,-84.58119201660156,4.536083698272705,27.481149673461914,-84.58119201660156,4.536083698272705,28.069250106811523,-86.39043426513672,2.6568350791931152,-.0007737207342870533,-88.93378448486328,4.532901287078857,-.0007737207342870533,-88.93378448486328,4.532901287078857,-.0007737207342870533,-88.93378448486328,4.532901287078857,-.0005998046253807843,-90.83614349365234,2.6535849571228027,-.0005998046253807843,-90.83614349365234,2.6535849571228027,-27.482694625854492,-84.58097839355469,4.5305891036987305,-27.482694625854492,-84.58097839355469,4.5305891036987305,-28.07042121887207,-86.39022827148438,2.6512229442596436,-84.58029174804688,-27.481143951416016,-4.552997589111328,-84.58029174804688,-27.481143951416016,-4.552997589111328,-86.3899154663086,-28.06924819946289,-2.6741106510162354,-88.93379974365234,-.0001336209534201771,4.532903671264648,-88.93379974365234,-.0001336209534201771,4.532903671264648,-88.93379974365234,-.0001336209534201771,4.532903671264648,-90.8361587524414,6830116763012484e-20,2.6535863876342773,-90.8361587524414,6830116763012484e-20,2.6535863876342773,-71.94794464111328,52.27442169189453,-4.543759822845459,-71.94794464111328,52.27442169189453,-4.543759822845459,-73.4873275756836,53.39253234863281,-2.664675235748291,-71.9488525390625,52.27351379394531,4.539828777313232,-71.9488525390625,52.27351379394531,4.539828777313232,-73.48785400390625,53.391998291015625,2.6606605052948,-52.27299499511719,71.94922637939453,-4.539824962615967,-52.27299499511719,71.94922637939453,-4.539824962615967,-53.39146423339844,73.48823547363281,-2.660656213760376,-27.482057571411133,84.58028411865234,4.547504901885986,-27.482057571411133,84.58028411865234,4.547504901885986,-28.06978416442871,86.38990783691406,2.6685009002685547,.0007736866245977581,88.93378448486328,-4.532901287078857,.0007736866245977581,88.93378448486328,-4.532901287078857,.0007736866245977581,88.93378448486328,-4.532901287078857,.0005998046253807843,90.83614349365234,-2.6535849571228027,.0005998046253807843,90.83614349365234,-2.6535849571228027,-.00013426830992102623,88.93287658691406,4.550687789916992,-.00013426830992102623,88.93287658691406,4.550687789916992,-.00013426830992102623,88.93287658691406,4.550687789916992,6751317414455116e-20,90.83562469482422,2.6717519760131836,6751317414455116e-20,90.83562469482422,2.6717519760131836,27.482694625854492,84.58097839355469,-4.5305891036987305,27.482694625854492,84.58097839355469,-4.5305891036987305,28.07042121887207,86.39022827148438,-2.6512229442596436,84.5811996459961,27.482053756713867,-4.530590534210205,84.5811996459961,27.482053756713867,-4.530590534210205,86.39044189453125,28.069782257080078,-2.651224374771118,84.58098602294922,-27.48178482055664,-4.5360870361328125,84.58098602294922,-27.48178482055664,-4.5360870361328125,86.3902359008789,-28.069887161254883,-2.6568384170532227,73.48785400390625,-53.391998291015625,-2.6606605052948,71.9488525390625,-52.27351379394531,-4.539828777313232,71.9488525390625,-52.27351379394531,-4.539828777313232,52.273902893066406,-71.94831848144531,-4.543763637542725,52.273902893066406,-71.94831848144531,-4.543763637542725,53.39199447631836,-73.48770904541016,-2.6646788120269775,.00013430237595457584,-88.93287658691406,-4.550687789916992,.00013430237595457584,-88.93287658691406,-4.550687789916992,.00013430237595457584,-88.93287658691406,-4.550687789916992,-6751317414455116e-20,-90.83562469482422,-2.6717519760131836,-6751317414455116e-20,-90.83562469482422,-2.6717519760131836,-28.069887161254883,-86.38970184326172,-2.6741127967834473,-27.48178482055664,-84.58007049560547,-4.552999496459961,-27.48178482055664,-84.58007049560547,-4.552999496459961,-52.27351760864258,-71.94794464111328,-4.5542144775390625,-52.27351760864258,-71.94794464111328,-4.5542144775390625,-53.39200210571289,-73.4873275756836,-2.67535400390625,-71.94832611083984,-52.27299118041992,-4.554214000701904,-71.94832611083984,-52.27299118041992,-4.554214000701904,-73.48771667480469,-53.391456604003906,-2.675353527069092,-88.93289947509766,.0007747426279820502,-4.550684928894043,-88.93289947509766,.0007747426279820502,-4.550684928894043,-88.93289947509766,.0007747426279820502,-4.550684928894043,-90.83563995361328,.000600832630880177,-2.671748399734497,-90.83563995361328,.000600832630880177,-2.671748399734497,-84.580078125,27.482694625854492,-4.547501087188721,-84.580078125,27.482694625854492,-4.547501087188721,-86.38970947265625,28.07042121887207,-2.668496608734131,-27.481149673461914,84.58119201660156,-4.536083698272705,-27.481149673461914,84.58119201660156,-4.536083698272705,-28.069250106811523,86.39043426513672,-2.6568350791931152,52.2744255065918,71.94884490966797,-4.529373645782471,52.2744255065918,71.94884490966797,-4.529373645782471,53.39253616333008,73.48784637451172,-2.649981737136841,71.94922637939453,52.273895263671875,-4.529374599456787,71.94922637939453,52.273895263671875,-4.529374599456787,73.48823547363281,53.391990661621094,-2.649982452392578,88.93289947509766,-.0007747426279820502,4.550684928894043,88.93289947509766,-.0007747426279820502,4.550684928894043,88.93289947509766,-.0007747426279820502,4.550684928894043,90.83563995361328,-.000600832630880177,2.671748399734497,90.83563995361328,-.000600832630880177,2.671748399734497,71.94794464111328,-52.27442169189453,4.543759346008301,71.94794464111328,-52.27442169189453,4.543759346008301,73.4873275756836,-53.39253234863281,2.664675235748291,52.27299499511719,-71.94922637939453,4.539824962615967,52.27299499511719,-71.94922637939453,4.539824962615967,53.39146423339844,-73.48823547363281,2.660656213760376,-52.2744255065918,-71.94884490966797,4.529373645782471,-52.2744255065918,-71.94884490966797,4.529373645782471,-53.39253616333008,-73.48784637451172,2.649981737136841,-73.48823547363281,-53.391990661621094,2.649982452392578,-71.94922637939453,-52.273895263671875,4.529374599456787,-71.94922637939453,-52.273895263671875,4.529374599456787,-84.5811996459961,-27.482053756713867,4.530590534210205,-84.5811996459961,-27.482053756713867,4.530590534210205,-86.39044189453125,-28.069782257080078,2.651224374771118,-84.58098602294922,27.48178482055664,4.5360870361328125,-84.58098602294922,27.48178482055664,4.5360870361328125,-86.3902359008789,28.069887161254883,2.6568384170532227,-52.273902893066406,71.94831848144531,4.543763637542725,-52.273902893066406,71.94831848144531,4.543763637542725,-53.39199447631836,73.48770904541016,2.6646788120269775,27.48178482055664,84.58007049560547,4.552999496459961,27.48178482055664,84.58007049560547,4.552999496459961,28.069887161254883,86.38970184326172,2.6741127967834473,52.27351760864258,71.94794464111328,4.5542144775390625,52.27351760864258,71.94794464111328,4.5542144775390625,53.39200210571289,73.4873275756836,2.67535400390625,73.48771667480469,53.391456604003906,2.675353527069092,71.94832611083984,52.27299118041992,4.554214000701904,71.94832611083984,52.27299118041992,4.554214000701904,84.58029174804688,27.481143951416016,4.552997589111328,84.58029174804688,27.481143951416016,4.552997589111328,86.3899154663086,28.06924819946289,2.6741106510162354],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[.004305333364754915,.00014043168630450964,-.9999908208847046,.004305333364754915,.00014043168630450964,-.9999908208847046,.004305333364754915,.00014043168630450964,-.9999908208847046,.967370867729187,23871660232543945e-21,-.2533644437789917,.967370867729187,23871660232543945e-21,-.2533644437789917,.003924518823623657,-.0014061331748962402,.9999912977218628,.003924518823623657,-.0014061331748962402,.9999912977218628,.919967532157898,-.2989548146724701,.25354647636413574,.0014187097549438477,-.003943443298339844,-.9999911785125732,.0014187097549438477,-.003943443298339844,-.9999911785125732,.2989460825920105,-.9199705719947815,-.2535456418991089,.001207306981086731,-.004139244556427002,.999990701675415,.001207306981086731,-.004139244556427002,.999990701675415,.29889336228370667,-.9200217723846436,.25342196226119995,-.00010144524276256561,-.004305422306060791,.9999908208847046,-.00010144524276256561,-.004305422306060791,.9999908208847046,-.00010144524276256561,-.004305422306060791,.9999908208847046,-2811197191476822e-20,-.9673709869384766,.25336405634880066,-2811197191476822e-20,-.9673709869384766,.25336405634880066,-.0013865083456039429,-.0041558146476745605,.9999904036521912,-.0013865083456039429,-.0041558146476745605,.9999904036521912,-.29895341396331787,-.9200186133384705,.25336307287216187,-.003935068845748901,-.0012163519859313965,-.9999915361404419,-.003935068845748901,-.0012163519859313965,-.9999915361404419,-.9199703335762024,-.2988958954811096,-.25360578298568726,-.00432974100112915,-.00013017654418945312,.9999905824661255,-.00432974100112915,-.00013017654418945312,.9999905824661255,-.00432974100112915,-.00013017654418945312,.9999905824661255,-.967370867729187,-22581778466701508e-21,.2533644139766693,-.967370867729187,-22581778466701508e-21,.2533644139766693,-.003362357383593917,.002567464951425791,-.9999910593032837,-.003362357383593917,.002567464951425791,-.9999910593032837,-.7825664281845093,.5686163306236267,-.253506064414978,-.0035184919834136963,.0023897886276245117,.9999909996986389,-.0035184919834136963,.0023897886276245117,.9999909996986389,-.7826218605041504,.5685698390007019,.25343894958496094,-.002216615015640855,.0036201775074005127,-.9999910593032837,-.002216615015640855,.0036201775074005127,-.9999910593032837,-.5685653686523438,.782625675201416,-.25343722105026245,-.0013963840901851654,.0039055049419403076,.9999913573265076,-.0013963840901851654,.0039055049419403076,.9999913573265076,-.2989453971385956,.9199708104133606,.2535455524921417,.00011461973190307617,.004342749714851379,-.9999904632568359,.00011461973190307617,.004342749714851379,-.9999904632568359,.00011461973190307617,.004342749714851379,-.9999904632568359,28920238037244417e-21,.9673709273338318,-.25336408615112305,28920238037244417e-21,.9673709273338318,-.25336408615112305,-9849853813648224e-20,.0041036903858184814,.9999915957450867,-9849853813648224e-20,.0041036903858184814,.9999915957450867,-9849853813648224e-20,.0041036903858184814,.9999915957450867,-1982133835554123e-20,.967315137386322,.2535773515701294,-1982133835554123e-20,.967315137386322,.2535773515701294,.001379296649247408,.004155764821916819,-.9999904632568359,.001379296649247408,.004155764821916819,-.9999904632568359,.2989526391029358,.9200189113616943,-.25336307287216187,.004105646628886461,.0014420022489503026,-.9999905824661255,.004105646628886461,.0014420022489503026,-.9999905824661255,.9200265407562256,.29895055294036865,-.25333744287490845,.0041483743116259575,-.001177109545096755,-.999990701675415,.0041483743116259575,-.001177109545096755,-.999990701675415,.92001873254776,-.29890236258506775,-.2534225881099701,.7826225161552429,-.5685691237449646,-.2534385919570923,.0034059027675539255,-.002543120877817273,-.9999909400939941,.0034059027675539255,-.002543120877817273,-.9999909400939941,.0025934576988220215,-.0033233165740966797,-.9999910593032837,.0025934576988220215,-.0033233165740966797,-.9999910593032837,.5686105489730835,-.7825710773468018,-.2535049617290497,.00014024082338437438,-.004108965862542391,-.9999915361404419,.00014024082338437438,-.004108965862542391,-.9999915361404419,.00014024082338437438,-.004108965862542391,-.9999915361404419,21778512746095657e-21,-.9673150777816772,-.253577321767807,21778512746095657e-21,-.9673150777816772,-.253577321767807,-.29890191555023193,-.9199681878089905,-.2536064684391022,-.001328025944530964,-.003906830679625273,-.9999914765357971,-.001328025944530964,-.003906830679625273,-.9999914765357971,-.0024206042289733887,-.0033184662461280823,-.9999915361404419,-.0024206042289733887,-.0033184662461280823,-.9999915361404419,-.56856769323349,-.7825732231140137,-.25359416007995605,-.0033223330974578857,-.002392679452896118,-.9999916553497314,-.0033223330974578857,-.002392679452896118,-.9999916553497314,-.7825719118118286,-.5685604810714722,-.25361454486846924,-.004138410557061434,5978979606879875e-20,-.9999914169311523,-.004138410557061434,5978979606879875e-20,-.9999914169311523,-.004138410557061434,5978979606879875e-20,-.9999914169311523,-.9673154950141907,2910134026024025e-20,-.25357601046562195,-.9673154950141907,2910134026024025e-20,-.25357601046562195,-.003914192318916321,.0014359354972839355,-.9999912977218628,-.003914192318916321,.0014359354972839355,-.9999912977218628,-.9199680089950562,.29895293712615967,-.2535468339920044,-.001218944787979126,.004143953323364258,-.9999906420707703,-.001218944787979126,.004143953323364258,-.9999906420707703,-.2988971769809723,.920020580291748,-.25342193245887756,.002553605241701007,.003544599749147892,-.9999905228614807,.002553605241701007,.003544599749147892,-.9999905228614807,.5686197876930237,.7826223373413086,-.25332552194595337,.0034990310668945312,.0025759339332580566,-.9999905824661255,.0034990310668945312,.0025759339332580566,-.9999905824661255,.7826220393180847,.5686109662055969,-.25334614515304565,.004121424164623022,9648066043155268e-20,.9999914169311523,.004121424164623022,9648066043155268e-20,.9999914169311523,.004121424164623022,9648066043155268e-20,.9999914169311523,.9673154950141907,-2708425745368004e-20,.2535760700702667,.9673154950141907,-2708425745368004e-20,.2535760700702667,.0033468306064605713,-.002586185932159424,.9999910593032837,.0033468306064605713,-.002586185932159424,.9999910593032837,.7825667858123779,-.5686154365539551,.25350672006607056,.002382144331932068,-.003524601459503174,.9999909996986389,.002382144331932068,-.003524601459503174,.9999909996986389,.5685621500015259,-.7826279401779175,.2534373998641968,-.0025890469551086426,-.003517657518386841,.9999905228614807,-.0025890469551086426,-.003517657518386841,.9999905228614807,-.5686206817626953,-.7826217412948608,.253325492143631,-.7826230525970459,-.5686094760894775,.25334617495536804,-.003505319356918335,-.002576306462287903,.9999906420707703,-.003505319356918335,-.002576306462287903,.9999906420707703,-.0041239261627197266,-.001402430236339569,.9999905228614807,-.0041239261627197266,-.001402430236339569,.9999905228614807,-.9200277328491211,-.29894667863845825,.2533373534679413,-.0041457414627075195,.0012131333351135254,.999990701675415,-.0041457414627075195,.0012131333351135254,.999990701675415,-.9200185537338257,.29890307784080505,.2534220814704895,-.0025840699672698975,.003327280282974243,.9999911785125732,-.0025840699672698975,.003327280282974243,.9999911785125732,-.5686099529266357,.7825716137886047,.2535049021244049,.0012101978063583374,.003936886787414551,.9999915361404419,.0012101978063583374,.003936886787414551,.9999915361404419,.2989037334918976,.9199675917625427,.2536064088344574,.0023893117904663086,.003317922353744507,.9999916553497314,.0023893117904663086,.003317922353744507,.9999916553497314,.5685685873031616,.7825725674629211,.2535940706729889,.782572329044342,.5685595870018005,.25361499190330505,.0033287405967712402,.002385169267654419,.9999915361404419,.0033287405967712402,.002385169267654419,.9999915361404419,.003944873809814453,.0012125223875045776,.9999915957450867,.003944873809814453,.0012125223875045776,.9999915957450867,.9199705719947815,.298895001411438,.25360581278800964],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.23704378306865692,.023000359535217285,.2962978482246399,.4792518615722656,.5050051212310791,.2502303123474121,.22790862619876862,.021942079067230225,.2874794006347656,.4803285002708435,.017633967101573944,.6739451289176941,.20161525905132294,.1155695915222168,.21026334166526794,.11554199457168579,.23612302541732788,.3868170976638794,.6741329431533813,.48301517963409424,.22747491300106049,.3868447542190552,.17478206753730774,.5167970061302185,.2012992650270462,.3867114782333374,.2101074755191803,.38673484325408936,.17778971791267395,.4792518615722656,.20069445669651031,.47938668727874756,.2504180371761322,.5048181414604187,.16897115111351013,.4803285002708435,.20982962846755981,.4804449677467346,.17686891555786133,.38681697845458984,.3260548710823059,.5167969465255737,.16822080314159393,.3868447542190552,.1423611342906952,.11557012796401978,.9825537800788879,.32586705684661865,.1510092318058014,.11554241180419922,.17778971791267395,.02300053834915161,.3555530905723572,.4792248010635376,.4951818287372589,.7495819330215454,.16865456104278564,.021942198276519775,.34673523902893066,.480310320854187,.3197054862976074,.29629039764404297,.9477878212928772,.1063617467880249,.32840070128440857,.2962949275970459,.35455501079559326,.2964339256286621,.4484367072582245,.8934502601623535,.34586313366889954,.29642730951309204,.31974896788597107,.20592015981674194,.8936383128166199,.0522121787071228,.32843995094299316,.20592659711837769,.32605481147766113,.9823660254478455,.3545942008495331,.11562323570251465,.34578996896743774,.1155862808227539,.2962978482246399,.023000359535217285,.3192167282104492,.023042798042297363,.7497690320014954,.0054662227630615234,.287162721157074,.021942138671875,.32804927229881287,.022000432014465332,.2504180371761322,.9943457245826721,.25994858145713806,.02313518524169922,.3555530905723572,.023087799549102783,.2687670588493347,.022058546543121338,.3464353084564209,.021996140480041504,.295693039894104,.11567586660385132,.6741330623626709,.017446041107177734,.2868848443031311,.11565232276916504,.2953770160675049,.3868170976638794,.5169848203659058,.17459428310394287,.28672900795936584,.3868447542190552,.2364388257265091,.11567533016204834,.5169847011566162,.32586705684661865,.22763070464134216,.11565178632736206,.2276650071144104,.20608502626419067,.23635976016521454,.20609813928604126,.5517510175704956,.39409929513931274,.23622643947601318,.2964661121368408,.6059006452560425,.44824880361557007,.22753484547138214,.2964508533477783,.1414402574300766,.47938668727874756,.23704378306865692,.4792518615722656,.7497687339782715,.49499499797821045,.15057551860809326,.4804449677467346,.2282252460718155,.4803285002708435,.15085339546203613,.38673484325408936,.14204517006874084,.38671135902404785,.8254057765007019,.48301517963409424,.14212429523468018,.29628849029541016,.893638014793396,.4482489228248596,.15081912279129028,.2963016629219055,.1422577202320099,.20592069625854492,.9477876424789429,.39409929513931274,.15094926953315735,.20593607425689697,.14144045114517212,.02313530445098877,.31920260190963745,.4793957471847534,.9945327043533325,.2502301335334778,.15025892853736877,.02205866575241089,.3283390998840332,.4804449677467346,.31971582770347595,.38671642541885376,.9825538992881775,.17459410429000854,.32852432131767273,.38673120737075806,.31976577639579773,.11558306217193604,.8254058957099915,.017445921897888184,.3284158408641815,.11556941270828247,.29561394453048706,.2060987949371338,.6059007048606873,.05221235752105713,.28691911697387695,.2060856819152832,.29548054933547974,.2964667081832886,.5517511963844299,.1063617467880249,.2867889404296875,.29645150899887085,.005654247011989355,.749582052230835,.20069456100463867,.02313518524169922,.25994864106178284,.47938668727874756,.20951306819915771,.022058427333831787,.26908373832702637,.4804449677467346,.05240018665790558,.605712890625,.20151172578334808,.2059200406074524,.21020328998565674,.2059352993965149,.10654976963996887,.5515632033348083,.2013782411813736,.2962881922721863,.2100730687379837,.29630136489868164,.17697232961654663,.29646652936935425,.39428722858428955,.5515631437301636,.16828079521656036,.2964513301849365,.1684110462665558,.20608550310134888,.17710581421852112,.206098735332489,.44843676686286926,.6057127714157104,.1771848499774933,.11567568778991699,.4832030236721039,.6739450693130493,.168376624584198,.11565232276916504,.3545408844947815,.38678765296936035,.4832029938697815,.8252179622650146,.3458925485610962,.3868238925933838,.35459887981414795,.20606255531311035,.3942871689796448,.9475997686386108,.34590303897857666,.2060578465461731,.17478202283382416,.9823660254478455,.2608692944049835,.11557012796401978,.2695173919200897,.11554241180419922,.10654974728822708,.9475998282432556,.26076579093933105,.20592081546783447,.2694574296474457,.20593613386154175,.2693272829055786,.29630184173583984,.05240019038319588,.8934502601623535,.2606324851512909,.2962886691093445,.0176339503377676,.8252179622650146,.26055341958999634,.3867114782333374,.2693616449832916,.38673484325408936],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[35,38,32,129,54,126,123,91,38,130,57,97,18,10,13,21,77,72,120,32,88,17,72,70,27,20,103,105,60,7,130,94,129,126,45,50,28,24,117,13,66,108,117,80,112,29,88,85,111,80,77,41,46,91,108,61,105,135,4,57,76,87,44,38,30,32,54,42,45,72,67,70,77,78,75,94,95,92,104,108,105,113,117,112,125,129,126,134,130,132,113,111,109,15,13,12,14,21,17,49,41,40,61,58,60,61,64,62,77,73,72,88,82,85,135,100,102,132,129,128,60,0,3,66,8,64,10,68,8,80,22,78,24,81,22,32,86,88,38,89,36,91,43,89,94,52,54,57,95,97,57,1,55,6,105,7,19,111,21,26,120,29,12,108,107,48,126,50,25,117,115,118,35,120,40,123,121,99,7,101,121,35,33,7,3,101,35,123,38,129,94,54,123,41,91,130,135,57,18,71,10,21,111,77,120,35,32,17,21,72,103,5,131,5,98,131,98,133,131,131,127,124,124,47,131,47,39,131,39,122,27,122,34,27,34,119,27,27,116,114,114,110,20,20,16,103,16,11,103,11,106,103,27,114,20,103,131,39,39,27,103,105,61,60,130,97,94,126,54,45,28,84,24,13,10,66,117,24,80,29,120,88,111,112,80,41,51,46,108,66,61,135,102,4,56,2,65,2,59,65,59,63,65,65,9,69,69,74,76,76,79,87,79,23,87,23,83,87,87,31,37,37,90,44,44,53,93,93,96,44,96,56,44,65,69,76,87,37,44,56,65,44,65,76,44,38,36,30,54,52,42,72,73,67,77,80,78,94,97,95,104,107,108,113,115,117,125,128,129,134,135,130,113,112,111,15,18,13,14,19,21,49,51,41,61,62,58,61,66,64,77,75,73,88,86,82,135,134,100,132,130,129,60,58,0,66,10,8,10,71,68,80,24,22,24,84,81,32,30,86,38,91,89,91,46,43,94,92,52,57,55,95,57,4,1,6,104,105,19,109,111,26,118,120,12,13,108,48,125,126,25,28,117,118,33,35,40,41,123,99,6,7,121,123,35,7,60,3]},boundingSphere:{center:[0,0,0],radius:128.54241934554352}},rotationCombinations:{"1,2":[180,0,0]}},d4:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"C5380F7D-1CC8-4744-8B30-2399F5490F2A",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-67.64075469970703,-67.64099884033203,65.7880630493164,-67.64075469970703,-67.64099884033203,65.7880630493164,-67.64075469970703,-67.64099884033203,65.7880630493164,67.64124298095703,65.7878189086914,67.6407470703125,67.64124298095703,65.7878189086914,67.6407470703125,67.64124298095703,65.7878189086914,67.6407470703125,65.7880630493164,67.64099884033203,67.64075469970703,65.7880630493164,67.64099884033203,67.64075469970703,-67.6412353515625,67.64099884033203,-65.78756713867188,-67.6412353515625,67.64099884033203,-65.78756713867188,-67.6407470703125,-65.7878189086914,67.64124298095703,-67.6407470703125,-65.7878189086914,67.64124298095703,67.6412353515625,67.64099884033203,65.78756713867188,67.6412353515625,67.64099884033203,65.78756713867188,67.6412353515625,67.64099884033203,65.78756713867188,67.64075469970703,-67.64099884033203,-65.7880630493164,67.64075469970703,-67.64099884033203,-65.7880630493164,67.6407470703125,-65.7878189086914,-67.64124298095703,67.6407470703125,-65.7878189086914,-67.64124298095703,65.78756713867188,-67.64099884033203,-67.6412353515625,65.78756713867188,-67.64099884033203,-67.6412353515625,-65.78756713867188,-67.64099884033203,67.6412353515625,-65.78756713867188,-67.64099884033203,67.6412353515625,-65.78756713867188,-67.64099884033203,67.6412353515625,-65.7880630493164,67.64099884033203,-67.64075469970703,-65.7880630493164,67.64099884033203,-67.64075469970703,-65.7880630493164,67.64099884033203,-67.64075469970703,-67.64124298095703,65.7878189086914,-67.6407470703125,-67.64124298095703,65.7878189086914,-67.6407470703125,-67.64124298095703,65.7878189086914,-67.6407470703125],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.5875354409217834,-.5875733494758606,-.5563808679580688,-.5875354409217834,-.5875733494758606,-.5563808679580688,-.5875354409217834,-.5875733494758606,-.5563808679580688,.58754962682724,-.5564354062080383,.5875076055526733,.58754962682724,-.5564354062080383,.5875076055526733,.58754962682724,-.5564354062080383,.5875076055526733,-.5564345121383667,.5875091552734375,.5875489711761475,-.5564345121383667,.5875091552734375,.5875489711761475,-.5875074863433838,.5875474810600281,.5564377903938293,-.5875074863433838,.5875474810600281,.5564377903938293,-.5875458717346191,.5564350485801697,.5875116586685181,-.5875458717346191,.5564350485801697,.5875116586685181,.5875073075294495,.5875475406646729,-.5564377903938293,.5875073075294495,.5875475406646729,-.5564377903938293,.5875073075294495,.5875475406646729,-.5564377903938293,.5875356793403625,-.5875731706619263,.5563808679580688,.5875356793403625,-.5875731706619263,.5563808679580688,.5875458717346191,.5564350485801697,-.5875116586685181,.5875458717346191,.5564350485801697,-.5875116586685181,-.5564398169517517,-.5875092148780823,-.5875437259674072,-.5564398169517517,-.5875092148780823,-.5875437259674072,.5564400553703308,-.5875090956687927,.5875436663627625,.5564400553703308,-.5875090956687927,.5875436663627625,.5564400553703308,-.5875090956687927,.5875436663627625,.5564344525337219,.587509036064148,-.587549090385437,.5564344525337219,.587509036064148,-.587549090385437,.5564344525337219,.587509036064148,-.587549090385437,-.5875496864318848,-.5564355850219727,-.5875071883201599,-.5875496864318848,-.5564355850219727,-.5875071883201599,-.5875496864318848,-.5564355850219727,-.5875071883201599],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.20333926379680634,.01598501205444336,.20718662440776825,.23812401294708252,.5022410154342651,.21281301975250244,.20517542958259583,.22700607776641846,.21218715608119965,.009441137313842773,.6251919865608215,.25002896785736084,.12502600252628326,.24997997283935547,.2080860435962677,.01124197244644165,.0021929999347776175,.4627319574356079,.015251883305609226,.12210333347320557,.2076776623725891,.23367196321487427,.24785800278186798,.4627319574356079,.20334681868553162,.22807049751281738,.20728397369384766,.00649791955947876,.49776899814605713,.46269500255584717,.14456242322921753,.12202131748199463,.7480239868164062,.46278202533721924,.14273378252983093,.12308567762374878,.3749360144138336,.24994301795959473,.14272625744342804,.12096989154815674,.625074028968811,6097555160522461e-20,.20517542958259583,.0170363187789917,.21218715608119965,.23534929752349854,.5023589730262756,.46278202533721924,.011641831137239933,.11945211887359619,.021507836878299713,.12308526039123535,.2521030008792877,.46269500255584717,.011544500477612019,.12516993284225464,.021500281989574432,.12096947431564331,.7479060292243958,.21281301975250244],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[6,8,11,26,14,18,29,20,2,5,23,16,17,3,15,25,19,28,10,27,1,0,15,21,9,13,24,9,24,27,7,4,13,10,1,22,17,15,19,7,22,4,17,12,3,25,17,19,10,9,27,0,19,15,9,7,13,7,10,22]},boundingSphere:{center:[0,0,0],radius:117.1579285756433}},rotationCombinations:{"1,2":[90,0,90],"1,3":[120,90,150],"1,4":[-180,0,-180],"2,3":[90,0,90],"2,4":[-90,0,-90],"3,4":[-90,0,90]}},d6:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"E18C9F5C-7D15-4FF3-AC5E-A4A56A405499",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[52.081398010253906,-49.99797058105469,49.997779846191406,52.081398010253906,-49.99797058105469,49.997779846191406,52.081398010253906,-49.99797058105469,49.997779846191406,52.081398010253906,-49.99797058105469,49.997779846191406,52.081031799316406,49.99797058105469,-49.99816131591797,52.081031799316406,49.99797058105469,-49.99816131591797,52.081031799316406,49.99797058105469,-49.99816131591797,52.081031799316406,49.99797058105469,-49.99816131591797,52.081398010253906,49.99797058105469,49.997779846191406,52.081398010253906,49.99797058105469,49.997779846191406,52.081398010253906,49.99797058105469,49.997779846191406,52.081398010253906,49.99797058105469,49.997779846191406,-52.081031799316406,49.99797058105469,49.99816131591797,-52.081031799316406,49.99797058105469,49.99816131591797,-52.081031799316406,49.99797058105469,49.99816131591797,-52.081031799316406,49.99797058105469,49.99816131591797,49.99778747558594,52.081214904785156,-49.99814987182617,49.99778747558594,52.081214904785156,-49.99814987182617,49.99778747558594,52.081214904785156,-49.99814987182617,49.99778747558594,52.081214904785156,-49.99814987182617,-49.99814987182617,-52.081214904785156,-49.99778747558594,-49.99814987182617,-52.081214904785156,-49.99778747558594,-49.99814987182617,-52.081214904785156,-49.99778747558594,-49.99814987182617,-52.081214904785156,-49.99778747558594,-49.99816131591797,-49.99797058105469,-52.081031799316406,-49.99816131591797,-49.99797058105469,-52.081031799316406,-49.99816131591797,-49.99797058105469,-52.081031799316406,-49.99816131591797,-49.99797058105469,-52.081031799316406,49.99778747558594,-52.081214904785156,-49.99814987182617,49.99778747558594,-52.081214904785156,-49.99814987182617,49.99778747558594,-52.081214904785156,-49.99814987182617,49.99778747558594,-52.081214904785156,-49.99814987182617,-49.99778747558594,-52.081214904785156,49.99814987182617,-49.99778747558594,-52.081214904785156,49.99814987182617,-49.99778747558594,-52.081214904785156,49.99814987182617,-49.99778747558594,-52.081214904785156,49.99814987182617,52.081031799316406,-49.99797058105469,-49.99816131591797,52.081031799316406,-49.99797058105469,-49.99816131591797,52.081031799316406,-49.99797058105469,-49.99816131591797,52.081031799316406,-49.99797058105469,-49.99816131591797,49.997779846191406,-49.99797058105469,-52.081398010253906,49.997779846191406,-49.99797058105469,-52.081398010253906,49.997779846191406,-49.99797058105469,-52.081398010253906,49.997779846191406,-49.99797058105469,-52.081398010253906,-52.081398010253906,-49.99797058105469,-49.997779846191406,-52.081398010253906,-49.99797058105469,-49.997779846191406,-52.081398010253906,-49.99797058105469,-49.997779846191406,-52.081398010253906,-49.99797058105469,-49.997779846191406,-49.99814987182617,52.081214904785156,-49.99778747558594,-49.99814987182617,52.081214904785156,-49.99778747558594,-49.99814987182617,52.081214904785156,-49.99778747558594,-49.99814987182617,52.081214904785156,-49.99778747558594,49.99814987182617,52.081214904785156,49.99778747558594,49.99814987182617,52.081214904785156,49.99778747558594,49.99814987182617,52.081214904785156,49.99778747558594,49.99814987182617,52.081214904785156,49.99778747558594,-49.997779846191406,-49.99797058105469,52.081398010253906,-49.997779846191406,-49.99797058105469,52.081398010253906,-49.997779846191406,-49.99797058105469,52.081398010253906,-49.997779846191406,-49.99797058105469,52.081398010253906,-49.99778747558594,52.081214904785156,49.99814987182617,-49.99778747558594,52.081214904785156,49.99814987182617,-49.99778747558594,52.081214904785156,49.99814987182617,-49.99778747558594,52.081214904785156,49.99814987182617,49.99816131591797,49.99797058105469,52.081031799316406,49.99816131591797,49.99797058105469,52.081031799316406,49.99816131591797,49.99797058105469,52.081031799316406,49.99816131591797,49.99797058105469,52.081031799316406,49.99814987182617,-52.081214904785156,49.99778747558594,49.99814987182617,-52.081214904785156,49.99778747558594,49.99814987182617,-52.081214904785156,49.99778747558594,49.99814987182617,-52.081214904785156,49.99778747558594,49.99816131591797,-49.99797058105469,52.081031799316406,49.99816131591797,-49.99797058105469,52.081031799316406,49.99816131591797,-49.99797058105469,52.081031799316406,49.99816131591797,-49.99797058105469,52.081031799316406,-52.081031799316406,-49.99797058105469,49.99816131591797,-52.081031799316406,-49.99797058105469,49.99816131591797,-52.081031799316406,-49.99797058105469,49.99816131591797,-52.081031799316406,-49.99797058105469,49.99816131591797,49.997779846191406,49.99797058105469,-52.081398010253906,49.997779846191406,49.99797058105469,-52.081398010253906,49.997779846191406,49.99797058105469,-52.081398010253906,49.997779846191406,49.99797058105469,-52.081398010253906,-49.99816131591797,49.99797058105469,-52.081031799316406,-49.99816131591797,49.99797058105469,-52.081031799316406,-49.99816131591797,49.99797058105469,-52.081031799316406,-49.99816131591797,49.99797058105469,-52.081031799316406,-52.081398010253906,49.99797058105469,-49.997779846191406,-52.081398010253906,49.99797058105469,-49.997779846191406,-52.081398010253906,49.99797058105469,-49.997779846191406,-52.081398010253906,49.99797058105469,-49.997779846191406,-49.997779846191406,49.99797058105469,52.081398010253906,-49.997779846191406,49.99797058105469,52.081398010253906,-49.997779846191406,49.99797058105469,52.081398010253906,-49.997779846191406,49.99797058105469,52.081398010253906],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[.9995923042297363,-.020230919122695923,.020147494971752167,.9995923042297363,-.020230919122695923,.020147494971752167,.9995923042297363,-.020230919122695923,.020147494971752167,.9995923042297363,-.020230919122695923,.020147494971752167,.9995908737182617,.02024438977241516,-.020207354798913002,.9995908737182617,.02024438977241516,-.020207354798913002,.9995908737182617,.02024438977241516,-.020207354798913002,.9995908737182617,.02024438977241516,-.020207354798913002,.9995913505554199,.020214110612869263,.020209431648254395,.9995913505554199,.020214110612869263,.020209431648254395,.9995913505554199,.020214110612869263,.020209431648254395,.9995913505554199,.020214110612869263,.020209431648254395,-.9995912313461304,.020234376192092896,.020197225734591484,-.9995912313461304,.020234376192092896,.020197225734591484,-.9995912313461304,.020234376192092896,.020197225734591484,-.9995912313461304,.020234376192092896,.020197225734591484,.02019399404525757,.9995913505554199,-.02023378014564514,.02019399404525757,.9995913505554199,-.02023378014564514,.02019399404525757,.9995913505554199,-.02023378014564514,.02019399404525757,.9995913505554199,-.02023378014564514,-.02023431658744812,-.9995909333229065,-.020213313400745392,-.02023431658744812,-.9995909333229065,-.020213313400745392,-.02023431658744812,-.9995909333229065,-.020213313400745392,-.02023431658744812,-.9995909333229065,-.020213313400745392,-.02021673321723938,-.02017366886138916,-.9995919466018677,-.02021673321723938,-.02017366886138916,-.9995919466018677,-.02021673321723938,-.02017366886138916,-.9995919466018677,-.02021673321723938,-.02017366886138916,-.9995919466018677,.020203232765197754,-.9995912909507751,-.020224466919898987,.020203232765197754,-.9995912909507751,-.020224466919898987,.020203232765197754,-.9995912909507751,-.020224466919898987,.020203232765197754,-.9995912909507751,-.020224466919898987,-.020203210413455963,-.9995913505554199,.02022451162338257,-.020203210413455963,-.9995913505554199,.02022451162338257,-.020203210413455963,-.9995913505554199,.02022451162338257,-.020203210413455963,-.9995913505554199,.02022451162338257,.9995921850204468,-.020173730328679085,-.020216643810272217,.9995921850204468,-.020173730328679085,-.020216643810272217,.9995921850204468,-.020173730328679085,-.020216643810272217,.9995921850204468,-.020173730328679085,-.020216643810272217,.020147576928138733,-.020230591297149658,-.9995923042297363,.020147576928138733,-.020230591297149658,-.9995923042297363,.020147576928138733,-.020230591297149658,-.9995923042297363,.020147576928138733,-.020230591297149658,-.9995923042297363,-.9995916485786438,-.020208656787872314,-.020204007625579834,-.9995916485786438,-.020208656787872314,-.020204007625579834,-.9995916485786438,-.020208656787872314,-.020204007625579834,-.9995916485786438,-.020208656787872314,-.020204007625579834,-.02024361491203308,.9995908737182617,-.02020406536757946,-.02024361491203308,.9995908737182617,-.02020406536757946,-.02024361491203308,.9995908737182617,-.02020406536757946,-.02024361491203308,.9995908737182617,-.02020406536757946,.02026575803756714,.9995908141136169,.020181983709335327,.02026575803756714,.9995908141136169,.020181983709335327,.02026575803756714,.9995908141136169,.020181983709335327,.02026575803756714,.9995908141136169,.020181983709335327,-.020204126834869385,-.020208358764648438,.9995917081832886,-.020204126834869385,-.020208358764648438,.9995917081832886,-.020204126834869385,-.020208358764648438,.9995917081832886,-.020204126834869385,-.020208358764648438,.9995917081832886,-.02021375298500061,.9995914101600647,.020213931798934937,-.02021375298500061,.9995914101600647,.020213931798934937,-.02021375298500061,.9995914101600647,.020213931798934937,-.02021375298500061,.9995914101600647,.020213931798934937,.020197970792651176,.020234346389770508,.9995912313461304,.020197970792651176,.020234346389770508,.9995912313461304,.020197970792651176,.020234346389770508,.9995912313461304,.020197970792651176,.020234346389770508,.9995912313461304,.02023431658744812,-.9995909333229065,.020213313400745392,.02023431658744812,-.9995909333229065,.020213313400745392,.02023431658744812,-.9995909333229065,.020213313400745392,.02023431658744812,-.9995909333229065,.020213313400745392,.020256830379366875,-.020169764757156372,.9995912909507751,.020256830379366875,-.020169764757156372,.9995912909507751,.020256830379366875,-.020169764757156372,.9995912909507751,.020256830379366875,-.020169764757156372,.9995912909507751,-.9995914101600647,-.02016991376876831,.020256860181689262,-.9995914101600647,-.02016991376876831,.020256860181689262,-.9995914101600647,-.02016991376876831,.020256860181689262,-.9995914101600647,-.02016991376876831,.020256860181689262,.02021026611328125,.020213961601257324,-.9995913505554199,.02021026611328125,.020213961601257324,-.9995913505554199,.02021026611328125,.020213961601257324,-.9995913505554199,.02021026611328125,.020213961601257324,-.9995913505554199,-.02020804025232792,.020244628190994263,-.9995906949043274,-.02020804025232792,.020244628190994263,-.9995906949043274,-.02020804025232792,.020244628190994263,-.9995906949043274,-.02020804025232792,.020244628190994263,-.9995906949043274,-.9995908737182617,.020204482600092888,-.020239561796188354,-.9995908737182617,.020204482600092888,-.020239561796188354,-.9995908737182617,.020204482600092888,-.020239561796188354,-.9995908737182617,.020204482600092888,-.020239561796188354,-.020240217447280884,.020204216241836548,.9995909929275513,-.020240217447280884,.020204216241836548,.9995909929275513,-.020240217447280884,.020204216241836548,.9995909929275513,-.020240217447280884,.020204216241836548,.9995909929275513],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.002862999914214015,.7471370100975037,.07257817685604095,.00783926248550415,.20479217171669006,.24324274063110352,.23563209176063538,.18311190605163574,.16701677441596985,.007843196392059326,.21674437820911407,.007843255996704102,.23563209176063538,.23977500200271606,.24713699519634247,.5028629899024963,.002862999914214015,.5028629899024963,.16701683402061462,.24324274063110352,.20479217171669006,.007843196392059326,.2416384220123291,.12991642951965332,.12230584025382996,.24324274063110352,.14119352400302887,.007843255996704102,.24163848161697388,.2243550419807434,.2481130063533783,.4981130361557007,.11035363376140594,.007843255996704102,.16008129715919495,.007843196392059326,.2416384220123291,.23630714416503906,.4975059926509857,.7470999956130981,.008979067206382751,.00783926248550415,.02786727249622345,.24324274063110352,.2416384220123291,.20546722412109375,.7475240230560303,.002879023551940918,.034802429378032684,.24324274063110352,.08453041315078735,.24324274063110352,.23563209176063538,.20199954509735107,.4974119961261749,.49670398235321045,.027866892516613007,.00783926248550415,.06564302742481232,.24324274063110352,.2416384220123291,.1607564091682434,.5032510161399841,.002879023551940918,.008979566395282745,.24324274063110352,.046754732728004456,.00783926248550415,.2416384220123291,.11102879047393799,.7475240230560303,.24715197086334229,.07257817685604095,.24324274063110352,.21674437820911407,.24324274063110352,.2416384220123291,.1676918864250183,.24713699519634247,.7471370100975037,.03480251133441925,.00783926248550415,.22367990016937256,.24324274063110352,.23563209176063538,.16422414779663086,.2531389892101288,.49670398235321045,.0038399999029934406,.25383996963500977,.015914686024188995,.00783926248550415,.09146587550640106,.24324274063110352,.2416384220123291,.19853174686431885,.11035363376140594,.24324274063110352,.12924134731292725,.007843255996704102,.2416384220123291,.1488041877746582,.4975059926509857,.5028259754180908,.16008129715919495,.24324274063110352,.17896901071071625,.007843196392059326,.2416384220123291,.12298095226287842,.2532320022583008,.7470999956130981,.0536903440952301,.00783926248550415,.14812909066677094,.24324274063110352,.2416384220123291,.10409331321716309,.5033630132675171,.252979040145874,.12924134731292725,.24324274063110352,.17896901071071625,.24324274063110352,.23563209176063538,.22088712453842163,.2532320022583008,.5028259754180908,.18590447306632996,.007843196392059326,.19785669445991516,.007843196392059326,.23563209176063538,.12644875049591064,.7476369738578796,.4972519874572754,.046755194664001465,.24324274063110352,.06564256548881531,.00783926248550415,.2416384220123291,.17964410781860352,.5032510161399841,.24715197086334229,.0536903440952301,.24324274063110352,.19785669445991516,.24324274063110352,.2416384220123291,.18657952547073364,.5033630132675171,.4972519874572754,.0038399999029934406,.4981130361557007,.015914715826511383,.24324274063110352,.14119356870651245,.24324274063110352,.23563209176063538,.10756111145019531,.10341811925172806,.007843255996704102,.22367990016937256,.007843255996704102,.2416384220123291,.24324274063110352,.2531389892101288,.2524310350418091,.08453038334846497,.007843196392059326,.10341812670230865,.24324274063110352,.2416384220123291,.14186859130859375,.4974119961261749,.2524310350418091,.09146586060523987,.007843196392059326,.12230582535266876,.007843255996704102,.23563209176063538,.14533644914627075,.2481130063533783,.25383996963500977,.14812903106212616,.007843255996704102,.18590447306632996,.24324274063110352,.24163848161697388,.21741944551467896,.7476369738578796,.252979040145874],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[83,27,87,8,39,7,44,15,91,59,67,95,63,19,51,13,57,92,1,29,36,56,68,72,40,21,24,80,48,16,45,32,77,41,5,37,89,60,49,84,46,88,2,65,73,93,53,61,9,17,52,70,3,74,30,42,38,22,47,26,34,58,79,11,54,66,82,18,6,86,90,50,14,94,62,31,35,23,83,43,27,8,0,39,44,76,15,59,75,67,63,55,19,13,78,57,1,69,29,56,33,68,40,28,21,80,85,48,45,20,32,41,81,5,89,12,60,84,25,46,2,10,65,93,64,53,9,4,17,31,71,35]},boundingSphere:{center:[0,0,0],radius:90.20752176710862}},rotationCombinations:{"1,2":[0,0,90],"1,3":[-90,0,0],"1,4":[90,0,0],"1,5":[0,0,-90],"1,6":[180,0,0],"2,3":[0,90,0],"2,4":[0,-90,0],"2,5":[0,0,180],"2,6":[0,0,90],"3,4":[-180,0,-180],"3,5":[0,90,0],"3,6":[-90,0,0],"4,5":[180,-90,180],"4,6":[90,0,0],"5,6":[0,0,-90]}},d8:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"F0A476BC-C144-4BC6-A327-5E00064C485A",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-1.1684173345565796,1.168058156967163,-97.7831802368164,-1.1684173345565796,1.168058156967163,-97.7831802368164,-1.1684173345565796,1.168058156967163,-97.7831802368164,-1.1684173345565796,1.168058156967163,-97.7831802368164,-97.7831802368164,1.168058156967163,1.1684173345565796,-97.7831802368164,1.168058156967163,1.1684173345565796,-97.7831802368164,1.168058156967163,1.1684173345565796,-97.7831802368164,1.168058156967163,1.1684173345565796,-1.167698860168457,-1.168058156967163,97.7831802368164,-1.167698860168457,-1.168058156967163,97.7831802368164,-1.167698860168457,-1.168058156967163,97.7831802368164,-1.167698860168457,-1.168058156967163,97.7831802368164,-97.7831802368164,-1.168058156967163,1.1684173345565796,-97.7831802368164,-1.168058156967163,1.1684173345565796,-97.7831802368164,-1.168058156967163,1.1684173345565796,-97.7831802368164,-1.168058156967163,1.1684173345565796,-1.1680537462234497,97.7831802368164,1.168062448501587,-1.1680537462234497,97.7831802368164,1.168062448501587,-1.1680537462234497,97.7831802368164,1.168062448501587,-1.1680537462234497,97.7831802368164,1.168062448501587,-97.7831802368164,1.168058156967163,-1.167698860168457,-97.7831802368164,1.168058156967163,-1.167698860168457,-97.7831802368164,1.168058156967163,-1.167698860168457,-97.7831802368164,1.168058156967163,-1.167698860168457,-1.168062448501587,97.7831802368164,-1.1680537462234497,-1.168062448501587,97.7831802368164,-1.1680537462234497,-1.168062448501587,97.7831802368164,-1.1680537462234497,-1.168062448501587,97.7831802368164,-1.1680537462234497,97.7831802368164,-1.168058156967163,-1.1684173345565796,97.7831802368164,-1.168058156967163,-1.1684173345565796,97.7831802368164,-1.168058156967163,-1.1684173345565796,97.7831802368164,-1.168058156967163,-1.1684173345565796,1.167698860168457,-1.168058156967163,-97.7831802368164,1.167698860168457,-1.168058156967163,-97.7831802368164,1.167698860168457,-1.168058156967163,-97.7831802368164,1.167698860168457,-1.168058156967163,-97.7831802368164,1.167698860168457,1.168058156967163,-97.7831802368164,1.167698860168457,1.168058156967163,-97.7831802368164,1.167698860168457,1.168058156967163,-97.7831802368164,1.167698860168457,1.168058156967163,-97.7831802368164,1.1680537462234497,97.7831802368164,-1.168062448501587,1.1680537462234497,97.7831802368164,-1.168062448501587,1.1680537462234497,97.7831802368164,-1.168062448501587,1.1680537462234497,97.7831802368164,-1.168062448501587,97.7831802368164,1.168058156967163,1.167698860168457,97.7831802368164,1.168058156967163,1.167698860168457,97.7831802368164,1.168058156967163,1.167698860168457,97.7831802368164,1.168058156967163,1.167698860168457,-1.168062448501587,-97.7831802368164,-1.1680537462234497,-1.168062448501587,-97.7831802368164,-1.1680537462234497,-1.168062448501587,-97.7831802368164,-1.1680537462234497,-1.168062448501587,-97.7831802368164,-1.1680537462234497,-97.7831802368164,-1.168058156967163,-1.167698860168457,-97.7831802368164,-1.168058156967163,-1.167698860168457,-97.7831802368164,-1.168058156967163,-1.167698860168457,-97.7831802368164,-1.168058156967163,-1.167698860168457,97.7831802368164,-1.168058156967163,1.167698860168457,97.7831802368164,-1.168058156967163,1.167698860168457,97.7831802368164,-1.168058156967163,1.167698860168457,97.7831802368164,-1.168058156967163,1.167698860168457,-1.167698860168457,1.168058156967163,97.7831802368164,-1.167698860168457,1.168058156967163,97.7831802368164,-1.167698860168457,1.168058156967163,97.7831802368164,-1.167698860168457,1.168058156967163,97.7831802368164,1.168062448501587,-97.7831802368164,1.1680537462234497,1.168062448501587,-97.7831802368164,1.1680537462234497,1.168062448501587,-97.7831802368164,1.1680537462234497,1.168062448501587,-97.7831802368164,1.1680537462234497,1.1684173345565796,-1.168058156967163,97.7831802368164,1.1684173345565796,-1.168058156967163,97.7831802368164,1.1684173345565796,-1.168058156967163,97.7831802368164,1.1684173345565796,-1.168058156967163,97.7831802368164,-1.1684173345565796,-1.168058156967163,-97.7831802368164,-1.1684173345565796,-1.168058156967163,-97.7831802368164,-1.1684173345565796,-1.168058156967163,-97.7831802368164,-1.1684173345565796,-1.168058156967163,-97.7831802368164,1.1684173345565796,1.168058156967163,97.7831802368164,1.1684173345565796,1.168058156967163,97.7831802368164,1.1684173345565796,1.168058156967163,97.7831802368164,1.1684173345565796,1.168058156967163,97.7831802368164,97.7831802368164,1.168058156967163,-1.1684173345565796,97.7831802368164,1.168058156967163,-1.1684173345565796,97.7831802368164,1.168058156967163,-1.1684173345565796,97.7831802368164,1.168058156967163,-1.1684173345565796,1.168062448501587,97.7831802368164,1.1680537462234497,1.168062448501587,97.7831802368164,1.1680537462234497,1.168062448501587,97.7831802368164,1.1680537462234497,1.168062448501587,97.7831802368164,1.1680537462234497,-1.1680537462234497,-97.7831802368164,1.168062448501587,-1.1680537462234497,-97.7831802368164,1.168062448501587,-1.1680537462234497,-97.7831802368164,1.168062448501587,-1.1680537462234497,-97.7831802368164,1.168062448501587,1.1680537462234497,-97.7831802368164,-1.168062448501587,1.1680537462234497,-97.7831802368164,-1.168062448501587,1.1680537462234497,-97.7831802368164,-1.168062448501587,1.1680537462234497,-97.7831802368164,-1.168062448501587],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.5682533383369446,.5682891607284546,-.5950928330421448,-.5682533383369446,.5682891607284546,-.5950928330421448,-.5682533383369446,.5682891607284546,-.5950928330421448,-.5682533383369446,.5682891607284546,-.5950928330421448,-.5951133966445923,.568278431892395,.5682425498962402,-.5951133966445923,.568278431892395,.5682425498962402,-.5951133966445923,.568278431892395,.5682425498962402,-.5951133966445923,.568278431892395,.5682425498962402,-.5682530999183655,-.5682904720306396,.5950918197631836,-.5682530999183655,-.5682904720306396,.5950918197631836,-.5682530999183655,-.5682904720306396,.5950918197631836,-.5682530999183655,-.5682904720306396,.5950918197631836,-.5950893759727478,-.5682545304298401,.5682916045188904,-.5950893759727478,-.5682545304298401,.5682916045188904,-.5950893759727478,-.5682545304298401,.5682916045188904,-.5950893759727478,-.5682545304298401,.5682916045188904,-.5682390332221985,.5951166152954102,.5682786107063293,-.5682390332221985,.5951166152954102,.5682786107063293,-.5682390332221985,.5951166152954102,.5682786107063293,-.5682390332221985,.5951166152954102,.5682786107063293,-.5951080918312073,.5682451725006104,-.5682812929153442,-.5951080918312073,.5682451725006104,-.5682812929153442,-.5951080918312073,.5682451725006104,-.5682812929153442,-.5951080918312073,.5682451725006104,-.5682812929153442,-.5682910680770874,.5950912833213806,-.5682533383369446,-.5682910680770874,.5950912833213806,-.5682533383369446,-.5682910680770874,.5950912833213806,-.5682533383369446,-.5682910680770874,.5950912833213806,-.5682533383369446,.595115065574646,-.5682411789894104,-.5682781934738159,.595115065574646,-.5682411789894104,-.5682781934738159,.595115065574646,-.5682411789894104,-.5682781934738159,.595115065574646,-.5682411789894104,-.5682781934738159,.5682530999183655,-.5682904720306396,-.5950918197631836,.5682530999183655,-.5682904720306396,-.5950918197631836,.5682530999183655,-.5682904720306396,-.5950918197631836,.5682530999183655,-.5682904720306396,-.5950918197631836,.5682830810546875,.5682469010353088,-.5951048731803894,.5682830810546875,.5682469010353088,-.5951048731803894,.5682830810546875,.5682469010353088,-.5951048731803894,.5682830810546875,.5682469010353088,-.5951048731803894,.5682392716407776,.5951164960861206,-.5682784914970398,.5682392716407776,.5951164960861206,-.5682784914970398,.5682392716407776,.5951164960861206,-.5682784914970398,.5682392716407776,.5951164960861206,-.5682784914970398,.5951049327850342,.5682469010353088,.5682830214500427,.5951049327850342,.5682469010353088,.5682830214500427,.5951049327850342,.5682469010353088,.5682830214500427,.5951049327850342,.5682469010353088,.5682830214500427,-.5682423114776611,-.5951160788536072,-.5682759881019592,-.5682423114776611,-.5951160788536072,-.5682759881019592,-.5682423114776611,-.5951160788536072,-.5682759881019592,-.5682423114776611,-.5951160788536072,-.5682759881019592,-.595117449760437,-.5682770609855652,-.568239688873291,-.595117449760437,-.5682770609855652,-.568239688873291,-.595117449760437,-.5682770609855652,-.568239688873291,-.595117449760437,-.5682770609855652,-.568239688873291,.5950918197631836,-.5682904720306396,.5682530999183655,.5950918197631836,-.5682904720306396,.5682530999183655,.5950918197631836,-.5682904720306396,.5682530999183655,.5950918197631836,-.5682904720306396,.5682530999183655,-.5682830810546875,.5682469010353088,.5951048731803894,-.5682830810546875,.5682469010353088,.5951048731803894,-.5682830810546875,.5682469010353088,.5951048731803894,-.5682830810546875,.5682469010353088,.5951048731803894,.5682426691055298,-.5951159000396729,.5682759284973145,.5682426691055298,-.5951159000396729,.5682759284973145,.5682426691055298,-.5951159000396729,.5682759284973145,.5682426691055298,-.5951159000396729,.5682759284973145,.5682781934738159,-.5682411193847656,.595115065574646,.5682781934738159,-.5682411193847656,.595115065574646,.5682781934738159,-.5682411193847656,.595115065574646,.5682781934738159,-.5682411193847656,.595115065574646,-.5682781934738159,-.5682411193847656,-.595115065574646,-.5682781934738159,-.5682411193847656,-.595115065574646,-.5682781934738159,-.5682411193847656,-.595115065574646,-.5682781934738159,-.5682411193847656,-.595115065574646,.5682533383369446,.5682891607284546,.5950928330421448,.5682533383369446,.5682891607284546,.5950928330421448,.5682533383369446,.5682891607284546,.5950928330421448,.5682533383369446,.5682891607284546,.5950928330421448,.5950928330421448,.5682891607284546,-.5682533383369446,.5950928330421448,.5682891607284546,-.5682533383369446,.5950928330421448,.5682891607284546,-.5682533383369446,.5950928330421448,.5682891607284546,-.5682533383369446,.5682913064956665,.595090925693512,.5682531595230103,.5682913064956665,.595090925693512,.5682531595230103,.5682913064956665,.595090925693512,.5682531595230103,.5682913064956665,.595090925693512,.5682531595230103,-.5682886838912964,-.5950911641120911,.5682557225227356,-.5682886838912964,-.5950911641120911,.5682557225227356,-.5682886838912964,-.5950911641120911,.5682557225227356,-.5682886838912964,-.5950911641120911,.5682557225227356,.5682889819145203,-.5950908660888672,-.5682554841041565,.5682889819145203,-.5950908660888672,-.5682554841041565,.5682889819145203,-.5950908660888672,-.5682554841041565,.5682889819145203,-.5950908660888672,-.5682554841041565],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.07201391458511353,.011956751346588135,.1601339429616928,.228448748588562,.2343699038028717,.15436840057373047,.9927999973297119,.452796995639801,.14628882706165314,.22844743728637695,.213005930185318,.228448748588562,.23062995076179504,.19327861070632935,.3759610056877136,.5007950067520142,.036765892058610916,.011956632137298584,.2167847901582718,.011955499649047852,.2343699038028717,.13678330183029175,.9929670095443726,.2016180157661438,.1286647915840149,.011955201625823975,.2167847901582718,.22844743728637695,.23062995076179504,.1895385980606079,.8765519857406616,-1895427703857422e-20,.14628879725933075,.011955201625823975,.19916081428527832,.22844743728637695,.23062995076179504,.20712369680404663,.49237701296806335,.7024319767951965,.14250995218753815,.228448748588562,.1601339429616928,.011956632137298584,.2343699038028717,.19327861070632935,.876384973526001,.25116002559661865,.07201394438743591,.228448748588562,.14250992238521576,.011956632137298584,.2343699038028717,.20712369680404663,.7599689960479736,.452796995639801,.022920722141861916,.011955201625823975,.18153679370880127,.22844743728637695,.23062995076179504,.22470879554748535,.6253160238265991,.0010759830474853516,.08963792026042938,.011956632137298584,.18153676390647888,.011955499649047852,.23062995076179504,.15810835361480713,.7397840023040771,.19933903217315674,.00919399969279766,.7025139927864075,.07579275965690613,.011955320835113525,.17775794863700867,.011956751346588135,.23062995076179504,.15436840057373047,.07579278945922852,.22844737768173218,.10726193338632584,.228448748588562,.2343699038028717,.21086370944976807,.2420250028371811,.7025139927864075,.05816878750920296,.22844743728637695,.11104078590869904,.011955320835113525,.2343699038028717,.228448748588562,.6256870031356812,.2503969669342041,.09341679513454437,.22844743728637695,.1248859316110611,.228448748588562,.2343699038028717,.17195343971252441,.49275800585746765,.4534569978713989,.12488594651222229,.011956632137298584,.1639128178358078,.011955201625823975,.2343699038028717,.1895385980606079,.37544700503349304,.25026899576187134,.019141869619488716,.011956572532653809,.05438993498682976,.228448748588562,.12524299323558807,.2504919767379761,.2343699038028717,.22470879554748535,.19916081428527832,.011955499649047852,.2130059003829956,.011956751346588135,.2343699038028717,.1405232548713684,.2595460116863251,.7024319767951965,.019141899421811104,.228448748588562,.0405447743833065,.22844743728637695,.23062995076179504,.17569351196289062,.2416590005159378,.4521290063858032,.008828000165522099,.4521290063858032,.040544744580984116,.011955201625823975,.05438990518450737,.011956632137298584,.23062992095947266,.13678330183029175,.09341679513454437,.011955201625823975,.1639127880334854,.22844743728637695,.2343699038028717,.15810835361480713,.2581369876861572,.4534569978713989,.05816878750920296,.01195526123046875,.19538196921348572,.011956751346588135,.23062992095947266,.14052319526672363,.7421020269393921,.45203500986099243,.10726191848516464,.011956751346588135,.12560999393463135,.5008770227432251,.17775794863700867,.228448748588562,.23062995076179504,.228448748588562,.11104080080986023,.22844737768173218,.19538193941116333,.228448748588562,.23062995076179504,.21086370944976807,.5092710256576538,.45203500986099243,.036765921860933304,.228448748588562,.1286647915840149,.22844737768173218,.2343699038028717,.17569351196289062,.7601360082626343,.2016180157661438,.022920751944184303,.22844743728637695,.08963793516159058,.228448748588562,.23062995076179504,.17195343971252441,.5108489990234375,.19933903217315674],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[3,23,27,36,43,81,35,31,95,75,51,55,79,47,87,63,19,7,11,15,91,68,67,58,60,85,17,30,46,59,92,56,64,6,54,14,37,24,40,45,41,84,32,48,72,16,20,4,42,18,86,50,66,90,52,89,12,61,13,9,74,39,34,71,62,10,38,29,33,21,73,53,8,65,69,44,70,57,60,77,85,30,83,46,92,28,56,6,22,54,37,0,24,45,80,41,32,93,48,16,25,20,42,26,18,50,94,66,52,49,89,61,5,13,74,2,39,71,78,62,38,82,29,21,1,73,8,88,65,44,76,70]},boundingSphere:{center:[0,0,0],radius:169.36543629583093}},rotationCombinations:{"1,2":[180,0,180],"1,3":[90,0,0],"1,4":[0,0,90],"1,5":[-180,0,0],"1,6":[0,0,180],"1,7":[-90,0,0],"1,8":[90,0,180],"2,3":[90,0,180],"2,4":[-90,0,0],"2,5":[0,0,180],"2,6":[-180,0,0],"2,7":[-90,0,-180],"2,8":[90,0,0],"3,4":[-180,0,180],"3,5":[90,0,0],"3,6":[-90,0,-180],"3,7":[-180,0,0],"3,8":[0,0,180],"4,5":[90,0,180],"4,6":[-90,0,0],"4,7":[0,0,-180],"4,8":[180,0,0],"5,6":[-180,0,-180],"5,7":[90,0,0],"5,8":[-90,0,180],"6,7":[90,0,-180],"6,8":[-90,0,0],"7,8":[-180,0,-180]}},d10:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"1B9B60ED-6BEC-48CC-8EB9-EEFFC2DD3ED8",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-2.5946993827819824,1.8790435791015625,86.0141830444336,-2.5946993827819824,1.8790435791015625,86.0141830444336,-2.5946993827819824,1.8790435791015625,86.0141830444336,-2.5946993827819824,1.8790435791015625,86.0141830444336,71.31939697265625,-49.49197769165039,10.200661659240723,71.31939697265625,-49.49197769165039,10.200661659240723,71.31939697265625,-49.49197769165039,10.200661659240723,71.31939697265625,-49.49197769165039,10.200661659240723,87.39810180664062,-.005702871363610029,-7.479601860046387,87.39810180664062,-.005702871363610029,-7.479601860046387,87.39810180664062,-.005702871363610029,-7.479601860046387,87.39810180664062,-.005702871363610029,-7.479601860046387,3.2070045471191406,-.005997277796268463,86.01419830322266,3.2070045471191406,-.005997277796268463,86.01419830322266,3.2070045471191406,-.005997277796268463,86.01419830322266,3.2070045471191406,-.005997277796268463,86.01419830322266,-28.610445022583008,-81.96196746826172,10.200666427612305,-28.610445022583008,-81.96196746826172,10.200666427612305,-28.610445022583008,-81.96196746826172,10.200666427612305,-28.610445022583008,-81.96196746826172,10.200666427612305,69.1033706665039,-52.5421257019043,10.200669288635254,69.1033706665039,-52.5421257019043,10.200669288635254,69.1033706665039,-52.5421257019043,10.200669288635254,69.1033706665039,-52.5421257019043,10.200669288635254,.9909778237342834,-3.0561423301696777,86.01419830322266,.9909778237342834,-3.0561423301696777,86.01419830322266,.9909778237342834,-3.0561423301696777,86.01419830322266,.9909778237342834,-3.0561423301696777,86.01419830322266,70.70691680908203,-51.37708282470703,7.479945659637451,70.70691680908203,-51.37708282470703,7.479945659637451,70.70691680908203,-51.37708282470703,7.479945659637451,70.70691680908203,-51.37708282470703,7.479945659637451,-25.02603530883789,83.11405944824219,10.200100898742676,-25.02603530883789,83.11405944824219,10.200100898742676,-25.02603530883789,83.11405944824219,10.200100898742676,-25.02603530883789,83.11405944824219,10.200100898742676,-69.10337829589844,52.52949142456055,-10.200671195983887,-69.10337829589844,52.52949142456055,-10.200671195983887,-69.10337829589844,52.52949142456055,-10.200671195983887,-69.10337829589844,52.52949142456055,-10.200671195983887,-86.7856216430664,1.8781644105911255,10.200315475463867,-86.7856216430664,1.8781644105911255,10.200315475463867,-86.7856216430664,1.8781644105911255,10.200315475463867,-86.7856216430664,1.8781644105911255,10.200315475463867,-28.611663818359375,81.948974609375,10.200101852416992,-28.611663818359375,81.948974609375,10.200101852416992,-28.611663818359375,81.948974609375,10.200101852416992,-28.611663818359375,81.948974609375,10.200101852416992,-27.008115768432617,83.1140365600586,7.479378700256348,-27.008115768432617,83.1140365600586,7.479378700256348,-27.008115768432617,83.1140365600586,7.479378700256348,-27.008115768432617,83.1140365600586,7.479378700256348,-70.70691680908203,51.364444732666016,-7.479947566986084,-70.70691680908203,51.364444732666016,-7.479947566986084,-70.70691680908203,51.364444732666016,-7.479947566986084,-70.70691680908203,51.364444732666016,-7.479947566986084,71.31866455078125,49.48046112060547,10.200318336486816,71.31866455078125,49.48046112060547,10.200318336486816,71.31866455078125,49.48046112060547,10.200318336486816,71.31866455078125,49.48046112060547,10.200318336486816,86.78557586669922,1.8793641328811646,-10.20033073425293,86.78557586669922,1.8793641328811646,-10.20033073425293,86.78557586669922,1.8793641328811646,-10.20033073425293,86.78557586669922,1.8793641328811646,-10.20033073425293,69.10259246826172,52.53056716918945,10.20030689239502,69.10259246826172,52.53056716918945,10.20030689239502,69.10259246826172,52.53056716918945,10.20030689239502,69.10259246826172,52.53056716918945,10.20030689239502,70.7061538696289,51.36553192138672,7.479590892791748,70.7061538696289,51.36553192138672,7.479590892791748,70.7061538696289,51.36553192138672,7.479590892791748,70.7061538696289,51.36553192138672,7.479590892791748,2.5946712493896484,1.8784899711608887,-86.01419830322266,2.5946712493896484,1.8784899711608887,-86.01419830322266,2.5946712493896484,1.8784899711608887,-86.01419830322266,2.5946712493896484,1.8784899711608887,-86.01419830322266,28.610443115234375,81.9493408203125,-10.200669288635254,28.610443115234375,81.9493408203125,-10.200669288635254,28.610443115234375,81.9493408203125,-10.200669288635254,28.610443115234375,81.9493408203125,-10.200669288635254,86.78562927246094,-1.8908008337020874,-10.2003173828125,86.78562927246094,-1.8908008337020874,-10.2003173828125,86.78562927246094,-1.8908008337020874,-10.2003173828125,86.78562927246094,-1.8908008337020874,-10.2003173828125,.9909327626228333,3.0441155433654785,86.0141830444336,.9909327626228333,3.0441155433654785,86.0141830444336,.9909327626228333,3.0441155433654785,86.0141830444336,.9909327626228333,3.0441155433654785,86.0141830444336,-27.00689125061035,-83.12700653076172,7.479950428009033,-27.00689125061035,-83.12700653076172,7.479950428009033,-27.00689125061035,-83.12700653076172,7.479950428009033,-27.00689125061035,-83.12700653076172,7.479950428009033,-69.10259246826172,-52.54320526123047,-10.200308799743652,-69.10259246826172,-52.54320526123047,-10.200308799743652,-69.10259246826172,-52.54320526123047,-10.200308799743652,-69.10259246826172,-52.54320526123047,-10.200308799743652,2.594700574874878,-1.8916770219802856,-86.0141830444336,2.594700574874878,-1.8916770219802856,-86.0141830444336,2.594700574874878,-1.8916770219802856,-86.0141830444336,2.594700574874878,-1.8916770219802856,-86.0141830444336,25.026033401489258,-83.1266860961914,-10.200102806091309,25.026033401489258,-83.1266860961914,-10.200102806091309,25.026033401489258,-83.1266860961914,-10.200102806091309,25.026033401489258,-83.1266860961914,-10.200102806091309,-86.78559112548828,-1.892000436782837,10.200329780578613,-86.78559112548828,-1.892000436782837,10.200329780578613,-86.78559112548828,-1.892000436782837,10.200329780578613,-86.78559112548828,-1.892000436782837,10.200329780578613,-70.7061538696289,-51.37816619873047,-7.479592323303223,-70.7061538696289,-51.37816619873047,-7.479592323303223,-70.7061538696289,-51.37816619873047,-7.479592323303223,-70.7061538696289,-51.37816619873047,-7.479592323303223,-25.024797439575195,-83.12699127197266,10.200674057006836,-25.024797439575195,-83.12699127197266,10.200674057006836,-25.024797439575195,-83.12699127197266,10.200674057006836,-25.024797439575195,-83.12699127197266,10.200674057006836,-2.5946712493896484,-1.8911232948303223,86.01419830322266,-2.5946712493896484,-1.8911232948303223,86.01419830322266,-2.5946712493896484,-1.8911232948303223,86.01419830322266,-2.5946712493896484,-1.8911232948303223,86.01419830322266,-71.31940460205078,49.47935104370117,-10.200664520263672,-71.31940460205078,49.47935104370117,-10.200664520263672,-71.31940460205078,49.47935104370117,-10.200664520263672,-71.31940460205078,49.47935104370117,-10.200664520263672,28.611663818359375,-81.96160888671875,-10.200103759765625,28.611663818359375,-81.96160888671875,-10.200103759765625,28.611663818359375,-81.96160888671875,-10.200103759765625,28.611663818359375,-81.96160888671875,-10.200103759765625,27.00688934326172,83.1143798828125,-7.479951858520508,27.00688934326172,83.1143798828125,-7.479951858520508,27.00688934326172,83.1143798828125,-7.479951858520508,27.00688934326172,83.1143798828125,-7.479951858520508,25.024797439575195,83.11434936523438,-10.200675010681152,25.024797439575195,83.11434936523438,-10.200675010681152,25.024797439575195,83.11434936523438,-10.200675010681152,25.024797439575195,83.11434936523438,-10.200675010681152,27.008115768432617,-83.12667083740234,-7.4793806076049805,27.008115768432617,-83.12667083740234,-7.4793806076049805,27.008115768432617,-83.12667083740234,-7.4793806076049805,27.008115768432617,-83.12667083740234,-7.4793806076049805,-87.39810180664062,-.006933570373803377,7.479599952697754,-87.39810180664062,-.006933570373803377,7.479599952697754,-87.39810180664062,-.006933570373803377,7.479599952697754,-87.39810180664062,-.006933570373803377,7.479599952697754,-71.31866455078125,-49.493099212646484,-10.20032024383545,-71.31866455078125,-49.493099212646484,-10.20032024383545,-71.31866455078125,-49.493099212646484,-10.20032024383545,-71.31866455078125,-49.493099212646484,-10.20032024383545,-.9909327626228333,-3.056749105453491,-86.0141830444336,-.9909327626228333,-3.056749105453491,-86.0141830444336,-.9909327626228333,-3.056749105453491,-86.0141830444336,-.9909327626228333,-3.056749105453491,-86.0141830444336,-3.2070045471191406,-.006636159960180521,-86.01419830322266,-3.2070045471191406,-.006636159960180521,-86.01419830322266,-3.2070045471191406,-.006636159960180521,-86.01419830322266,-3.2070045471191406,-.006636159960180521,-86.01419830322266,-.9909778237342834,3.0435099601745605,-86.01419830322266,-.9909778237342834,3.0435099601745605,-86.01419830322266,-.9909778237342834,3.0435099601745605,-86.01419830322266,-.9909778237342834,3.0435099601745605,-86.01419830322266],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.5870956778526306,.42651230096817017,.6880449652671814,-.5870956778526306,.42651230096817017,.6880449652671814,-.5870956778526306,.42651230096817017,.6880449652671814,-.5870956778526306,.42651230096817017,.6880449652671814,.745985746383667,-.033444374799728394,.6651214957237244,.745985746383667,-.033444374799728394,.6651214957237244,.745985746383667,-.033444374799728394,.6651214957237244,.745985746383667,-.033444374799728394,.6651214957237244,.7662718892097473,3863871097564697e-20,.6425164937973022,.7662718892097473,3863871097564697e-20,.6425164937973022,.7662718892097473,3863871097564697e-20,.6425164937973022,.7662718892097473,3863871097564697e-20,.6425164937973022,.7256649732589722,32261013984680176e-21,.6880481839179993,.7256649732589722,32261013984680176e-21,.6880481839179993,.7256649732589722,32261013984680176e-21,.6880481839179993,.7256649732589722,32261013984680176e-21,.6880481839179993,-.5838431119918823,-.4655483365058899,.6651255488395691,-.5838431119918823,-.4655483365058899,.6651255488395691,-.5838431119918823,-.4655483365058899,.6651255488395691,-.5838431119918823,-.4655483365058899,.6651255488395691,.2623160779476166,-.6991221904754639,.6651454567909241,.2623160779476166,-.6991221904754639,.6651454567909241,.2623160779476166,-.6991221904754639,.6651454567909241,.2623160779476166,-.6991221904754639,.6651454567909241,.22423836588859558,-.6901593208312988,.6880385875701904,.22423836588859558,-.6901593208312988,.6880385875701904,.22423836588859558,-.6901593208312988,.6880385875701904,.22423836588859558,-.6901593208312988,.6880385875701904,.6199150085449219,-.4504251182079315,-.6425127983093262,.6199150085449219,-.4504251182079315,-.6425127983093262,.6199150085449219,-.4504251182079315,-.6425127983093262,.6199150085449219,-.4504251182079315,-.6425127983093262,.19871656596660614,.7197921276092529,.6651397347450256,.19871656596660614,.7197921276092529,.6651397347450256,.19871656596660614,.7197921276092529,.6651397347450256,.19871656596660614,.7197921276092529,.6651397347450256,-.26231205463409424,.6991309523582458,-.665137767791748,-.26231205463409424,.6991309523582458,-.665137767791748,-.26231205463409424,.6991309523582458,-.665137767791748,-.26231205463409424,.6991309523582458,-.665137767791748,-.6231518387794495,.41137412190437317,.6651715636253357,-.6231518387794495,.41137412190437317,.6651715636253357,-.6231518387794495,.41137412190437317,.6651715636253357,-.6231518387794495,.41137412190437317,.6651715636253357,-.583817720413208,.46555060148239136,.6651462912559509,-.583817720413208,.46555060148239136,.6651462912559509,-.583817720413208,.46555060148239136,.6651462912559509,-.583817720413208,.46555060148239136,.6651462912559509,-.23676739633083344,.7287734746932983,-.6425187587738037,-.23676739633083344,.7287734746932983,-.6425187587738037,-.23676739633083344,.7287734746932983,-.6425187587738037,-.23676739633083344,.7287734746932983,-.6425187587738037,-.6199446320533752,.45038023591041565,.6425155997276306,-.6199446320533752,.45038023591041565,.6425155997276306,-.6199446320533752,.45038023591041565,.6425155997276306,-.6199446320533752,.45038023591041565,.6425155997276306,.7459679841995239,.03343930095434189,.6651415824890137,.7459679841995239,.03343930095434189,.6651415824890137,.7459679841995239,.03343930095434189,.6651415824890137,.7459679841995239,.03343930095434189,.6651415824890137,.623174250125885,.4114120602607727,-.6651270389556885,.623174250125885,.4114120602607727,-.6651270389556885,.623174250125885,.4114120602607727,-.6651270389556885,.623174250125885,.4114120602607727,-.6651270389556885,.26233187317848206,.6991434097290039,.6651169061660767,.26233187317848206,.6991434097290039,.6651169061660767,.26233187317848206,.6991434097290039,.6651169061660767,.26233187317848206,.6991434097290039,.6651169061660767,.6199406385421753,.45038270950317383,-.6425178050994873,.6199406385421753,.45038270950317383,-.6425178050994873,.6199406385421753,.45038270950317383,-.6425178050994873,.6199406385421753,.45038270950317383,-.6425178050994873,.587073564529419,.4265226125717163,-.6880576610565186,.587073564529419,.4265226125717163,-.6880576610565186,.587073564529419,.4265226125717163,-.6880576610565186,.587073564529419,.4265226125717163,-.6880576610565186,.5838503241539001,.4655469059944153,-.6651202440261841,.5838503241539001,.4655469059944153,-.6651202440261841,.5838503241539001,.4655469059944153,-.6651202440261841,.5838503241539001,.4655469059944153,-.6651202440261841,.6231569647789001,-.4114269018173218,-.665134072303772,.6231569647789001,-.4114269018173218,-.665134072303772,.6231569647789001,-.4114269018173218,-.665134072303772,.6231569647789001,-.4114269018173218,-.665134072303772,.22424747049808502,.6901424527168274,.6880526542663574,.22424747049808502,.6901424527168274,.6880526542663574,.22424747049808502,.6901424527168274,.6880526542663574,.22424747049808502,.6901424527168274,.6880526542663574,-.2368125319480896,-.7287622094154358,-.6425150632858276,-.2368125319480896,-.7287622094154358,-.6425150632858276,-.2368125319480896,-.7287622094154358,-.6425150632858276,-.2368125319480896,-.7287622094154358,-.6425150632858276,-.2623360753059387,-.6991369128227234,-.6651220917701721,-.2623360753059387,-.6991369128227234,-.6651220917701721,-.2623360753059387,-.6991369128227234,-.6651220917701721,-.2623360753059387,-.6991369128227234,-.6651220917701721,.5870862603187561,-.42650753259658813,-.6880559921264648,.5870862603187561,-.42650753259658813,-.6880559921264648,.5870862603187561,-.42650753259658813,-.6880559921264648,.5870862603187561,-.42650753259658813,-.6880559921264648,-.19872358441352844,-.7197949886322021,-.6651346683502197,-.19872358441352844,-.7197949886322021,-.6651346683502197,-.19872358441352844,-.7197949886322021,-.6651346683502197,-.19872358441352844,-.7197949886322021,-.6651346683502197,-.623177170753479,-.4114185571670532,.6651203036308289,-.623177170753479,-.4114185571670532,.6651203036308289,-.623177170753479,-.4114185571670532,.6651203036308289,-.623177170753479,-.4114185571670532,.6651203036308289,-.6199068427085876,-.45042937994003296,.6425175666809082,-.6199068427085876,-.45042937994003296,.6425175666809082,-.6199068427085876,-.45042937994003296,.6425175666809082,-.6199068427085876,-.45042937994003296,.6425175666809082,.19873395562171936,-.7197892069816589,.6651378273963928,.19873395562171936,-.7197892069816589,.6651378273963928,.19873395562171936,-.7197892069816589,.6651378273963928,.19873395562171936,-.7197892069816589,.6651378273963928,-.5870490074157715,-.42655661702156067,.6880573630332947,-.5870490074157715,-.42655661702156067,.6880573630332947,-.5870490074157715,-.42655661702156067,.6880573630332947,-.5870490074157715,-.42655661702156067,.6880573630332947,-.7459824085235596,.033452022820711136,-.665124773979187,-.7459824085235596,.033452022820711136,-.665124773979187,-.7459824085235596,.033452022820711136,-.665124773979187,-.7459824085235596,.033452022820711136,-.665124773979187,.5838494300842285,-.4655435383319855,-.665123462677002,.5838494300842285,-.4655435383319855,-.665123462677002,.5838494300842285,-.4655435383319855,-.665123462677002,.5838494300842285,-.4655435383319855,-.665123462677002,.2367572784423828,.7287806272506714,.6425143480300903,.2367572784423828,.7287806272506714,.6425143480300903,.2367572784423828,.7287806272506714,.6425143480300903,.2367572784423828,.7287806272506714,.6425143480300903,-.1987278163433075,.7197844982147217,-.6651448011398315,-.1987278163433075,.7197844982147217,-.6651448011398315,-.1987278163433075,.7197844982147217,-.6651448011398315,-.1987278163433075,.7197844982147217,-.6651448011398315,.23682300746440887,-.7287558913230896,.6425182819366455,.23682300746440887,-.7287558913230896,.6425182819366455,.23682300746440887,-.7287558913230896,.6425182819366455,.23682300746440887,-.7287558913230896,.6425182819366455,-.7662706971168518,20429491996765137e-21,-.6425180435180664,-.7662706971168518,20429491996765137e-21,-.6425180435180664,-.7662706971168518,20429491996765137e-21,-.6425180435180664,-.7662706971168518,20429491996765137e-21,-.6425180435180664,-.7459728717803955,-.03343328833580017,-.6651365756988525,-.7459728717803955,-.03343328833580017,-.6651365756988525,-.7459728717803955,-.03343328833580017,-.6651365756988525,-.7459728717803955,-.03343328833580017,-.6651365756988525,-.22426503896713257,-.6901455521583557,-.6880438327789307,-.22426503896713257,-.6901455521583557,-.6880438327789307,-.22426503896713257,-.6901455521583557,-.6880438327789307,-.22426503896713257,-.6901455521583557,-.6880438327789307,-.7256579995155334,-3316998481750488e-20,-.6880554556846619,-.7256579995155334,-3316998481750488e-20,-.6880554556846619,-.7256579995155334,-3316998481750488e-20,-.6880554556846619,-.7256579995155334,-3316998481750488e-20,-.6880554556846619,-.22427412867546082,.6901446580886841,-.6880418658256531,-.22427412867546082,.6901446580886841,-.6880418658256531,-.22427412867546082,.6901446580886841,-.6880418658256531,-.22427412867546082,.6901446580886841,-.6880418658256531],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.1126541942358017,.23340463638305664,.15771642327308655,.010170280933380127,.1696747988462448,.09594517946243286,.37625399231910706,.5020440220832825,.09763339906930923,.23340469598770142,.17146287858486176,.012006521224975586,.24126237630844116,.007275700569152832,.7849239706993103,.19342201948165894,.18520936369895935,.026231110095977783,.19948936998844147,.1231493353843689,.24126237630844116,.11555743217468262,.8759239912033081,.2386530041694641,.05257079377770424,.23340463638305664,.09763336926698685,.010167598724365234,.1696747988462448,.08392536640167236,.8759239912033081,.0006530284881591797,.015100483782589436,.23340469598770142,.17080335319042206,.06890475749969482,.21341374516487122,.23143154382705688,.4681450128555298,.19335603713989258,.09020465612411499,.23340463638305664,.16530834138393402,.016166627407073975,.22733810544013977,.11358428001403809,.9650390148162842,.44349002838134766,.022529248148202896,.010164380073547363,.09020490944385529,.010167598724365234,.176739901304245,.08622092008590698,.8740389943122864,.2507209777832031,.17146287858486176,.018639087677001953,.22100581228733063,.11555743217468262,.23493003845214844,.005302548408508301,.6253309845924377,.739175021648407,.15028777718544006,.23340463638305664,.18520939350128174,.018639087677001953,.2412623167037964,.23143154382705688,.46857601404190063,.4435969591140747,.06016269698739052,.010176539421081543,.179232656955719,.2314314842224121,.18520936369895935,.05468016862869263,.5344629883766174,.1933860182762146,.11265438795089722,.010173439979553223,.16530834138393402,.12512201070785522,.18389028310775757,.06890475749969482,.46725401282310486,.6948130130767822,.15771642327308655,.23340457677841187,.1790548413991928,.01447904109954834,.1855650693178177,.12512195110321045,.28525400161743164,.6948130130767822,.17923292517662048,.12314879894256592,.18520939350128174,.012006521224975586,.2349299192428589,.23340469598770142,.6254630088806152,.23861700296401978,.1653086096048355,.23340469598770142,.18520936369895935,.06131279468536377,.1855650693178177,.23340469598770142,.37625399231910706,.7400439977645874,.05257079377770424,.01016455888748169,.17146287858486176,.032863736152648926,.19948936998844147,.23143154382705688,.9669240117073059,.19342201948165894,.14269573986530304,.010170340538024902,.18520936369895935,.032863736152648926,.19315698742866516,.12512242794036865,.21655499935150146,.6933860182762146,.04514260217547417,.01016455888748169,.16530832648277283,.02870357036590576,.21341368556022644,.007275700569152832,.2865760028362274,.4435969591140747,.12555499374866486,.7386170029640198,.17146287858486176,.026231110095977783,.1931571662425995,.23340469598770142,.2070813775062561,.005302548408508301,.12555499374866486,.5006170272827148,.12767508625984192,.010170459747314453,.14269573986530304,.23340463638305664,.16530832648277283,.109546959400177,.03455499932169914,.6933860182762146,.12767508625984192,.23340463638305664,.17146290838718414,.040455639362335205,.2070814073085785,.11358422040939331,.1352669894695282,.010170340538024902,.17905481159687042,.028703629970550537,.23493003845214844,.11358428001403809,.5343310236930847,.693943977355957,.04514192417263985,.23340457677841187,.1502876579761505,.010170280933380127,.16530834138393402,.089935302734375,.37757599353790283,.2508280277252197,.12430000305175781,.48809099197387695,.16530832648277283,.07261902093887329,.19948936998844147,.11555695533752441,.20708149671554565,.23340469598770142,.0301218219101429,.23340463638305664,.17146289348602295,.06131279468536377,.2070813775062561,.1251225471496582,.2153010070323944,.4428600072860718,.08261273801326752,.23340463638305664,.13526709377765656,.23340463638305664,.16967478394508362,.11555695533752441,.6253309845924377,.5011749863624573,.03330099955201149,.4428600072860718,.07518399506807327,.010167300701141357,.17905481159687042,.042928099632263184,.19948936998844147,.007275700569152832,.10522530972957611,.010173439979553223,.18389026820659637,.07633346319198608,.22100578248500824,.23143154382705688,.28614500164985657,.19335603713989258,.17146289348602295,.05468016862869263,.21341368556022644,.12314939498901367,.2210056483745575,.1231493353843689,.377144992351532,.23858702182769775,.02252865955233574,.23340469598770142,.17080335319042206,.07633340358734131,.19315703213214874,.11358380317687988,.7830389738082886,.44349002838134766,.015100372023880482,.010164380073547363,.10522563755512238,.23340463638305664,.1767398715019226,.09364962577819824,.377144992351532,.0005869865417480469,.0675920695066452,.010176539421081543,.17164073884487152,.23143154382705688,.17905481159687042,.05884033441543579,.7172229886054993,.4428600072860718,.08261273801326752,.010167300701141357,.18520936369895935,.04708826541900635,.2210056483745575,.007276654243469238,.7163310050964355,.693943977355957,.17146290838718414,.04708826541900635,.21341368556022644,.11555737257003784,.2412623167037964,.12314939498901367,.37757599353790283,.48882800340652466,.12024644762277603,.23340463638305664,.16530834138393402,.044615745544433594,.23493006825447083,.1251225471496582,.716463029384613,.1933860182762146,.18520936369895935,.040455639362335205,.19315698742866516,.005302488803863525,.22733810544013977,.005303502082824707,.8740389943122864,.48872101306915283,.17164073884487152,.1231488585472107,.17839525640010834,.07261908054351807,.2273380160331726,.23340463638305664,.6262230277061462,.48809099197387695,.037550006061792374,.23340463638305664,.16530834138393402,.057152748107910156,.2273380160331726,.12512242794036865,.5352230072021484,.4428600072860718,.030121158808469772,.010164439678192139,.07518427819013596,.23340463638305664,.12430000305175781,.25009095668792725,.176739901304245,.11326134204864502,.037550006061792374,.010164439678192139,.0675920695066452,.23340457677841187,.176739901304245,.10583275556564331,.6262230277061462,.25009095668792725,.06016361340880394,.23340463638305664,.12024631351232529,.010170459747314453,.16967478394508362,.10353708267211914,.6254630088806152,.0006170272827148438],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[23,115,139,123,147,143,19,107,111,35,67,131,59,7,11,95,100,88,63,76,68,135,39,51,127,83,31,4,25,20,82,6,30,97,60,80,62,58,9,22,126,29,94,18,109,37,46,48,0,104,117,44,85,32,66,79,129,124,149,96,114,103,137,156,120,36,146,106,142,24,16,112,34,134,50,152,92,144,77,157,132,41,121,140,102,125,136,5,21,28,61,8,81,69,65,57,78,133,128,45,33,49,53,38,122,42,141,105,93,108,145,89,113,17,98,151,154,43,47,55,12,64,84,86,118,26,23,27,115,123,155,147,19,119,107,35,87,67,59,15,7,95,150,100,63,72,76,135,159,39,127,99,83,4,13,25,82,10,6,97,74,60,62,70,58,22,138,126,94,91,18,37,54,46,0,40,104,44,1,85,66,71,79,124,101,149,114,90,103,156,153,120,146,110,106,24,116,16,34,130,134,152,148,92,77,73,157,41,52,121,158,75,154,75,98,154,43,3,47,12,56,64,26,14,86,86,2,118]},boundingSphere:{center:[0,-.006313323974609375,0],radius:148.14155442794186}},rotationCombinations:{"1,2":[180,0,36],"1,3":[0,0,-144],"1,4":[-180,0,-108],"1,5":[0,0,144],"1,6":[180,0,-36],"1,7":[0,0,-72],"1,8":[180,0,108],"1,9":[0,0,72],"1,10":[-180,0,180],"2,3":[180,0,-108],"2,4":[0,0,-144],"2,5":[-180,0,-180],"2,6":[0,0,-72],"2,7":[180,0,-36],"2,8":[0,0,72],"2,9":[-180,0,108],"2,10":[0,0,144],"3,4":[-180,0,108],"3,5":[0,0,-72],"3,6":[-180,0,180],"3,7":[0,0,72],"3,8":[180,0,-36],"3,9":[0,0,-144],"3,10":[180,0,36],"4,5":[180,0,36],"4,6":[0,0,72],"4,7":[-180,0,-180],"4,8":[0,0,-144],"4,9":[180,0,-36],"4,10":[0,0,-72],"5,6":[180,0,108],"5,7":[0,0,144],"5,8":[-180,0,-108],"5,9":[0,0,-72],"5,10":[180,0,-36],"6,7":[180,0,-108],"6,8":[0,0,144],"6,9":[-180,0,36],"6,10":[0,0,-144],"7,8":[180,0,36],"7,9":[0,0,144],"7,10":[-180,0,108],"8,9":[-180,0,180],"8,10":[0,0,72],"9,10":[180,0,-108]}},d12:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"04389FAB-5CCD-4FEC-B604-C19AD1000B1C",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-31.141719818115234,83.4803466796875,-1.2052193880081177,-31.141719818115234,83.4803466796875,-1.2052193880081177,-31.141719818115234,83.4803466796875,-1.2052193880081177,-31.141719818115234,83.4803466796875,-1.2052193880081177,83.48023223876953,-1.2053337097167969,-31.14202308654785,83.48023223876953,-1.2053337097167969,-31.14202308654785,83.48023223876953,-1.2053337097167969,-31.14202308654785,83.48023223876953,-1.2053337097167969,-31.14202308654785,83.48045349121094,-1.2053337097167969,31.141408920288086,83.48045349121094,-1.2053337097167969,31.141408920288086,83.48045349121094,-1.2053337097167969,31.141408920288086,83.48045349121094,-1.2053337097167969,31.141408920288086,-82.73528289794922,0,33.09229278564453,-82.73528289794922,0,33.09229278564453,-82.73528289794922,0,33.09229278564453,-82.73528289794922,0,33.09229278564453,51.59387969970703,50.38835906982422,52.338436126708984,51.59387969970703,50.38835906982422,52.338436126708984,51.59387969970703,50.38835906982422,52.338436126708984,51.59387969970703,50.38835906982422,52.338436126708984,50.3885498046875,52.338626861572266,51.593505859375,50.3885498046875,52.338626861572266,51.593505859375,50.3885498046875,52.338626861572266,51.593505859375,50.3885498046875,52.338626861572266,51.593505859375,-31.141712188720703,83.4803466796875,1.2054481506347656,-31.141712188720703,83.4803466796875,1.2054481506347656,-31.141712188720703,83.4803466796875,1.2054481506347656,-31.141712188720703,83.4803466796875,1.2054481506347656,83.48023223876953,1.2053337097167969,-31.14202308654785,83.48023223876953,1.2053337097167969,-31.14202308654785,83.48023223876953,1.2053337097167969,-31.14202308654785,83.48023223876953,1.2053337097167969,-31.14202308654785,-83.48045349121094,-1.2053337097167969,-31.141408920288086,-83.48045349121094,-1.2053337097167969,-31.141408920288086,-83.48045349121094,-1.2053337097167969,-31.141408920288086,-83.48045349121094,-1.2053337097167969,-31.141408920288086,-51.59387969970703,-50.38835906982422,-52.338436126708984,-51.59387969970703,-50.38835906982422,-52.338436126708984,-51.59387969970703,-50.38835906982422,-52.338436126708984,-51.59387969970703,-50.38835906982422,-52.338436126708984,-1.205640435218811,31.14171600341797,-83.48033142089844,-1.205640435218811,31.14171600341797,-83.48033142089844,-1.205640435218811,31.14171600341797,-83.48033142089844,-1.205640435218811,31.14171600341797,-83.48033142089844,-1.205640435218811,-31.14171600341797,-83.48033142089844,-1.205640435218811,-31.14171600341797,-83.48033142089844,-1.205640435218811,-31.14171600341797,-83.48033142089844,-1.205640435218811,-31.14171600341797,-83.48033142089844,1.2050271034240723,31.14171600341797,-83.48035430908203,1.2050271034240723,31.14171600341797,-83.48035430908203,1.2050271034240723,31.14171600341797,-83.48035430908203,1.2050271034240723,31.14171600341797,-83.48035430908203,-83.48045349121094,1.2053337097167969,-31.141408920288086,-83.48045349121094,1.2053337097167969,-31.141408920288086,-83.48045349121094,1.2053337097167969,-31.141408920288086,-83.48045349121094,1.2053337097167969,-31.141408920288086,-83.48023223876953,1.2053337097167969,31.14202308654785,-83.48023223876953,1.2053337097167969,31.14202308654785,-83.48023223876953,1.2053337097167969,31.14202308654785,-83.48023223876953,1.2053337097167969,31.14202308654785,-50.38816833496094,-52.338626861572266,51.593875885009766,-50.38816833496094,-52.338626861572266,51.593875885009766,-50.38816833496094,-52.338626861572266,51.593875885009766,-50.38816833496094,-52.338626861572266,51.593875885009766,31.141712188720703,83.4803466796875,-1.2054481506347656,31.141712188720703,83.4803466796875,-1.2054481506347656,31.141712188720703,83.4803466796875,-1.2054481506347656,31.141712188720703,83.4803466796875,-1.2054481506347656,-50.3885498046875,52.338626861572266,-51.593505859375,-50.3885498046875,52.338626861572266,-51.593505859375,-50.3885498046875,52.338626861572266,-51.593505859375,-50.3885498046875,52.338626861572266,-51.593505859375,50.38816833496094,52.338626861572266,-51.593875885009766,50.38816833496094,52.338626861572266,-51.593875885009766,50.38816833496094,52.338626861572266,-51.593875885009766,50.38816833496094,52.338626861572266,-51.593875885009766,-.000303904089378193,33.09198760986328,-82.73540496826172,-.000303904089378193,33.09198760986328,-82.73540496826172,-.000303904089378193,33.09198760986328,-82.73540496826172,-.000303904089378193,33.09198760986328,-82.73540496826172,82.73552703857422,0,33.0916862487793,82.73552703857422,0,33.0916862487793,82.73552703857422,0,33.0916862487793,82.73552703857422,0,33.0916862487793,52.338809967041016,-51.59368896484375,50.38816833496094,52.338809967041016,-51.59368896484375,50.38816833496094,52.338809967041016,-51.59368896484375,50.38816833496094,52.338809967041016,-51.59368896484375,50.38816833496094,83.48045349121094,1.2053337097167969,31.141408920288086,83.48045349121094,1.2053337097167969,31.141408920288086,83.48045349121094,1.2053337097167969,31.141408920288086,83.48045349121094,1.2053337097167969,31.141408920288086,52.33843994140625,-51.59368896484375,-50.3885498046875,52.33843994140625,-51.59368896484375,-50.3885498046875,52.33843994140625,-51.59368896484375,-50.3885498046875,52.33843994140625,-51.59368896484375,-50.3885498046875,51.593502044677734,-50.38835906982422,-52.33881759643555,51.593502044677734,-50.38835906982422,-52.33881759643555,51.593502044677734,-50.38835906982422,-52.33881759643555,51.593502044677734,-50.38835906982422,-52.33881759643555,82.73528289794922,0,-33.09229278564453,82.73528289794922,0,-33.09229278564453,82.73528289794922,0,-33.09229278564453,82.73528289794922,0,-33.09229278564453,33.09198760986328,-82.73540496826172,-.00012155366130173206,33.09198760986328,-82.73540496826172,-.00012155366130173206,33.09198760986328,-82.73540496826172,-.00012155366130173206,33.09198760986328,-82.73540496826172,-.00012155366130173206,-1.2050271034240723,-31.14171600341797,83.48035430908203,-1.2050271034240723,-31.14171600341797,83.48035430908203,-1.2050271034240723,-31.14171600341797,83.48035430908203,-1.2050271034240723,-31.14171600341797,83.48035430908203,-1.2050271034240723,31.14171600341797,83.48035430908203,-1.2050271034240723,31.14171600341797,83.48035430908203,-1.2050271034240723,31.14171600341797,83.48035430908203,-1.2050271034240723,31.14171600341797,83.48035430908203,-52.33843994140625,-51.59368896484375,50.3885498046875,-52.33843994140625,-51.59368896484375,50.3885498046875,-52.33843994140625,-51.59368896484375,50.3885498046875,-52.33843994140625,-51.59368896484375,50.3885498046875,-51.593502044677734,-50.38835906982422,52.33881759643555,-51.593502044677734,-50.38835906982422,52.33881759643555,-51.593502044677734,-50.38835906982422,52.33881759643555,-51.593502044677734,-50.38835906982422,52.33881759643555,-51.593502044677734,50.38835906982422,52.33881759643555,-51.593502044677734,50.38835906982422,52.33881759643555,-51.593502044677734,50.38835906982422,52.33881759643555,-51.593502044677734,50.38835906982422,52.33881759643555,-52.33843994140625,51.59368896484375,50.3885498046875,-52.33843994140625,51.59368896484375,50.3885498046875,-52.33843994140625,51.59368896484375,50.3885498046875,-52.33843994140625,51.59368896484375,50.3885498046875,.000303904089378193,33.09198760986328,82.73540496826172,.000303904089378193,33.09198760986328,82.73540496826172,.000303904089378193,33.09198760986328,82.73540496826172,.000303904089378193,33.09198760986328,82.73540496826172,52.338809967041016,51.59368896484375,50.38816833496094,52.338809967041016,51.59368896484375,50.38816833496094,52.338809967041016,51.59368896484375,50.38816833496094,52.338809967041016,51.59368896484375,50.38816833496094,1.205640435218811,-31.14171600341797,83.48033142089844,1.205640435218811,-31.14171600341797,83.48033142089844,1.205640435218811,-31.14171600341797,83.48033142089844,1.205640435218811,-31.14171600341797,83.48033142089844,-33.09198760986328,82.73540496826172,.00012155366130173206,-33.09198760986328,82.73540496826172,.00012155366130173206,-33.09198760986328,82.73540496826172,.00012155366130173206,-33.09198760986328,82.73540496826172,.00012155366130173206,-50.38816833496094,52.338626861572266,51.593875885009766,-50.38816833496094,52.338626861572266,51.593875885009766,-50.38816833496094,52.338626861572266,51.593875885009766,-50.38816833496094,52.338626861572266,51.593875885009766,51.593502044677734,50.38835906982422,-52.33881759643555,51.593502044677734,50.38835906982422,-52.33881759643555,51.593502044677734,50.38835906982422,-52.33881759643555,51.593502044677734,50.38835906982422,-52.33881759643555,-52.338809967041016,-51.59368896484375,-50.38816833496094,-52.338809967041016,-51.59368896484375,-50.38816833496094,-52.338809967041016,-51.59368896484375,-50.38816833496094,-52.338809967041016,-51.59368896484375,-50.38816833496094,-33.09198760986328,-82.73540496826172,.00012155366130173206,-33.09198760986328,-82.73540496826172,.00012155366130173206,-33.09198760986328,-82.73540496826172,.00012155366130173206,-33.09198760986328,-82.73540496826172,.00012155366130173206,-83.48023223876953,-1.2053337097167969,31.14202308654785,-83.48023223876953,-1.2053337097167969,31.14202308654785,-83.48023223876953,-1.2053337097167969,31.14202308654785,-83.48023223876953,-1.2053337097167969,31.14202308654785,-50.3885498046875,-52.338626861572266,-51.593505859375,-50.3885498046875,-52.338626861572266,-51.593505859375,-50.3885498046875,-52.338626861572266,-51.593505859375,-50.3885498046875,-52.338626861572266,-51.593505859375,-.000303904089378193,-33.09198760986328,-82.73540496826172,-.000303904089378193,-33.09198760986328,-82.73540496826172,-.000303904089378193,-33.09198760986328,-82.73540496826172,-.000303904089378193,-33.09198760986328,-82.73540496826172,50.38816833496094,-52.338626861572266,-51.593875885009766,50.38816833496094,-52.338626861572266,-51.593875885009766,50.38816833496094,-52.338626861572266,-51.593875885009766,50.38816833496094,-52.338626861572266,-51.593875885009766,31.141719818115234,-83.4803466796875,1.2052193880081177,31.141719818115234,-83.4803466796875,1.2052193880081177,31.141719818115234,-83.4803466796875,1.2052193880081177,31.141719818115234,-83.4803466796875,1.2052193880081177,-31.141719818115234,-83.4803466796875,-1.2052193880081177,-31.141719818115234,-83.4803466796875,-1.2052193880081177,-31.141719818115234,-83.4803466796875,-1.2052193880081177,-31.141719818115234,-83.4803466796875,-1.2052193880081177,1.2050271034240723,-31.14171600341797,-83.48035430908203,1.2050271034240723,-31.14171600341797,-83.48035430908203,1.2050271034240723,-31.14171600341797,-83.48035430908203,1.2050271034240723,-31.14171600341797,-83.48035430908203,-52.338809967041016,51.59368896484375,-50.38816833496094,-52.338809967041016,51.59368896484375,-50.38816833496094,-52.338809967041016,51.59368896484375,-50.38816833496094,-52.338809967041016,51.59368896484375,-50.38816833496094,-31.141712188720703,-83.4803466796875,1.2054481506347656,-31.141712188720703,-83.4803466796875,1.2054481506347656,-31.141712188720703,-83.4803466796875,1.2054481506347656,-31.141712188720703,-83.4803466796875,1.2054481506347656,31.141719818115234,83.4803466796875,1.2052193880081177,31.141719818115234,83.4803466796875,1.2052193880081177,31.141719818115234,83.4803466796875,1.2052193880081177,31.141719818115234,83.4803466796875,1.2052193880081177,33.09198760986328,82.73540496826172,-.00012155366130173206,33.09198760986328,82.73540496826172,-.00012155366130173206,33.09198760986328,82.73540496826172,-.00012155366130173206,33.09198760986328,82.73540496826172,-.00012155366130173206,31.141712188720703,-83.4803466796875,-1.2054481506347656,31.141712188720703,-83.4803466796875,-1.2054481506347656,31.141712188720703,-83.4803466796875,-1.2054481506347656,31.141712188720703,-83.4803466796875,-1.2054481506347656,1.205640435218811,31.14171600341797,83.48033142089844,1.205640435218811,31.14171600341797,83.48033142089844,1.205640435218811,31.14171600341797,83.48033142089844,1.205640435218811,31.14171600341797,83.48033142089844,.000303904089378193,-33.09198760986328,82.73540496826172,.000303904089378193,-33.09198760986328,82.73540496826172,.000303904089378193,-33.09198760986328,82.73540496826172,.000303904089378193,-33.09198760986328,82.73540496826172,-82.73552703857422,0,-33.0916862487793,-82.73552703857422,0,-33.0916862487793,-82.73552703857422,0,-33.0916862487793,-82.73552703857422,0,-33.0916862487793,-51.59387969970703,50.38835906982422,-52.338436126708984,-51.59387969970703,50.38835906982422,-52.338436126708984,-51.59387969970703,50.38835906982422,-52.338436126708984,-51.59387969970703,50.38835906982422,-52.338436126708984,52.33843994140625,51.59368896484375,-50.3885498046875,52.33843994140625,51.59368896484375,-50.3885498046875,52.33843994140625,51.59368896484375,-50.3885498046875,52.33843994140625,51.59368896484375,-50.3885498046875,51.59387969970703,-50.38835906982422,52.338436126708984,51.59387969970703,-50.38835906982422,52.338436126708984,51.59387969970703,-50.38835906982422,52.338436126708984,51.59387969970703,-50.38835906982422,52.338436126708984,50.3885498046875,-52.338626861572266,51.593505859375,50.3885498046875,-52.338626861572266,51.593505859375,50.3885498046875,-52.338626861572266,51.593505859375,50.3885498046875,-52.338626861572266,51.593505859375],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.010959841310977936,.8584385514259338,-.5127993226051331,-.010959841310977936,.8584385514259338,-.5127993226051331,-.010959841310977936,.8584385514259338,-.5127993226051331,-.010959841310977936,.8584385514259338,-.5127993226051331,.8584375977516174,-.5128011703491211,-.010949048213660717,.8584375977516174,-.5128011703491211,-.010949048213660717,.8584375977516174,-.5128011703491211,-.010949048213660717,.8584375977516174,-.5128011703491211,-.010949048213660717,.8584346175193787,-.5128057599067688,.010964557528495789,.8584346175193787,-.5128057599067688,.010964557528495789,.8584346175193787,-.5128057599067688,.010964557528495789,.8584346175193787,-.5128057599067688,.010964557528495789,-.5414749979972839,-2707540988922119e-20,.8407168388366699,-.5414749979972839,-2707540988922119e-20,.8407168388366699,-.5414749979972839,-2707540988922119e-20,.8407168388366699,-.5414749979972839,-2707540988922119e-20,.8407168388366699,.5305333137512207,.017743051052093506,.8474783301353455,.5305333137512207,.017743051052093506,.8474783301353455,.5305333137512207,.017743051052093506,.8474783301353455,.5305333137512207,.017743051052093506,.8474783301353455,.01774728298187256,.8474791646003723,.5305318236351013,.01774728298187256,.8474791646003723,.5305318236351013,.01774728298187256,.8474791646003723,.5305318236351013,.01774728298187256,.8474791646003723,.5305318236351013,-.010942935943603516,.8584372997283936,.5128018856048584,-.010942935943603516,.8584372997283936,.5128018856048584,-.010942935943603516,.8584372997283936,.5128018856048584,-.010942935943603516,.8584372997283936,.5128018856048584,.8584451079368591,.5127884149551392,-.01095967274159193,.8584451079368591,.5127884149551392,-.01095967274159193,.8584451079368591,.5127884149551392,-.01095967274159193,.8584451079368591,.5127884149551392,-.01095967274159193,-.8584290742874146,-.512814462184906,-.010995045304298401,-.8584290742874146,-.512814462184906,-.010995045304298401,-.8584290742874146,-.512814462184906,-.010995045304298401,-.8584290742874146,-.512814462184906,-.010995045304298401,-.5305572152137756,-.017733842134475708,-.8474634885787964,-.5305572152137756,-.017733842134475708,-.8474634885787964,-.5305572152137756,-.017733842134475708,-.8474634885787964,-.5305572152137756,-.017733842134475708,-.8474634885787964,-.5128048658370972,.010960124433040619,-.8584352135658264,-.5128048658370972,.010960124433040619,-.8584352135658264,-.5128048658370972,.010960124433040619,-.8584352135658264,-.5128048658370972,.010960124433040619,-.8584352135658264,-.5128147006034851,-.010991238057613373,-.858428955078125,-.5128147006034851,-.010991238057613373,-.858428955078125,-.5128147006034851,-.010991238057613373,-.858428955078125,-.5128147006034851,-.010991238057613373,-.858428955078125,.5127923488616943,.010975174605846405,-.8584426045417786,.5127923488616943,.010975174605846405,-.8584426045417786,.5127923488616943,.010975174605846405,-.8584426045417786,.5127923488616943,.010975174605846405,-.8584426045417786,-.8584410548210144,.512795627117157,-.010933354496955872,-.8584410548210144,.512795627117157,-.010933354496955872,-.8584410548210144,.512795627117157,-.010933354496955872,-.8584410548210144,.512795627117157,-.010933354496955872,-.8584320545196533,.5128099322319031,.01097819209098816,-.8584320545196533,.5128099322319031,.01097819209098816,-.8584320545196533,.5128099322319031,.01097819209098816,-.8584320545196533,.5128099322319031,.01097819209098816,-.01773303747177124,-.8474655151367188,.5305542349815369,-.01773303747177124,-.8474655151367188,.5305542349815369,-.01773303747177124,-.8474655151367188,.5305542349815369,-.01773303747177124,-.8474655151367188,.5305542349815369,.010984241962432861,.8584214448928833,-.5128273963928223,.010984241962432861,.8584214448928833,-.5128273963928223,.010984241962432861,.8584214448928833,-.5128273963928223,.010984241962432861,.8584214448928833,-.5128273963928223,-.017747551202774048,.847478985786438,-.5305322408676147,-.017747551202774048,.847478985786438,-.5305322408676147,-.017747551202774048,.847478985786438,-.5305322408676147,-.017747551202774048,.847478985786438,-.5305322408676147,.017701515927910805,.8474764823913574,-.5305377244949341,.017701515927910805,.8474764823913574,-.5305377244949341,.017701515927910805,.8474764823913574,-.5305377244949341,.017701515927910805,.8474764823913574,-.5305377244949341,-2969801425933838e-20,.840691328048706,-.54151451587677,-2969801425933838e-20,.840691328048706,-.54151451587677,-2969801425933838e-20,.840691328048706,-.54151451587677,-2969801425933838e-20,.840691328048706,-.54151451587677,.5415211915969849,26792287826538086e-21,.840687096118927,.5415211915969849,26792287826538086e-21,.840687096118927,.5415211915969849,26792287826538086e-21,.840687096118927,.5415211915969849,26792287826538086e-21,.840687096118927,.8474524617195129,-.5305749177932739,.01773586869239807,.8474524617195129,-.5305749177932739,.01773586869239807,.8474524617195129,-.5305749177932739,.01773586869239807,.8474524617195129,-.5305749177932739,.01773586869239807,.8584384322166443,.5127996206283569,.010955426841974258,.8584384322166443,.5127996206283569,.010955426841974258,.8584384322166443,.5127996206283569,.010955426841974258,.8584384322166443,.5127996206283569,.010955426841974258,.8474904298782349,-.530514657497406,-.01772182434797287,.8474904298782349,-.530514657497406,-.01772182434797287,.8474904298782349,-.530514657497406,-.01772182434797287,.8474904298782349,-.530514657497406,-.01772182434797287,.5305161476135254,-.017740633338689804,-.8474891185760498,.5305161476135254,-.017740633338689804,-.8474891185760498,.5305161476135254,-.017740633338689804,-.8474891185760498,.5305161476135254,-.017740633338689804,-.8474891185760498,.5414748787879944,-5863606929779053e-21,-.8407169580459595,.5414748787879944,-5863606929779053e-21,-.8407169580459595,.5414748787879944,-5863606929779053e-21,-.8407169580459595,.5414748787879944,-5863606929779053e-21,-.8407169580459595,.8406915068626404,-.5415142774581909,-934302806854248e-20,.8406915068626404,-.5415142774581909,-934302806854248e-20,.8406915068626404,-.5415142774581909,-934302806854248e-20,.8406915068626404,-.5415142774581909,-934302806854248e-20,-.5128104090690613,-.01098555326461792,.8584316372871399,-.5128104090690613,-.01098555326461792,.8584316372871399,-.5128104090690613,-.01098555326461792,.8584316372871399,-.5128104090690613,-.01098555326461792,.8584316372871399,-.5128028988838196,.010992184281349182,.858436107635498,-.5128028988838196,.010992184281349182,.858436107635498,-.5128028988838196,.010992184281349182,.858436107635498,-.5128028988838196,.010992184281349182,.858436107635498,-.8474770188331604,-.5305349826812744,.017758265137672424,-.8474770188331604,-.5305349826812744,.017758265137672424,-.8474770188331604,-.5305349826812744,.017758265137672424,-.8474770188331604,-.5305349826812744,.017758265137672424,-.5305088758468628,-.017743252217769623,.8474936485290527,-.5305088758468628,-.017743252217769623,.8474936485290527,-.5305088758468628,-.017743252217769623,.8474936485290527,-.5305088758468628,-.017743252217769623,.8474936485290527,-.5305161476135254,.017740704119205475,.8474891781806946,-.5305161476135254,.017740704119205475,.8474891781806946,-.5305161476135254,.017740704119205475,.8474891781806946,-.5305161476135254,.017740704119205475,.8474891781806946,-.8474623560905457,.5305585861206055,.01774775981903076,-.8474623560905457,.5305585861206055,.01774775981903076,-.8474623560905457,.5305585861206055,.01774775981903076,-.8474623560905457,.5305585861206055,.01774775981903076,29221177101135254e-21,.8406913876533508,.5415146350860596,29221177101135254e-21,.8406913876533508,.5415146350860596,29221177101135254e-21,.8406913876533508,.5415146350860596,29221177101135254e-21,.8406913876533508,.5415146350860596,.8474631309509277,.5305578112602234,.017742618918418884,.8474631309509277,.5305578112602234,.017742618918418884,.8474631309509277,.5305578112602234,.017742618918418884,.8474631309509277,.5305578112602234,.017742618918418884,.5128002166748047,-.010964479297399521,.8584378957748413,.5128002166748047,-.010964479297399521,.8584378957748413,.5128002166748047,-.010964479297399521,.8584378957748413,.5128002166748047,-.010964479297399521,.8584378957748413,-.8407147526741028,.5414782166481018,9499490261077881e-21,-.8407147526741028,.5414782166481018,9499490261077881e-21,-.8407147526741028,.5414782166481018,9499490261077881e-21,-.8407147526741028,.5414782166481018,9499490261077881e-21,-.017701396718621254,.847476601600647,.530537486076355,-.017701396718621254,.847476601600647,.530537486076355,-.017701396718621254,.847476601600647,.530537486076355,-.017701396718621254,.847476601600647,.530537486076355,.5305255055427551,.01773667335510254,-.8474833369255066,.5305255055427551,.01773667335510254,-.8474833369255066,.5305255055427551,.01773667335510254,-.8474833369255066,.5305255055427551,.01773667335510254,-.8474833369255066,-.8474682569503784,-.5305496454238892,-.017742810770869255,-.8474682569503784,-.5305496454238892,-.017742810770869255,-.8474682569503784,-.5305496454238892,-.017742810770869255,-.8474682569503784,-.5305496454238892,-.017742810770869255,-.8406901359558105,-.5415164232254028,3986060619354248e-20,-.8406901359558105,-.5415164232254028,3986060619354248e-20,-.8406901359558105,-.5415164232254028,3986060619354248e-20,-.8406901359558105,-.5415164232254028,3986060619354248e-20,-.858434796333313,-.5128055810928345,.010956216603517532,-.858434796333313,-.5128055810928345,.010956216603517532,-.858434796333313,-.5128055810928345,.010956216603517532,-.858434796333313,-.5128055810928345,.010956216603517532,-.017747780308127403,-.8474676012992859,-.530550479888916,-.017747780308127403,-.8474676012992859,-.530550479888916,-.017747780308127403,-.8474676012992859,-.530550479888916,-.017747780308127403,-.8474676012992859,-.530550479888916,33095479011535645e-21,-.8406911492347717,-.5415149331092834,33095479011535645e-21,-.8406911492347717,-.5415149331092834,33095479011535645e-21,-.8406911492347717,-.5415149331092834,33095479011535645e-21,-.8406911492347717,-.5415149331092834,.017742261290550232,-.8474804759025574,-.5305300354957581,.017742261290550232,-.8474804759025574,-.5305300354957581,.017742261290550232,-.8474804759025574,-.5305300354957581,.017742261290550232,-.8474804759025574,-.5305300354957581,.010982692241668701,-.8584359288215637,.5128030776977539,.010982692241668701,-.8584359288215637,.5128030776977539,.010982692241668701,-.8584359288215637,.5128030776977539,.010982692241668701,-.8584359288215637,.5128030776977539,-.011000136844813824,-.8584293127059937,-.512813925743103,-.011000136844813824,-.8584293127059937,-.512813925743103,-.011000136844813824,-.8584293127059937,-.512813925743103,-.011000136844813824,-.8584293127059937,-.512813925743103,.5127899050712585,-.010951489210128784,-.858444333076477,.5127899050712585,-.010951489210128784,-.858444333076477,.5127899050712585,-.010951489210128784,-.858444333076477,.5127899050712585,-.010951489210128784,-.858444333076477,-.8474836945533752,.530524492263794,-.017755359411239624,-.8474836945533752,.530524492263794,-.017755359411239624,-.8474836945533752,.530524492263794,-.017755359411239624,-.8474836945533752,.530524492263794,-.017755359411239624,-.010949179530143738,-.8584410548210144,.5127953290939331,-.010949179530143738,-.8584410548210144,.5127953290939331,-.010949179530143738,-.8584410548210144,.5127953290939331,-.010949179530143738,-.8584410548210144,.5127953290939331,.010959796607494354,.8584384918212891,.5127993226051331,.010959796607494354,.8584384918212891,.5127993226051331,.010959796607494354,.8584384918212891,.5127993226051331,.010959796607494354,.8584384918212891,.5127993226051331,.840688943862915,.5415182709693909,23245811462402344e-22,.840688943862915,.5415182709693909,23245811462402344e-22,.840688943862915,.5415182709693909,23245811462402344e-22,.840688943862915,.5415182709693909,23245811462402344e-22,.010956525802612305,-.85843825340271,-.512799859046936,.010956525802612305,-.85843825340271,-.512799859046936,.010956525802612305,-.85843825340271,-.512799859046936,.010956525802612305,-.85843825340271,-.512799859046936,.5128072500228882,.010947109200060368,.8584340214729309,.5128072500228882,.010947109200060368,.8584340214729309,.5128072500228882,.010947109200060368,.8584340214729309,.5128072500228882,.010947109200060368,.8584340214729309,-2372264862060547e-20,-.8406915664672852,.5415141582489014,-2372264862060547e-20,-.8406915664672852,.5415141582489014,-2372264862060547e-20,-.8406915664672852,.5415141582489014,-2372264862060547e-20,-.8406915664672852,.5415141582489014,-.5415211319923401,58785080909729e-19,-.8406871557235718,-.5415211319923401,58785080909729e-19,-.8406871557235718,-.5415211319923401,58785080909729e-19,-.8406871557235718,-.5415211319923401,58785080909729e-19,-.8406871557235718,-.5305268168449402,.017754971981048584,-.8474822044372559,-.5305268168449402,.017754971981048584,-.8474822044372559,-.5305268168449402,.017754971981048584,-.8474822044372559,-.5305268168449402,.017754971981048584,-.8474822044372559,.8474643230438232,.530555784702301,-.017738506197929382,.8474643230438232,.530555784702301,-.017738506197929382,.8474643230438232,.530555784702301,-.017738506197929382,.8474643230438232,.530555784702301,-.017738506197929382,.5305773615837097,-.017735809087753296,.8474509716033936,.5305773615837097,-.017735809087753296,.8474509716033936,.5305773615837097,-.017735809087753296,.8474509716033936,.5305773615837097,-.017735809087753296,.8474509716033936,.017751533538103104,-.8474733233451843,.5305410623550415,.017751533538103104,-.8474733233451843,.5305410623550415,.017751533538103104,-.8474733233451843,.5305410623550415,.017751533538103104,-.8474733233451843,.5305410623550415],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.04446648806333542,.07376205921173096,.20145824551582336,.23582905530929565,.21539996564388275,.12743210792541504,.37534299492836,.25084298849105835,.04809992015361786,.08560597896575928,.057846054434776306,.11768478155136108,.1833210289478302,.12743109464645386,.7991840243339539,.7345119714736938,.04446648806333542,.10164541006088257,.05784609913825989,.009287774562835693,.1456916183233261,.009287774562835693,.9510290026664734,.7345119714736938,.029962755739688873,.009287834167480469,.08629150688648224,.11558711528778076,.16937947273254395,.23582905530929565,.29914700984954834,.9847790002822876,.09967105835676193,.11768478155136108,.12479200214147568,.5006319880485535,.13174988329410553,.06191825866699219,.14569158852100372,.23582911491394043,.10386674106121063,.11768478155136108,.1178082525730133,.12743109464645386,.12811647355556488,.059820473194122314,.2996180057525635,.7345709800720215,.04809992015361786,.07166439294815063,.1038665845990181,.12743091583251953,.2112043797969818,.12743210792541504,.4983850121498108,.5901579856872559,.04809992015361786,.08980154991149902,.04809992015361786,.1274309754371643,.06204163283109665,.11768478155136108,.9510089755058289,.23450398445129395,.04809992015361786,.11348932981491089,.07598327845335007,.11768478155136108,.11361270397901535,.11768472194671631,.24789699912071228,.8405579924583435,.1178082674741745,.009287655353546143,.15963312983512878,.23582905530929565,.2148379236459732,.11348950862884521,.7521880269050598,.34043699502944946,.04446648806333542,.04587888717651367,.22514608502388,.00928884744644165,.2390877902507782,.23582905530929565,.9978780150413513,.34043699502944946,.12811647355556488,.08770370483398438,.15963324904441833,.12743109464645386,.23908784985542297,.12743210792541504,.8750330209732056,.25118499994277954,.04809989035129547,.0437811017036438,.22934159636497498,.12743210792541504,.24328330159187317,.23582911491394043,.5490679740905762,.2342810034751892,.04446648806333542,.11558705568313599,.0717877745628357,.11768478155136108,.12755444645881653,.12743091583251953,.20090700685977936,.4844740033149719,.03415820747613907,.009287834167480469,.07178772985935211,.009287774562835693,.08992494642734528,.11768484115600586,.24783000349998474,.3400610089302063,.029962942004203796,.1274297833442688,.08629149198532104,.05982053279876709,.17357508838176727,.009289085865020752,.7481870055198669,.5902109742164612,.07598324865102768,.12743091583251953,.13174989819526672,.10374313592910767,.2153998762369156,.23582905530929565,.25249800086021423,.34009504318237305,.08629149198532104,.07376205921173096,.20145824551582336,.1274312138557434,.22934159636497498,.11768591403961182,.49818700551986694,.34009504318237305,.04446648806333542,.05982053279876709,.07598326355218887,.23582905530929565,.22514608502388,.23582905530929565,.29941999912261963,.48450803756713867,.04809989035129547,.04797661304473877,.2251461148262024,.12743210792541504,.22934159636497498,.009288787841796875,.45126500725746155,.48450803756713867,.04809992015361786,.0995476245880127,.14149606227874756,.009287774562835693,.14569158852100372,.12743109464645386,.24763700366020203,.5898839831352234,.08572941273450851,.23582905530929565,.12811647355556488,.04587888717651367,.1456916183233261,.11768472194671631,.9979509711265564,.5900989770889282,.04809992015361786,.10374313592910767,.062041595578193665,.009287774562835693,.14149613678455353,.12743109464645386,.7991650104522705,.23450398445129395,.08629149198532104,.04587888717651367,.18332113325595856,.23582911491394043,.2014583796262741,.11768490076065063,.7522619962692261,.5900989770889282,.08992491662502289,.0437811017036438,.18751657009124756,.23582905530929565,.23908784985542297,.11768591403961182,.6249899864196777,.0006160140037536621,.043904468417167664,.1274309754371643,.0444665253162384,.08770382404327393,.18751657009124756,.12743109464645386,.7478349804878235,.08986800909042358,.08572938293218613,.1274309754371643,.13174991309642792,.0758599042892456,.2014583796262741,.009289026260375977,.8751059770584106,.5008469820022583,.034158237278461456,.23582905530929565,.0899249017238617,.10374313592910767,.15543770790100098,.11768490076065063,.49791398644447327,.840366005897522,.020216554403305054,.1274297833442688,.13174991309642792,.11768472194671631,.15543778240680695,.009287893772125244,.3750689923763275,.751114010810852,.04913000017404556,.9849709868431091,.0899249017238617,.05772274732589722,.1693795919418335,.009289145469665527,.17357489466667175,.12743103504180908,.034158237278461456,.1274297833442688,.0899249017238617,.06191825866699219,.16937938332557678,.1274309754371643,.45099198818206787,.9847790002822876,.020216554403305054,.23582911491394043,.029962696135044098,.11768358945846558,.2148379534482956,.0995478630065918,.25222501158714294,.840366005897522,.034158363938331604,.11768358945846558,.09967107325792313,.23582905530929565,.12498500198125839,.2508090138435364,.2148379534482956,.10374337434768677,.016021236777305603,.1274297833442688,.10386674106121063,.009288907051086426,.12811647355556488,.11558699607849121,.2526949942111969,.5901579856872559,.1136128157377243,.12743109464645386,.13174988329410553,.05772268772125244,.14149603247642517,.23582905530929565,.7522420287132263,.09009099006652832,.020216554403305054,.009286701679229736,.04887000098824501,.734296977519989,.08629149198532104,.10164541006088257,.15963326394557953,.11768490076065063,.002139999996870756,.3400610089302063,.04809992015361786,.0758599042892456,.0996711403131485,.12743091583251953,.197262704372406,.23582911491394043,.016021013259887695,.23582905530929565,.1038665771484375,.23582905530929565,.21120451390743256,.1016455888748169,.37553998827934265,.5009059906005859,.043904371559619904,.23582905530929565,.04809992015361786,.05772274732589722,.22934159636497498,.23582905530929565,.7009119987487793,.2342810034751892,.057846151292324066,.23582905530929565,.11361275613307953,.009287714958190918,.12505200505256653,.7513059973716736,.2148379236459732,.11768490076065063,.0022070000413805246,.8405579924583435,.057846054434776306,.1274309754371643,.08629149198532104,.08770382404327393,.16937938332557678,.11768496036529541,.07598327845335007,.009287774562835693,.08992494642734528,.11348938941955566,.17357489466667175,.23582911491394043,.2009740024805069,.9849709868431091,.06204158067703247,.23582905530929565,.15543770790100098,.23582905530929565,.21120451390743256,.11558717489242554,.5491099953651428,.48442399501800537,.13174989819526672,.08560597896575928,.15543770790100098,.12743109464645386,.24328330159187317,.009288966655731201,.7009549736976624,.48442399501800537,.08992491662502289,.04797661304473877,.1972629427909851,.11768496036529541,.24328330159187317,.11768591403961182,.7478770017623901,.3400120139122009,.08992493152618408,.1274309754371643,.13174991309642792,.07166433334350586,.18751657009124756,.11768484115600586,.5024970173835754,.5902109742164612,.06204158067703247,.1274309754371643,.08992491662502289,.0898016095161438,.18332108855247498,.009287834167480469,.5021880269050598,.3400120139122009,.13174989819526672,.08980154991149902,.2390877902507782,.009288907051086426,.24328330159187317,.12743210792541504,.502144992351532,.08986800909042358,.049063000828027725,.4844740033149719,.0899249017238617,.07166439294815063,.12755438685417175,.23582905530929565,.19726276397705078,.1274312138557434,.08992491662502289,.08560603857040405,.17357507348060608,.11768496036529541,.18751657009124756,.009287834167480469,.6253420114517212,.5009589791297913,.1178082600235939,.23582905530929565,.13174989819526672,.0995476245880127,.2112043797969818,.23582905530929565,.4514620006084442,.7345709800720215,.07178780436515808,.1274309754371643,.11361271142959595,.23582905530929565,.12811647355556488,.10164541006088257,.8750870227813721,.0008389949798583984,.12811648845672607,.07376205921173096,.1833210289478302,.11768484115600586,.197262704372406,.009289026260375977,.6250330209732056,.25075995922088623,.0019470000406727195,.5898839831352234,.09967128932476044,.009288907051086426,.13174991309642792,.11348927021026611,.15963326394557953,.009287893772125244,.01602097600698471,.009286701679229736,.029962696135044098,.23582905530929565,.0899249017238617,.0995476245880127,.7012640237808228,.7346240282058716,.04809992015361786,.11768478155136108,.1178082674741745,.11768472194671631,.13174991309642792,.12743091583251953,.799111008644104,.4848499894142151,.0899249017238617,.0758599042892456,.13174991309642792,.23582911491394043,.22514614462852478,.11768591403961182,.9509549736976624,.4848499894142151,.04809992015361786,.06191825866699219,.04809992015361786,.23582905530929565,.07178771495819092,.23582905530929565,.9979320168495178,.09009099006652832,.020216554403305054,.11768358945846558,.13174989819526672,.047976553440093994,.14149612188339233,.11768472194671631,.20071400701999664,.734296977519989,.01602107286453247,.11768358945846558,.08992485702037811,.23582905530929565,.13174989819526672,.0437811017036438,.5494199991226196,.7346240282058716],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[17,212,141,107,7,11,43,39,223,59,130,144,158,116,167,151,23,203,91,231,207,199,183,239,75,71,3,103,191,51,171,179,211,186,182,198,149,146,129,133,16,20,108,60,217,205,21,136,157,221,36,202,2,26,119,14,166,49,74,154,161,168,184,33,57,53,178,189,98,229,100,152,102,93,97,148,112,132,232,216,236,194,222,54,173,37,45,104,237,180,138,82,90,12,128,56,86,81,234,73,204,230,46,50,190,94,210,177,147,69,195,226,78,41,9,30,89,118,197,62,0,145,24,162,185,196,65,201,206,105,181,208,76,48,40,172,44,188,113,214,134,109,218,142,32,52,220,4,101,28,13,58,165,8,88,80,68,224,193,159,38,170,72,228,153,92,176,96,126,150,131,121,117,61,18,137,22,85,233,238,114,143,215,15,111,115,235,83,141,83,17,141,11,87,107,107,95,7,223,227,43,43,47,39,192,55,144,55,59,144,167,35,158,158,160,116,203,27,151,151,135,23,207,139,91,91,31,231,219,63,239,63,199,239,3,67,75,75,79,71,51,155,103,103,99,191,211,187,171,171,175,179,186,209,182,149,25,146,133,213,16,108,120,60,205,200,21,157,34,221,202,66,2,119,122,14,49,77,74,161,156,168,33,164,57,178,174,189,229,29,100,102,6,93,148,124,112,232,140,216,194,225,222,173,169,37,104,84,237,138,19,82,12,125,128,86,10,81,73,64,204,46,42,50,94,106,210,147,1,69,226,70,78,9,5,30,118,163,197,114,110,143,115,127,15,15,123,111]},boundingSphere:{center:[0,0,0],radius:144.59226795520192}},rotationCombinations:{"1,2":[90,0,-90],"1,3":[-90,0,-90],"1,4":[-32,18,-58],"1,5":[32,18,58],"1,6":[0,0,180],"1,7":[-180,0,0],"1,8":[-148,-18,-58],"1,9":[-148,-18,122],"1,10":[-90,0,90],"1,11":[90,0,90],"1,12":[-180,0,-180],"2,3":[-180,0,-180],"2,4":[90,0,-90],"2,5":[90,0,90],"2,6":[-122,-90,148],"2,7":[-69,30,21],"2,8":[-90,0,-90],"2,9":[-32,18,122],"2,10":[-180,0,0],"2,11":[0,0,180],"2,12":[-148,54,122],"3,4":[32,18,58],"3,5":[90,0,-90],"3,6":[32,54,-58],"3,7":[-32,-54,122],"3,8":[-148,-18,122],"3,9":[-90,0,-90],"3,10":[-148,18,-122],"3,11":[-180,0,0],"3,12":[-122,-90,148],"4,5":[0,0,180],"4,6":[90,0,90],"4,7":[-90,0,90],"4,8":[-180,0,-180],"4,9":[-180,0,0],"4,10":[148,-54,-58],"4,11":[-122,-90,148],"4,12":[-90,0,-90],"5,6":[-90,0,-90],"5,7":[90,0,-90],"5,8":[-180,0,0],"5,9":[-180,0,-180],"5,10":[-148,-18,122],"5,11":[32,18,58],"5,12":[90,0,90],"6,7":[-180,0,-180],"6,8":[148,18,122],"6,9":[-122,-90,148],"6,10":[90,0,-90],"6,11":[-148,54,-58],"6,12":[-148,-18,-58],"7,8":[32,-18,-58],"7,9":[-69,30,21],"7,10":[148,54,58],"7,11":[-90,0,90],"7,12":[-32,54,58],"8,9":[0,0,180],"8,10":[-148,-18,-58],"8,11":[-148,-54,58],"8,12":[-90,0,90],"9,10":[-31,18,-58],"9,11":[-148,-90,-58],"9,12":[90,0,-90],"10,11":[-180,0,-180],"10,12":[-90,90,-180],"11,12":[148,-54,-58]}},d14:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"55E8EC8E-D9C5-4E75-86AC-BC4F49CF5FEA",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-3.3639726638793945,6.319602012634277,-77.80762481689453,-3.3639726638793945,6.319602012634277,-77.80762481689453,-3.3639726638793945,6.319602012634277,-77.80762481689453,-3.3639726638793945,6.319602012634277,-77.80762481689453,2.563892364501953,84.39848327636719,-5.970834732055664,2.563892364501953,84.39848327636719,-5.970834732055664,2.563892364501953,84.39848327636719,-5.970834732055664,2.563892364501953,84.39848327636719,-5.970834732055664,2.563892364501953,84.39848327636719,-5.970834732055664,75.92582702636719,-2.281585454940796,-17.299819946289062,75.92582702636719,-2.281585454940796,-17.299819946289062,75.92582702636719,-2.281585454940796,-17.299819946289062,75.92582702636719,-2.281585454940796,-17.299819946289062,4.9952239990234375,84.37457275390625,4.497790336608887,4.9952239990234375,84.37457275390625,4.497790336608887,4.9952239990234375,84.37457275390625,4.497790336608887,4.9952239990234375,84.37457275390625,4.497790336608887,4.9952239990234375,84.37457275390625,4.497790336608887,-30.552932739257812,6.355025291442871,71.34111022949219,-30.552932739257812,6.355025291442871,71.34111022949219,-30.552932739257812,6.355025291442871,71.34111022949219,-30.552932739257812,6.355025291442871,71.34111022949219,31.1562557220459,6.31425142288208,71.49166870117188,31.1562557220459,6.31425142288208,71.49166870117188,31.1562557220459,6.31425142288208,71.49166870117188,31.1562557220459,6.31425142288208,71.49166870117188,-74.74581909179688,-6.299898624420166,-20.404645919799805,-74.74581909179688,-6.299898624420166,-20.404645919799805,-74.74581909179688,-6.299898624420166,-20.404645919799805,-74.74581909179688,-6.299898624420166,-20.404645919799805,30.55293846130371,-6.35502815246582,-71.34111022949219,30.55293846130371,-6.35502815246582,-71.34111022949219,30.55293846130371,-6.35502815246582,-71.34111022949219,30.55293846130371,-6.35502815246582,-71.34111022949219,-31.1562557220459,-6.31424617767334,-71.49166870117188,-31.1562557220459,-6.31424617767334,-71.49166870117188,-31.1562557220459,-6.31424617767334,-71.49166870117188,-31.1562557220459,-6.31424617767334,-71.49166870117188,5.657160758972168,-84.42521667480469,-4.448384761810303,5.657160758972168,-84.42521667480469,-4.448384761810303,5.657160758972168,-84.42521667480469,-4.448384761810303,5.657160758972168,-84.42521667480469,-4.448384761810303,5.657160758972168,-84.42521667480469,-4.448384761810303,62.504119873046875,-6.354261875152588,46.30989074707031,62.504119873046875,-6.354261875152588,46.30989074707031,62.504119873046875,-6.354261875152588,46.30989074707031,62.504119873046875,-6.354261875152588,46.30989074707031,7.009031295776367,-84.40763854980469,1.33268404006958,7.009031295776367,-84.40763854980469,1.33268404006958,7.009031295776367,-84.40763854980469,1.33268404006958,7.009031295776367,-84.40763854980469,1.33268404006958,7.009031295776367,-84.40763854980469,1.33268404006958,75.9446792602539,-6.379278182983398,-14.266926765441895,75.9446792602539,-6.379278182983398,-14.266926765441895,75.9446792602539,-6.379278182983398,-14.266926765441895,75.9446792602539,-6.379278182983398,-14.266926765441895,3.3639724254608154,-6.31959867477417,77.8076171875,3.3639724254608154,-6.31959867477417,77.8076171875,3.3639724254608154,-6.31959867477417,77.8076171875,3.3639724254608154,-6.31959867477417,77.8076171875,3.3671836853027344,-84.35977935791016,6.014355659484863,3.3671836853027344,-84.35977935791016,6.014355659484863,3.3671836853027344,-84.35977935791016,6.014355659484863,3.3671836853027344,-84.35977935791016,6.014355659484863,3.3671836853027344,-84.35977935791016,6.014355659484863,34.1295166015625,2.239828109741211,70.8094711303711,34.1295166015625,2.239828109741211,70.8094711303711,34.1295166015625,2.239828109741211,70.8094711303711,34.1295166015625,2.239828109741211,70.8094711303711,-75.9446792602539,6.379278182983398,14.26693058013916,-75.9446792602539,6.379278182983398,14.26693058013916,-75.9446792602539,6.379278182983398,14.26693058013916,-75.9446792602539,6.379278182983398,14.26693058013916,-76.03756713867188,-6.302979946136475,-14.609931945800781,-76.03756713867188,-6.302979946136475,-14.609931945800781,-76.03756713867188,-6.302979946136475,-14.609931945800781,-76.03756713867188,-6.302979946136475,-14.609931945800781,-76.0564956665039,-2.211188554763794,-17.664764404296875,-76.0564956665039,-2.211188554763794,-17.664764404296875,-76.0564956665039,-2.211188554763794,-17.664764404296875,-76.0564956665039,-2.211188554763794,-17.664764404296875,-62.504119873046875,6.354262351989746,-46.30989074707031,-62.504119873046875,6.354262351989746,-46.30989074707031,-62.504119873046875,6.354262351989746,-46.30989074707031,-62.504119873046875,6.354262351989746,-46.30989074707031,-61.1809196472168,2.2734644412994385,-49.07624435424805,-61.1809196472168,2.2734644412994385,-49.07624435424805,-61.1809196472168,2.2734644412994385,-49.07624435424805,-61.1809196472168,2.2734644412994385,-49.07624435424805,-58.829193115234375,6.3529181480407715,-50.964759826660156,-58.829193115234375,6.3529181480407715,-50.964759826660156,-58.829193115234375,6.3529181480407715,-50.964759826660156,-58.829193115234375,6.3529181480407715,-50.964759826660156,-36.493858337402344,-6.314887523651123,-68.91082763671875,-36.493858337402344,-6.314887523651123,-68.91082763671875,-36.493858337402344,-6.314887523651123,-68.91082763671875,-36.493858337402344,-6.314887523651123,-68.91082763671875,58.31211471557617,6.307106018066406,-50.69571304321289,58.31211471557617,6.307106018066406,-50.69571304321289,58.31211471557617,6.307106018066406,-50.69571304321289,58.31211471557617,6.307106018066406,-50.69571304321289,62.011024475097656,6.3075995445251465,-46.048179626464844,62.011024475097656,6.3075995445251465,-46.048179626464844,62.011024475097656,6.3075995445251465,-46.048179626464844,62.011024475097656,6.3075995445251465,-46.048179626464844,74.60848999023438,-6.379120826721191,-20.05154037475586,74.60848999023438,-6.379120826721191,-20.05154037475586,74.60848999023438,-6.379120826721191,-20.05154037475586,74.60848999023438,-6.379120826721191,-20.05154037475586,76.0564956665039,2.2111899852752686,17.664772033691406,76.0564956665039,2.2111899852752686,17.664772033691406,76.0564956665039,2.2111899852752686,17.664772033691406,76.0564956665039,2.2111899852752686,17.664772033691406,74.74581909179688,6.299901008605957,20.404653549194336,74.74581909179688,6.299901008605957,20.404653549194336,74.74581909179688,6.299901008605957,20.404653549194336,74.74581909179688,6.299901008605957,20.404653549194336,36.493858337402344,6.3148884773254395,68.91082763671875,36.493858337402344,6.3148884773254395,68.91082763671875,36.493858337402344,6.3148884773254395,68.91082763671875,36.493858337402344,6.3148884773254395,68.91082763671875,-2.5638914108276367,-84.39848327636719,5.9708333015441895,-2.5638914108276367,-84.39848327636719,5.9708333015441895,-2.5638914108276367,-84.39848327636719,5.9708333015441895,-2.5638914108276367,-84.39848327636719,5.9708333015441895,-2.5638914108276367,-84.39848327636719,5.9708333015441895,.3401651680469513,-84.3684310913086,-7.083171844482422,.3401651680469513,-84.3684310913086,-7.083171844482422,.3401651680469513,-84.3684310913086,-7.083171844482422,.3401651680469513,-84.3684310913086,-7.083171844482422,.3401651680469513,-84.3684310913086,-7.083171844482422,-5.657160758972168,84.42522430419922,4.448385238647461,-5.657160758972168,84.42522430419922,4.448385238647461,-5.657160758972168,84.42522430419922,4.448385238647461,-5.657160758972168,84.42522430419922,4.448385238647461,-5.657160758972168,84.42522430419922,4.448385238647461,-.4000111222267151,2.242583751678467,-78.4876937866211,-.4000111222267151,2.242583751678467,-78.4876937866211,-.4000111222267151,2.242583751678467,-78.4876937866211,-.4000111222267151,2.242583751678467,-78.4876937866211,-34.1295166015625,-2.239827871322632,-70.8094711303711,-34.1295166015625,-2.239827871322632,-70.8094711303711,-34.1295166015625,-2.239827871322632,-70.8094711303711,-34.1295166015625,-2.239827871322632,-70.8094711303711,2.5671069622039795,6.321245193481445,-77.7981948852539,2.5671069622039795,6.321245193481445,-77.7981948852539,2.5671069622039795,6.321245193481445,-77.7981948852539,2.5671069622039795,6.321245193481445,-77.7981948852539,60.691749572753906,2.211258888244629,-48.80388641357422,60.691749572753906,2.211258888244629,-48.80388641357422,60.691749572753906,2.211258888244629,-48.80388641357422,60.691749572753906,2.211258888244629,-48.80388641357422,35.8908576965332,-6.357795238494873,-68.75081634521484,35.8908576965332,-6.357795238494873,-68.75081634521484,35.8908576965332,-6.357795238494873,-68.75081634521484,35.8908576965332,-6.357795238494873,-68.75081634521484,33.49201583862305,-2.268580436706543,-70.65808868408203,33.49201583862305,-2.268580436706543,-70.65808868408203,33.49201583862305,-2.268580436706543,-70.65808868408203,33.49201583862305,-2.268580436706543,-70.65808868408203,76.03756713867188,6.302982807159424,14.609939575195312,76.03756713867188,6.302982807159424,14.609939575195312,76.03756713867188,6.302982807159424,14.609939575195312,76.03756713867188,6.302982807159424,14.609939575195312,61.1809196472168,-2.2734615802764893,49.07624435424805,61.1809196472168,-2.2734615802764893,49.07624435424805,61.1809196472168,-2.2734615802764893,49.07624435424805,61.1809196472168,-2.2734615802764893,49.07624435424805,-58.31211471557617,-6.307102203369141,50.69571304321289,-58.31211471557617,-6.307102203369141,50.69571304321289,-58.31211471557617,-6.307102203369141,50.69571304321289,-58.31211471557617,-6.307102203369141,50.69571304321289,-33.49201202392578,2.268582582473755,70.65808868408203,-33.49201202392578,2.268582582473755,70.65808868408203,-33.49201202392578,2.268582582473755,70.65808868408203,-33.49201202392578,2.268582582473755,70.65808868408203,-35.8908576965332,6.357793807983398,68.75082397460938,-35.8908576965332,6.357793807983398,68.75082397460938,-35.8908576965332,6.357793807983398,68.75082397460938,-35.8908576965332,6.357793807983398,68.75082397460938,-2.567105293273926,-6.321239948272705,77.7981948852539,-2.567105293273926,-6.321239948272705,77.7981948852539,-2.567105293273926,-6.321239948272705,77.7981948852539,-2.567105293273926,-6.321239948272705,77.7981948852539,.40001073479652405,-2.242581844329834,78.4876937866211,.40001073479652405,-2.242581844329834,78.4876937866211,.40001073479652405,-2.242581844329834,78.4876937866211,.40001073479652405,-2.242581844329834,78.4876937866211,-60.69174575805664,-2.211254835128784,48.803897857666016,-60.69174575805664,-2.211254835128784,48.803897857666016,-60.69174575805664,-2.211254835128784,48.803897857666016,-60.69174575805664,-2.211254835128784,48.803897857666016,-74.60848999023438,6.379125595092773,20.051544189453125,-74.60848999023438,6.379125595092773,20.051544189453125,-74.60848999023438,6.379125595092773,20.051544189453125,-74.60848999023438,6.379125595092773,20.051544189453125,-75.92582702636719,2.2815887928009033,17.29982566833496,-75.92582702636719,2.2815887928009033,17.29982566833496,-75.92582702636719,2.2815887928009033,17.29982566833496,-75.92582702636719,2.2815887928009033,17.29982566833496,-62.011024475097656,-6.307600975036621,46.04818344116211,-62.011024475097656,-6.307600975036621,46.04818344116211,-62.011024475097656,-6.307600975036621,46.04818344116211,-62.011024475097656,-6.307600975036621,46.04818344116211,-6.242546081542969,-84.4273681640625,1.3070549964904785,-6.242546081542969,-84.4273681640625,1.3070549964904785,-6.242546081542969,-84.4273681640625,1.3070549964904785,-6.242546081542969,-84.4273681640625,1.3070549964904785,-6.242546081542969,-84.4273681640625,1.3070549964904785,-4.99522066116333,-84.37457275390625,-4.497788429260254,-4.99522066116333,-84.37457275390625,-4.497788429260254,-4.99522066116333,-84.37457275390625,-4.497788429260254,-4.99522066116333,-84.37457275390625,-4.497788429260254,-4.99522066116333,-84.37457275390625,-4.497788429260254,58.829200744628906,-6.3529205322265625,50.964759826660156,58.829200744628906,-6.3529205322265625,50.964759826660156,58.829200744628906,-6.3529205322265625,50.964759826660156,58.829200744628906,-6.3529205322265625,50.964759826660156,-.34016573429107666,84.3684310913086,7.083171844482422,-.34016573429107666,84.3684310913086,7.083171844482422,-.34016573429107666,84.3684310913086,7.083171844482422,-.34016573429107666,84.3684310913086,7.083171844482422,-.34016573429107666,84.3684310913086,7.083171844482422,6.242546081542969,84.4273681640625,-1.307053804397583,6.242546081542969,84.4273681640625,-1.307053804397583,6.242546081542969,84.4273681640625,-1.307053804397583,6.242546081542969,84.4273681640625,-1.307053804397583,6.242546081542969,84.4273681640625,-1.307053804397583,-3.3671834468841553,84.35977935791016,-6.0143561363220215,-3.3671834468841553,84.35977935791016,-6.0143561363220215,-3.3671834468841553,84.35977935791016,-6.0143561363220215,-3.3671834468841553,84.35977935791016,-6.0143561363220215,-3.3671834468841553,84.35977935791016,-6.0143561363220215,-7.009029865264893,84.40763854980469,-1.3326834440231323,-7.009029865264893,84.40763854980469,-1.3326834440231323,-7.009029865264893,84.40763854980469,-1.3326834440231323,-7.009029865264893,84.40763854980469,-1.3326834440231323,-7.009029865264893,84.40763854980469,-1.3326834440231323,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,-.36670994758605957,87.28189849853516,.20025108754634857,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038,.366711288690567,-87.28191375732422,-.2002510279417038],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.28516727685928345,.6296403408050537,-.7226566076278687,-.28516727685928345,.6296403408050537,-.7226566076278687,-.28516727685928345,.6296403408050537,-.7226566076278687,-.28516727685928345,.6296403408050537,-.7226566076278687,.3280982971191406,.6602655649185181,-.6755744218826294,.3280982971191406,.6602655649185181,-.6755744218826294,.3280982971191406,.6602655649185181,-.6755744218826294,.3280982971191406,.6602655649185181,-.6755744218826294,.3280982971191406,.6602655649185181,-.6755744218826294,.7842698693275452,.5933358073234558,-.18131035566329956,.7842698693275452,.5933358073234558,-.18131035566329956,.7842698693275452,.5933358073234558,-.18131035566329956,.7842698693275452,.5933358073234558,-.18131035566329956,.589374303817749,.6605231761932373,.46513107419013977,.589374303817749,.6605231761932373,.46513107419013977,.589374303817749,.6605231761932373,.46513107419013977,.589374303817749,.6605231761932373,.46513107419013977,.589374303817749,.6605231761932373,.46513107419013977,-.059090327471494675,.6272545456886292,.7765694260597229,-.059090327471494675,.6272545456886292,.7765694260597229,-.059090327471494675,.6272545456886292,.7765694260597229,-.059090327471494675,.6272545456886292,.7765694260597229,.05634559690952301,.6280144453048706,.7761592268943787,.05634559690952301,.6280144453048706,.7761592268943787,.05634559690952301,.6280144453048706,.7761592268943787,.05634559690952301,.6280144453048706,.7761592268943787,-.6443470120429993,-.6290098428726196,-.43492940068244934,-.6443470120429993,-.6290098428726196,-.43492940068244934,-.6443470120429993,-.6290098428726196,-.43492940068244934,-.6443470120429993,-.6290098428726196,-.43492940068244934,.05909096822142601,-.6272543668746948,-.7765696048736572,.05909096822142601,-.6272543668746948,-.7765696048736572,.05909096822142601,-.6272543668746948,-.7765696048736572,.05909096822142601,-.6272543668746948,-.7765696048736572,-.05632945895195007,-.6280063986778259,-.7761667966842651,-.05632945895195007,-.6280063986778259,-.7761667966842651,-.05632945895195007,-.6280063986778259,-.7761667966842651,-.05632945895195007,-.6280063986778259,-.7761667966842651,.5910056829452515,-.6553013920783997,-.4704173803329468,.5910056829452515,-.6553013920783997,-.4704173803329468,.5910056829452515,-.6553013920783997,-.4704173803329468,.5910056829452515,-.6553013920783997,-.4704173803329468,.5910056829452515,-.6553013920783997,-.4704173803329468,.7470955848693848,-.6255302429199219,.22485576570034027,.7470955848693848,-.6255302429199219,.22485576570034027,.7470955848693848,-.6255302429199219,.22485576570034027,.7470955848693848,-.6255302429199219,.22485576570034027,.7361034154891968,-.6567224264144897,.16391272842884064,.7361034154891968,-.6567224264144897,.16391272842884064,.7361034154891968,-.6567224264144897,.16391272842884064,.7361034154891968,-.6567224264144897,.16391272842884064,.7361034154891968,-.6567224264144897,.16391272842884064,.7726380228996277,-.6246670484542847,.11323241889476776,.7726380228996277,-.6246670484542847,.11323241889476776,.7726380228996277,-.6246670484542847,.11323241889476776,.7726380228996277,-.6246670484542847,.11323241889476776,.2852247953414917,-.6296125650405884,.7226580381393433,.2852247953414917,-.6296125650405884,.7226580381393433,.2852247953414917,-.6296125650405884,.7226580381393433,.2852247953414917,-.6296125650405884,.7226580381393433,.32667452096939087,-.6607898473739624,.6757517457008362,.32667452096939087,-.6607898473739624,.6757517457008362,.32667452096939087,-.6607898473739624,.6757517457008362,.32667452096939087,-.6607898473739624,.6757517457008362,.32667452096939087,-.6607898473739624,.6757517457008362,.3497964143753052,-.5950561165809631,.7235679030418396,.3497964143753052,-.5950561165809631,.7235679030418396,.3497964143753052,-.5950561165809631,.7235679030418396,.3497964143753052,-.5950561165809631,.7235679030418396,-.7726274132728577,.6246878504753113,-.11318989098072052,-.7726274132728577,.6246878504753113,-.11318989098072052,-.7726274132728577,.6246878504753113,-.11318989098072052,-.7726274132728577,.6246878504753113,-.11318989098072052,-.7692402005195618,-.6276887655258179,.11948297917842865,-.7692402005195618,-.6276887655258179,.11948297917842865,-.7692402005195618,-.6276887655258179,.11948297917842865,-.7692402005195618,-.6276887655258179,.11948297917842865,-.7877770662307739,.5905534625053406,-.17508289217948914,-.7877770662307739,.5905534625053406,-.17508289217948914,-.7877770662307739,.5905534625053406,-.17508289217948914,-.7877770662307739,.5905534625053406,-.17508289217948914,-.7470952868461609,.6255304217338562,-.22485589981079102,-.7470952868461609,.6255304217338562,-.22485589981079102,-.7470952868461609,.6255304217338562,-.22485589981079102,-.7470952868461609,.6255304217338562,-.22485589981079102,-.631263256072998,-.5948466658592224,-.4976588785648346,-.631263256072998,-.5948466658592224,-.4976588785648346,-.631263256072998,-.5948466658592224,-.4976588785648346,-.631263256072998,-.5948466658592224,-.4976588785648346,-.38938289880752563,.6292169094085693,-.6726565957069397,-.38938289880752563,.6292169094085693,-.6726565957069397,-.38938289880752563,.6292169094085693,-.6726565957069397,-.38938289880752563,.6292169094085693,-.6726565957069397,-.5729118585586548,-.6292456388473511,-.5251874923706055,-.5729118585586548,-.6292456388473511,-.5251874923706055,-.5729118585586548,-.6292456388473511,-.5251874923706055,-.5729118585586548,-.6292456388473511,-.5251874923706055,.3904346227645874,.628699541091919,-.6725307703018188,.3904346227645874,.628699541091919,-.6725307703018188,.3904346227645874,.628699541091919,-.6725307703018188,.3904346227645874,.628699541091919,-.6725307703018188,.7437728643417358,.6275497078895569,-.2301807701587677,.7437728643417358,.6275497078895569,-.2301807701587677,.7437728643417358,.6275497078895569,-.2301807701587677,.7437728643417358,.6275497078895569,-.2301807701587677,.6457582712173462,-.6233645677566528,-.4409227967262268,.6457582712173462,-.6233645677566528,-.4409227967262268,.6457582712173462,-.6233645677566528,-.4409227967262268,.6457582712173462,-.6233645677566528,-.4409227967262268,.7877867221832275,-.5905534029006958,.17503942549228668,.7877867221832275,-.5905534029006958,.17503942549228668,.7877867221832275,-.5905534029006958,.17503942549228668,.7877867221832275,-.5905534029006958,.17503942549228668,.6443431377410889,.6290005445480347,.43494871258735657,.6443431377410889,.6290005445480347,.43494871258735657,.6443431377410889,.6290005445480347,.43494871258735657,.6443431377410889,.6290005445480347,.43494871258735657,.5729120969772339,.6292457580566406,.5251871347427368,.5729120969772339,.6292457580566406,.5251871347427368,.5729120969772339,.6292457580566406,.5251871347427368,.5729120969772339,.6292457580566406,.5251871347427368,-.3281112611293793,-.6602649092674255,.6755688190460205,-.3281112611293793,-.6602649092674255,.6755688190460205,-.3281112611293793,-.6602649092674255,.6755688190460205,-.3281112611293793,-.6602649092674255,.6755688190460205,-.3281112611293793,-.6602649092674255,.6755688190460205,.0011704713106155396,-.6591591238975525,-.7520025968551636,.0011704713106155396,-.6591591238975525,-.7520025968551636,.0011704713106155396,-.6591591238975525,-.7520025968551636,.0011704713106155396,-.6591591238975525,-.7520025968551636,.0011704713106155396,-.6591591238975525,-.7520025968551636,-.5910052061080933,.6553022861480713,.47041675448417664,-.5910052061080933,.6553022861480713,.47041675448417664,-.5910052061080933,.6553022861480713,.47041675448417664,-.5910052061080933,.6553022861480713,.47041675448417664,-.5910052061080933,.6553022861480713,.47041675448417664,.0015861615538597107,-.5931890606880188,-.8050615787506104,.0015861615538597107,-.5931890606880188,-.8050615787506104,.0015861615538597107,-.5931890606880188,-.8050615787506104,.0015861615538597107,-.5931890606880188,-.8050615787506104,-.34979522228240967,.5950555801391602,-.7235690355300903,-.34979522228240967,.5950555801391602,-.7235690355300903,-.34979522228240967,.5950555801391602,-.7235690355300903,-.34979522228240967,.5950555801391602,-.7235690355300903,.2873671054840088,.6291413903236389,-.7222195863723755,.2873671054840088,.6291413903236389,-.7222195863723755,.2873671054840088,.6291413903236389,-.7222195863723755,.2873671054840088,.6291413903236389,-.7222195863723755,.6324546933174133,-.5889533758163452,-.5031253695487976,.6324546933174133,-.5889533758163452,-.5031253695487976,.6324546933174133,-.5889533758163452,-.5031253695487976,.6324546933174133,-.5889533758163452,-.5031253695487976,.574481725692749,-.6237778663635254,-.5299734473228455,.574481725692749,-.6237778663635254,-.5299734473228455,.574481725692749,-.6237778663635254,-.5299734473228455,.574481725692749,-.6237778663635254,-.5299734473228455,.35163187980651855,.594671368598938,-.7229945659637451,.35163187980651855,.594671368598938,-.7229945659637451,.35163187980651855,.594671368598938,-.7229945659637451,.35163187980651855,.594671368598938,-.7229945659637451,.7692419290542603,.6276857852935791,-.11948888003826141,.7692419290542603,.6276857852935791,-.11948888003826141,.7692419290542603,.6276857852935791,-.11948888003826141,.7692419290542603,.6276857852935791,-.11948888003826141,.6312867403030396,.5948468446731567,.49762865900993347,.6312867403030396,.5948468446731567,.49762865900993347,.6312867403030396,.5948468446731567,.49762865900993347,.6312867403030396,.5948468446731567,.49762865900993347,-.3904343545436859,-.6286999583244324,.6725306510925293,-.3904343545436859,-.6286999583244324,.6725306510925293,-.3904343545436859,-.6286999583244324,.6725306510925293,-.3904343545436859,-.6286999583244324,.6725306510925293,-.3516600430011749,-.5946711301803589,.7229809761047363,-.3516600430011749,-.5946711301803589,.7229809761047363,-.3516600430011749,-.5946711301803589,.7229809761047363,-.3516600430011749,-.5946711301803589,.7229809761047363,-.5744823813438416,.6237770915031433,.5299737453460693,-.5744823813438416,.6237770915031433,.5299737453460693,-.5744823813438416,.6237770915031433,.5299737453460693,-.5744823813438416,.6237770915031433,.5299737453460693,-.28738611936569214,-.6291320323944092,.722220242023468,-.28738611936569214,-.6291320323944092,.722220242023468,-.28738611936569214,-.6291320323944092,.722220242023468,-.28738611936569214,-.6291320323944092,.722220242023468,-.0015616416931152344,.5931897759437561,.8050611615180969,-.0015616416931152344,.5931897759437561,.8050611615180969,-.0015616416931152344,.5931897759437561,.8050611615180969,-.0015616416931152344,.5931897759437561,.8050611615180969,-.632463812828064,.5889529585838318,.5031142830848694,-.632463812828064,.5889529585838318,.5031142830848694,-.632463812828064,.5889529585838318,.5031142830848694,-.632463812828064,.5889529585838318,.5031142830848694,-.6457580924034119,.6233644485473633,.44092315435409546,-.6457580924034119,.6233644485473633,.44092315435409546,-.6457580924034119,.6233644485473633,.44092315435409546,-.6457580924034119,.6233644485473633,.44092315435409546,-.7842698097229004,-.593335747718811,.18131089210510254,-.7842698097229004,-.593335747718811,.18131089210510254,-.7842698097229004,-.593335747718811,.18131089210510254,-.7842698097229004,-.593335747718811,.18131089210510254,-.7437704205513,-.6275736689567566,.23012343049049377,-.7437704205513,-.6275736689567566,.23012343049049377,-.7437704205513,-.6275736689567566,.23012343049049377,-.7437704205513,-.6275736689567566,.23012343049049377,-.7328628301620483,-.6589818596839905,.16927775740623474,-.7328628301620483,-.6589818596839905,.16927775740623474,-.7328628301620483,-.6589818596839905,.16927775740623474,-.7328628301620483,-.6589818596839905,.16927775740623474,-.7328628301620483,-.6589818596839905,.16927775740623474,-.5893685817718506,-.6605226993560791,-.4651390612125397,-.5893685817718506,-.6605226993560791,-.4651390612125397,-.5893685817718506,-.6605226993560791,-.4651390612125397,-.5893685817718506,-.6605226993560791,-.4651390612125397,-.5893685817718506,-.6605226993560791,-.4651390612125397,.38937872648239136,-.6292127966880798,.6726629734039307,.38937872648239136,-.6292127966880798,.6726629734039307,.38937872648239136,-.6292127966880798,.6726629734039307,.38937872648239136,-.6292127966880798,.6726629734039307,-.0011698007583618164,.6591596007347107,.7520022988319397,-.0011698007583618164,.6591596007347107,.7520022988319397,-.0011698007583618164,.6591596007347107,.7520022988319397,-.0011698007583618164,.6591596007347107,.7520022988319397,-.0011698007583618164,.6591596007347107,.7520022988319397,.7328664064407349,.6589823961257935,-.16926002502441406,.7328664064407349,.6589823961257935,-.16926002502441406,.7328664064407349,.6589823961257935,-.16926002502441406,.7328664064407349,.6589823961257935,-.16926002502441406,.7328664064407349,.6589823961257935,-.16926002502441406,-.3266833424568176,.6607902646064758,-.6757471561431885,-.3266833424568176,.6607902646064758,-.6757471561431885,-.3266833424568176,.6607902646064758,-.6757471561431885,-.3266833424568176,.6607902646064758,-.6757471561431885,-.3266833424568176,.6607902646064758,-.6757471561431885,-.7360942959785461,.6567226648330688,-.16395282745361328,-.7360942959785461,.6567226648330688,-.16395282745361328,-.7360942959785461,.6567226648330688,-.16395282745361328,-.7360942959785461,.6567226648330688,-.16395282745361328,-.7360942959785461,.6567226648330688,-.16395282745361328,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,.0001270859647775069,1,6240241782506928e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20,-.00012663456436712295,-1,-6260263762669638e-20],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.012080706655979156,.01143413782119751,.02038293331861496,.2402452826499939,.07275813817977905,.7014026641845703,.23399420082569122,.044198572635650635,.012080706655979156,.09173142910003662,.09271499514579773,.0920637845993042,.22834762930870056,.033225297927856445,.24569767713546753,.027156472206115723,.8750260472297668,.27947235107421875,.15672194957733154,.03217524290084839,.15672194957733154,.040720343589782715,.21759822964668274,.041023433208465576,.624879777431488,.4702685475349426,.04823240637779236,.03318381309509277,.07462695240974426,.2401202917098999,.1386493444442749,.24023151397705078,.20049551129341125,.03662097454071045,.3756515383720398,.27943485975265503,.04823240637779236,.08685857057571411,.07282328605651855,.45090705156326294,.16252003610134125,.018233835697174072,.2011767327785492,.2402452826499939,.1273123025894165,.01617354154586792,.14694836735725403,.09188961982727051,.17717677354812622,.4513193964958191,.25039011240005493,.08733206987380981,.04823240637779236,.09189057350158691,.05499856173992157,.009189963340759277,.0725666880607605,.9514256715774536,.14694836735725403,.043423593044281006,.07372921705245972,.016311585903167725,.07462692260742188,.08685952425003052,.21925535798072815,.09241074323654175,.4275488257408142,.9517285227775574,.12057686597108841,.09188848733901978,.14611805975437164,.009021878242492676,.22737187147140503,.08733206987380981,.32245123386383057,.9515766501426697,.11080294847488403,.026038765907287598,.12057653814554214,.029400944709777832,.21095037460327148,.2402452826499939,.24711300432682037,.0928187370300293,.6267523169517517,.7800135612487793,.09018958359956741,.008709728717803955,.12057658284902573,.04346507787704468,.1830982267856598,.09213989973068237,.9277936816215515,.951744794845581,.10317572951316833,.0293390154838562,.1393822878599167,.032990872859954834,.1830982267856598,.2402452826499939,.255423367023468,.09287703037261963,.8746025562286377,.7797321677207947,.16253256797790527,.03631782531738281,.16336379945278168,.04333001375198364,.2554234266281128,.2402452826499939,.8222063779830933,.9510524272918701,.03845880925655365,.09173208475112915,.10992515832185745,.01626521348953247,.24376779794692993,.04419851303100586,.42733103036880493,.701709508895874,.03845880925655365,.026774346828460693,.03845880925655365,.24016445875167847,.14694836735725403,.036410391330718994,.174796923995018,.24008393287658691,.37455111742019653,.5295032858848572,.03845880925655365,.08928269147872925,.1273123025894165,.009048819541931152,.24376779794692993,.08995997905731201,.37507760524749756,.7204967141151428,.17645640671253204,.043330609798431396,.21771717071533203,.016403138637542725,.22902902960777283,.2402452826499939,.6778356432914734,.20166105031967163,.04823240637779236,.014015018939971924,.056542813777923584,.09192115068435669,.1830982267856598,.08697599172592163,.9278727769851685,.7018176913261414,.05499856173992157,.0163193941116333,.1403140127658844,.040812790393829346,.17645637691020966,.08961743116378784,.6247076988220215,.22033452987670898,.140313982963562,.08676266670227051,.15672211349010468,.09213924407958984,.18057595193386078,.017045259475708008,.5721643567085266,.201244056224823,.012080706655979156,.08928197622299194,.12499088048934937,.9704728722572327,.14694836735725403,.08941596746444702,.17478692531585693,.012857019901275635,.018697038292884827,.08670186996459961,.16502328217029572,.09206610918045044,.17724192142486572,.7014986276626587,.18057595193386078,.008743643760681152,.012080706655979156,.04335254430770874,.12887565791606903,.09186422824859619,.1393822878599167,.013869822025299072,.1774333119392395,.9517008662223816,.09104300290346146,.04336506128311157,.09271499514579773,.2402452826499939,.19964106380939484,.009263157844543457,.8223589658737183,.45139479637145996,.08440056443214417,.24022287130355835,.1928718537092209,.014091014862060547,.21759822964668274,.08731919527053833,.6777778267860413,.45166242122650146,.16253256797790527,.02800750732421875,.21095037460327148,.04365772008895874,.24711309373378754,.24022060632705688,.6778541803359985,.951484739780426,.12057655304670334,.08941489458084106,.16336379945278168,.08961677551269531,.2351137399673462,.009227573871612549,.8750938177108765,.9702678322792053,.07462695240974426,.0918915867805481,.12721094489097595,.0868040919303894,.2351137399673462,.0163571834564209,.4274844527244568,.45174920558929443,.031842514872550964,.08667910099029541,.12057653814554214,.011325597763061523,.13864925503730774,.09186530113220215,.3225155472755432,.45152556896209717,.012080706655979156,.03307300806045532,.030156202614307404,.026774346828460693,.030156515538692474,.2402452826499939,.10248857736587524,.092063307762146,.6261616945266724,.5296865701675415,.12057653814554214,.2402452826499939,.1281311959028244,.025947153568267822,.21095037460327148,.029455959796905518,.21925535798072815,.2400715947151184,.3766971230506897,.7794159054756165,.07462692260742188,.02608513832092285,.1928718537092209,.09240931272506714,.23733942210674286,.0928187370300293,.24569767713546753,.007925331592559814,.875484049320221,.02962595224380493,.01882428675889969,.009150922298431396,.07462692260742188,.04079252481460571,.22737182676792145,.04158461093902588,.37476611137390137,.9705840945243835,.018697038292884827,.0407489538192749,.12485933303833008,.7203324437141418,.14611805975437164,.016146481037139893,.23399420082569122,.08995997905731201,.012080781161785126,.24023497104644775,.01882428675889969,.01627671718597412,.06800204515457153,.04341691732406616,.9276410341262817,.4518194794654846,.08440056443214417,.04074656963348389,.19964106380939484,.01640307903289795,.21095037460327148,.08995997905731201,.6247829794883728,.9699863791465759,.06695697456598282,.011504054069519043,.08440056443214417,.08688396215438843,.21095052361488342,.09248226881027222,.5721458196640015,.9508618116378784,.06800201535224915,.0894421935081482,.07372921705245972,.009201109409332275,.09104300290346146,.08953815698623657,.8750190138816833,.47052764892578125,.06631660461425781,.09192222356796265,.15672194957733154,.08697539567947388,.22834759950637817,.011532008647918701,.5722221732139587,.4511365294456482,.03184248507022858,.04074972867965698,.08440056443214417,.012897908687591553,.12721094489097595,.04081183671951294,.374919056892395,.47056519985198975,.030156202614307404,.014692902565002441,.10248860716819763,.2402452826499939,.10416048020124435,.043364644050598145,.6775245070457458,.7015867233276367,.054857321083545685,.08944112062454224,.10416045039892197,.08953768014907837,.15672194957733154,.014117896556854248,.6248504519462585,.7203134894371033,.11080294847488403,.086883544921875,.16252003610134125,.009928703308105469,.19287201762199402,.24017375707626343,.9280667304992676,.20186400413513184,.030156604945659637,.09174239635467529,.054857321083545685,.043415963649749756,.10317572951316833,.011430740356445312,.5724754929542542,.7012842297554016,.04823240637779236,.04079157114028931,.10992515832185745,.009145617485046387,.12513083219528198,.4699118137359619,.25039011240005493,.04158461093902588,.03691284358501434,.017000675201416016,.11080294847488403,.04074627161026001,.1928718537092209,.041023433208465576,.8749712705612183,.22037410736083984,.1928718537092209,.0873255729675293,.21095037460327148,.011578857898712158,.23733942210674286,.2402205467224121,.8219332098960876,.20110386610031128,.1830982267856598,.040720999240875244,.19951972365379333,.08995997905731201,.21771717071533203,.009267032146453857,.8749260902404785,.7204409241676331,.03691284358501434,.009847462177276611,.11080294847488403,.24022287130355835,.19951972365379333,.04366427659988403,.8221272826194763,.7012577056884766,.01972394436597824,.03634655475616455,.056542813777923584,.2402452826499939,.11080294847488403,.09198707342147827,.18309825658798218,.026818931102752686,.8757262825965881,.5295590758323669,.04823248088359833,.2401202917098999,.1251671314239502,.7795271873474121,.12887565791606903,.24023151397705078,.17478697001934052,.026818931102752686,.21857404708862305,.026176750659942627,.03845880925655365,.04332977533340454,.09018958359956741,.01701122522354126,.1747969537973404,.09206688404083252,.32266902923583984,.7014552354812622,.06695697456598282,.02927464246749878,.1242377758026123,.2800881862640381,.14694832265377045,.2402452826499939,.1928718090057373,.03334176540374756,.2011767327785492,.09258311986923218,.05590075999498367,.036389052867889404,.06631642580032349,.2402452826499939,.08440063893795013,.09198743104934692,.25401246547698975,.027156472206115723,.6260393857955933,.2797313928604126,.02038293331861496,.09181225299835205,.09270339459180832,.026784837245941162,.12602335214614868,.5296675562858582,.16502328217029572,.24008393287658691,.2359241247177124,.03662097454071045,.08440056443214417,.026784837245941162,.15672194957733154,.2402452826499939,.22902897000312805,.09287703037261963,.25400829315185547,.007925331592559814,.6272023916244507,.02966541051864624,.05590075999498367,.026093125343322754,.07462692260742188,.03639000654220581,.08838308602571487,.03634411096572876,.20049551129341125,.026176750659942627,.2359241247177124,.026130735874176025,.24978983402252197,.01738286018371582,.2499590814113617,.03662097454071045,.01972394436597824,.0260503888130188,.034168489277362823,.036347150802612305,.11080294847488403,.03634369373321533,.1281311959028244,.03640943765640259,.14694836735725403,.02592015266418457,.1791275292634964,.03631848096847534,.21857404708862305,.03662097454071045],normalized:!1}},index:{type:"Uint16Array",array:[96,28,86,33,37,139,108,155,151,195,179,135,120,116,17,171,183,175,84,72,237,2,91,230,100,147,8,163,104,227,46,55,112,170,176,189,19,24,219,101,5,225,106,103,11,83,92,88,45,63,49,192,202,190,209,74,26,182,57,185,165,215,43,93,89,140,194,235,71,3,36,143,168,188,200,142,35,95,75,69,79,228,144,1,31,146,156,107,50,41,44,114,166,136,0,145,97,153,158,162,115,111,124,201,206,14,160,224,82,231,90,30,157,152,70,198,193,102,149,99,214,117,65,34,211,94,53,161,110,9,52,105,73,77,27,58,25,187,66,118,22,154,129,32,81,29,78,222,178,21,15,23,119,18,181,184,76,203,199,180,61,56,59,217,68,20,177,174,6,232,242,229,233,240,236,134,243,131,218,239,221,16,241,13,223,238,226,7,244,60,122,246,121,204,245,207,212,250,213,128,251,127,39,248,38,47,247,48,62,249,96,210,28,33,130,37,108,42,155,195,191,179,120,167,116,171,125,183,84,80,72,2,141,91,100,159,147,163,12,104,46,51,55,170,173,176,19,186,24,101,98,5,106,150,103,45,216,63,192,197,202,209,205,74,93,85,89,194,133,235,3,138,36,75,196,69,228,4,144,31,137,146,107,54,50,44,109,114,97,148,153,124,169,201,14,113,160,82,234,231,214,164,117,34,126,211,53,10,161,58,67,25,154,40,129,81,87,29,222,132,178,15,220,23,18,172,181,76,208,203,180,123,61,59,64,217]},boundingSphere:{center:[0,-762939453125e-17,0],radius:139.86793680588863}},rotationCombinations:{"1,2":[1,-51,0],"1,3":[-1,-103,-1],"1,4":[0,-155,0],"1,5":[0,154,0],"1,6":[2,103,-2],"1,7":[0,52,1],"1,8":[2,-77,-178],"1,9":[180,-51,-1],"1,10":[-180,0,0],"1,11":[-179,51,-1],"1,12":[-1,77,-179],"1,13":[0,26,180],"1,14":[1,-26,-180],"2,3":[0,-52,0],"2,4":[-2,-103,-2],"2,5":[0,-154,0],"2,6":[0,154,0],"2,7":[2,103,-2],"2,8":[0,-26,-180],"2,9":[2,-77,-178],"2,10":[180,-52,-1],"2,11":[-180,0,0],"2,12":[-180,51,-1],"2,13":[-1,77,-179],"2,14":[0,26,180],"3,4":[1,-52,1],"3,5":[-2,-103,-2],"3,6":[0,-154,0],"3,7":[0,155,-1],"3,8":[0,26,-180],"3,9":[0,-26,-179],"3,10":[1,-77,-179],"3,11":[180,-52,0],"3,12":[180,0,-1],"3,13":[-180,51,-1],"3,14":[0,77,180],"4,5":[0,-51,0],"4,6":[0,-103,1],"4,7":[0,-154,0],"4,8":[1,77,179],"4,9":[0,26,-180],"4,10":[0,-25,-180],"4,11":[-1,-77,180],"4,12":[180,-52,0],"4,13":[180,0,0],"4,14":[179,51,0],"5,6":[0,-51,0],"5,7":[1,-103,1],"5,8":[180,51,0],"5,9":[1,77,179],"5,10":[0,26,-180],"5,11":[0,-25,180],"5,12":[0,-77,180],"5,13":[180,-52,0],"5,14":[180,0,0],"6,7":[0,-51,-1],"6,8":[180,0,0],"6,9":[180,52,1],"6,10":[1,77,180],"6,11":[0,26,180],"6,12":[0,-26,180],"6,13":[0,-77,179],"6,14":[180,-51,0],"7,8":[180,-51,-1],"7,9":[-180,0,0],"7,10":[-180,51,0],"7,11":[-1,77,-179],"7,12":[0,26,180],"7,13":[0,-26,180],"7,14":[2,-77,-178],"8,9":[0,51,1],"8,10":[1,103,0],"8,11":[0,154,0],"8,12":[0,-155,0],"8,13":[0,-103,-1],"8,14":[0,-52,0],"9,10":[0,51,0],"9,11":[-1,103,1],"9,12":[0,154,0],"9,13":[0,-154,0],"9,14":[2,-103,2],"10,11":[0,51,0],"10,12":[0,103,0],"10,13":[0,154,0],"10,14":[0,-154,0],"11,12":[0,52,0],"11,13":[0,103,-1],"11,14":[0,155,0],"12,13":[0,52,0],"12,14":[3,103,-3],"13,14":[-1,51,1]}},d16:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"C14C9443-AE98-4545-B8F9-EEF68D99E5CB",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[1.9203956127166748,-75.6114730834961,4.636213302612305,1.9203956127166748,-75.6114730834961,4.636213302612305,1.9203956127166748,-75.6114730834961,4.636213302612305,1.9203956127166748,-75.6114730834961,4.636213302612305,1.9203956127166748,-75.6114730834961,4.636213302612305,1.9203956127166748,-75.6114730834961,4.636213302612305,-1.9200903177261353,1.4698024988174438,78.77789306640625,-1.9200903177261353,1.4698024988174438,78.77789306640625,-1.9200903177261353,1.4698024988174438,78.77789306640625,-1.9200903177261353,1.4698024988174438,78.77789306640625,-1.9200903177261353,1.4698024988174438,78.77789306640625,57.06234359741211,-1.4698084592819214,54.34610366821289,57.06234359741211,-1.4698084592819214,54.34610366821289,57.06234359741211,-1.4698084592819214,54.34610366821289,57.06234359741211,-1.4698084592819214,54.34610366821289,57.06234359741211,-1.4698084592819214,54.34610366821289,-1.9204055070877075,-75.6114730834961,-4.63621187210083,-1.9204055070877075,-75.6114730834961,-4.63621187210083,-1.9204055070877075,-75.6114730834961,-4.63621187210083,-1.9204055070877075,-75.6114730834961,-4.63621187210083,-1.9204055070877075,-75.6114730834961,-4.63621187210083,54.34610366821289,1.4697924852371216,-57.06234359741211,54.34610366821289,1.4697924852371216,-57.06234359741211,54.34610366821289,1.4697924852371216,-57.06234359741211,54.34610366821289,1.4697924852371216,-57.06234359741211,54.34610366821289,1.4697924852371216,-57.06234359741211,1.9206753969192505,1.4697996377944946,78.77787780761719,1.9206753969192505,1.4697996377944946,78.77787780761719,1.9206753969192505,1.4697996377944946,78.77787780761719,1.9206753969192505,1.4697996377944946,78.77787780761719,1.9206753969192505,1.4697996377944946,78.77787780761719,1.9206753969192505,1.4697996377944946,78.77787780761719,-4.6361985206604,75.6114730834961,1.9204007387161255,-4.6361985206604,75.6114730834961,1.9204007387161255,-4.6361985206604,75.6114730834961,1.9204007387161255,-4.6361985206604,75.6114730834961,1.9204007387161255,-4.6361985206604,75.6114730834961,1.9204007387161255,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,-57.06234359741211,1.469807744026184,-54.34610366821289,78.77787780761719,-1.4698125123977661,-1.9206798076629639,78.77787780761719,-1.4698125123977661,-1.9206798076629639,78.77787780761719,-1.4698125123977661,-1.9206798076629639,78.77787780761719,-1.4698125123977661,-1.9206798076629639,78.77787780761719,-1.4698125123977661,-1.9206798076629639,78.77787780761719,-1.4698125123977661,-1.9206798076629639,4.6362080574035645,-75.6114730834961,-1.9204015731811523,4.6362080574035645,-75.6114730834961,-1.9204015731811523,4.6362080574035645,-75.6114730834961,-1.9204015731811523,4.6362080574035645,-75.6114730834961,-1.9204015731811523,4.6362080574035645,-75.6114730834961,-1.9204015731811523,4.6362080574035645,-75.6114730834961,-1.9204015731811523,57.06194305419922,-1.4698078632354736,-54.346519470214844,57.06194305419922,-1.4698078632354736,-54.346519470214844,57.06194305419922,-1.4698078632354736,-54.346519470214844,57.06194305419922,-1.4698078632354736,-54.346519470214844,1.9201017618179321,-1.4698004722595215,-78.77789306640625,1.9201017618179321,-1.4698004722595215,-78.77789306640625,1.9201017618179321,-1.4698004722595215,-78.77789306640625,1.9201017618179321,-1.4698004722595215,-78.77789306640625,1.9201017618179321,-1.4698004722595215,-78.77789306640625,54.34610366821289,-1.4698083400726318,-57.06234359741211,54.34610366821289,-1.4698083400726318,-57.06234359741211,54.34610366821289,-1.4698083400726318,-57.06234359741211,54.34610366821289,-1.4698083400726318,-57.06234359741211,54.34610366821289,-1.4698083400726318,-57.06234359741211,54.34610366821289,-1.4698083400726318,-57.06234359741211,57.06194305419922,1.469793438911438,-54.346519470214844,57.06194305419922,1.469793438911438,-54.346519470214844,57.06194305419922,1.469793438911438,-54.346519470214844,57.06194305419922,1.469793438911438,-54.346519470214844,57.06194305419922,1.469793438911438,-54.346519470214844,78.77787780761719,1.4697893857955933,-1.920678734779358,78.77787780761719,1.4697893857955933,-1.920678734779358,78.77787780761719,1.4697893857955933,-1.920678734779358,78.77787780761719,1.4697893857955933,-1.920678734779358,78.77787780761719,1.4697893857955933,-1.920678734779358,-54.34610366821289,1.469807505607605,57.06234359741211,-54.34610366821289,1.469807505607605,57.06234359741211,-54.34610366821289,1.469807505607605,57.06234359741211,-54.34610366821289,1.469807505607605,57.06234359741211,-57.06194305419922,-1.469792366027832,54.346519470214844,-57.06194305419922,-1.469792366027832,54.346519470214844,-57.06194305419922,-1.469792366027832,54.346519470214844,-57.06194305419922,-1.469792366027832,54.346519470214844,-78.77787780761719,1.4698104858398438,1.920676589012146,-78.77787780761719,1.4698104858398438,1.920676589012146,-78.77787780761719,1.4698104858398438,1.920676589012146,-78.77787780761719,1.4698104858398438,1.920676589012146,-78.77787780761719,1.4698104858398438,1.920676589012146,-78.77787780761719,1.4698104858398438,1.920676589012146,-57.06234359741211,-1.469793438911438,-54.34610366821289,-57.06234359741211,-1.469793438911438,-54.34610366821289,-57.06234359741211,-1.469793438911438,-54.34610366821289,-57.06234359741211,-1.469793438911438,-54.34610366821289,4.6362409591674805,75.6114730834961,1.920365810394287,4.6362409591674805,75.6114730834961,1.920365810394287,4.6362409591674805,75.6114730834961,1.920365810394287,4.6362409591674805,75.6114730834961,1.920365810394287,4.6362409591674805,75.6114730834961,1.920365810394287,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,-1.9203522205352783,75.6114730834961,4.636227607727051,1.9204154014587402,75.61146545410156,4.636213302612305,1.9204154014587402,75.61146545410156,4.636213302612305,1.9204154014587402,75.61146545410156,4.636213302612305,1.9204154014587402,75.61146545410156,4.636213302612305,1.9204154014587402,75.61146545410156,4.636213302612305,1.9204154014587402,75.61146545410156,4.636213302612305,-1.9203720092773438,-75.6114730834961,4.636226177215576,-1.9203720092773438,-75.6114730834961,4.636226177215576,-1.9203720092773438,-75.6114730834961,4.636226177215576,-1.9203720092773438,-75.6114730834961,4.636226177215576,-1.9203720092773438,-75.6114730834961,4.636226177215576,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636218547821045,-75.61146545410156,1.920400619506836,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-4.636231899261475,-75.61146545410156,-1.9203662872314453,-54.34610366821289,-1.4697926044464111,57.06234359741211,-54.34610366821289,-1.4697926044464111,57.06234359741211,-54.34610366821289,-1.4697926044464111,57.06234359741211,-54.34610366821289,-1.4697926044464111,57.06234359741211,-54.34610366821289,-1.4697926044464111,57.06234359741211,-54.34610366821289,-1.4697926044464111,57.06234359741211,-57.06194305419922,1.4698082208633423,54.346519470214844,-57.06194305419922,1.4698082208633423,54.346519470214844,-57.06194305419922,1.4698082208633423,54.346519470214844,-57.06194305419922,1.4698082208633423,54.346519470214844,-57.06194305419922,1.4698082208633423,54.346519470214844,-57.06194305419922,1.4698082208633423,54.346519470214844,-1.9206644296646118,-1.469801664352417,-78.77787780761719,-1.9206644296646118,-1.469801664352417,-78.77787780761719,-1.9206644296646118,-1.469801664352417,-78.77787780761719,-1.9206644296646118,-1.469801664352417,-78.77787780761719,-1.9206644296646118,-1.469801664352417,-78.77787780761719,-1.9206644296646118,-1.469801664352417,-78.77787780761719,78.77789306640625,1.469791293144226,1.9200873374938965,78.77789306640625,1.469791293144226,1.9200873374938965,78.77789306640625,1.469791293144226,1.9200873374938965,78.77789306640625,1.469791293144226,1.9200873374938965,78.77789306640625,1.469791293144226,1.9200873374938965,78.77789306640625,1.469791293144226,1.9200873374938965,57.06234359741211,1.4697922468185425,54.34610366821289,57.06234359741211,1.4697922468185425,54.34610366821289,57.06234359741211,1.4697922468185425,54.34610366821289,57.06234359741211,1.4697922468185425,54.34610366821289,57.06234359741211,1.4697922468185425,54.34610366821289,78.77789306640625,-1.4698106050491333,1.9200865030288696,78.77789306640625,-1.4698106050491333,1.9200865030288696,78.77789306640625,-1.4698106050491333,1.9200865030288696,78.77789306640625,-1.4698106050491333,1.9200865030288696,78.77789306640625,-1.4698106050491333,1.9200865030288696,54.346519470214844,-1.4698073863983154,57.06194305419922,54.346519470214844,-1.4698073863983154,57.06194305419922,54.346519470214844,-1.4698073863983154,57.06194305419922,54.346519470214844,-1.4698073863983154,57.06194305419922,54.346519470214844,-1.4698073863983154,57.06194305419922,54.346519470214844,1.4697927236557007,57.06194305419922,54.346519470214844,1.4697927236557007,57.06194305419922,54.346519470214844,1.4697927236557007,57.06194305419922,54.346519470214844,1.4697927236557007,57.06194305419922,54.346519470214844,1.4697927236557007,57.06194305419922,-78.77789306640625,1.469812273979187,-1.920089602470398,-78.77789306640625,1.469812273979187,-1.920089602470398,-78.77789306640625,1.469812273979187,-1.920089602470398,-78.77789306640625,1.469812273979187,-1.920089602470398,-4.636211395263672,75.6114730834961,-1.920365810394287,-4.636211395263672,75.6114730834961,-1.920365810394287,-4.636211395263672,75.6114730834961,-1.920365810394287,-4.636211395263672,75.6114730834961,-1.920365810394287,-4.636211395263672,75.6114730834961,-1.920365810394287,-4.636211395263672,75.6114730834961,-1.920365810394287,-54.346519470214844,1.4698083400726318,-57.06194305419922,-54.346519470214844,1.4698083400726318,-57.06194305419922,-54.346519470214844,1.4698083400726318,-57.06194305419922,-54.346519470214844,1.4698083400726318,-57.06194305419922,-54.346519470214844,1.4698083400726318,-57.06194305419922,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.9206633567810059,1.4698004722595215,-78.77787780761719,-1.920385479927063,75.6114730834961,-4.636212348937988,-1.920385479927063,75.6114730834961,-4.636212348937988,-1.920385479927063,75.6114730834961,-4.636212348937988,-1.920385479927063,75.6114730834961,-4.636212348937988,-1.920385479927063,75.6114730834961,-4.636212348937988,-1.920385479927063,75.6114730834961,-4.636212348937988,1.9201031923294067,1.469801664352417,-78.77789306640625,1.9201031923294067,1.469801664352417,-78.77789306640625,1.9201031923294067,1.469801664352417,-78.77789306640625,1.9201031923294067,1.469801664352417,-78.77789306640625,1.9201031923294067,1.469801664352417,-78.77789306640625,1.9203814268112183,75.61146545410156,-4.636227130889893,1.9203814268112183,75.61146545410156,-4.636227130889893,1.9203814268112183,75.61146545410156,-4.636227130889893,1.9203814268112183,75.61146545410156,-4.636227130889893,1.9203814268112183,75.61146545410156,-4.636227130889893,1.9203814268112183,75.61146545410156,-4.636227130889893,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,4.636227607727051,75.61146545410156,-1.9204010963439941,1.9203611612319946,-75.6114730834961,-4.636227130889893,1.9203611612319946,-75.6114730834961,-4.636227130889893,1.9203611612319946,-75.6114730834961,-4.636227130889893,1.9203611612319946,-75.6114730834961,-4.636227130889893,1.9203611612319946,-75.6114730834961,-4.636227130889893,1.9203611612319946,-75.6114730834961,-4.636227130889893,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,4.636220455169678,-75.6114730834961,1.9203660488128662,-1.9200901985168457,-1.4697996377944946,78.77789306640625,-1.9200901985168457,-1.4697996377944946,78.77789306640625,-1.9200901985168457,-1.4697996377944946,78.77789306640625,-1.9200901985168457,-1.4697996377944946,78.77789306640625,-1.9200901985168457,-1.4697996377944946,78.77789306640625,-1.9200901985168457,-1.4697996377944946,78.77789306640625,1.9206759929656982,-1.4698023796081543,78.77787780761719,1.9206759929656982,-1.4698023796081543,78.77787780761719,1.9206759929656982,-1.4698023796081543,78.77787780761719,1.9206759929656982,-1.4698023796081543,78.77787780761719,1.9206759929656982,-1.4698023796081543,78.77787780761719,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77789306640625,-1.4697893857955933,-1.9200888872146606,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-78.77787780761719,-1.4697915315628052,1.9206773042678833,-54.346519470214844,-1.4697924852371216,-57.06194305419922,-54.346519470214844,-1.4697924852371216,-57.06194305419922,-54.346519470214844,-1.4697924852371216,-57.06194305419922,-54.346519470214844,-1.4697924852371216,-57.06194305419922,-54.346519470214844,-1.4697924852371216,-57.06194305419922,-54.346519470214844,-1.4697924852371216,-57.06194305419922,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,1482796960772248e-20,77.15787506103516,4.608693302543543e-7,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8,-5149714979779674e-21,-77.15787506103516,8.015119590254471e-8],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[.276015043258667,-.6926735639572144,.6663474440574646,.27601727843284607,-.6926627159118652,.6663578748703003,.2760189175605774,-.692660391330719,.6663596630096436,.2760222256183624,-.6926570534706116,.6663616299629211,.276040256023407,-.6926739811897278,.6663366556167603,.276040256023407,-.6926739811897278,.6663366556167603,-.25681689381599426,.6585057377815247,.707400381565094,-.25677764415740967,.6585237979888916,.7073978781700134,-.25676974654197693,.6585195064544678,.7074047327041626,-.25676843523979187,.658514142036438,.7074101567268372,-.25676360726356506,.6585231423377991,.7074034810066223,.6817693710327148,-.6585230231285095,.3186502456665039,.6817746758460999,-.6585193276405334,.31864672899246216,.6817750930786133,-.6585239171981812,.3186362087726593,.6817806363105774,-.6585127711296082,.3186471462249756,.6818035244941711,-.6585102081298828,.3186035752296448,-.27603888511657715,-.6926746368408203,-.6663365960121155,-.27603888511657715,-.6926746368408203,-.6663365960121155,-.2760240435600281,-.6926567554473877,-.6663613319396973,-.27601906657218933,-.6926603317260742,-.6663596034049988,-.276016503572464,-.6926576495170593,-.6663634777069092,.31860223412513733,.6585102677345276,-.6818041205406189,.31864118576049805,.6585193872451782,-.6817771792411804,.31864672899246216,.6585192680358887,-.6817746162414551,.31865164637565613,.6585074067115784,-.6817838549613953,.3186781108379364,.6585215926170349,-.6817577481269836,.2567409873008728,.6585215926170349,.7074131965637207,.2567734122276306,.6585090756416321,.7074129581451416,.2567753195762634,.6585192680358887,.7074028849601746,.2567766308784485,.6585201025009155,.7074016332626343,.25684815645217896,.6585031747817993,.7073915004730225,.2568749189376831,.6584857106208801,.707397997379303,-.6663634181022644,.6926576495170593,.2760165333747864,-.6663627028465271,.6926561594009399,.27602237462997437,-.6663594245910645,.6926605105400085,.27601903676986694,-.666336178779602,.6926746368408203,.2760397791862488,-.666336178779602,.6926746368408203,.2760397791862488,-.6818409562110901,.6584908962249756,-.3185632526874542,-.6818210482597351,.6585003733634949,-.3185865879058838,-.6817838549613953,.6585077047348022,-.3186509609222412,-.6817764043807983,.6585201025009155,-.3186413049697876,-.6817750930786133,.6585239171981812,-.31863611936569214,-.6817746162414551,.6585193872451782,-.3186466097831726,-.6817693710327148,.6585230827331543,-.3186500072479248,.7073933482170105,-.6585105061531067,-.256823867559433,.7073962092399597,-.6585232615470886,-.2567831575870514,.7074015736579895,-.6585202813148499,-.2567760646343231,.7074017524719238,-.6585232019424438,-.25676846504211426,.707402765750885,-.658519446849823,-.25677525997161865,.7074130177497864,-.6585090756416321,-.2567734122276306,.6663360595703125,-.6926746964454651,-.27603980898857117,.6663360595703125,-.6926746964454651,-.27603980898857117,.6663508415222168,-.6926715970039368,-.276012122631073,.6663575768470764,-.6926620602607727,-.27601906657218933,.6663594841957092,-.6926604509353638,-.2760190963745117,.6663633584976196,-.6926577091217041,-.27601656317710876,.6817554831504822,-.6585215926170349,-.31868305802345276,.6817722320556641,-.6585193276405334,-.3186517655849457,.6817790865898132,-.6585125923156738,-.3186511695384979,.6818022131919861,-.6585102677345276,-.3186061382293701,.2567366063594818,-.65851891040802,-.7074173092842102,.2567683160305023,-.6585140228271484,-.7074102163314819,.2567698359489441,-.6585193872451782,-.7074047923088074,.25684165954589844,-.6584954261779785,-.7074009776115417,.25686919689178467,-.6584891676902771,-.7073968052864075,.3186025023460388,-.6585103273391724,-.6818039417266846,.3186361789703369,-.6585239768028259,-.6817750930786133,.3186422288417816,-.6585192084312439,-.6817768216133118,.31864655017852783,-.6585193276405334,-.6817747354507446,.3186500072479248,-.6585085988044739,-.6817831993103027,.3186507225036621,-.6585209369659424,-.6817711591720581,.6817664504051208,.6585237383842468,-.31865495443344116,.6817724108695984,.6585192084312439,-.3186517655849457,.6817728281021118,.6585238575935364,-.31864115595817566,.6817781925201416,.6585131287574768,-.31865185499191284,.681801974773407,.6585103869438171,-.31860649585723877,.7073934674263,.6585009098052979,-.25684863328933716,.707394540309906,.6584897637367249,-.2568739354610443,.7074029445648193,.6585192680358887,-.25677525997161865,.70740807056427,.6585136651992798,-.2567750811576843,.707412600517273,.6585222482681274,-.2567406892776489,-.318678081035614,.6585216522216797,.6817576885223389,-.3186471462249756,.6585129499435425,.6817804574966431,-.3186464309692383,.658519446849823,.6817746758460999,-.31860098242759705,.6585105657577515,.681804358959198,-.6818021535873413,-.6585102677345276,.3186064064502716,-.6817792654037476,-.6585121750831604,.3186511993408203,-.6817723512649536,-.6585192680358887,.31865155696868896,-.6817554831504822,-.6585215926170349,.31868308782577515,-.7074131965637207,.6585215926170349,.2567409873008728,-.7074130773544312,.6585090756416321,.2567734122276306,-.7074027061462402,.6585195064544678,.2567752003669739,-.7074015140533447,.6585204005241394,.25677624344825745,-.7073948979377747,.6584895253181458,.25687336921691895,-.7073922157287598,.6585012078285217,.25685107707977295,-.681803286075592,-.6585100293159485,-.3186042904853821,-.681780993938446,-.6585121750831604,-.3186477720737457,-.6817747354507446,-.6585192084312439,-.31864655017852783,-.6817577481269836,-.6585215926170349,-.3186781406402588,.6663422584533691,.6926707029342651,.27603498101234436,.6663422584533691,.6926707029342651,.27603498101234436,.6663618087768555,.6926602721214294,.27601414918899536,.6663632988929749,.6926569938659668,.27601855993270874,.6663657426834106,.6926578283309937,.27601078152656555,-.276034414768219,.6926738619804382,.666339099407196,-.276034414768219,.6926738619804382,.666339099407196,-.27601510286331177,.6926615834236145,.6663600206375122,-.27601391077041626,.6926605701446533,.6663616299629211,-.2760116159915924,.6926630735397339,.6663599014282227,-.2760094106197357,.6926736831665039,.6663497686386108,-.2760079801082611,.6926721930503845,.666351854801178,.2760111689567566,.6926732659339905,.6663495302200317,.27601638436317444,.6926575303077698,.666363537311554,.276017963886261,.692661464214325,.6663587093353271,.2760191559791565,.6926603317260742,.6663596034049988,.2760407030582428,.6926730871200562,.6663374900817871,.2760407030582428,.6926730871200562,.6663374900817871,-.27603691816329956,-.6926735043525696,.6663385629653931,-.27603691816329956,-.6926735043525696,.6663385629653931,-.27601784467697144,-.6926572918891907,.6663633584976196,-.2760142683982849,-.692660391330719,.6663615703582764,-.2760106921195984,-.6926577687263489,.6663656830787659,-.6663632392883301,-.6926574110984802,.27601781487464905,-.6663596034049988,-.692660391330719,.276018887758255,-.666358232498169,-.6926620006561279,.2760181128978729,-.6663506031036377,-.6926716566085815,.27601203322410583,-.6663397550582886,-.6926713585853577,.2760394513607025,-.6663397550582886,-.6926713585853577,.2760394513607025,-.6663616299629211,-.6926603317260742,-.2760140001773834,-.6663612723350525,-.6926611661911011,-.2760130763053894,-.6663604378700256,-.6926630735397339,-.2760102152824402,-.6663517951965332,-.6926720142364502,-.27600860595703125,-.6663496494293213,-.6926732659339905,-.2760104537010193,-.6663398742675781,-.6926730871200562,-.27603474259376526,-.6663398742675781,-.6926730871200562,-.27603474259376526,-.318651407957077,-.6585085988044739,.6817827820777893,-.31865057349205017,-.6585232019424438,.6817690134048462,-.3186468183994293,-.6585192680358887,.6817746758460999,-.31864237785339355,-.6585188508033752,.6817769408226013,-.3186362087726593,-.6585239768028259,.6817749738693237,-.3185986876487732,-.6585110425949097,.6818050146102905,-.6818026900291443,.6585108637809753,.3186039626598358,-.6817818284034729,.6585076451301575,.31865543127059937,-.681774914264679,.6585193276405334,.3186458647251129,-.6817728281021118,.6585239171981812,.31864118576049805,-.6817721724510193,.6585193872451782,.3186517059803009,-.6817666888237,.6585231423377991,.3186558485031128,-.25682297348976135,-.6585092544555664,-.7073948383331299,-.25678229331970215,-.6585257649421692,-.7073943018913269,-.25677669048309326,-.6585200428962708,-.7074015140533447,-.2567752003669739,-.6585193276405334,-.7074028849601746,-.25677335262298584,-.6585087776184082,-.7074132561683655,-.25676870346069336,-.6585231423377991,-.7074016332626343,.7073953151702881,.6585105657577515,.25681835412979126,.7073976993560791,.6585239768028259,.2567773759365082,.7074037194252014,.6585230827331543,.25676336884498596,.7074037790298462,.6585202813148499,.25676998496055603,.7074049115180969,.6585192680358887,.2567700147628784,.707414984703064,.658509373664856,.2567674517631531,.6817577481269836,.6585216522216797,.3186781108379364,.6817748546600342,.6585191488265991,.3186466693878174,.6817762851715088,.6585201025009155,.31864142417907715,.6817829012870789,.6585080027580261,.31865206360816956,.6818039417266846,.6585102081298828,.3186025619506836,.7073953747749329,-.6585008502006531,.25684332847595215,.7073964476585388,-.6584898233413696,.25686851143836975,.7074047327041626,-.6585193872451782,.2567700147628784,.7074100375175476,-.6585139036178589,.25676897168159485,.7074150443077087,-.6585217118263245,.2567354738712311,.31860607862472534,-.6585102677345276,.6818023324012756,.31864601373672485,-.6585190892219543,.6817750334739685,.31865158677101135,-.6585192680358887,.6817724108695984,.3186558485031128,-.6585085988044739,.6817806363105774,.31868311762809753,-.6585216522216797,.6817553639411926,.31860703229904175,.658510148525238,.6818019151687622,.3186412453651428,.6585239768028259,.6817727088928223,.31865087151527405,.6585137248039246,.6817781329154968,.31865182518959045,.6585192084312439,.6817723512649536,.3186556100845337,.6585230827331543,.6817667484283447,-.707414984703064,.6585217118263245,-.25673556327819824,-.7074099779129028,.6585142612457275,-.2567688226699829,-.7074046730995178,.6585195064544678,-.25676992535591125,-.7073950171470642,.658510684967041,-.25681883096694946,-.666364312171936,.6926564574241638,-.2760176658630371,-.6663615703582764,.6926605105400085,-.2760140895843506,-.6663599610328674,.6926629543304443,-.2760114371776581,-.6663492918014526,.6926740407943726,-.27600976824760437,-.6663401126861572,.692672848701477,-.276034951210022,-.6663401126861572,.692672848701477,-.276034951210022,-.3186555504798889,.6585217118263245,-.6817682385444641,-.3186514973640442,.6585192680358887,-.6817724108695984,-.31865087151527405,.6585137248039246,-.6817781329154968,-.3186410963535309,.6585239768028259,-.6817727088928223,-.31860843300819397,.6585099697113037,-.6818014979362488,-.25687503814697266,.6584945321083069,-.7073897123336792,-.25684797763824463,.6585018634796143,-.7073926329612732,-.25677669048309326,.6585201025009155,-.7074015736579895,-.25677499175071716,.6585193276405334,-.7074029445648193,-.2567721903324127,.6585090160369873,-.7074134349822998,-.256741464138031,.6585198640823364,-.7074146270751953,-.2760404050350189,.6926735043525696,-.6663371324539185,-.2760404050350189,.6926735043525696,-.6663371324539185,-.27601927518844604,.6926617622375488,-.6663580536842346,-.27601882815361023,.692660391330719,-.6663596630096436,-.27601534128189087,.6926579475402832,-.6663636565208435,-.2760111093521118,.6926732659339905,-.666349470615387,.25676339864730835,.6585231423377991,-.7074035406112671,.2567683756351471,.658514142036438,-.7074102163314819,.2567700743675232,.6585193872451782,-.7074046730995178,.2567768692970276,.6585267186164856,-.7073954343795776,.25681787729263306,.6585150361061096,-.7073912620544434,.27600938081741333,.6926736831665039,-.6663497090339661,.27601268887519836,.6926624774932861,-.6663600206375122,.27601420879364014,.692660391330719,-.6663615703582764,.2760183811187744,.6926562786102295,-.6663641929626465,.27603667974472046,.692672848701477,-.6663392782211304,.27603667974472046,.692672848701477,-.6663392782211304,.6663398146629333,.6926707625389099,-.2760407030582428,.6663398146629333,.6926707625389099,-.2760407030582428,.666347861289978,.6926729083061218,-.2760158181190491,.6663495898246765,.6926727294921875,-.27601224184036255,.666358232498169,.6926625370979309,-.2760171592235565,.6663585901260376,.6926613450050354,-.27601903676986694,.6663596630096436,.6926603317260742,-.2760190963745117,.27600938081741333,-.6926738023757935,-.6663495302200317,.27601149678230286,-.6926628947257996,-.6663601398468018,.2760140001773834,-.6926604509353638,-.6663616299629211,.2760170102119446,-.6926567554473877,-.6663640737533569,.27603477239608765,-.6926739811897278,-.6663388609886169,.27603477239608765,-.6926739811897278,-.6663388609886169,.6663395166397095,-.6926735043525696,.2760348320007324,.6663395166397095,-.6926735043525696,.2760348320007324,.6663496494293213,-.69267338514328,.2760099768638611,.6663513779640198,-.6926727294921875,.2760077118873596,.6663597822189331,-.6926623582839966,.27601343393325806,.6663600206375122,-.6926628947257996,.2760114371776581,.6663615703582764,-.6926604509353638,.27601417899131775,-.2568694055080414,-.6584880352020264,.7073978185653687,-.25684303045272827,-.658505916595459,.7073907852172852,-.25677070021629333,-.6585201025009155,.7074036002159119,-.2567701041698456,-.6585193276405334,.7074047327041626,-.2567673623561859,-.6585090160369873,.7074152231216431,-.25673583149909973,-.6585217118263245,.7074149250984192,.25676846504211426,-.6585231423377991,.7074017524719238,.2567743957042694,-.6585140228271484,.7074080109596252,.2567751109600067,-.6585193276405334,.7074029445648193,.25678279995918274,-.6585239768028259,.7073957920074463,.256822794675827,-.6585081815719604,.7073959708213806,-.7074099779129028,-.6585137248039246,-.25676944851875305,-.7074047923088074,-.6585192680358887,-.2567698359489441,-.7074031233787537,-.6585232019424438,-.25676456093788147,-.7073982357978821,-.658488929271698,-.2568660080432892,-.7073976397514343,-.6585239171981812,-.2567775249481201,-.707395076751709,-.6585009098052979,-.25684383511543274,-.7074130177497864,-.6585085988044739,.25677454471588135,-.7074028849601746,-.6585193872451782,.2567750811576843,-.7074017524719238,-.6585231423377991,.2567686140537262,-.7074016332626343,-.6585202813148499,.2567755877971649,-.7073957920074463,-.6585239171981812,.2567828893661499,-.7073920369148254,-.6585111021995544,.2568261921405792,-.31868305802345276,-.6585215926170349,-.6817554235458374,-.3186575174331665,-.658507764339447,-.6817806363105774,-.3186517059803009,-.6585192084312439,-.6817723512649536,-.3186461925506592,-.658518373966217,-.6817757487297058,-.3185906708240509,-.6585003137588501,-.6818190813064575,-.3185673952102661,-.6584908366203308,-.6818392276763916,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,1342588575425907e-21,1,-7.968073134634324e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8,-7.788058837832068e-7,-1,-7.342277541511066e-8],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.03048560582101345,.01567864418029785,.03048560582101345,.01567864418029785,.4374997317790985,.2620980143547058,.03719213604927063,.12196230888366699,.034566912800073624,.013053596019744873,.04797939583659172,.007471561431884766,.023779170587658882,.004848778247833252,.11408431828022003,.12196230888366699,.09070630371570587,.23767399787902832,.07480431348085403,.01567620038986206,.11408431828022003,.12196230888366699,.11983299255371094,.12196230888366699,.3407820463180542,.3628087639808655,.11983299255371094,.12196230888366699,.041273150593042374,.015676438808441162,.004617570899426937,.005231618881225586,.08821681886911392,.00785917043685913,.104537233710289,.00896519422531128,.017072739079594612,.12196230888366699,.3124997019767761,.3871912360191345,.04389829561114311,.015676259994506836,.034566912800073624,.004848778247833252,.014447606168687344,.12196230888366699,.5343227386474609,.23762238025665283,.014447606168687344,.12196230888366699,.12820686399936676,.06416767835617065,.11096081137657166,.06416738033294678,.0707232654094696,.01567620038986206,.15942715108394623,.23743665218353271,.0707232654094696,.01567620038986206,.023779170587658882,.0007677078247070312,.023779170587658882,.0007677078247070312,.07742954790592194,.12196230888366699,.007741174660623074,.12196230888366699,.5624786019325256,.012261509895324707,.061391860246658325,.013051092624664307,.07480429112911224,.007857918739318848,.01348982285708189,.004848778247833252,.01348982285708189,.004848778247833252,.027860479429364204,.12196230888366699,.027860479429364204,.12196230888366699,.12245811522006989,.06416767835617065,.4092179536819458,.11280876398086548,.12245811522006989,.06416767835617065,.07072323560714722,.005232870578765869,.12245811522006989,.06679385900497437,.06401706486940384,.12196230888366699,.12245811522006989,.06679385900497437,.21575646102428436,.36276328563690186,.06401706486940384,.12196230888366699,.05060452222824097,.007858037948608398,.06809809058904648,.007857978343963623,.09084202349185944,.12196230888366699,.09084202349185944,.12196230888366699,.18749970197677612,.26223671436309814,.06401699781417847,.015676140785217285,.12245821952819824,.12196230888366699,.15924353897571564,.36276328563690186,.09084194898605347,.015676438808441162,.03144339099526405,.000767827033996582,.13133037090301514,.003871619701385498,.04797939583659172,.12196230888366699,.03418757766485214,.362862765789032,.08725927770137787,.005232870578765869,.08725927770137787,.005232870578765869,.03144339099526405,.004848778247833252,.13133037090301514,.06416767835617065,.09492307156324387,.015676438808441162,.09081242233514786,.362862765789032,.09492307156324387,.015676438808441162,.13133037090301514,.06416767835617065,.1255817413330078,.12196230888366699,.4657820463180542,.23780876398086548,.1255817413330078,.12196230888366699,.01036630105227232,.12196230888366699,.034566912800073624,.000767827033996582,.07384677231311798,.005232870578765869,.07384677231311798,.005232870578765869,.4092180132865906,.23780876398086548,.057310834527015686,.015676259994506836,.1255817413330078,.06679385900497437,.11408431828022003,.0667925477027893,.0036600297316908836,.015675067901611328,.03429369255900383,.23767399787902832,.06497455388307571,.0011516809463500977,.06809809058904648,.005232870578765869,.09754816442728043,.015677452087402344,.15919587016105652,.48784810304641724,.12820686399936676,.12196230888366699,.13133040070533752,.06679350137710571,.07742944359779358,.01567739248275757,.5342592000961304,.11273849010467529,.07742944359779358,.01567739248275757,.05060454457998276,.0011516809463500977,.05060454457998276,.0011516809463500977,.01036630105227232,.004848778247833252,.021154051646590233,.01567864418029785,.09083183109760284,.4878973960876465,.12558168172836304,.06416767835617065,.017355674877762794,.008966445922851562,.07771223783493042,.011559724807739258,.3124997019767761,.1371912956237793,.10425447672605515,.12196230888366699,.06139186769723892,.12196230888366699,.07072321325540543,.007857918739318848,.09112466126680374,.011558711528778076,.003660283051431179,.12196230888366699,.06249973922967911,.13732600212097168,.07480431348085403,.12196230888366699,.07480431348085403,.12196230888366699,.003660283051431179,.12196230888366699,.10833562910556793,.12196230888366699,.07072321325540543,.12196230888366699,.10833562910556793,.12196230888366699,.1875002682209015,.13756322860717773,.021154051646590233,.007474005222320557,.09492305666208267,.013051152229309082,.04418101906776428,.008964121341705322,.09783096611499786,.011559903621673584,.10162932425737381,.12196230888366699,.5625002384185791,.26224493980407715,.034566912800073624,.01567864418029785,.08821682631969452,.12196230888366699,.1874997317790985,.387151837348938,.09754827618598938,.12196230888366699,.09754827618598938,.12196230888366699,.007741096429526806,.00785684585571289,.1016293466091156,.013052403926849365,.06250026077032089,.3871026635169983,.021154044196009636,.12196230888366699,.08413578569889069,.12196230888366699,.021154044196009636,.12196230888366699,.08413578569889069,.12196230888366699,.0036600297316908836,.00785684585571289,.10833562910556793,.0074727535247802734,.10162932425737381,.015677452087402344,.11096075177192688,.0667925477027893,.5907518267631531,.3627550005912781,.10162932425737381,.015677452087402344,.11096075177192688,.0667925477027893,.06809809058904648,.0011516809463500977,.06497455388307571,.005232870578765869,.007741174660623074,.015675067901611328,.007741174660623074,.015675067901611328,.13133040070533752,.12196230888366699,.5907407999038696,.11272633075714111,.13133040070533752,.12196230888366699,.08725927770137787,.0011516809463500977,.11670946329832077,.003871321678161621,.04389836639165878,.12196230888366699,.3407820463180542,.4878087639808655,.04389836639165878,.12196230888366699,.11670946329832077,.003871321678161621,.07384677231311798,.0011516809463500977,.11670953035354614,.06679290533065796,.11670953035354614,.06679290533065796,.06139186769723892,.015676259994506836,.34078195691108704,.2378087043762207,.06139186769723892,.015676259994506836,.11670944094657898,.12196230888366699,.2842180132865906,.2378087043762207,.1042545735836029,.01567751169204712,.1042545735836029,.01567751169204712,.007741096429526806,.005231618881225586,.07072323560714722,.0011516809463500977,.07072323560714722,.0011516809463500977,.2842179536819458,.3628087639808655,.06809809058904648,.12196230888366699,.11983299255371094,.06679290533065796,.004617570899426937,.0011506080627441406,.03719203174114227,.015676438808441162,.40916556119918823,.3629019856452942,.03719203174114227,.015676438808441162,.11408430337905884,.003871619701385498,.007741096429526806,.0011506080627441406,.11096075177192688,.003871619701385498,.10833562910556793,.01567751169204712,.21557284891605377,.23743665218353271,.11096075177192688,.003871619701385498,.12245815992355347,.003871917724609375,.08151060342788696,.01567739248275757,.4657820463180542,.11280876398086548,.05060454457998276,.005232870578765869,.02786046452820301,.01567864418029785,.4374997317790985,.012191295623779297,.08151060342788696,.12196230888366699,.08151060342788696,.12196230888366699,.01036630105227232,.008966505527496338,.05759349465370178,.011558592319488525,.11983299255371094,.06416738033294678,.3407820463180542,.1128087043762207,.02377944253385067,.12196230888366699,.11983299255371094,.06416738033294678,.01348982285708189,.000767827033996582,.0841357409954071,.0011516809463500977,.0841357409954071,.0011516809463500977,.05060460418462753,.015676259994506836,.2842179536819458,.11280876398086548,.05060460418462753,.015676259994506836,.11983299255371094,.003871321678161621,.014164685271680355,.007474005222320557,.03719203174114227,.008964121341705322,.023779170587658882,.01567864418029785,.31250008940696716,.012191236019134521,.05060452222824097,.12196230888366699,.023779170587658882,.01567864418029785,.12820683419704437,.0038716793060302734,.05468563735485077,.01567620038986206,.5906772613525391,.23762238025665283,.12820683419704437,.0038716793060302734,.0841357409954071,.005232870578765869,.05468563735485077,.12196230888366699,.05468563735485077,.12196230888366699,.5624997615814209,.1373775601387024,.014447621069848537,.015678703784942627,.02377917803823948,.008966445922851562,.040990397334098816,.007471561431884766,.027577554807066917,.007474005222320557,.08151061087846756,.01305234432220459,.05731076002120972,.12196230888366699,.010366610251367092,.015678703784942627,.05731076002120972,.12196230888366699,.010366610251367092,.015678703784942627,.4375002980232239,.13719123601913452,.04797941446304321,.015676259994506836,.04797941446304321,.015676259994506836,.06250029802322388,.262137234210968,.09492305666208267,.12196230888366699,.05468561500310898,.007858037948608398,.08413572609424591,.00785917043685913,.03076852671802044,.011561095714569092,.06401699781417847,.007857978343963623,.06809809058904648,.015676140785217285,.04127315804362297,.12196230888366699,.04127315804362297,.12196230888366699,.06809809058904648,.015676140785217285,.3125002682209015,.26219117641448975,.026902692392468452,.004848778247833252,.026902692392468452,.004848778247833252,.034566912800073624,.12196230888366699,.5342481732368469,.3627550005912781,.034566912800073624,.12196230888366699,.11096090078353882,.12196230888366699,.11408430337905884,.06416738033294678,.03048589639365673,.12196230888366699,.46583443880081177,.3629019856452942,.11408430337905884,.06416738033294678,.026902692392468452,.0007677078247070312,.08413572609424591,.015676140785217285,.034168168902397156,.4878973960876465,.12558168172836304,.003871917724609375,.05372808128595352,.005232870578765869,.12558168172836304,.003871917724609375,.05372808128595352,.005232870578765869,.08821682631969452,.015676140785217285,.21580412983894348,.48784810304641724,.12820687890052795,.06679350137710571,.08821682631969452,.015676140785217285,.12820687890052795,.06679350137710571,.05372808128595352,.0011516809463500977,.11670944094657898,.06416738033294678,.01707303337752819,.01567864418029785,.2842179536819458,.4878087639808655,.01707303337752819,.01567864418029785,.01036630105227232,.000767827033996582,.01036630105227232,.000767827033996582,.014164685271680355,.013053655624389648,.021154051646590233,.013053596019744873,.027577554807066917,.013053596019744873,.040990397334098816,.013051152229309082,.061391860246658325,.00747150182723999,.07276374846696854,.013051033020019531,.08151061087846756,.007472634315490723,.09492305666208267,.007471621036529541,.005700557492673397,.013049840927124023,.034566912800073624,.007474005222320557,.04797939583659172,.013051152229309082,.052645064890384674,.013051152229309082,.06605753302574158,.013051152229309082,.08617626875638962,.01305234432220459,.1016293466091156,.0074727535247802734,.10833562910556793,.013052403926849365],normalized:!1}},index:{type:"Uint16Array",array:[97,128,249,171,245,2,83,8,107,137,120,240,12,236,166,262,150,19,23,208,213,190,203,197,78,72,223,101,160,157,255,123,87,114,28,177,91,145,34,42,181,184,48,54,57,238,31,6,76,165,44,254,130,122,108,27,112,126,133,274,192,152,260,142,106,33,38,265,95,253,93,182,185,90,32,239,0,244,69,53,227,212,198,204,161,111,176,129,261,18,85,84,141,258,146,89,13,155,159,219,156,79,139,10,81,169,163,174,170,233,14,21,59,65,125,138,86,73,47,56,40,205,191,224,149,61,246,178,26,222,24,214,250,41,98,232,46,167,209,70,60,63,194,210,68,226,62,36,104,271,105,116,273,115,99,267,100,218,272,217,215,268,216,201,269,200,187,266,188,35,270,134,17,281,16,229,279,228,50,277,51,231,278,230,4,275,5,117,276,118,127,280,237,247,30,77,153,164,257,248,132,109,9,29,189,199,148,143,82,110,37,193,264,251,259,94,186,180,92,241,121,1,67,58,52,211,207,196,162,102,113,131,96,263,85,140,84,256,88,144,11,168,154,221,103,158,136,242,7,169,15,163,172,3,234,21,75,59,124,119,135,71,80,45,39,183,202,225,20,151,243,173,175,220,74,22,252,179,43,235,55,49,206,25,66,64,147,195]},boundingSphere:{center:[0,0,0],radius:135.51845097955697}},rotationCombinations:{"1,2":[-1,-46,-1],"1,3":[44,-91,44],"1,4":[0,-135,0],"1,5":[-1,179,1],"1,6":[-1,134,1],"1,7":[44,89,-44],"1,8":[1,44,-2],"1,9":[-1,0,180],"1,10":[-2,-45,179],"1,11":[-103,-89,78],"1,12":[-180,-45,0],"1,13":[179,2,1],"1,14":[179,46,1],"1,15":[13,89,166],"1,16":[0,44,179],"2,3":[0,-45,0],"2,4":[43,-90,43],"2,5":[0,-135,0],"2,6":[0,180,0],"2,7":[0,135,0],"2,8":[38,89,-39],"2,9":[0,45,-180],"2,10":[0,0,180],"2,11":[-1,-45,179],"2,12":[-3,-89,177],"2,13":[-180,-44,1],"2,14":[-179,0,0],"2,15":[-179,45,0],"2,16":[-6,90,-174],"3,4":[0,-45,0],"3,5":[-54,-90,-54],"3,6":[0,-135,0],"3,7":[0,-180,0],"3,8":[-1,134,0],"3,9":[-177,90,-3],"3,10":[-1,45,-180],"3,11":[-1,0,180],"3,12":[0,-44,179],"3,13":[-179,-89,2],"3,14":[-179,-45,1],"3,15":[-180,0,0],"3,16":[-180,45,0],"4,5":[0,-45,1],"4,6":[-47,-90,-47],"4,7":[-1,-135,0],"4,8":[-1,179,-1],"4,9":[-180,45,0],"4,10":[-98,89,-83],"4,11":[-1,45,-179],"4,12":[0,1,180],"4,13":[0,-46,-179],"4,14":[-161,-89,20],"4,15":[180,-44,0],"4,16":[180,1,0],"5,6":[-1,-45,0],"5,7":[-60,-90,-59],"5,8":[-1,-136,-1],"5,9":[180,-1,1],"5,10":[180,44,0],"5,11":[-159,89,-21],"5,12":[0,46,179],"5,13":[0,-1,-180],"5,14":[-1,-45,179],"5,15":[-109,-89,72],"5,16":[-180,-45,0],"6,7":[0,-45,0],"6,8":[-38,-91,-39],"6,9":[-180,-45,0],"6,10":[-180,0,0],"6,11":[-179,45,-1],"6,12":[-177,89,-3],"6,13":[0,44,-179],"6,14":[-1,0,-180],"6,15":[-1,-45,180],"6,16":[-174,-90,6],"7,8":[1,-46,0],"7,9":[-3,-90,177],"7,10":[-179,-45,0],"7,11":[-179,0,0],"7,12":[-180,44,-1],"7,13":[-1,89,-178],"7,14":[-1,45,-179],"7,15":[0,0,-180],"7,16":[0,-45,180],"8,9":[0,-44,-179],"8,10":[12,-89,-167],"8,11":[179,-46,-1],"8,12":[179,-2,-1],"8,13":[-180,45,0],"8,14":[-109,89,-71],"8,15":[-2,45,-178],"8,16":[-1,0,-180],"9,10":[1,45,-1],"9,11":[89,89,-89],"9,12":[0,135,0],"9,13":[0,-179,1],"9,14":[0,-134,0],"9,15":[7,-89,7],"9,16":[0,-44,-1],"10,11":[0,45,0],"10,12":[-9,89,8],"10,13":[0,136,1],"10,14":[-1,-179,0],"10,15":[-1,-134,0],"10,16":[11,-89,12],"11,12":[-1,45,-1],"11,13":[4,91,-4],"11,14":[-1,136,1],"11,15":[-1,-179,0],"11,16":[-1,-134,0],"12,13":[-1,47,2],"12,14":[6,91,-6],"12,15":[0,136,0],"12,16":[0,-179,-1],"13,14":[1,44,-1],"13,15":[68,89,-68],"13,16":[-1,135,1],"14,15":[0,45,0],"14,16":[-86,90,85],"15,16":[0,45,-1]}},d20:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"4947963B-5ABA-4507-A373-1DA7805EB4DE",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-83.39456939697266,2.066877841949463,52.33057403564453,-83.39456939697266,2.066877841949463,52.33057403564453,-83.39456939697266,2.066877841949463,52.33057403564453,-83.39456939697266,2.066877841949463,52.33057403564453,-53.607669830322266,82.60527038574219,.00019691196212079376,-53.607669830322266,82.60527038574219,.00019691196212079376,-53.607669830322266,82.60527038574219,.00019691196212079376,-53.607669830322266,82.60527038574219,.00019691196212079376,-84.67233276367188,1.2774014472961426,-50.26307678222656,-84.67233276367188,1.2774014472961426,-50.26307678222656,-84.67233276367188,1.2774014472961426,-50.26307678222656,-84.67233276367188,1.2774014472961426,-50.26307678222656,-84.67233276367188,-1.2774014472961426,-50.26307678222656,-84.67233276367188,-1.2774014472961426,-50.26307678222656,-84.67233276367188,-1.2774014472961426,-50.26307678222656,-84.67233276367188,-1.2774014472961426,-50.26307678222656,-52.330257415771484,-83.39476013183594,2.0670700073242188,-52.330257415771484,-83.39476013183594,2.0670700073242188,-52.330257415771484,-83.39476013183594,2.0670700073242188,-52.330257415771484,-83.39476013183594,2.0670700073242188,-1.2770904302597046,-50.263389587402344,84.67215728759766,-1.2770904302597046,-50.263389587402344,84.67215728759766,-1.2770904302597046,-50.263389587402344,84.67215728759766,-1.2770904302597046,-50.263389587402344,84.67215728759766,-52.33027648925781,83.39476013183594,-2.066685438156128,-52.33027648925781,83.39476013183594,-2.066685438156128,-52.33027648925781,83.39476013183594,-2.066685438156128,-52.33027648925781,83.39476013183594,-2.066685438156128,-50.26338577270508,84.67214965820312,1.2775861024856567,-50.26338577270508,84.67214965820312,1.2775861024856567,-50.26338577270508,84.67214965820312,1.2775861024856567,-50.26338577270508,84.67214965820312,1.2775861024856567,1.2777124643325806,-50.263389587402344,84.6721420288086,1.2777124643325806,-50.263389587402344,84.6721420288086,1.2777124643325806,-50.263389587402344,84.6721420288086,1.2777124643325806,-50.263389587402344,84.6721420288086,-2.0671839714050293,-52.330265045166016,-83.39474487304688,-2.0671839714050293,-52.330265045166016,-83.39474487304688,-2.0671839714050293,-52.330265045166016,-83.39474487304688,-2.0671839714050293,-52.330265045166016,-83.39474487304688,83.39456939697266,2.066877841949463,-52.33057403564453,83.39456939697266,2.066877841949463,-52.33057403564453,83.39456939697266,2.066877841949463,-52.33057403564453,83.39456939697266,2.066877841949463,-52.33057403564453,84.67233276367188,1.2774014472961426,50.26307678222656,84.67233276367188,1.2774014472961426,50.26307678222656,84.67233276367188,1.2774014472961426,50.26307678222656,84.67233276367188,1.2774014472961426,50.26307678222656,53.607669830322266,-82.60527038574219,-.00019691196212079376,53.607669830322266,-82.60527038574219,-.00019691196212079376,53.607669830322266,-82.60527038574219,-.00019691196212079376,53.607669830322266,-82.60527038574219,-.00019691196212079376,83.39456939697266,-2.066877841949463,-52.33057403564453,83.39456939697266,-2.066877841949463,-52.33057403564453,83.39456939697266,-2.066877841949463,-52.33057403564453,83.39456939697266,-2.066877841949463,-52.33057403564453,1.2770904302597046,50.263389587402344,-84.67215728759766,1.2770904302597046,50.263389587402344,-84.67215728759766,1.2770904302597046,50.263389587402344,-84.67215728759766,1.2770904302597046,50.263389587402344,-84.67215728759766,50.26338577270508,84.67214965820312,-1.2775861024856567,50.26338577270508,84.67214965820312,-1.2775861024856567,50.26338577270508,84.67214965820312,-1.2775861024856567,50.26338577270508,84.67214965820312,-1.2775861024856567,83.39495086669922,-2.066877841949463,52.329959869384766,83.39495086669922,-2.066877841949463,52.329959869384766,83.39495086669922,-2.066877841949463,52.329959869384766,83.39495086669922,-2.066877841949463,52.329959869384766,-50.26339340209961,-84.67214965820312,-1.2772167921066284,-50.26339340209961,-84.67214965820312,-1.2772167921066284,-50.26339340209961,-84.67214965820312,-1.2772167921066284,-50.26339340209961,-84.67214965820312,-1.2772167921066284,-1.2777124643325806,-50.263389587402344,-84.6721420288086,-1.2777124643325806,-50.263389587402344,-84.6721420288086,-1.2777124643325806,-50.263389587402344,-84.6721420288086,-1.2777124643325806,-50.263389587402344,-84.6721420288086,-52.330257415771484,83.39476013183594,2.0670700073242188,-52.330257415771484,83.39476013183594,2.0670700073242188,-52.330257415771484,83.39476013183594,2.0670700073242188,-52.330257415771484,83.39476013183594,2.0670700073242188,-82.60507202148438,0,53.60797119140625,-82.60507202148438,0,53.60797119140625,-82.60507202148438,0,53.60797119140625,-82.60507202148438,0,53.60797119140625,-2.0665714740753174,52.330265045166016,83.39476776123047,-2.0665714740753174,52.330265045166016,83.39476776123047,-2.0665714740753174,52.330265045166016,83.39476776123047,-2.0665714740753174,52.330265045166016,83.39476776123047,-84.67196655273438,-1.2774014472961426,50.26369857788086,-84.67196655273438,-1.2774014472961426,50.26369857788086,-84.67196655273438,-1.2774014472961426,50.26369857788086,-84.67196655273438,-1.2774014472961426,50.26369857788086,-84.67196655273438,1.2774014472961426,50.26369857788086,-84.67196655273438,1.2774014472961426,50.26369857788086,-84.67196655273438,1.2774014472961426,50.26369857788086,-84.67196655273438,1.2774014472961426,50.26369857788086,-53.607669830322266,-82.60527038574219,.00019691196212079376,-53.607669830322266,-82.60527038574219,.00019691196212079376,-53.607669830322266,-82.60527038574219,.00019691196212079376,-53.607669830322266,-82.60527038574219,.00019691196212079376,-83.39456939697266,-2.066877841949463,52.33057403564453,-83.39456939697266,-2.066877841949463,52.33057403564453,-83.39456939697266,-2.066877841949463,52.33057403564453,-83.39456939697266,-2.066877841949463,52.33057403564453,-52.33027648925781,-83.39476013183594,-2.066685438156128,-52.33027648925781,-83.39476013183594,-2.066685438156128,-52.33027648925781,-83.39476013183594,-2.066685438156128,-52.33027648925781,-83.39476013183594,-2.066685438156128,-2.0665714740753174,-52.330265045166016,83.39476776123047,-2.0665714740753174,-52.330265045166016,83.39476776123047,-2.0665714740753174,-52.330265045166016,83.39476776123047,-2.0665714740753174,-52.330265045166016,83.39476776123047,-1.2770904302597046,50.263389587402344,84.67215728759766,-1.2770904302597046,50.263389587402344,84.67215728759766,-1.2770904302597046,50.263389587402344,84.67215728759766,-1.2770904302597046,50.263389587402344,84.67215728759766,-.0003034261171706021,53.607669830322266,-82.60527038574219,-.0003034261171706021,53.607669830322266,-82.60527038574219,-.0003034261171706021,53.607669830322266,-82.60527038574219,-.0003034261171706021,53.607669830322266,-82.60527038574219,-2.0671839714050293,52.330265045166016,-83.39474487304688,-2.0671839714050293,52.330265045166016,-83.39474487304688,-2.0671839714050293,52.330265045166016,-83.39474487304688,-2.0671839714050293,52.330265045166016,-83.39474487304688,-83.39495086669922,2.066877841949463,-52.329959869384766,-83.39495086669922,2.066877841949463,-52.329959869384766,-83.39495086669922,2.066877841949463,-52.329959869384766,-83.39495086669922,2.066877841949463,-52.329959869384766,50.26339340209961,84.67214965820312,1.2772167921066284,50.26339340209961,84.67214965820312,1.2772167921066284,50.26339340209961,84.67214965820312,1.2772167921066284,50.26339340209961,84.67214965820312,1.2772167921066284,-50.26339340209961,84.67214965820312,-1.2772167921066284,-50.26339340209961,84.67214965820312,-1.2772167921066284,-50.26339340209961,84.67214965820312,-1.2772167921066284,-50.26339340209961,84.67214965820312,-1.2772167921066284,2.0671839714050293,52.330265045166016,83.39474487304688,2.0671839714050293,52.330265045166016,83.39474487304688,2.0671839714050293,52.330265045166016,83.39474487304688,2.0671839714050293,52.330265045166016,83.39474487304688,82.60547637939453,0,53.607364654541016,82.60547637939453,0,53.607364654541016,82.60547637939453,0,53.607364654541016,82.60547637939453,0,53.607364654541016,83.39495086669922,2.066877841949463,52.329959869384766,83.39495086669922,2.066877841949463,52.329959869384766,83.39495086669922,2.066877841949463,52.329959869384766,83.39495086669922,2.066877841949463,52.329959869384766,50.26339340209961,-84.67214965820312,1.2772167921066284,50.26339340209961,-84.67214965820312,1.2772167921066284,50.26339340209961,-84.67214965820312,1.2772167921066284,50.26339340209961,-84.67214965820312,1.2772167921066284,2.0671839714050293,-52.330265045166016,83.39474487304688,2.0671839714050293,-52.330265045166016,83.39474487304688,2.0671839714050293,-52.330265045166016,83.39474487304688,2.0671839714050293,-52.330265045166016,83.39474487304688,50.26338577270508,-84.67214965820312,-1.2775861024856567,50.26338577270508,-84.67214965820312,-1.2775861024856567,50.26338577270508,-84.67214965820312,-1.2775861024856567,50.26338577270508,-84.67214965820312,-1.2775861024856567,-83.39495086669922,-2.066877841949463,-52.329959869384766,-83.39495086669922,-2.066877841949463,-52.329959869384766,-83.39495086669922,-2.066877841949463,-52.329959869384766,-83.39495086669922,-2.066877841949463,-52.329959869384766,-82.60547637939453,0,-53.607364654541016,-82.60547637939453,0,-53.607364654541016,-82.60547637939453,0,-53.607364654541016,-82.60547637939453,0,-53.607364654541016,52.330257415771484,83.39476013183594,-2.0670700073242188,52.330257415771484,83.39476013183594,-2.0670700073242188,52.330257415771484,83.39476013183594,-2.0670700073242188,52.330257415771484,83.39476013183594,-2.0670700073242188,53.607669830322266,82.60527038574219,-.00019691196212079376,53.607669830322266,82.60527038574219,-.00019691196212079376,53.607669830322266,82.60527038574219,-.00019691196212079376,53.607669830322266,82.60527038574219,-.00019691196212079376,2.0665714740753174,52.330265045166016,-83.39476776123047,2.0665714740753174,52.330265045166016,-83.39476776123047,2.0665714740753174,52.330265045166016,-83.39476776123047,2.0665714740753174,52.330265045166016,-83.39476776123047,84.67233276367188,-1.2774014472961426,50.26307678222656,84.67233276367188,-1.2774014472961426,50.26307678222656,84.67233276367188,-1.2774014472961426,50.26307678222656,84.67233276367188,-1.2774014472961426,50.26307678222656,84.67196655273438,-1.2774014472961426,-50.26369857788086,84.67196655273438,-1.2774014472961426,-50.26369857788086,84.67196655273438,-1.2774014472961426,-50.26369857788086,84.67196655273438,-1.2774014472961426,-50.26369857788086,84.67196655273438,1.2774014472961426,-50.26369857788086,84.67196655273438,1.2774014472961426,-50.26369857788086,84.67196655273438,1.2774014472961426,-50.26369857788086,84.67196655273438,1.2774014472961426,-50.26369857788086,52.33027648925781,83.39476013183594,2.066685438156128,52.33027648925781,83.39476013183594,2.066685438156128,52.33027648925781,83.39476013183594,2.066685438156128,52.33027648925781,83.39476013183594,2.066685438156128,52.330257415771484,-83.39476013183594,-2.0670700073242188,52.330257415771484,-83.39476013183594,-2.0670700073242188,52.330257415771484,-83.39476013183594,-2.0670700073242188,52.330257415771484,-83.39476013183594,-2.0670700073242188,82.60507202148438,0,-53.60797119140625,82.60507202148438,0,-53.60797119140625,82.60507202148438,0,-53.60797119140625,82.60507202148438,0,-53.60797119140625,52.33027648925781,-83.39476013183594,2.066685438156128,52.33027648925781,-83.39476013183594,2.066685438156128,52.33027648925781,-83.39476013183594,2.066685438156128,52.33027648925781,-83.39476013183594,2.066685438156128,-50.26338577270508,-84.67214965820312,1.2775861024856567,-50.26338577270508,-84.67214965820312,1.2775861024856567,-50.26338577270508,-84.67214965820312,1.2775861024856567,-50.26338577270508,-84.67214965820312,1.2775861024856567,1.2770904302597046,-50.263389587402344,-84.67215728759766,1.2770904302597046,-50.263389587402344,-84.67215728759766,1.2770904302597046,-50.263389587402344,-84.67215728759766,1.2770904302597046,-50.263389587402344,-84.67215728759766,2.0665714740753174,-52.330265045166016,-83.39476776123047,2.0665714740753174,-52.330265045166016,-83.39476776123047,2.0665714740753174,-52.330265045166016,-83.39476776123047,2.0665714740753174,-52.330265045166016,-83.39476776123047,-.0003034261171706021,-53.607669830322266,-82.60527038574219,-.0003034261171706021,-53.607669830322266,-82.60527038574219,-.0003034261171706021,-53.607669830322266,-82.60527038574219,-.0003034261171706021,-53.607669830322266,-82.60527038574219,-1.2777124643325806,50.263389587402344,-84.6721420288086,-1.2777124643325806,50.263389587402344,-84.6721420288086,-1.2777124643325806,50.263389587402344,-84.6721420288086,-1.2777124643325806,50.263389587402344,-84.6721420288086,.0003034261171706021,-53.607669830322266,82.60527038574219,.0003034261171706021,-53.607669830322266,82.60527038574219,.0003034261171706021,-53.607669830322266,82.60527038574219,.0003034261171706021,-53.607669830322266,82.60527038574219,1.2777124643325806,50.263389587402344,84.6721420288086,1.2777124643325806,50.263389587402344,84.6721420288086,1.2777124643325806,50.263389587402344,84.6721420288086,1.2777124643325806,50.263389587402344,84.6721420288086,.0003034261171706021,53.607669830322266,82.60527038574219,.0003034261171706021,53.607669830322266,82.60527038574219,.0003034261171706021,53.607669830322266,82.60527038574219,.0003034261171706021,53.607669830322266,82.60527038574219],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.5902835130691528,.5619468092918396,.5794662833213806,-.5902835130691528,.5619468092918396,.5794662833213806,-.5902835130691528,.5619468092918396,.5794662833213806,-.5902835130691528,.5619468092918396,.5794662833213806,-.9267594814300537,.3756551742553711,-3.650784492492676e-7,-.9267594814300537,.3756551742553711,-3.650784492492676e-7,-.9267594814300537,.3756551742553711,-3.650784492492676e-7,-.9267594814300537,.3756551742553711,-3.650784492492676e-7,-.9375927448272705,.3472937345504761,-.01751660369336605,-.9375927448272705,.3472937345504761,-.01751660369336605,-.9375927448272705,.3472937345504761,-.01751660369336605,-.9375927448272705,.3472937345504761,-.01751660369336605,-.9375886917114258,-.34730517864227295,-.01751125603914261,-.9375886917114258,-.34730517864227295,-.01751125603914261,-.9375886917114258,-.34730517864227295,-.01751125603914261,-.9375886917114258,-.34730517864227295,-.01751125603914261,-.5794563889503479,-.5902886986732483,.5619516968727112,-.5794563889503479,-.5902886986732483,.5619516968727112,-.5794563889503479,-.5902886986732483,.5619516968727112,-.5794563889503479,-.5902886986732483,.5619516968727112,-.34728965163230896,-.01751914620399475,.9375942349433899,-.34728965163230896,-.01751914620399475,.9375942349433899,-.34728965163230896,-.01751914620399475,.9375942349433899,-.34728965163230896,-.01751914620399475,.9375942349433899,-.579460859298706,.5902918577194214,-.5619436502456665,-.579460859298706,.5902918577194214,-.5619436502456665,-.579460859298706,.5902918577194214,-.5619436502456665,-.579460859298706,.5902918577194214,-.5619436502456665,-.017521724104881287,.9375901818275452,.34730058908462524,-.017521724104881287,.9375901818275452,.34730058908462524,-.017521724104881287,.9375901818275452,.34730058908462524,-.017521724104881287,.9375901818275452,.34730058908462524,.3473122715950012,-.017512619495391846,.9375860095024109,.3473122715950012,-.017512619495391846,.9375860095024109,.3473122715950012,-.017512619495391846,.9375860095024109,.3473122715950012,-.017512619495391846,.9375860095024109,-.5619495511054993,-.579465389251709,-.5902817845344543,-.5619495511054993,-.579465389251709,-.5902817845344543,-.5619495511054993,-.579465389251709,-.5902817845344543,-.5619495511054993,-.579465389251709,-.5902817845344543,.5902835130691528,.5619468092918396,-.5794662833213806,.5902835130691528,.5619468092918396,-.5794662833213806,.5902835130691528,.5619468092918396,-.5794662833213806,.5902835130691528,.5619468092918396,-.5794662833213806,.9375926852226257,.3472939133644104,.017516572028398514,.9375926852226257,.3472939133644104,.017516572028398514,.9375926852226257,.3472939133644104,.017516572028398514,.9375926852226257,.3472939133644104,.017516572028398514,.9267594814300537,-.3756551742553711,-7398426532745361e-21,.9267594814300537,-.3756551742553711,-7398426532745361e-21,.9267594814300537,-.3756551742553711,-7398426532745361e-21,.9267594814300537,-.3756551742553711,-7398426532745361e-21,.590289294719696,-.5619460344314575,-.5794610977172852,.590289294719696,-.5619460344314575,-.5794610977172852,.590289294719696,-.5619460344314575,-.5794610977172852,.590289294719696,-.5619460344314575,-.5794610977172852,.3473011553287506,.017513729631900787,-.9375900626182556,.3473011553287506,.017513729631900787,-.9375900626182556,.3473011553287506,.017513729631900787,-.9375900626182556,.3473011553287506,.017513729631900787,-.9375900626182556,.01752115786075592,.9375901818275452,-.3473004698753357,.01752115786075592,.9375901818275452,-.3473004698753357,.01752115786075592,.9375901818275452,-.3473004698753357,.01752115786075592,.9375901818275452,-.3473004698753357,.5902906656265259,-.5619435906410217,.5794621706008911,.5902906656265259,-.5619435906410217,.5794621706008911,.5902906656265259,-.5619435906410217,.5794621706008911,.5902906656265259,-.5619435906410217,.5794621706008911,-.01751122623682022,-.9375880360603333,-.34730690717697144,-.01751122623682022,-.9375880360603333,-.34730690717697144,-.01751122623682022,-.9375880360603333,-.34730690717697144,-.01751122623682022,-.9375880360603333,-.34730690717697144,-.34731000661849976,-.01751551777124405,-.9375866651535034,-.34731000661849976,-.01751551777124405,-.9375866651535034,-.34731000661849976,-.01751551777124405,-.9375866651535034,-.34731000661849976,-.01751551777124405,-.9375866651535034,-.5794625282287598,.5902847647666931,.5619492530822754,-.5794625282287598,.5902847647666931,.5619492530822754,-.5794625282287598,.5902847647666931,.5619492530822754,-.5794625282287598,.5902847647666931,.5619492530822754,-.3756488859653473,-4090368747711182e-21,.9267621040344238,-.3756488859653473,-4090368747711182e-21,.9267621040344238,-.3756488859653473,-4090368747711182e-21,.9267621040344238,-.3756488859653473,-4090368747711182e-21,.9267621040344238,-.5619439482688904,.5794651508331299,.5902872681617737,-.5619439482688904,.5794651508331299,.5902872681617737,-.5619439482688904,.5794651508331299,.5902872681617737,-.5619439482688904,.5794651508331299,.5902872681617737,-.9375901818275452,-.34730082750320435,.017511630430817604,-.9375901818275452,-.34730082750320435,.017511630430817604,-.9375901818275452,-.34730082750320435,.017511630430817604,-.9375901818275452,-.34730082750320435,.017511630430817604,-.9375885128974915,.3473053276538849,.017515607178211212,-.9375885128974915,.3473053276538849,.017515607178211212,-.9375885128974915,.3473053276538849,.017515607178211212,-.9375885128974915,.3473053276538849,.017515607178211212,-.9267594814300537,-.3756551742553711,7398426532745361e-21,-.9267594814300537,-.3756551742553711,7398426532745361e-21,-.9267594814300537,-.3756551742553711,7398426532745361e-21,-.9267594814300537,-.3756551742553711,7398426532745361e-21,-.590289294719696,-.5619460344314575,.5794610977172852,-.590289294719696,-.5619460344314575,.5794610977172852,-.590289294719696,-.5619460344314575,.5794610977172852,-.590289294719696,-.5619460344314575,.5794610977172852,-.5794673562049866,-.5902878642082214,-.5619411468505859,-.5794673562049866,-.5902878642082214,-.5619411468505859,-.5794673562049866,-.5902878642082214,-.5619411468505859,-.5794673562049866,-.5902878642082214,-.5619411468505859,-.56194669008255,-.5794578194618225,.5902919173240662,-.56194669008255,-.5794578194618225,.5902919173240662,-.56194669008255,-.5794578194618225,.5902919173240662,-.56194669008255,-.5794578194618225,.5902919173240662,-.3473033905029297,.01751108467578888,.9375893473625183,-.3473033905029297,.01751108467578888,.9375893473625183,-.3473033905029297,.01751108467578888,.9375893473625183,-.3473033905029297,.01751108467578888,.9375893473625183,-6303191184997559e-21,.9267597794532776,-.3756546974182129,-6303191184997559e-21,.9267597794532776,-.3756546974182129,-6303191184997559e-21,.9267597794532776,-.3756546974182129,-6303191184997559e-21,.9267597794532776,-.3756546974182129,-.5619495511054993,.5794599056243896,-.5902870297431946,-.5619495511054993,.5794599056243896,-.5902870297431946,-.5619495511054993,.5794599056243896,-.5902870297431946,-.5619495511054993,.5794599056243896,-.5902870297431946,-.590303897857666,.5619341731071472,-.5794578194618225,-.590303897857666,.5619341731071472,-.5794578194618225,-.590303897857666,.5619341731071472,-.5794578194618225,-.590303897857666,.5619341731071472,-.5794578194618225,.017507383599877357,.9375904202461243,.34730064868927,.017507383599877357,.9375904202461243,.34730064868927,.017507383599877357,.9375904202461243,.34730064868927,.017507383599877357,.9375904202461243,.34730064868927,-.017507383599877357,.9375904202461243,-.3473004698753357,-.017507383599877357,.9375904202461243,-.3473004698753357,-.017507383599877357,.9375904202461243,-.3473004698753357,-.017507383599877357,.9375904202461243,-.3473004698753357,.5619532465934753,.5794590711593628,.5902844667434692,.5619532465934753,.5794590711593628,.5902844667434692,.5619532465934753,.5794590711593628,.5902844667434692,.5619532465934753,.5794590711593628,.5902844667434692,.3756416141986847,29206275939941406e-22,.926764965057373,.3756416141986847,29206275939941406e-22,.926764965057373,.3756416141986847,29206275939941406e-22,.926764965057373,.3756416141986847,29206275939941406e-22,.926764965057373,.5902771949768066,.5619665384292603,.5794534683227539,.5902771949768066,.5619665384292603,.5794534683227539,.5902771949768066,.5619665384292603,.5794534683227539,.5902771949768066,.5619665384292603,.5794534683227539,.017511233687400818,-.937588095664978,.3473067581653595,.017511233687400818,-.937588095664978,.3473067581653595,.017511233687400818,-.937588095664978,.3473067581653595,.017511233687400818,-.937588095664978,.3473067581653595,.5619463324546814,-.579465389251709,.5902849435806274,.5619463324546814,-.579465389251709,.5902849435806274,.5619463324546814,-.579465389251709,.5902849435806274,.5619463324546814,-.579465389251709,.5902849435806274,.017518242821097374,-.9375925660133362,-.34729424118995667,.017518242821097374,-.9375925660133362,-.34729424118995667,.017518242821097374,-.9375925660133362,-.34729424118995667,.017518242821097374,-.9375925660133362,-.34729424118995667,-.5902858376502991,-.5619493722915649,-.5794615745544434,-.5902858376502991,-.5619493722915649,-.5794615745544434,-.5902858376502991,-.5619493722915649,-.5794615745544434,-.5902858376502991,-.5619493722915649,-.5794615745544434,-.37564951181411743,28908252716064453e-22,-.9267617464065552,-.37564951181411743,28908252716064453e-22,-.9267617464065552,-.37564951181411743,28908252716064453e-22,-.9267617464065552,-.37564951181411743,28908252716064453e-22,-.9267617464065552,.5794623494148254,.5902848839759827,-.5619493126869202,.5794623494148254,.5902848839759827,-.5619493126869202,.5794623494148254,.5902848839759827,-.5619493126869202,.5794623494148254,.5902848839759827,-.5619493126869202,.9267598390579224,.3756541609764099,2.980232238769531e-7,.9267598390579224,.3756541609764099,2.980232238769531e-7,.9267598390579224,.3756541609764099,2.980232238769531e-7,.9267598390579224,.3756541609764099,2.980232238769531e-7,.5619441866874695,.5794647932052612,-.5902873873710632,.5619441866874695,.5794647932052612,-.5902873873710632,.5619441866874695,.5794647932052612,-.5902873873710632,.5619441866874695,.5794647932052612,-.5902873873710632,.9375880360603333,-.347307026386261,.017507091164588928,.9375880360603333,-.347307026386261,.017507091164588928,.9375880360603333,-.347307026386261,.017507091164588928,.9375880360603333,-.347307026386261,.017507091164588928,.9375901818275452,-.34730082750320435,-.017511630430817604,.9375901818275452,-.34730082750320435,-.017511630430817604,.9375901818275452,-.34730082750320435,-.017511630430817604,.9375901818275452,-.34730082750320435,-.017511630430817604,.9375885128974915,.3473053276538849,-.017515607178211212,.9375885128974915,.3473053276538849,-.017515607178211212,.9375885128974915,.3473053276538849,-.017515607178211212,.9375885128974915,.3473053276538849,-.017515607178211212,.5794609785079956,.5902916789054871,.5619437098503113,.5794609785079956,.5902916789054871,.5619437098503113,.5794609785079956,.5902916789054871,.5619437098503113,.5794609785079956,.5902916789054871,.5619437098503113,.5794563889503479,-.5902886986732483,-.5619516968727112,.5794563889503479,-.5902886986732483,-.5619516968727112,.5794563889503479,-.5902886986732483,-.5619516968727112,.5794563889503479,-.5902886986732483,-.5619516968727112,.3756488859653473,-4090368747711182e-21,-.9267621040344238,.3756488859653473,-4090368747711182e-21,-.9267621040344238,.3756488859653473,-4090368747711182e-21,-.9267621040344238,.3756488859653473,-4090368747711182e-21,-.9267621040344238,.5794673562049866,-.5902878642082214,.5619410276412964,.5794673562049866,-.5902878642082214,.5619410276412964,.5794673562049866,-.5902878642082214,.5619410276412964,.5794673562049866,-.5902878642082214,.5619410276412964,-.017518242821097374,-.9375925660133362,.34729424118995667,-.017518242821097374,-.9375925660133362,.34729424118995667,-.017518242821097374,-.9375925660133362,.34729424118995667,-.017518242821097374,-.9375925660133362,.34729424118995667,.34729689359664917,-.017507314682006836,-.9375919103622437,.34729689359664917,-.017507314682006836,-.9375919103622437,.34729689359664917,-.017507314682006836,-.9375919103622437,.34729689359664917,-.017507314682006836,-.9375919103622437,.5619431734085083,-.5794587135314941,-.5902944207191467,.5619431734085083,-.5794587135314941,-.5902944207191467,.5619431734085083,-.5794587135314941,-.5902944207191467,.5619431734085083,-.5794587135314941,-.5902944207191467,16316771507263184e-22,-.9267597794532776,-.3756546974182129,16316771507263184e-22,-.9267597794532776,-.3756546974182129,16316771507263184e-22,-.9267597794532776,-.3756546974182129,16316771507263184e-22,-.9267597794532776,-.3756546974182129,-.3473055958747864,.017509743571281433,-.9375884532928467,-.3473055958747864,.017509743571281433,-.9375884532928467,-.3473055958747864,.017509743571281433,-.9375884532928467,-.3473055958747864,.017509743571281433,-.9375884532928467,-12889504432678223e-22,-.9267591834068298,.3756559193134308,-12889504432678223e-22,-.9267591834068298,.3756559193134308,-12889504432678223e-22,-.9267591834068298,.3756559193134308,-12889504432678223e-22,-.9267591834068298,.3756559193134308,.3473014235496521,.01751813292503357,.9375898241996765,.3473014235496521,.01751813292503357,.9375898241996765,.3473014235496521,.01751813292503357,.9375898241996765,.3473014235496521,.01751813292503357,.9375898241996765,6429851055145264e-21,.9267741441726685,.37561920285224915,6429851055145264e-21,.9267741441726685,.37561920285224915,6429851055145264e-21,.9267741441726685,.37561920285224915,6429851055145264e-21,.9267741441726685,.37561920285224915],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.050937071442604065,.0637897253036499,.11147573590278625,.05759662389755249,.1211576759815216,.10764795541763306,.12535500526428223,.35762202739715576,.05231131985783577,.1178632378578186,.07363925129175186,.11786329746246338,.119850754737854,.015513718128204346,.6247040033340454,.2332320213317871,.02066764421761036,.05759531259536743,.07363908737897873,.06378960609436035,.1211576759815216,.005298316478729248,.5624589920043945,.1254199743270874,.0220418032258749,.05759531259536743,.08258064091205597,.0637897253036499,.1211576759815216,.0066724419593811035,.24976900219917297,.6079350113868713,.02066793106496334,.11786329746246338,.02823532558977604,.06378841400146484,.1211576759815216,.09218895435333252,.4997659921646118,.1081160306930542,.08120644837617874,.057596445083618164,.0977153331041336,.11786329746246338,.1190430074930191,.039651691913604736,.4997679889202118,.3578059673309326,.05987865850329399,.0035230517387390137,.07501331716775894,.11786329746246338,.1190430074930191,.014401912689208984,.3747130036354065,.48311901092529297,.037176623940467834,.06378841400146484,.08877374976873398,.0637897253036499,.1211576759815216,.013714849948883057,.3754439949989319,.48308396339416504,.01310031395405531,.057595252990722656,.08258060365915298,.05759638547897339,.119850754737854,.038539886474609375,.24988000094890594,.4829980134963989,.04336973652243614,.003524184226989746,.06254100054502487,.37501800060272217,.08877380937337875,.05759662389755249,.11985072493553162,.04695647954940796,.00035799999022856355,.6079339981079102,.02823505364358425,.05759531259536743,.096341073513031,.0035229921340942383,.1190430074930191,.02281850576400757,.06744597852230072,.05759650468826294,.07363912463188171,.05759662389755249,.121157705783844,.0557977557182312,.3125090003013611,960230827331543e-19,.0055332062765955925,.11786329746246338,.10390840470790863,.0637897253036499,.11985082179307938,.09880667924880981,.5625389814376831,.25025200843811035,.0069072050973773,.06378835439682007,.05093708261847496,.0035218000411987305,.1211576759815216,.02213144302368164,.2504560053348541,.3578009605407715,.0296091977506876,.0035229921340942383,.06246799975633621,.25025999546051025,.10390840470790863,.0035241246223449707,.1211576759815216,.0823981761932373,.044743988662958145,.06378841400146484,.09014798700809479,.11786329746246338,.1211576759815216,.11606442928314209,.5002009868621826,.10809803009033203,.014474472962319851,.003522932529449463,.10528266429901123,.1178632378578186,.119850754737854,.05759662389755249,.24995200335979462,.2328779697418213,.006907171569764614,.057595252990722656,.062495000660419464,.12494999170303345,.0901479572057724,.0035241246223449707,.11904306709766388,.09150189161300659,.04474392160773277,.003524184226989746,.10528260469436646,.05759662389755249,.1190430074930191,.048068225383758545,.37474000453948975,.23276197910308838,.03580237179994583,.06378841400146484,.05093725398182869,.11786329746246338,.1211576759815216,.015089035034179688,.1876010000705719,.24980902671813965,.09771531820297241,.0637897253036499,.1128498986363411,.05759662389755249,.1211576759815216,.10902208089828491,.37527701258659363,.3578059673309326,.03580237179994583,.11786329746246338,.11147570610046387,.003524184226989746,.119850754737854,.030123412609100342,.24984599649906158,.35762202739715576,.02204183302819729,.0035229921340942383,.029609275981783867,.11786329746246338,.11904306709766388,.10833495855331421,.12527799606323242,.6079350113868713,.02066764421761036,.0035229921340942383,.05231131985783577,.0637897253036499,.11985082179307938,.1072232723236084,.5002130270004272,.2332320213317871,.029609275981783867,.06378841400146484,.08258064091205597,.11786329746246338,.1211576759815216,.09081476926803589,.1875240057706833,.5001220107078552,.028234990313649178,.11786329746246338,.096341073513031,.0637897253036499,.11985072493553162,.1094467043876648,.37527498602867126,.1081160306930542,.00029600001289509237,.4828310012817383,.08120640367269516,.11786329746246338,.08877374976873398,.0035241246223449707,.11985082179307938,.09039008617401123,.02066764421761036,.06378841400146484,.09634126722812653,.11786329746246338,.119850754737854,.04076343774795532,.43751999735832214,.00030297040939331055,.08120640367269516,.0035240650177001953,.1128498986363411,.003524184226989746,.1190430074930191,.031235098838806152,.4375219941139221,.2499929666519165,.04474368318915367,.11786329746246338,.05850442126393318,.05759662389755249,.119850754737854,.0841970443725586,.6246920228004456,.10809803009033203,.059878647327423096,.05759662389755249,.06607192009687424,.11786329746246338,.11904306709766388,.08308535814285278,.3124679923057556,.37530601024627686,.06607174873352051,.0637897253036499,.07501332461833954,.06378960609436035,.119850754737854,.00487363338470459,.25022199749946594,.48311901092529297,.05987865850329399,.11786329746246338,.0887739360332489,.11786329746246338,.119850754737854,.11563986539840698,.43768998980522156,.3752709627151489,.05850460007786751,.0035230517387390137,.09014798700809479,.0637897253036499,.11985069513320923,.013290226459503174,.5624470114707947,.00028502941131591797,.05850442126393318,.06378966569900513,.11147573590278625,.11786329746246338,.1211576759815216,.031922221183776855,.43765100836753845,.12517499923706055,.013100284151732922,.003522932529449463,.11284996569156647,.0637897253036499,.1190430074930191,.056484758853912354,.18763400614261627,.3751859664916992,.06607174873352051,.05759650468826294,.11147589981555939,.0637897253036499,.119850754737854,.05537313222885132,.3754050135612488,.23298698663711548,.005532982759177685,.0035241246223449707,.037176575511693954,.0035229921340942383,.119850754737854,.10103017091751099,.5628489851951599,.37501800060272217,.014474472962319851,.057595252990722656,.03580237179994583,.05759531259536743,.1211576759815216,.03896456956863403,.18770700693130493,.12506598234176636,.006907171569764614,.0035241246223449707,.014474536292254925,.11786329746246338,.1211576759815216,.10060548782348633,.12473999708890915,.23276197910308838,.04336966946721077,.05759531259536743,.08120658993721008,.0637897253036499,.119850754737854,.007097125053405762,.12478700280189514,.4828310012817383,.04474392160773277,.05759531259536743,.06744600087404251,.0637897253036499,.1190430074930191,.005985379219055176,.31249499320983887,.12494999170303345,.04336971789598465,.06378841400146484,.06260299682617188,.500120997428894,.09634125232696533,.05759662389755249,.1211576759815216,.11743861436843872,.06744597852230072,.003522932529449463,.09771530330181122,.05759662389755249,.11985082179307938,.11786329746246338,.37475401163101196,.10790902376174927,.02823500521481037,.0035229921340942383,.04336973652243614,.11786329746246338,.1211576759815216,.08377236127853394,.12484899908304214,.6079339981079102,.07501329481601715,.05759662389755249,.10390856862068176,.11786329746246338,.121157705783844,.05717200040817261,.624783992767334,.35806500911712646,.005532919429242611,.06378835439682007,.07501330226659775,.0035242438316345215,.1211576759815216,.02350562810897827,.5002930164337158,.35806500911712646,.07363908737897873,.0035242438316345215,.09771530330181122,.0035229921340942383,.119850754737854,.02393031120300293,.2502630054950714,.10790902376174927,.05850442126393318,.11786329746246338,.06607190519571304,.003522932529449463,.11904306709766388,.11675161123275757,.49989598989486694,.23298698663711548,.0069072050973773,.11786329746246338,.01310060080140829,.11786329746246338,.1211576759815216,.09923136234283447,.3749470114707947,.3578009605407715,.00022200000239536166,.35807204246520996,.0296091977506876,.05759531259536743,.052311308681964874,.0035218000411987305,.119850754737854,.021706759929656982,.035802435129880905,.0035229921340942383,.10528266429901123,.06378966569900513,.11904306709766388,.0999184250831604,.12546099722385406,.2328779697418213,.005532919429242611,.057595252990722656,.02204192988574505,.11786329746246338,.11985082179307938,.09261363744735718,.625095009803772,.4828310012817383,.05231131985783577,.05759531259536743,.10390844196081161,.05759662389755249,.11985072493553162,.049180030822753906,.1247130036354065,.35807204246520996,.013100284151732922,.06378841400146484,.050937261432409286,.05759531259536743,.1211576759815216,.04875540733337402,.3127020001411438,.24998903274536133,.00024900000425986946,.23276197910308838,.014474536292254925,.06378841400146484,.0901479572057724,.05759662389755249,.1211576759815216,.04738116264343262,.06744600087404251,.11786329746246338,.10528260469436646,.0035241246223449707,.11985082179307938,.0819736123085022,.2502489984035492,.23276197910308838,.022041896358132362,.06378841400146484,.037176575511693954,.05759531259536743,.1211576759815216,.040338754653930664,.500603973865509,.4828310012817383,.08258060365915298,.00352400541305542,.11284996569156647,.11786329746246338,.119850754737854,.03234678506851196,.1253889948129654,.4829980134963989,.03717633709311485,.11786329746246338,.05987846478819847,.06378966569900513,.1211576759815216,.03054797649383545,.4999360144138336,.48308396339416504],normalized:!1},color:{itemSize:4,type:"Uint16Array",array:[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],normalized:!0}},index:{type:"Uint16Array",array:[3,87,79,95,7,11,91,15,99,103,19,111,83,23,115,127,27,123,31,239,131,235,35,143,231,211,151,104,163,37,40,179,169,191,175,47,187,183,51,55,199,219,200,215,57,63,119,135,147,195,139,207,67,155,220,159,69,227,75,167,42,173,189,176,201,56,168,116,60,58,73,225,144,172,193,36,164,72,49,65,205,106,222,70,221,197,157,92,12,88,233,145,137,54,43,190,148,68,156,140,152,64,52,48,196,117,24,132,228,16,209,229,204,153,125,5,25,124,224,165,202,217,212,192,237,136,0,4,93,133,129,61,85,81,113,100,96,17,76,236,28,80,109,21,97,161,105,188,180,185,26,78,30,10,126,166,206,158,198,86,114,234,110,230,154,62,130,194,59,226,122,107,210,18,74,214,218,102,2,94,112,33,232,66,46,146,42,170,173,176,41,201,168,177,116,58,213,73,144,44,172,36,160,164,49,181,65,106,38,222,221,216,197,92,8,12,233,141,145,190,186,54,54,203,43,148,208,68,140,32,152,52,184,48,117,120,24,228,108,16,229,149,204,125,9,5,124,121,224,202,53,217,192,128,237,0,77,4,133,29,129,85,1,81,100,89,96,76,84,236,80,101,109,97,13,161,188,45,180,30,134,26,26,6,78,166,162,14,14,10,166,198,50,206,206,150,158,234,138,238,238,86,234,154,34,22,22,110,154,174,171,194,171,62,194,118,178,122,178,59,122,18,98,107,107,71,210,223,39,218,39,74,218,94,90,102,102,82,2,112,20,33,146,142,66,66,182,46]},boundingSphere:{center:[0,0,0],radius:146.65657531498138}},rotationCombinations:{"1,2":[-58,18,148],"1,3":[-21,-30,-69],"1,4":[-159,-30,69],"1,5":[-122,18,32],"1,6":[58,-54,-148],"1,7":[-58,18,-31],"1,8":[180,0,180],"1,9":[58,-54,30],"1,10":[122,54,-148],"1,11":[-122,-54,31],"1,12":[-58,54,-148],"1,13":[58,18,31],"1,14":[58,-18,148],"1,15":[148,90,-58],"1,16":[122,-18,-148],"1,17":[159,30,-110],"1,18":[21,30,110],"1,19":[158,-30,-69],"1,20":[0,0,180],"2,3":[-159,-30,68],"2,4":[-159,-30,-110],"2,5":[122,-54,148],"2,6":[-122,54,148],"2,7":[-32,-90,-122],"2,8":[-20,30,69],"2,9":[-122,54,-32],"2,10":[58,18,30],"2,11":[-180,90,90],"2,12":[21,-30,69],"2,13":[-21,30,-110],"2,14":[158,30,-110],"2,15":[21,-30,-110],"2,16":[0,90,90],"2,17":[-58,-54,148],"2,18":[-58,-54,-32],"2,19":[158,30,69],"2,20":[58,54,-30],"3,4":[0,0,180],"3,5":[-158,30,-69],"3,6":[90,0,90],"3,7":[-159,-30,-110],"3,8":[158,-30,110],"3,9":[90,0,-90],"3,10":[-58,18,-32],"3,11":[58,-54,-148],"3,12":[-90,0,-90],"3,13":[-21,-30,110],"3,14":[21,-30,-110],"3,15":[-90,0,90],"3,16":[58,-54,30],"3,17":[-180,0,180],"3,18":[180,0,0],"3,19":[58,54,-32],"3,20":[158,30,69],"4,5":[58,-18,-32],"4,6":[-58,18,148],"4,7":[158,30,69],"4,8":[-90,-90,0],"4,9":[-58,18,-32],"4,10":[58,-18,148],"4,11":[-122,-18,148],"4,12":[122,18,-32],"4,13":[0,-90,-90],"4,14":[-122,18,-148],"4,15":[122,18,148],"4,16":[-122,-18,-32],"4,17":[58,-54,-148],"4,18":[58,54,-32],"4,19":[-58,-54,148],"4,20":[-158,-30,-110],"5,6":[-122,-18,148],"5,7":[122,54,30],"5,8":[58,-54,-148],"5,9":[-122,-54,-148],"5,10":[0,0,180],"5,11":[-58,-54,-32],"5,12":[58,54,-32],"5,13":[-58,18,-32],"5,14":[180,0,-180],"5,15":[58,54,148],"5,16":[-58,-54,148],"5,17":[122,18,-32],"5,18":[-58,54,32],"5,19":[-180,0,0],"5,20":[-122,54,148],"6,7":[-159,30,110],"6,8":[-58,-54,-32],"6,9":[21,30,-69],"6,10":[122,-54,148],"6,11":[58,54,-32],"6,12":[159,-30,110],"6,13":[-122,54,148],"6,14":[-21,-30,-69],"6,15":[159,-30,-69],"6,16":[58,54,148],"6,17":[90,-90,-180],"6,18":[122,18,-32],"6,19":[-21,-30,110],"6,20":[122,54,32],"7,8":[21,-30,-110],"7,9":[159,-30,-69],"7,10":[21,30,-69],"7,11":[90,0,90],"7,12":[-58,54,32],"7,13":[122,54,32],"7,14":[58,-54,-148],"7,15":[-21,30,69],"7,16":[90,0,-90],"7,17":[58,54,-32],"7,18":[-21,-30,110],"7,19":[-159,-30,-110],"7,20":[-158,30,110],"8,9":[122,54,-148],"8,10":[58,-54,32],"8,11":[-58,54,-148],"8,12":[-122,-54,32],"8,13":[0,0,180],"8,14":[122,18,-32],"8,15":[0,-90,90],"8,16":[-58,54,32],"8,17":[-90,0,90],"8,18":[-90,0,-90],"8,19":[-122,54,148],"8,20":[180,0,0],"9,10":[-159,-30,-110],"9,11":[58,-18,-32],"9,12":[180,0,180],"9,13":[58,54,-32],"9,14":[21,30,110],"9,15":[-180,0,0],"9,16":[-58,-54,-32],"9,17":[-122,-18,-32],"9,18":[90,90,0],"9,19":[-58,-18,32],"9,20":[-58,54,-148],"10,11":[58,54,148],"10,12":[-58,-18,32],"10,13":[58,-18,148],"10,14":[90,0,-90],"10,15":[-58,-54,-32],"10,16":[120,-18,32],"10,17":[-122,-18,148],"10,18":[58,-54,-148],"10,19":[-180,0,-180],"10,20":[122,-54,-32],"11,12":[159,30,-110],"11,13":[-159,-30,69],"11,14":[21,-30,69],"11,15":[122,18,-32],"11,16":[0,0,-180],"11,17":[159,-30,-69],"11,18":[58,18,32],"11,19":[-122,-54,30],"11,20":[21,30,110],"12,13":[58,54,148],"12,14":[-122,18,32],"12,15":[0,0,-180],"12,16":[-122,54,148],"12,17":[-110,-90,159],"12,18":[58,18,-148],"12,19":[159,-30,110],"12,20":[90,0,-90],"13,14":[122,-54,148],"13,15":[58,54,-32],"13,16":[-58,-18,-148],"13,17":[-21,30,-110],"13,18":[-21,30,69],"13,19":[122,-54,-32],"13,20":[-180,0,-180],"14,15":[122,-18,-148],"14,16":[21,30,110],"14,17":[58,-18,148],"14,18":[58,-18,-32],"14,19":[0,0,-180],"14,20":[58,18,32],"15,16":[159,30,-110],"15,17":[58,-18,-32],"15,18":[-58,-18,32],"15,19":[122,-18,32],"15,20":[58,-54,-148],"16,17":[122,-54,148],"16,18":[122,-54,-32],"16,19":[122,54,-148],"16,20":[-122,54,-32],"17,18":[0,0,180],"17,19":[122,-54,148],"17,20":[21,-30,-110],"18,19":[-159,-30,69],"18,20":[158,30,-110],"19,20":[58,54,148]}},d24:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"D1B379DE-9640-4151-A394-D6DF1846E49C",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-93.4049072265625,-3.781350612640381,3.7816989421844482,-93.4049072265625,-3.781350612640381,3.7816989421844482,-93.4049072265625,-3.781350612640381,3.7816989421844482,-93.4049072265625,-3.781350612640381,3.7816989421844482,-49.7835578918457,55.42812728881836,-49.783199310302734,-49.7835578918457,55.42812728881836,-49.783199310302734,-49.7835578918457,55.42812728881836,-49.783199310302734,-49.7835578918457,55.42812728881836,-49.783199310302734,-63.36488342285156,68.7131118774414,-3.781550168991089,-63.36488342285156,68.7131118774414,-3.781550168991089,-63.36488342285156,68.7131118774414,-3.781550168991089,-63.36488342285156,68.7131118774414,-3.781550168991089,-3.7813644409179688,93.4049301147461,-3.7813427448272705,-3.7813644409179688,93.4049301147461,-3.7813427448272705,-3.7813644409179688,93.4049301147461,-3.7813427448272705,-3.7813644409179688,93.4049301147461,-3.7813427448272705,3.7820396423339844,63.364871978759766,68.71309661865234,3.7820396423339844,63.364871978759766,68.71309661865234,3.7820396423339844,63.364871978759766,68.71309661865234,3.7820396423339844,63.364871978759766,68.71309661865234,49.78358840942383,49.783382415771484,55.427940368652344,49.78358840942383,49.783382415771484,55.427940368652344,49.78358840942383,49.783382415771484,55.427940368652344,49.78358840942383,49.783382415771484,55.427940368652344,-93.40494537353516,3.7813589572906494,-3.781012773513794,-93.40494537353516,3.7813589572906494,-3.781012773513794,-93.40494537353516,3.7813589572906494,-3.781012773513794,-93.40494537353516,3.7813589572906494,-3.781012773513794,-55.42829895019531,49.78338623046875,-49.78317642211914,-55.42829895019531,49.78338623046875,-49.78317642211914,-55.42829895019531,49.78338623046875,-49.78317642211914,-55.42829895019531,49.78338623046875,-49.78317642211914,-63.3648567199707,68.7131118774414,3.7820181846618652,-63.3648567199707,68.7131118774414,3.7820181846618652,-63.3648567199707,68.7131118774414,3.7820181846618652,-63.3648567199707,68.7131118774414,3.7820181846618652,49.7835693359375,55.42811965942383,49.783199310302734,49.7835693359375,55.42811965942383,49.783199310302734,49.7835693359375,55.42811965942383,49.783199310302734,49.7835693359375,55.42811965942383,49.783199310302734,63.364891052246094,68.7131118774414,3.781550168991089,63.364891052246094,68.7131118774414,3.781550168991089,63.364891052246094,68.7131118774414,3.781550168991089,63.364891052246094,68.7131118774414,3.781550168991089,63.3646240234375,3.781778573989868,-68.71334075927734,63.3646240234375,3.781778573989868,-68.71334075927734,63.3646240234375,3.781778573989868,-68.71334075927734,63.3646240234375,3.781778573989868,-68.71334075927734,68.71309661865234,63.3648681640625,-3.7820355892181396,68.71309661865234,63.3648681640625,-3.7820355892181396,68.71309661865234,63.3648681640625,-3.7820355892181396,68.71309661865234,63.3648681640625,-3.7820355892181396,93.4049072265625,3.781350612640381,-3.7816996574401855,93.4049072265625,3.781350612640381,-3.7816996574401855,93.4049072265625,3.781350612640381,-3.7816996574401855,93.4049072265625,3.781350612640381,-3.7816996574401855,68.71288299560547,3.781782865524292,-63.36511993408203,68.71288299560547,3.781782865524292,-63.36511993408203,68.71288299560547,3.781782865524292,-63.36511993408203,68.71288299560547,3.781782865524292,-63.36511993408203,55.42794418334961,49.783382415771484,-49.7835807800293,55.42794418334961,49.783382415771484,-49.7835807800293,55.42794418334961,49.783382415771484,-49.7835807800293,55.42794418334961,49.783382415771484,-49.7835807800293,49.783203125,55.42811965942383,-49.7835578918457,49.783203125,55.42811965942383,-49.7835578918457,49.783203125,55.42811965942383,-49.7835578918457,49.783203125,55.42811965942383,-49.7835578918457,3.7813453674316406,93.4049301147461,-3.781369686126709,3.7813453674316406,93.4049301147461,-3.781369686126709,3.7813453674316406,93.4049301147461,-3.781369686126709,3.7813453674316406,93.4049301147461,-3.781369686126709,93.40494537353516,-3.7813589572906494,3.7810134887695312,93.40494537353516,-3.7813589572906494,3.7810134887695312,93.40494537353516,-3.7813589572906494,3.7810134887695312,93.40494537353516,-3.7813589572906494,3.7810134887695312,-3.7816996574401855,3.7813563346862793,-93.40489196777344,-3.7816996574401855,3.7813563346862793,-93.40489196777344,-3.7816996574401855,3.7813563346862793,-93.40489196777344,-3.7816996574401855,3.7813563346862793,-93.40489196777344,-49.7835807800293,49.78338623046875,-55.427940368652344,-49.7835807800293,49.78338623046875,-55.427940368652344,-49.7835807800293,49.78338623046875,-55.427940368652344,-49.7835807800293,49.78338623046875,-55.427940368652344,55.428306579589844,49.783382415771484,49.78317642211914,55.428306579589844,49.783382415771484,49.78317642211914,55.428306579589844,49.783382415771484,49.78317642211914,55.428306579589844,49.783382415771484,49.78317642211914,-3.7813727855682373,-93.4049301147461,-3.781342029571533,-3.7813727855682373,-93.4049301147461,-3.781342029571533,-3.7813727855682373,-93.4049301147461,-3.781342029571533,-3.7813727855682373,-93.4049301147461,-3.781342029571533,-68.71334838867188,-3.781782865524292,-63.36461639404297,-68.71334838867188,-3.781782865524292,-63.36461639404297,-68.71334838867188,-3.781782865524292,-63.36461639404297,-68.71334838867188,-3.781782865524292,-63.36461639404297,-3.7820396423339844,-63.364871978759766,-68.71309661865234,-3.7820396423339844,-63.364871978759766,-68.71309661865234,-3.7820396423339844,-63.364871978759766,-68.71309661865234,-3.7820396423339844,-63.364871978759766,-68.71309661865234,-49.7835807800293,-49.783382415771484,-55.427940368652344,-49.7835807800293,-49.783382415771484,-55.427940368652344,-49.7835807800293,-49.783382415771484,-55.427940368652344,-49.7835807800293,-49.783382415771484,-55.427940368652344,63.3648567199707,-68.7131118774414,-3.7820160388946533,63.3648567199707,-68.7131118774414,-3.7820160388946533,63.3648567199707,-68.7131118774414,-3.7820160388946533,63.3648567199707,-68.7131118774414,-3.7820160388946533,3.781336784362793,-93.4049301147461,-3.7813704013824463,3.781336784362793,-93.4049301147461,-3.7813704013824463,3.781336784362793,-93.4049301147461,-3.7813704013824463,3.781336784362793,-93.4049301147461,-3.7813704013824463,3.7815499305725098,-68.7131118774414,-63.36488342285156,3.7815499305725098,-68.7131118774414,-63.36488342285156,3.7815499305725098,-68.7131118774414,-63.36488342285156,3.7815499305725098,-68.7131118774414,-63.36488342285156,-63.3646240234375,3.781787157058716,68.71334075927734,-63.3646240234375,3.781787157058716,68.71334075927734,-63.3646240234375,3.781787157058716,68.71334075927734,-63.3646240234375,3.781787157058716,68.71334075927734,3.7820351123809814,-63.364871978759766,68.71309661865234,3.7820351123809814,-63.364871978759766,68.71309661865234,3.7820351123809814,-63.364871978759766,68.71309661865234,3.7820351123809814,-63.364871978759766,68.71309661865234,63.3651237487793,-3.781787157058716,68.71287536621094,63.3651237487793,-3.781787157058716,68.71287536621094,63.3651237487793,-3.781787157058716,68.71287536621094,63.3651237487793,-3.781787157058716,68.71287536621094,55.42794418334961,-49.783382415771484,-49.7835807800293,55.42794418334961,-49.783382415771484,-49.7835807800293,55.42794418334961,-49.783382415771484,-49.7835807800293,55.42794418334961,-49.783382415771484,-49.7835807800293,-93.4049072265625,3.7813589572906494,3.7816996574401855,-93.4049072265625,3.7813589572906494,3.7816996574401855,-93.4049072265625,3.7813589572906494,3.7816996574401855,-93.4049072265625,3.7813589572906494,3.7816996574401855,-55.42794418334961,49.78338623046875,49.7835807800293,-55.42794418334961,49.78338623046875,49.7835807800293,-55.42794418334961,49.78338623046875,49.7835807800293,-55.42794418334961,49.78338623046875,49.7835807800293,68.71311950683594,-63.3648796081543,3.7815308570861816,68.71311950683594,-63.3648796081543,3.7815308570861816,68.71311950683594,-63.3648796081543,3.7815308570861816,68.71311950683594,-63.3648796081543,3.7815308570861816,3.781013250350952,3.7813565731048584,-93.4049301147461,3.781013250350952,3.7813565731048584,-93.4049301147461,3.781013250350952,3.7813565731048584,-93.4049301147461,3.781013250350952,3.7813565731048584,-93.4049301147461,-63.3651237487793,3.781787157058716,-68.71288299560547,-63.3651237487793,3.781787157058716,-68.71288299560547,-63.3651237487793,3.781787157058716,-68.71288299560547,-63.3651237487793,3.781787157058716,-68.71288299560547,-63.3651237487793,-3.781778573989868,-68.71287536621094,-63.3651237487793,-3.781778573989868,-68.71287536621094,-63.3651237487793,-3.781778573989868,-68.71287536621094,-63.3651237487793,-3.781778573989868,-68.71287536621094,3.7815260887145996,-63.364871978759766,-68.71311950683594,3.7815260887145996,-63.364871978759766,-68.71311950683594,3.7815260887145996,-63.364871978759766,-68.71311950683594,3.7815260887145996,-63.364871978759766,-68.71311950683594,-3.781545639038086,68.7131118774414,63.36488342285156,-3.781545639038086,68.7131118774414,63.36488342285156,-3.781545639038086,68.7131118774414,63.36488342285156,-3.781545639038086,68.7131118774414,63.36488342285156,-3.7815303802490234,63.364871978759766,68.71312713623047,-3.7815303802490234,63.364871978759766,68.71312713623047,-3.7815303802490234,63.364871978759766,68.71312713623047,-3.7815303802490234,63.364871978759766,68.71312713623047,3.7820241451263428,68.7131118774414,63.3648567199707,3.7820241451263428,68.7131118774414,63.3648567199707,3.7820241451263428,68.7131118774414,63.3648567199707,3.7820241451263428,68.7131118774414,63.3648567199707,3.7820115089416504,-68.7131118774414,63.3648567199707,3.7820115089416504,-68.7131118774414,63.3648567199707,3.7820115089416504,-68.7131118774414,63.3648567199707,3.7820115089416504,-68.7131118774414,63.3648567199707,93.4049072265625,-3.7813589572906494,-3.7816989421844482,93.4049072265625,-3.7813589572906494,-3.7816989421844482,93.4049072265625,-3.7813589572906494,-3.7816989421844482,93.4049072265625,-3.7813589572906494,-3.7816989421844482,63.36486053466797,68.7131118774414,-3.7820181846618652,63.36486053466797,68.7131118774414,-3.7820181846618652,63.36486053466797,68.7131118774414,-3.7820181846618652,63.36486053466797,68.7131118774414,-3.7820181846618652,68.71312713623047,63.3648681640625,3.7815330028533936,68.71312713623047,63.3648681640625,3.7815330028533936,68.71312713623047,63.3648681640625,3.7815330028533936,68.71312713623047,63.3648681640625,3.7815330028533936,3.7815349102020264,63.364871978759766,-68.71312713623047,3.7815349102020264,63.364871978759766,-68.71312713623047,3.7815349102020264,63.364871978759766,-68.71312713623047,3.7815349102020264,63.364871978759766,-68.71312713623047,-3.7820308208465576,63.364871978759766,-68.71309661865234,-3.7820308208465576,63.364871978759766,-68.71309661865234,-3.7820308208465576,63.364871978759766,-68.71309661865234,-3.7820308208465576,63.364871978759766,-68.71309661865234,-68.71309661865234,-63.3648681640625,3.7820377349853516,-68.71309661865234,-63.3648681640625,3.7820377349853516,-68.71309661865234,-63.3648681640625,3.7820377349853516,-68.71309661865234,-63.3648681640625,3.7820377349853516,-68.71312713623047,-63.3648681640625,-3.7815308570861816,-68.71312713623047,-63.3648681640625,-3.7815308570861816,-68.71312713623047,-63.3648681640625,-3.7815308570861816,-68.71312713623047,-63.3648681640625,-3.7815308570861816,-55.42830276489258,-49.783382415771484,-49.78317642211914,-55.42830276489258,-49.783382415771484,-49.78317642211914,-55.42830276489258,-49.783382415771484,-49.78317642211914,-55.42830276489258,-49.783382415771484,-49.78317642211914,3.7813644409179688,-93.4049301147461,3.781342029571533,3.7813644409179688,-93.4049301147461,3.781342029571533,3.7813644409179688,-93.4049301147461,3.781342029571533,3.7813644409179688,-93.4049301147461,3.781342029571533,63.36488342285156,-68.7131118774414,3.781552314758301,63.36488342285156,-68.7131118774414,3.781552314758301,63.36488342285156,-68.7131118774414,3.781552314758301,63.36488342285156,-68.7131118774414,3.781552314758301,93.40494537353516,3.781350612640381,3.781012773513794,93.40494537353516,3.781350612640381,3.781012773513794,93.40494537353516,3.781350612640381,3.781012773513794,93.40494537353516,3.781350612640381,3.781012773513794,-3.7810142040252686,-3.781355857849121,93.4049301147461,-3.7810142040252686,-3.781355857849121,93.4049301147461,-3.7810142040252686,-3.781355857849121,93.4049301147461,-3.7810142040252686,-3.781355857849121,93.4049301147461,-63.36488723754883,-68.7131118774414,-3.781552314758301,-63.36488723754883,-68.7131118774414,-3.781552314758301,-63.36488723754883,-68.7131118774414,-3.781552314758301,-63.36488723754883,-68.7131118774414,-3.781552314758301,-3.7813453674316406,-93.4049301147461,3.7813704013824463,-3.7813453674316406,-93.4049301147461,3.7813704013824463,-3.7813453674316406,-93.4049301147461,3.7813704013824463,-3.7813453674316406,-93.4049301147461,3.7813704013824463,-63.364864349365234,-68.7131118774414,3.7820160388946533,-63.364864349365234,-68.7131118774414,3.7820160388946533,-63.364864349365234,-68.7131118774414,3.7820160388946533,-63.364864349365234,-68.7131118774414,3.7820160388946533,-3.7816994190216064,-3.7813565731048584,-93.40489196777344,-3.7816994190216064,-3.7813565731048584,-93.40489196777344,-3.7816994190216064,-3.7813565731048584,-93.40489196777344,-3.7816994190216064,-3.7813565731048584,-93.40489196777344,63.3646240234375,-3.781787157058716,-68.71334838867188,63.3646240234375,-3.781787157058716,-68.71334838867188,63.3646240234375,-3.781787157058716,-68.71334838867188,63.3646240234375,-3.781787157058716,-68.71334838867188,3.7810134887695312,-3.7813563346862793,-93.4049301147461,3.7810134887695312,-3.7813563346862793,-93.4049301147461,3.7810134887695312,-3.7813563346862793,-93.4049301147461,3.7810134887695312,-3.7813563346862793,-93.4049301147461,68.71309661865234,-63.364871978759766,-3.7820377349853516,68.71309661865234,-63.364871978759766,-3.7820377349853516,68.71309661865234,-63.364871978759766,-3.7820377349853516,68.71309661865234,-63.364871978759766,-3.7820377349853516,68.71288299560547,-3.781787157058716,-63.36511993408203,68.71288299560547,-3.781787157058716,-63.36511993408203,68.71288299560547,-3.781787157058716,-63.36511993408203,68.71288299560547,-3.781787157058716,-63.36511993408203,-93.40494537353516,-3.781350612640381,-3.7810134887695312,-93.40494537353516,-3.781350612640381,-3.7810134887695312,-93.40494537353516,-3.781350612640381,-3.7810134887695312,-93.40494537353516,-3.781350612640381,-3.7810134887695312,-68.71312713623047,63.364871978759766,-3.7815330028533936,-68.71312713623047,63.364871978759766,-3.7815330028533936,-68.71312713623047,63.364871978759766,-3.7815330028533936,-68.71312713623047,63.364871978759766,-3.7815330028533936,68.71334838867188,-3.7817912101745605,63.36461639404297,68.71334838867188,-3.7817912101745605,63.36461639404297,68.71334838867188,-3.7817912101745605,63.36461639404297,68.71334838867188,-3.7817912101745605,63.36461639404297,-3.782020092010498,-68.7131118774414,-63.3648567199707,-3.782020092010498,-68.7131118774414,-63.3648567199707,-3.782020092010498,-68.7131118774414,-63.3648567199707,-3.782020092010498,-68.7131118774414,-63.3648567199707,-3.781336784362793,93.4049301147461,3.781369686126709,-3.781336784362793,93.4049301147461,3.781369686126709,-3.781336784362793,93.4049301147461,3.781369686126709,-3.781336784362793,93.4049301147461,3.781369686126709,3.7813727855682373,93.4049301147461,3.7813427448272705,3.7813727855682373,93.4049301147461,3.7813427448272705,3.7813727855682373,93.4049301147461,3.7813427448272705,3.7813727855682373,93.4049301147461,3.7813427448272705,3.781700372695923,3.781355857849121,93.40489196777344,3.781700372695923,3.781355857849121,93.40489196777344,3.781700372695923,3.781355857849121,93.40489196777344,3.781700372695923,3.781355857849121,93.40489196777344,3.7816989421844482,-3.7813572883605957,93.40489196777344,3.7816989421844482,-3.7813572883605957,93.40489196777344,3.7816989421844482,-3.7813572883605957,93.40489196777344,3.7816989421844482,-3.7813572883605957,93.40489196777344,-3.781012773513794,3.7813572883605957,93.4049301147461,-3.781012773513794,3.7813572883605957,93.4049301147461,-3.781012773513794,3.7813572883605957,93.4049301147461,-3.781012773513794,3.7813572883605957,93.4049301147461,3.7815542221069336,68.7131118774414,-63.36488342285156,3.7815542221069336,68.7131118774414,-63.36488342285156,3.7815542221069336,68.7131118774414,-63.36488342285156,3.7815542221069336,68.7131118774414,-63.36488342285156,-49.78318405151367,-49.783382415771484,55.42829895019531,-49.78318405151367,-49.783382415771484,55.42829895019531,-49.78318405151367,-49.783382415771484,55.42829895019531,-49.78318405151367,-49.783382415771484,55.42829895019531,49.7835807800293,-49.783382415771484,55.42793655395508,49.7835807800293,-49.783382415771484,55.42793655395508,49.7835807800293,-49.783382415771484,55.42793655395508,49.7835807800293,-49.783382415771484,55.42793655395508,49.783565521240234,-55.42811965942383,49.78319549560547,49.783565521240234,-55.42811965942383,49.78319549560547,49.783565521240234,-55.42811965942383,49.78319549560547,49.783565521240234,-55.42811965942383,49.78319549560547,55.42829895019531,-49.783382415771484,49.783172607421875,55.42829895019531,-49.783382415771484,49.783172607421875,55.42829895019531,-49.783382415771484,49.783172607421875,55.42829895019531,-49.783382415771484,49.783172607421875,-49.7835578918457,-55.42811965942383,-49.783199310302734,-49.7835578918457,-55.42811965942383,-49.783199310302734,-49.7835578918457,-55.42811965942383,-49.783199310302734,-49.7835578918457,-55.42811965942383,-49.783199310302734,-49.783199310302734,-55.42811965942383,49.7835578918457,-49.783199310302734,-55.42811965942383,49.7835578918457,-49.783199310302734,-55.42811965942383,49.7835578918457,-49.783199310302734,-55.42811965942383,49.7835578918457,49.78318405151367,-49.783382415771484,-55.42829895019531,49.78318405151367,-49.783382415771484,-55.42829895019531,49.78318405151367,-49.783382415771484,-55.42829895019531,49.78318405151367,-49.783382415771484,-55.42829895019531,-55.42794418334961,-49.783382415771484,49.7835807800293,-55.42794418334961,-49.783382415771484,49.7835807800293,-55.42794418334961,-49.783382415771484,49.7835807800293,-55.42794418334961,-49.783382415771484,49.7835807800293,49.78318405151367,49.783382415771484,-55.42829895019531,49.78318405151367,49.783382415771484,-55.42829895019531,49.78318405151367,49.783382415771484,-55.42829895019531,49.78318405151367,49.783382415771484,-55.42829895019531,-49.78318405151367,49.78338623046875,55.42829895019531,-49.78318405151367,49.78338623046875,55.42829895019531,-49.78318405151367,49.78338623046875,55.42829895019531,-49.78318405151367,49.78338623046875,55.42829895019531,-49.783199310302734,55.42812728881836,49.7835578918457,-49.783199310302734,55.42812728881836,49.7835578918457,-49.783199310302734,55.42812728881836,49.7835578918457,-49.783199310302734,55.42812728881836,49.7835578918457,-63.3646240234375,-3.781782865524292,68.71334838867188,-63.3646240234375,-3.781782865524292,68.71334838867188,-63.3646240234375,-3.781782865524292,68.71334838867188,-63.3646240234375,-3.781782865524292,68.71334838867188,-68.71288299560547,-3.781778573989868,63.36511993408203,-68.71288299560547,-3.781778573989868,63.36511993408203,-68.71288299560547,-3.781778573989868,63.36511993408203,-68.71288299560547,-3.781778573989868,63.36511993408203,-3.7815349102020264,-63.364871978759766,68.71311950683594,-3.7815349102020264,-63.364871978759766,68.71311950683594,-3.7815349102020264,-63.364871978759766,68.71311950683594,-3.7815349102020264,-63.364871978759766,68.71311950683594,-3.7815582752227783,-68.7131118774414,63.36488342285156,-3.7815582752227783,-68.7131118774414,63.36488342285156,-3.7815582752227783,-68.7131118774414,63.36488342285156,-3.7815582752227783,-68.7131118774414,63.36488342285156,-3.782015800476074,68.7131118774414,-63.3648567199707,-3.782015800476074,68.7131118774414,-63.3648567199707,-3.782015800476074,68.7131118774414,-63.3648567199707,-3.782015800476074,68.7131118774414,-63.3648567199707,-68.71334838867188,3.781787157058716,-63.36461639404297,-68.71334838867188,3.781787157058716,-63.36461639404297,-68.71334838867188,3.781787157058716,-63.36461639404297,-68.71334838867188,3.781787157058716,-63.36461639404297,63.3651237487793,3.781782865524292,68.71288299560547,63.3651237487793,3.781782865524292,68.71288299560547,63.3651237487793,3.781782865524292,68.71288299560547,63.3651237487793,3.781782865524292,68.71288299560547,68.71334838867188,3.781778573989868,63.36461639404297,68.71334838867188,3.781778573989868,63.36461639404297,68.71334838867188,3.781778573989868,63.36461639404297,68.71334838867188,3.781778573989868,63.36461639404297,-68.71309661865234,63.3648796081543,3.7820355892181396,-68.71309661865234,63.3648796081543,3.7820355892181396,-68.71309661865234,63.3648796081543,3.7820355892181396,-68.71309661865234,63.3648796081543,3.7820355892181396,-68.71288299560547,3.7817912101745605,63.36511993408203,-68.71288299560547,3.7817912101745605,63.36511993408203,-68.71288299560547,3.7817912101745605,63.36511993408203,-68.71288299560547,3.7817912101745605,63.36511993408203,49.783203125,-55.42811965942383,-49.7835578918457,49.783203125,-55.42811965942383,-49.7835578918457,49.783203125,-55.42811965942383,-49.7835578918457,49.783203125,-55.42811965942383,-49.7835578918457],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.8930176496505737,-.31821155548095703,.31821513175964355,-.8930176496505737,-.31821155548095703,.31821513175964355,-.8930176496505737,-.31821155548095703,.31821513175964355,-.8930176496505737,-.31821155548095703,.31821513175964355,-.3939540982246399,.8304173350334167,-.3939635753631592,-.3939540982246399,.8304173350334167,-.3939635753631592,-.3939540982246399,.8304173350334167,-.3939635753631592,-.3939540982246399,.8304173350334167,-.3939635753631592,-.39820414781570435,.8611265420913696,-.31606101989746094,-.39820414781570435,.8611265420913696,-.31606101989746094,-.39820414781570435,.8611265420913696,-.31606101989746094,-.39820414781570435,.8611265420913696,-.31606101989746094,-.3181779980659485,.8930322527885437,-.3182079792022705,-.3181779980659485,.8930322527885437,-.3182079792022705,-.3181779980659485,.8930322527885437,-.3182079792022705,-.3181779980659485,.8930322527885437,-.3182079792022705,.3160579800605774,.3982042074203491,.8611275553703308,.3160579800605774,.3982042074203491,.8611275553703308,.3160579800605774,.3982042074203491,.8611275553703308,.3160579800605774,.3982042074203491,.8611275553703308,.39394938945770264,.39396142959594727,.8304205536842346,.39394938945770264,.39396142959594727,.8304205536842346,.39394938945770264,.39396142959594727,.8304205536842346,.39394938945770264,.39396142959594727,.8304205536842346,-.8930201530456543,.3182116746902466,-.31820809841156006,-.8930201530456543,.3182116746902466,-.31820809841156006,-.8930201530456543,.3182116746902466,-.31820809841156006,-.8930201530456543,.3182116746902466,-.31820809841156006,-.8304393887519836,.3939298987388611,-.39394134283065796,-.8304393887519836,.3939298987388611,-.39394134283065796,-.8304393887519836,.3939298987388611,-.39394134283065796,-.8304393887519836,.3939298987388611,-.39394134283065796,-.39819657802581787,.8611276745796204,.31606724858283997,-.39819657802581787,.8611276745796204,.31606724858283997,-.39819657802581787,.8611276745796204,.31606724858283997,-.39819657802581787,.8611276745796204,.31606724858283997,.3939548134803772,.8304223418235779,.3939521610736847,.3939548134803772,.8304223418235779,.3939521610736847,.3939548134803772,.8304223418235779,.3939521610736847,.3939548134803772,.8304223418235779,.3939521610736847,.398190438747406,.8611446022987366,.31602901220321655,.398190438747406,.8611446022987366,.31602901220321655,.398190438747406,.8611446022987366,.31602901220321655,.398190438747406,.8611446022987366,.31602901220321655,.39820146560668945,.3160552680492401,-.8611298203468323,.39820146560668945,.3160552680492401,-.8611298203468323,.39820146560668945,.3160552680492401,-.8611298203468323,.39820146560668945,.3160552680492401,-.8611298203468323,.8611258268356323,.39821386337280273,-.31605064868927,.8611258268356323,.39821386337280273,-.31605064868927,.8611258268356323,.39821386337280273,-.31605064868927,.8611258268356323,.39821386337280273,-.31605064868927,.8930308818817139,.3181929588317871,-.318196564912796,.8930308818817139,.3181929588317871,-.318196564912796,.8930308818817139,.3181929588317871,-.318196564912796,.8930308818817139,.3181929588317871,-.318196564912796,.8611277937889099,.3160572052001953,-.39820432662963867,.8611277937889099,.3160572052001953,-.39820432662963867,.8611277937889099,.3160572052001953,-.39820432662963867,.8611277937889099,.3160572052001953,-.39820432662963867,.8304156064987183,.3939667344093323,-.3939545154571533,.8304156064987183,.3939667344093323,-.3939545154571533,.8304156064987183,.3939667344093323,-.3939545154571533,.8304156064987183,.3939667344093323,-.3939545154571533,.39395228028297424,.8304221630096436,-.3939549922943115,.39395228028297424,.8304221630096436,-.3939549922943115,.39395228028297424,.8304221630096436,-.3939549922943115,.39395228028297424,.8304221630096436,-.3939549922943115,.31819266080856323,.893029510974884,-.31820082664489746,.31819266080856323,.893029510974884,-.31820082664489746,.31819266080856323,.893029510974884,-.31820082664489746,.31819266080856323,.893029510974884,-.31820082664489746,.8930361866950989,-.3181893527507782,.3181857466697693,.8930361866950989,-.3181893527507782,.3181857466697693,.8930361866950989,-.3181893527507782,.3181857466697693,.8930361866950989,-.3181893527507782,.3181857466697693,-.3182153105735779,.31821152567863464,-.8930174708366394,-.3182153105735779,.31821152567863464,-.8930174708366394,-.3182153105735779,.31821152567863464,-.8930174708366394,-.3182153105735779,.31821152567863464,-.8930174708366394,-.3939494788646698,.39396119117736816,-.8304205536842346,-.3939494788646698,.39396119117736816,-.8304205536842346,-.3939494788646698,.39396119117736816,-.8304205536842346,-.3939494788646698,.39396119117736816,-.8304205536842346,.8304232358932495,.3939468264579773,.3939582109451294,.8304232358932495,.3939468264579773,.3939582109451294,.8304232358932495,.3939468264579773,.3939582109451294,.8304232358932495,.3939468264579773,.3939582109451294,-.3181976079940796,-.8930297493934631,-.3181954622268677,-.3181976079940796,-.8930297493934631,-.3181954622268677,-.3181976079940796,-.8930297493934631,-.3181954622268677,-.3181976079940796,-.8930297493934631,-.3181954622268677,-.8611258268356323,-.3160642981529236,-.3982030749320984,-.8611258268356323,-.3160642981529236,-.3982030749320984,-.8611258268356323,-.3160642981529236,-.3982030749320984,-.8611258268356323,-.3160642981529236,-.3982030749320984,-.31608039140701294,-.3982047438621521,-.8611190915107727,-.31608039140701294,-.3982047438621521,-.8611190915107727,-.31608039140701294,-.3982047438621521,-.8611190915107727,-.31608039140701294,-.3982047438621521,-.8611190915107727,-.3939639627933502,-.3939467966556549,-.8304204940795898,-.3939639627933502,-.3939467966556549,-.8304204940795898,-.3939639627933502,-.3939467966556549,-.8304204940795898,-.3939639627933502,-.3939467966556549,-.8304204940795898,.39820337295532227,-.8611286282539368,-.31605619192123413,.39820337295532227,-.8611286282539368,-.31605619192123413,.39820337295532227,-.8611286282539368,-.31605619192123413,.39820337295532227,-.8611286282539368,-.31605619192123413,.3181878924369812,-.8930350542068481,-.31819045543670654,.3181878924369812,-.8930350542068481,-.31819045543670654,.3181878924369812,-.8930350542068481,-.31819045543670654,.3181878924369812,-.8930350542068481,-.31819045543670654,.3160671591758728,-.8611257672309875,-.39820101857185364,.3160671591758728,-.8611257672309875,-.39820101857185364,.3160671591758728,-.8611257672309875,-.39820101857185364,.3160671591758728,-.8611257672309875,-.39820101857185364,-.3982013761997223,.3160552680492401,.861129879951477,-.3982013761997223,.3160552680492401,.861129879951477,-.3982013761997223,.3160552680492401,.861129879951477,-.3982013761997223,.3160552680492401,.861129879951477,.31605467200279236,-.39822202920913696,.8611205220222473,.31605467200279236,-.39822202920913696,.8611205220222473,.31605467200279236,-.39822202920913696,.8611205220222473,.31605467200279236,-.39822202920913696,.8611205220222473,.39822128415107727,-.3160440921783447,.8611248135566711,.39822128415107727,-.3160440921783447,.8611248135566711,.39822128415107727,-.3160440921783447,.8611248135566711,.39822128415107727,-.3160440921783447,.8611248135566711,.830415666103363,-.3939518928527832,-.39396917819976807,.830415666103363,-.3939518928527832,-.39396917819976807,.830415666103363,-.3939518928527832,-.39396917819976807,.830415666103363,-.3939518928527832,-.39396917819976807,-.8930335640907288,.31818917393684387,.3181927800178528,-.8930335640907288,.31818917393684387,.3181927800178528,-.8930335640907288,.31818917393684387,.3181927800178528,-.8930335640907288,.31818917393684387,.3181927800178528,-.8304204344749451,.3939615488052368,.39394932985305786,-.8304204344749451,.3939615488052368,.39394932985305786,-.8304204344749451,.3939615488052368,.39394932985305786,-.8304204344749451,.3939615488052368,.39394932985305786,.8611295819282532,-.39820489287376404,.3160513937473297,.8611295819282532,-.39820489287376404,.3160513937473297,.8611295819282532,-.39820489287376404,.3160513937473297,.8611295819282532,-.39820489287376404,.3160513937473297,.31818902492523193,.3181936740875244,-.8930333852767944,.31818902492523193,.3181936740875244,-.8930333852767944,.31818902492523193,.3181936740875244,-.8930333852767944,.31818902492523193,.3181936740875244,-.8930333852767944,-.3982042670249939,.3160568177700043,-.861128032207489,-.3982042670249939,.3160568177700043,-.861128032207489,-.3982042670249939,.3160568177700043,-.861128032207489,-.3982042670249939,.3160568177700043,-.861128032207489,-.3982074558734894,-.31605467200279236,-.8611272573471069,-.3982074558734894,-.31605467200279236,-.8611272573471069,-.3982074558734894,-.31605467200279236,-.8611272573471069,-.3982074558734894,-.31605467200279236,-.8611272573471069,.31604087352752686,-.3982185125350952,-.8611272573471069,.31604087352752686,-.3982185125350952,-.8611272573471069,.31604087352752686,-.3982185125350952,-.8611272573471069,.31604087352752686,-.3982185125350952,-.8611272573471069,-.31601834297180176,.8611423373222351,.39820387959480286,-.31601834297180176,.8611423373222351,.39820387959480286,-.31601834297180176,.8611423373222351,.39820387959480286,-.31601834297180176,.8611423373222351,.39820387959480286,-.31606096029281616,.39820629358291626,.8611255288124084,-.31606096029281616,.39820629358291626,.8611255288124084,-.31606096029281616,.39820629358291626,.8611255288124084,-.31606096029281616,.39820629358291626,.8611255288124084,.31606805324554443,.8611271977424622,.39819690585136414,.31606805324554443,.8611271977424622,.39819690585136414,.31606805324554443,.8611271977424622,.39819690585136414,.31606805324554443,.8611271977424622,.39819690585136414,.31605327129364014,-.8611239194869995,.3982159495353699,.31605327129364014,-.8611239194869995,.3982159495353699,.31605327129364014,-.8611239194869995,.3982159495353699,.31605327129364014,-.8611239194869995,.3982159495353699,.8930177092552185,-.31821155548095703,-.31821513175964355,.8930177092552185,-.31821155548095703,-.31821513175964355,.8930177092552185,-.31821155548095703,-.31821513175964355,.8930177092552185,-.31821155548095703,-.31821513175964355,.39822056889533997,.8611229658126831,-.3160500228404999,.39822056889533997,.8611229658126831,-.3160500228404999,.39822056889533997,.8611229658126831,-.3160500228404999,.39822056889533997,.8611229658126831,-.3160500228404999,.8611273765563965,.3982042968273163,.3160584568977356,.8611273765563965,.3982042968273163,.3160584568977356,.8611273765563965,.3982042968273163,.3160584568977356,.8611273765563965,.3982042968273163,.3160584568977356,.31604790687561035,.3982231020927429,-.8611226081848145,.31604790687561035,.3982231020927429,-.8611226081848145,.31604790687561035,.3982231020927429,-.8611226081848145,.31604790687561035,.3982231020927429,-.8611226081848145,-.3160579800605774,.39820435643196106,-.8611276149749756,-.3160579800605774,.39820435643196106,-.8611276149749756,-.3160579800605774,.39820435643196106,-.8611276149749756,-.3160579800605774,.39820435643196106,-.8611276149749756,-.8611293435096741,-.3981947600841522,.31606513261795044,-.8611293435096741,-.3981947600841522,.31606513261795044,-.8611293435096741,-.3981947600841522,.31606513261795044,-.8611293435096741,-.3981947600841522,.31606513261795044,-.8611273169517517,-.3982181251049042,-.31604093313217163,-.8611273169517517,-.3982181251049042,-.31604093313217163,-.8611273169517517,-.3982181251049042,-.31604093313217163,-.8611273169517517,-.3982181251049042,-.31604093313217163,-.8304233551025391,-.3939613699913025,-.39394333958625793,-.8304233551025391,-.3939613699913025,-.39394333958625793,-.8304233551025391,-.3939613699913025,-.39394333958625793,-.8304233551025391,-.3939613699913025,-.39394333958625793,.31822317838668823,-.8930189609527588,.31819969415664673,.31822317838668823,-.8930189609527588,.31819969415664673,.31822317838668823,-.8930189609527588,.31819969415664673,.31822317838668823,-.8930189609527588,.31819969415664673,.398205429315567,-.861126184463501,.3160603642463684,.398205429315567,-.861126184463501,.3160603642463684,.398205429315567,-.861126184463501,.3160603642463684,.398205429315567,-.861126184463501,.3160603642463684,.8930307030677795,.31819677352905273,.31819313764572144,.8930307030677795,.31819677352905273,.31819313764572144,.8930307030677795,.31819677352905273,.31819313764572144,.8930307030677795,.31819677352905273,.31819313764572144,-.31818729639053345,-.31819117069244385,.8930348753929138,-.31818729639053345,-.31819117069244385,.8930348753929138,-.31818729639053345,-.31819117069244385,.8930348753929138,-.31818729639053345,-.31819117069244385,.8930348753929138,-.39820730686187744,-.8611242771148682,-.31606295704841614,-.39820730686187744,-.8611242771148682,-.31606295704841614,-.39820730686187744,-.8611242771148682,-.31606295704841614,-.39820730686187744,-.8611242771148682,-.31606295704841614,-.3181917071342468,-.8930321931838989,.31819429993629456,-.3181917071342468,-.8930321931838989,.31819429993629456,-.3181917071342468,-.8930321931838989,.31819429993629456,-.3181917071342468,-.8930321931838989,.31819429993629456,-.39820390939712524,-.8611285090446472,.31605613231658936,-.39820390939712524,-.8611285090446472,.31605613231658936,-.39820390939712524,-.8611285090446472,.31605613231658936,-.39820390939712524,-.8611285090446472,.31605613231658936,-.3181929588317871,-.3181893825531006,-.8930334448814392,-.3181929588317871,-.3181893825531006,-.8930334448814392,-.3181929588317871,-.3181893825531006,-.8930334448814392,-.3181929588317871,-.3181893825531006,-.8930334448814392,.398214727640152,-.3160427510738373,-.8611282706260681,.398214727640152,-.3160427510738373,-.8611282706260681,.398214727640152,-.3160427510738373,-.8611282706260681,.398214727640152,-.3160427510738373,-.8611282706260681,.31819266080856323,-.31819653511047363,-.8930309414863586,.31819266080856323,-.31819653511047363,-.8930309414863586,.31819266080856323,-.31819653511047363,-.8930309414863586,.31819266080856323,-.31819653511047363,-.8930309414863586,.8611248731613159,-.39820438623428345,-.31606507301330566,.8611248731613159,-.39820438623428345,-.31606507301330566,.8611248731613159,-.39820438623428345,-.31606507301330566,.8611248731613159,-.39820438623428345,-.31606507301330566,.8611255884170532,-.3160474896430969,-.39821693301200867,.8611255884170532,-.3160474896430969,-.39821693301200867,.8611255884170532,-.3160474896430969,-.39821693301200867,.8611255884170532,-.3160474896430969,-.39821693301200867,-.8930345773696899,-.3181912899017334,-.31818774342536926,-.8930345773696899,-.3181912899017334,-.31818774342536926,-.8930345773696899,-.3181912899017334,-.31818774342536926,-.8930345773696899,-.3181912899017334,-.31818774342536926,-.8611279726028442,.3982178866863251,-.3160398602485657,-.8611279726028442,.3982178866863251,-.3160398602485657,-.8611279726028442,.3982178866863251,-.3160398602485657,-.8611279726028442,.3982178866863251,-.3160398602485657,.8611286878585815,-.3160666823387146,.39819496870040894,.8611286878585815,-.3160666823387146,.39819496870040894,.8611286878585815,-.3160666823387146,.39819496870040894,.8611286878585815,-.3160666823387146,.39819496870040894,-.31604599952697754,-.8611259460449219,-.3982173800468445,-.31604599952697754,-.8611259460449219,-.3982173800468445,-.31604599952697754,-.8611259460449219,-.3982173800468445,-.31604599952697754,-.8611259460449219,-.3982173800468445,-.3182077705860138,.8930187225341797,.31821584701538086,-.3182077705860138,.8930187225341797,.31821584701538086,-.3182077705860138,.8930187225341797,.31821584701538086,-.3182077705860138,.8930187225341797,.31821584701538086,.31819307804107666,.8930350542068481,.3181852102279663,.31819307804107666,.8930350542068481,.3181852102279663,.31819307804107666,.8930350542068481,.3181852102279663,.31819307804107666,.8930350542068481,.3181852102279663,.3181931972503662,.3181889057159424,.893033504486084,.3181931972503662,.3181889057159424,.893033504486084,.3181931972503662,.3181889057159424,.893033504486084,.3181931972503662,.3181889057159424,.893033504486084,.3182152509689331,-.3182116150856018,.893017590045929,.3182152509689331,-.3182116150856018,.893017590045929,.3182152509689331,-.3182116150856018,.893017590045929,.3182152509689331,-.3182116150856018,.893017590045929,-.3182075023651123,.31821173429489136,.8930203914642334,-.3182075023651123,.31821173429489136,.8930203914642334,-.3182075023651123,.31821173429489136,.8930203914642334,-.3182075023651123,.31821173429489136,.8930203914642334,.3160323202610016,.8611453771591187,-.39818620681762695,.3160323202610016,.8611453771591187,-.39818620681762695,.3160323202610016,.8611453771591187,-.39818620681762695,.3160323202610016,.8611453771591187,-.39818620681762695,-.39394327998161316,-.39396142959594727,.8304233551025391,-.39394327998161316,-.39396142959594727,.8304233551025391,-.39394327998161316,-.39396142959594727,.8304233551025391,-.39394327998161316,-.39396142959594727,.8304233551025391,.39394742250442505,-.3939295709133148,.8304365277290344,.39394742250442505,-.3939295709133148,.8304365277290344,.39394742250442505,-.3939295709133148,.8304365277290344,.39394742250442505,-.3939295709133148,.8304365277290344,.393976092338562,-.8304168581962585,.39394256472587585,.393976092338562,-.8304168581962585,.39394256472587585,.393976092338562,-.8304168581962585,.39394256472587585,.393976092338562,-.8304168581962585,.39394256472587585,.8304234743118286,-.39396101236343384,.3939433991909027,.8304234743118286,-.39396101236343384,.3939433991909027,.8304234743118286,-.39396101236343384,.3939433991909027,.8304234743118286,-.39396101236343384,.3939433991909027,-.3939476013183594,-.8304222822189331,-.3939594626426697,-.3939476013183594,-.8304222822189331,-.3939594626426697,-.3939476013183594,-.8304222822189331,-.3939594626426697,-.3939476013183594,-.8304222822189331,-.3939594626426697,-.3939593434333801,-.8304222822189331,.3939477205276489,-.3939593434333801,-.8304222822189331,.3939477205276489,-.3939593434333801,-.8304222822189331,.3939477205276489,-.3939593434333801,-.8304222822189331,.3939477205276489,.393926739692688,-.3939448595046997,-.8304391503334045,.393926739692688,-.3939448595046997,-.8304391503334045,.393926739692688,-.3939448595046997,-.8304391503334045,.393926739692688,-.3939448595046997,-.8304391503334045,-.8304203152656555,-.39394691586494446,.39396411180496216,-.8304203152656555,-.39394691586494446,.39396411180496216,-.8304203152656555,-.39394691586494446,.39396411180496216,-.8304203152656555,-.39394691586494446,.39396411180496216,.3939414918422699,.393930047750473,-.8304392099380493,.3939414918422699,.393930047750473,-.8304392099380493,.3939414918422699,.393930047750473,-.8304392099380493,.3939414918422699,.393930047750473,-.8304392099380493,-.3939580023288727,.39394649863243103,.8304234743118286,-.3939580023288727,.39394649863243103,.8304234743118286,-.3939580023288727,.39394649863243103,.8304234743118286,-.3939580023288727,.39394649863243103,.8304234743118286,-.39395201206207275,.8304221630096436,.39395517110824585,-.39395201206207275,.8304221630096436,.39395517110824585,-.39395201206207275,.8304221630096436,.39395517110824585,-.39395201206207275,.8304221630096436,.39395517110824585,-.39820295572280884,-.3160640299320221,.8611259460449219,-.39820295572280884,-.3160640299320221,.8611259460449219,-.39820295572280884,-.3160640299320221,.8611259460449219,-.39820295572280884,-.3160640299320221,.8611259460449219,-.8611248135566711,-.3160442113876343,.39822128415107727,-.8611248135566711,-.3160442113876343,.39822128415107727,-.8611248135566711,-.3160442113876343,.39822128415107727,-.8611248135566711,-.3160442113876343,.39822128415107727,-.31604111194610596,-.3982183337211609,.8611273169517517,-.31604111194610596,-.3982183337211609,.8611273169517517,-.31604111194610596,-.3982183337211609,.8611273169517517,-.31604111194610596,-.3982183337211609,.8611273169517517,-.3160600960254669,-.8611261248588562,.39820581674575806,-.3160600960254669,-.8611261248588562,.39820581674575806,-.3160600960254669,-.8611261248588562,.39820581674575806,-.3160600960254669,-.8611261248588562,.39820581674575806,-.31606826186180115,.8611270189285278,-.39819711446762085,-.31606826186180115,.8611270189285278,-.39819711446762085,-.31606826186180115,.8611270189285278,-.39819711446762085,-.31606826186180115,.8611270189285278,-.39819711446762085,-.8611301183700562,.3160545825958252,-.3982013463973999,-.8611301183700562,.3160545825958252,-.3982013463973999,-.8611301183700562,.3160545825958252,-.3982013463973999,-.8611301183700562,.3160545825958252,-.3982013463973999,.3982081413269043,.31607723236083984,.8611186742782593,.3982081413269043,.31607723236083984,.8611186742782593,.3982081413269043,.31607723236083984,.8611186742782593,.3982081413269043,.31607723236083984,.8611186742782593,.8611276745796204,.3160439729690552,.3982152044773102,.8611276745796204,.3160439729690552,.3982152044773102,.8611276745796204,.3160439729690552,.3982152044773102,.8611276745796204,.3160439729690552,.3982152044773102,-.8611273765563965,.39820489287376404,.3160577416419983,-.8611273765563965,.39820489287376404,.3160577416419983,-.8611273765563965,.39820489287376404,.3160577416419983,-.8611273765563965,.39820489287376404,.3160577416419983,-.8611289858818054,.3160620927810669,.3981979489326477,-.8611289858818054,.3160620927810669,.3981979489326477,-.8611289858818054,.3160620927810669,.3981979489326477,-.8611289858818054,.3160620927810669,.3981979489326477,.3939596116542816,-.8304221630096436,-.39394763112068176,.3939596116542816,-.8304221630096436,-.39394763112068176,.3939596116542816,-.8304221630096436,-.39394763112068176,.3939596116542816,-.8304221630096436,-.39394763112068176],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.04120219498872757,.12086033821105957,.05345028638839722,.08731907606124878,.11187556385993958,.0670785903930664,.6875278949737549,.13345998525619507,.04903397709131241,.004412055015563965,.0771341323852539,.03593343496322632,.11686006188392639,.03130292892456055,.31248292326927185,.10850334167480469,.0489392951130867,.02688688039779663,.06469712406396866,.01563972234725952,.0803603008389473,.0917351245880127,.3686402440071106,.07315778732299805,.08036012947559357,.12086033821105957,.09260810911655426,.08731895685195923,.10864977538585663,.015640199184417725,.31252771615982056,.008440375328063965,.07252871245145798,.0917351245880127,.08828651905059814,.02688688039779663,.10081818699836731,.02688688039779663,.4936917722225189,.19815367460250854,.08025602996349335,.04575681686401367,.08838120102882385,.004412055015563965,.1084604263305664,.0983855128288269,.4374849796295166,.23353207111358643,.037787072360515594,.08731907606124878,.049033790826797485,.08731907606124878,.1084604263305664,.06366342306137085,.18752798438072205,.38353127241134644,.04542912542819977,.004412055015563965,.08025602996349335,.034130990505218506,.1040443629026413,.06484419107437134,.18748320639133453,.4834633469581604,.006349444389343262,.5731359720230103,.006555216386914253,.02688688039779663,.06469712406396866,.01905524730682373,.07694480568170547,.0917351245880127,.030523335561156273,.02688688039779663,.0771341323852539,.043954312801361084,.08477634936571121,.004412055015563965,.4374811053276062,.35838615894317627,.014292115345597267,.12086033821105957,.03061802126467228,.004412055015563965,.0964021235704422,.015639781951904297,.4934193789958954,.32318025827407837,.053450047969818115,.01905524730682373,.06469716131687164,.0917351245880127,.09630745649337769,.05377775430679321,.49373188614845276,.44814980030059814,.009876048192381859,.0917351245880127,.09298662841320038,.01905524730682373,.11999154090881348,.09396946430206299,.6183853149414062,.3231801986694336,.00987587682902813,.12086033821105957,.029955485835671425,.12086033821105957,.06469673663377762,.007808566093444824,.562527596950531,.2587568163871765,.0299553032964468,.0917351245880127,.05686555057764053,.01905524730682373,.09289196133613586,.05377775430679321,.5065897703170776,.32315701246261597,.056571945548057556,.0421520471572876,.09279727190732956,.03130292892456055,.1200861781835556,.07149463891983032,.5624833106994629,.35836511850357056,.018086323514580727,.004412055015563965,.056571945548057556,.04575687646865845,.11648134887218475,.07149463891983032,.18748287856578827,.3584839701652527,.017707442864775658,.09173506498336792,.09602326154708862,.08731895685195923,.1120648980140686,.015640199184417725,.1875280737876892,.2584848999977112,.05345025658607483,.12086033821105957,.06128161400556564,.011223673820495605,.07252849638462067,.08731907606124878,.3125280439853668,.13357031345367432,.03337060660123825,.08731913566589355,.0769449844956398,.087319016456604,.10864977538585663,.0078089237213134766,.5625283718109131,.133742094039917,.08025602996349335,.03773587942123413,.10043948143720627,.06484419107437134,.12046489119529724,.03130292892456055,.5624833703041077,.23337173461914062,.03412818908691406,.02688688039779663,.08025602996349335,.04215192794799805,.11206528544425964,.0983855128288269,.18748319149017334,.23347699642181396,.006460724398493767,.087319016456604,.017707442864775658,.087319016456604,.06252795457839966,.25844651460647583,.1120649129152298,.023471713066101074,.014576157554984093,.05377775430679321,.04561847448348999,.058193862438201904,.1008182168006897,.01563972234725952,.25627732276916504,.44812923669815063,.006148636341094971,.4481179118156433,.05686555057764053,.026886820793151855,.08819183707237244,.12086033821105957,.10893382132053375,.05377775430679321,.018086323514580727,.03130292892456055,.056571945548057556,.05017292499542236,.06248307228088379,.48360395431518555,.10883913934230804,.03130292892456055,.025539224967360497,.05819380283355713,.07252870500087738,.01563972234725952,.1039496660232544,.12086033821105957,.49378809332847595,.07314485311508179,.014292331412434578,.087319016456604,.025539005175232887,.087319016456604,.10864977538585663,.023471713066101074,.4375278651714325,.008257150650024414,.009970692917704582,.03130298852920532,.014292115345597267,.05819380283355713,.053450047969818115,.023471355438232422,.3811866044998169,.07312166690826416,.0490339919924736,.0917351245880127,.0803602933883667,.01563972234725952,.10432836413383484,.05377775430679321,.6185856461524963,.44816309213638306,.02601257897913456,.03130292892456055,.061281636357307434,.05819380283355713,.06469713896512985,.02688688039779663,.6315924525260925,.32315754890441895,.03061799891293049,.03130292892456055,.06911320239305496,.023471355438232422,.09602341055870056,.09173518419265747,.7433825731277466,.32318103313446045,.08477634936571121,.05377775430679321,.10043948143720627,.0983855128288269,.11629162728786469,.0652761459350586,.687483012676239,.4834805130958557,.037787072360515594,.12086033821105957,.041202202439308167,.08731907606124878,.11187553405761719,.06366342306137085,.5625277757644653,.00847846269607544,.010065404698252678,.004412055015563965,.05345005542039871,.035933494567871094,.1008182168006897,.03130298852920532,.5624833703041077,.10848653316497803,.02601257897913456,.02688688039779663,.06911320239305496,.01905524730682373,.07252870500087738,.05819380283355713,.3685356378555298,.19816696643829346,.029955485835671425,.08731913566589355,.06469696015119553,.12086033821105957,.10864977538585663,.011224091053009033,.43752849102020264,.38332629203796387,.07694479078054428,.05819380283355713,.10053417086601257,.08731895685195923,.10423369705677032,.01905524730682373,.5065778493881226,.19815611839294434,.017991656437516212,.05377775430679321,.0803602933883667,.05819380283355713,.10423369705677032,.01563972234725952,.1188262403011322,.4481416940689087,.0065551940351724625,.03130298852920532,.05686555057764053,.023471355438232422,.084776371717453,.12086033821105957,.7436801791191101,.07315462827682495,.025539247319102287,.09173518419265747,.06460244953632355,.05377769470214844,.10423369705677032,.023471355438232422,.11862531304359436,.5731591582298279,.06118693947792053,.05377769470214844,.06911322474479675,.0917351245880127,.10081818699836731,.023471355438232422,.5063889026641846,.4481391906738281,.022123711183667183,.09173518419265747,.08487099409103394,.02688688039779663,.10423369705677032,.02688688039779663,.38155296444892883,.3231542706489563,.02259708009660244,.03130292892456055,.06128162145614624,.02688688039779663,.08819186687469482,.05819392204284668,.24363532662391663,.5731584429740906,.03337061405181885,.12086033821105957,.06469673663377762,.011223673820495605,.0691133663058281,.08731907606124878,.687528133392334,.3834933042526245,.017707636579871178,.12086033821105957,.0964021235704422,.01905524730682373,.11657601594924927,.09396946430206299,.1313704252243042,.32313746213912964,.006460549309849739,.0917351245880127,.03403352200984955,.004412055015563965,.09298662841320038,.015639781951904297,.13138353824615479,.1981390118598938,.014576157554984093,.02688688039779663,.0299553032964468,.05819392204284668,.0803602784872055,.026886820793151855,.38124242424964905,.4481261968612671,.033370792865753174,.05819392204284668,.0803602784872055,.023471355438232422,.12037022411823273,.05377775430679321,.6183971166610718,.19817936420440674,.05345005542039871,.058193862438201904,.0964021235704422,.02688688039779663,.11999151110649109,.0983855128288269,.6313499808311462,.1981356143951416,.056865572929382324,.058193862438201904,.06920789182186127,.03130286931991577,.0964021235704422,.023471355438232422,.3686973452568054,.4481528401374817,.014481494203209877,.03130292892456055,.056571945548057556,.05377781391143799,.06911319494247437,.05377769470214844,.3124830424785614,.48353415727615356,.022123875096440315,.087319016456604,.08819165080785751,.08731907606124878,.10864977538585663,.02688688039779663,.18752774596214294,.5084468126296997,.022123703733086586,.05819380283355713,.02259708009660244,.02688688039779663,.07252870500087738,.01905524730682373,.1313396394252777,.5731350779533386,.00646076537668705,.12086033821105957,.05686537176370621,.12086033821105957,.06128161400556564,.007808566093444824,.18752765655517578,.1335013508796692,.04561866074800491,.12086033821105957,.053450047969818115,.007808566093444824,.06252825260162354,.1334705352783203,.06469693779945374,.08731907606124878,.006339132785797119,.3231348991394043,.006460549309849739,.05819380283355713,.07262339442968369,.03130286931991577,.09298662841320038,.023471355438232422,.009875854477286339,.087319016456604,.08477649837732315,.08731907606124878,.1120649129152298,.02688688039779663,.31252795457839966,.25839555263519287,.009876048192381859,.05819380283355713,.09298662841320038,.02688688039779663,.11657601594924927,.0983855128288269,.36867624521255493,.3231545090675354,.06252825260162354,.383209228515625,.08036010712385178,.087319016456604,.0881916955113411,.09173506498336792,.1120649129152298,.0078089237213134766,.053450047969818115,.01563972234725952,.06128164380788803,.0917351245880127,.08828655630350113,.03130298852920532,.6312947273254395,.073131263256073,.061281830072402954,.12086033821105957,.08477656543254852,.09173506498336792,.1120649129152298,.011224091053009033,.6875279545783997,.008391082286834717,.06911320239305496,.01563972234725952,.06911322474479675,.05819380283355713,.10053417086601257,.12086033821105957,.631377100944519,.44813835620880127,.033370815217494965,.0917351245880127,.05686555057764053,.01563972234725952,.08487105369567871,.03130298852920532,.7435976266860962,.44816213846206665,.04561866074800491,.08731907606124878,.05686540901660919,.08731907606124878,.1084604263305664,.0670785903930664,.3125280737876892,.3833693861961365,.037786878645420074,.05819380283355713,.04552379250526428,.02688688039779663,.06128161400556564,.01563972234725952,.13140809535980225,.4481407403945923,.03403349965810776,.03130292892456055,.05345005542039871,.0917351245880127,.06911320239305496,.026886820793151855,.2564394772052765,.19814354181289673,.017707636579871178,.05819380283355713,.053450047969818115,.026886820793151855,.11234933137893677,.05377775430679321,.11863547563552856,.32315850257873535,.025539016351103783,.12086033821105957,.0625276267528534,.5084590315818787,.07694500684738159,.12086033821105957,.10864977538585663,.01905524730682373,.014292312785983086,.09173506498336792,.022123919799923897,.12086033821105957,.1120648980140686,.01905524730682373,.43752825260162354,.2587151527404785,.05686517059803009,.011223673820495605,.07252854108810425,.12086033821105957,.09260810166597366,.12086033821105957,.4375276267528534,.13337987661361694,.053450047969818115,.011223673820495605,.06128180772066116,.08731907606124878,.09602323174476624,.12086033821105957,.687527596950531,.2587602138519287,.049033790826797485,.12086033821105957,.05686517059803009,.007808566093444824,.06911341845989227,.12086033821105957,.5625280141830444,.38350802659988403,.017991656437516212,.02688688039779663,.07694479078054428,.02688688039779663,.09602341055870056,.05819380283355713,.24360424280166626,.3231614828109741,.045429132878780365,.03130298852920532,.06248307228088379,.2334902286529541,.11206528544425964,.07149463891983032,.11960287392139435,.023281991481781006,.026107268407940865,.05377775430679321,.030523335561156273,.05377775430679321,.08025602996349335,.05377769470214844,.6874831914901733,.3583640456199646,.022502413019537926,.004412055015563965,.022502413019537926,.05377775430679321,.08025602996349335,.05017286539077759,.18748320639133453,.6085007190704346,.026107246056199074,.004412055015563965,.03412819653749466,.05377775430679321,.0771341323852539,.0519753098487854,.3124833106994629,.2334464192390442,.05345005542039871,.051975369453430176,.062483012676239014,.3585008978843689,.0727180615067482,.05377769470214844,.11244398355484009,.03130292892456055,.1084604263305664,.07149463891983032,.11648134887218475,.12086033821105957,.11960287392139435,.02688688039779663,.31248316168785095,.35852259397506714,.006460549309849739,.05377775430679321,.08838121592998505,.05377775430679321,.11941350996494293,.06347370147705078,.6874832510948181,.10852515697479248,.0490339919924736,.03130298852920532,.11648097634315491,.02508443593978882,.1200861781835556,.12086033821105957,.6874829530715942,.23349487781524658,.014481494203209877,.004412055015563965,.05345005542039871,.043954432010650635,.0964021235704422,.03130292892456055,.43748292326927185,.4835529923439026,.05657196044921875,.037735939025878906,.061092279851436615,.03130286931991577,.10442306846380234,.03130298852920532,.5624828934669495,.4834739565849304,.006460549309849739,.004412055015563965,.056571945548057556,.03413110971450806,.06248317286372185,.6084953546524048,.06469713896512985,.03130286931991577,.006358683109283447,.198136568069458,.04552381485700607,.05377781391143799,.04561847448348999,.0917351245880127,.0803602933883667,.01905524730682373,.04120240360498428,.0917351245880127,.04893931746482849,.05377781391143799,.07694479078054428,.01905524730682373,.7436245679855347,.1981593370437622,.06469712406396866,.023471355438232422,.06469712406396866,.05819380283355713,.11197057366371155,.09396946430206299,.11861595511436462,.1981601119041443,.06128162145614624,.023471355438232422,.084776371717453,.05819392204284668,.10855509340763092,.09396940469741821,.25629860162734985,.32313108444213867,.07694478332996368,.023471355438232422,.09260791540145874,.05819380283355713,.1169547289609909,.05377775430679321,.256334125995636,.07313430309295654,.049033984541893005,.058193862438201904,.1008182168006897,.01905524730682373,.1039496511220932,.08731895685195923,.2435668408870697,.448164165019989,.07252871245145798,.023471355438232422,.09260791540145874,.09173518419265747,.10855511575937271,.12086033821105957,.38128527998924255,.19813251495361328,.056865572929382324,.0917351245880127,.07252871245145798,.026886820793151855,.11197061836719513,.12086033821105957,.2435913383960724,.19816231727600098,.009970737621188164,.02688688039779663,.04120238125324249,.05819380283355713,.06128162145614624,.01905524730682373,.6186096668243408,.07316023111343384,.037786878645420074,.0917351245880127,.07694479078054428,.01563972234725952,.10091288387775421,.05377775430679321,.5063652992248535,.07313716411590576,.010065404698252678,.05377775430679321,.10404433310031891,.0983855128288269,.11941350996494293,.0670785903930664,.4374832212924957,.10858356952667236],normalized:!1}},index:{type:"Uint16Array",array:[283,23,19,231,319,235,27,31,363,338,273,32,39,279,171,147,331,47,55,63,51,67,71,183,75,311,143,79,83,195,222,297,351,219,87,371,90,313,271,259,207,203,236,102,155,111,383,107,291,335,119,247,323,159,287,303,127,179,131,255,135,139,375,3,327,347,308,213,140,91,210,230,70,275,278,348,173,122,269,157,114,36,185,41,193,293,190,108,268,113,28,8,4,294,13,69,18,162,166,9,374,34,82,358,194,26,2,134,361,154,94,233,202,227,277,160,168,117,346,343,99,315,103,260,133,373,246,78,146,212,109,104,276,180,68,301,264,124,369,125,266,284,289,221,177,218,73,381,250,106,172,300,120,33,136,336,322,130,382,112,320,380,298,354,350,238,158,98,285,349,121,249,74,142,228,225,88,176,56,53,132,344,376,189,76,192,274,10,35,368,72,217,237,148,77,1,200,196,342,288,116,165,281,16,184,52,48,241,145,45,25,93,256,126,282,286,339,164,161,42,49,181,92,100,204,341,324,296,378,334,138,312,205,101,149,30,81,337,137,332,105,141,214,226,206,314,5,80,29,60,329,65,44,253,240,66,50,62,299,325,318,328,292,64,37,20,85,366,86,22,58,330,61,254,321,242,211,307,175,15,7,11,310,302,306,198,317,326,353,209,174,21,169,17,283,367,23,231,355,319,27,263,31,338,163,273,39,43,279,147,191,331,55,59,63,67,295,71,75,267,311,79,151,83,222,340,297,219,187,87,90,224,313,259,95,207,236,96,102,111,115,383,291,167,335,247,243,323,287,123,303,179,251,131,135,379,139,3,199,327,308,304,213,91,110,210,70,14,275,348,352,173,269,97,157,36,84,185,193,356,293,108,89,268,28,261,8,294,357,13,18,170,162,9,262,374,82,6,358,26,258,2,361,150,154,233,197,202,277,272,160,117,377,346,99,270,315,260,24,133,246,239,78,212,208,109,276,40,180,301,309,264,369,364,125,284,280,289,177,54,218,381,129,250,172,305,300,33,372,136,112,156,320,298,316,354,238,245,158,285,223,349,249,178,74,228,232,225,176,252,56,132,0,344,189,144,76,274,12,10,368,265,72,237,153,148,1,257,200,342,220,288,165,290,281,184,216,52,241,244,145,25,360,93,126,365,282,339,333,164,42,186,49,92,152,100,341,345,324,378,118,334,149,362,30,105,248,141,226,201,206,44,57,253,66,182,50,328,188,292,366,370,86,58,46,330,254,128,321,211,215,307,15,359,7,198,234,317,353,229,209,21,38,169]},boundingSphere:{center:[0,0,0],radius:161.78209344582697}},rotationCombinations:{"1,2":[0,0,180],"1,3":[-180,0,90],"1,4":[90,0,-90],"1,5":[-90,0,-90],"1,6":[-130,-90,-40],"1,7":[0,-180,90],"1,8":[-90,0,90],"1,9":[90,0,90],"1,10":[50,-90,-40],"1,11":[0,90,-180],"1,12":[0,90,0],"1,13":[180,0,0],"1,14":[0,180,0],"1,15":[0,0,90],"1,16":[90,180,0],"1,17":[90,0,0],"1,18":[-130,90,40],"1,19":[0,0,-90],"1,20":[90,0,-180],"1,21":[-90,0,0],"1,22":[50,90,40],"1,23":[0,-90,0],"1,24":[0,-90,-180],"2,3":[0,180,90],"2,4":[-90,0,90],"2,5":[90,0,90],"2,6":[-50,90,-40],"2,7":[180,0,90],"2,8":[90,0,-90],"2,9":[-90,0,-90],"2,10":[130,90,-40],"2,11":[0,-90,0],"2,12":[0,-90,180],"2,13":[0,-180,0],"2,14":[-180,0,0],"2,15":[0,0,-90],"2,16":[90,0,0],"2,17":[-90,0,-180],"2,18":[-50,-90,40],"2,19":[0,0,90],"2,20":[-90,0,0],"2,21":[-90,-180,0],"2,22":[130,-90,40],"2,23":[0,90,-180],"2,24":[0,90,0],"3,4":[0,90,-180],"3,5":[0,-90,180],"3,6":[-90,0,-180],"3,7":[0,0,180],"3,8":[0,-90,0],"3,9":[0,90,0],"3,10":[-90,0,0],"3,11":[90,0,-90],"3,12":[90,0,90],"3,13":[0,0,-90],"3,14":[0,0,90],"3,15":[0,180,0],"3,16":[45,-90,135],"3,17":[-135,90,45],"3,18":[90,0,0],"3,19":[-180,0,0],"3,20":[45,90,45],"3,21":[45,-90,-45],"3,22":[-90,180,0],"3,23":[-90,0,90],"3,24":[-90,0,-90],"4,5":[0,180,0],"4,6":[90,0,-90],"4,7":[0,90,0],"4,8":[180,0,0],"4,9":[0,0,-180],"4,10":[90,0,90],"4,11":[-90,0,180],"4,12":[-90,0,0],"4,13":[-40,90,130],"4,14":[-40,90,-50],"4,15":[0,-90,-180],"4,16":[-180,0,90],"4,17":[0,0,90],"4,18":[-90,0,-90],"4,19":[0,-90,0],"4,20":[0,0,-90],"4,21":[0,180,90],"4,22":[-90,0,90],"4,23":[-90,180,0],"4,24":[90,0,0],"5,6":[90,0,90],"5,7":[0,-90,0],"5,8":[0,0,180],"5,9":[180,0,0],"5,10":[90,0,-90],"5,11":[-90,0,0],"5,12":[90,180,0],"5,13":[40,-90,130],"5,14":[40,-90,-50],"5,15":[0,90,180],"5,16":[0,0,-90],"5,17":[180,0,-90],"5,18":[-90,0,90],"5,19":[0,90,0],"5,20":[0,180,-90],"5,21":[0,0,90],"5,22":[-90,0,-90],"5,23":[90,0,0],"5,24":[90,0,-180],"6,7":[-90,0,0],"6,8":[45,90,45],"6,9":[45,-90,-45],"6,10":[0,0,-180],"6,11":[0,180,-90],"6,12":[-180,0,-90],"6,13":[-90,0,90],"6,14":[-90,0,-90],"6,15":[90,0,0],"6,16":[0,90,-180],"6,17":[0,-90,-180],"6,18":[0,-180,0],"6,19":[-90,-180,0],"6,20":[0,-90,0],"6,21":[0,90,0],"6,22":[-180,0,0],"6,23":[0,0,-90],"6,24":[0,0,90],"7,8":[0,90,180],"7,9":[0,-90,-180],"7,10":[90,0,-180],"7,11":[-90,0,90],"7,12":[-90,0,-90],"7,13":[0,0,90],"7,14":[0,0,-90],"7,15":[180,0,0],"7,16":[-45,90,-45],"7,17":[-45,-90,45],"7,18":[90,-180,0],"7,19":[0,180,0],"7,20":[135,-90,45],"7,21":[135,90,-45],"7,22":[-90,0,0],"7,23":[90,0,-90],"7,24":[90,0,90],"8,9":[0,-180,0],"8,10":[-90,0,90],"8,11":[-90,-180,0],"8,12":[90,0,0],"8,13":[-40,90,-50],"8,14":[-40,90,130],"8,15":[0,-90,0],"8,16":[0,0,90],"8,17":[0,-180,-90],"8,18":[90,0,-90],"8,19":[0,-90,-180],"8,20":[-180,0,-90],"8,21":[0,0,-90],"8,22":[90,0,90],"8,23":[-90,0,-180],"8,24":[-90,0,0],"9,10":[-90,0,-90],"9,11":[90,0,0],"9,12":[90,0,180],"9,13":[40,-90,-50],"9,14":[40,-90,130],"9,15":[0,90,0],"9,16":[0,-180,90],"9,17":[0,0,-90],"9,18":[90,0,90],"9,19":[0,90,-180],"9,20":[0,0,90],"9,21":[180,0,90],"9,22":[90,0,-90],"9,23":[-90,0,0],"9,24":[90,-180,0],"10,11":[180,0,-90],"10,12":[0,-180,-90],"10,13":[90,0,-90],"10,14":[90,0,90],"10,15":[90,180,0],"10,16":[0,-90,0],"10,17":[0,90,0],"10,18":[180,0,0],"10,19":[-90,0,0],"10,20":[0,90,180],"10,21":[0,-90,-180],"10,22":[0,180,0],"10,23":[0,0,90],"10,24":[0,0,-90],"11,12":[0,0,180],"11,13":[0,-90,0],"11,14":[0,-90,180],"11,15":[-50,90,-40],"11,16":[90,0,-90],"11,17":[-90,0,-90],"11,18":[0,0,90],"11,19":[130,90,-40],"11,20":[-90,0,90],"11,21":[90,0,90],"11,22":[0,0,-90],"11,23":[-180,0,0],"11,24":[0,-180,0],"12,13":[0,90,-180],"12,14":[0,90,0],"12,15":[-130,-90,-40],"12,16":[-90,0,90],"12,17":[90,0,90],"12,18":[0,0,-90],"12,19":[50,-90,-40],"12,20":[90,0,-90],"12,21":[-90,0,-90],"12,22":[0,0,90],"12,23":[0,-180,0],"12,24":[-180,0,0],"13,14":[0,0,180],"13,15":[0,180,-90],"13,16":[90,0,180],"13,17":[-90,0,0],"13,18":[50,90,40],"13,19":[-180,0,-90],"13,20":[90,-180,0],"13,21":[90,0,0],"13,22":[-130,90,40],"13,23":[0,-90,180],"13,24":[0,-90,0],"14,15":[180,0,-90],"14,16":[-90,0,0],"14,17":[-90,180,0],"14,18":[130,-90,40],"14,19":[0,-180,-90],"14,20":[90,0,0],"14,21":[-90,0,180],"14,22":[-50,-90,40],"14,23":[0,90,0],"14,24":[0,90,-180],"15,16":[-45,90,135],"15,17":[-45,-90,-135],"15,18":[90,0,180],"15,19":[0,0,180],"15,20":[-45,-90,45],"15,21":[-45,90,-45],"15,22":[90,0,0],"15,23":[-90,0,-90],"15,24":[-90,0,90],"16,17":[0,180,0],"16,18":[0,-90,-180],"16,19":[-90,0,90],"16,20":[180,0,0],"16,21":[0,0,180],"16,22":[0,-90,0],"16,23":[40,90,50],"16,24":[40,90,-130],"17,18":[0,90,-180],"17,19":[-90,0,-90],"17,20":[0,0,180],"17,21":[180,0,0],"17,22":[0,90,0],"17,23":[-40,-90,50],"17,24":[-40,-90,-130],"18,19":[90,0,0],"18,20":[0,90,0],"18,21":[0,-90,0],"18,22":[0,0,180],"18,23":[180,0,90],"18,24":[0,180,90],"19,20":[-135,90,45],"19,21":[-135,-90,-45],"19,22":[-90,0,180],"19,23":[90,0,90],"19,24":[90,0,-90],"20,21":[0,180,0],"20,22":[0,-90,180],"20,23":[40,90,-130],"20,24":[40,90,50],"21,22":[0,90,180],"21,23":[-40,-90,-130],"21,24":[-40,-90,50],"22,23":[0,-180,90],"22,24":[-180,0,90],"23,24":[0,0,-180]}},d30:{metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"6D1EB50D-67F2-45C7-BF93-23245B31E912",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-55.942420959472656,58.09579086303711,-56.76457214355469,-55.942420959472656,58.09579086303711,-56.76457214355469,-55.942420959472656,58.09579086303711,-56.76457214355469,-55.942420959472656,58.09579086303711,-56.76457214355469,-55.942420959472656,58.09579086303711,-56.76457214355469,-55.942420959472656,58.09579086303711,-56.76457214355469,-55.54539108276367,91.2035140991211,-2.153374433517456,-55.54539108276367,91.2035140991211,-2.153374433517456,-55.54539108276367,91.2035140991211,-2.153374433517456,-55.54539108276367,91.2035140991211,-2.153374433517456,-55.54539108276367,91.2035140991211,-2.153374433517456,58.09599685668945,56.76477813720703,55.94200897216797,58.09599685668945,56.76477813720703,55.94200897216797,58.09599685668945,56.76477813720703,55.94200897216797,58.09599685668945,56.76477813720703,55.94200897216797,58.09599685668945,56.76477813720703,55.94200897216797,-2.1539175510406494,-55.545379638671875,-91.20350646972656,-2.1539175510406494,-55.545379638671875,-91.20350646972656,-2.1539175510406494,-55.545379638671875,-91.20350646972656,-2.1539175510406494,-55.545379638671875,-91.20350646972656,-2.1539175510406494,-55.545379638671875,-91.20350646972656,-2.1539175510406494,-55.545379638671875,-91.20350646972656,35.903011322021484,1.3310145139694214,-91.8457260131836,35.903011322021484,1.3310145139694214,-91.8457260131836,35.903011322021484,1.3310145139694214,-91.8457260131836,35.903011322021484,1.3310145139694214,-91.8457260131836,35.903011322021484,1.3310145139694214,-91.8457260131836,35.903011322021484,1.3310145139694214,-91.8457260131836,33.74937438964844,-5.019184072807548e-7,-92.66828918457031,33.74937438964844,-5.019184072807548e-7,-92.66828918457031,33.74937438964844,-5.019184072807548e-7,-92.66828918457031,33.74937438964844,-5.019184072807548e-7,-92.66828918457031,35.903690338134766,1.331014633178711,91.84544372558594,35.903690338134766,1.331014633178711,91.84544372558594,35.903690338134766,1.331014633178711,91.84544372558594,35.903690338134766,1.331014633178711,91.84544372558594,35.903690338134766,1.331014633178711,91.84544372558594,56.76499557495117,55.94220733642578,58.0955924987793,56.76499557495117,55.94220733642578,58.0955924987793,56.76499557495117,55.94220733642578,58.0955924987793,56.76499557495117,55.94220733642578,58.0955924987793,56.76499557495117,55.94220733642578,58.0955924987793,-1.3306841850280762,-57.6989631652832,89.87248229980469,-1.3306841850280762,-57.6989631652832,89.87248229980469,-1.3306841850280762,-57.6989631652832,89.87248229980469,-1.3306841850280762,-57.6989631652832,89.87248229980469,-1.3306841850280762,-57.6989631652832,89.87248229980469,-1.3306841850280762,-57.6989631652832,89.87248229980469,92.66816711425781,33.749717712402344,-.00033652668935246766,92.66816711425781,33.749717712402344,-.00033652668935246766,92.66816711425781,33.749717712402344,-.00033652668935246766,92.66816711425781,33.749717712402344,-.00033652668935246766,.0001248687185579911,92.66816711425781,33.74972152709961,.0001248687185579911,92.66816711425781,33.74972152709961,.0001248687185579911,92.66816711425781,33.74972152709961,.0001248687185579911,92.66816711425781,33.74972152709961,-91.8455810546875,-35.903350830078125,1.3313559293746948,-91.8455810546875,-35.903350830078125,1.3313559293746948,-91.8455810546875,-35.903350830078125,1.3313559293746948,-91.8455810546875,-35.903350830078125,1.3313559293746948,-91.8455810546875,-35.903350830078125,1.3313559293746948,-91.8455810546875,-35.903350830078125,1.3313559293746948,-56.76499557495117,55.94220733642578,-58.095577239990234,-56.76499557495117,55.94220733642578,-58.095577239990234,-56.76499557495117,55.94220733642578,-58.095577239990234,-56.76499557495117,55.94220733642578,-58.095577239990234,-92.66815185546875,-33.749717712402344,.000344159547239542,-92.66815185546875,-33.749717712402344,.000344159547239542,-92.66815185546875,-33.749717712402344,.000344159547239542,-92.66815185546875,-33.749717712402344,.000344159547239542,-91.84559631347656,-35.903350830078125,-1.3306736946105957,-91.84559631347656,-35.903350830078125,-1.3306736946105957,-91.84559631347656,-35.903350830078125,-1.3306736946105957,-91.84559631347656,-35.903350830078125,-1.3306736946105957,-91.84559631347656,-35.903350830078125,-1.3306736946105957,-91.2037124633789,-2.1535837650299072,-55.54503631591797,-91.2037124633789,-2.1535837650299072,-55.54503631591797,-91.2037124633789,-2.1535837650299072,-55.54503631591797,-91.2037124633789,-2.1535837650299072,-55.54503631591797,-91.2037124633789,-2.1535837650299072,-55.54503631591797,1.3308831453323364,91.84559631347656,-35.90335464477539,1.3308831453323364,91.84559631347656,-35.90335464477539,1.3308831453323364,91.84559631347656,-35.90335464477539,1.3308831453323364,91.84559631347656,-35.90335464477539,1.3308831453323364,91.84559631347656,-35.90335464477539,55.545372009277344,91.2035140991211,-2.1537835597991943,55.545372009277344,91.2035140991211,-2.1537835597991943,55.545372009277344,91.2035140991211,-2.1537835597991943,55.545372009277344,91.2035140991211,-2.1537835597991943,55.545372009277344,91.2035140991211,-2.1537835597991943,55.545372009277344,91.2035140991211,-2.1537835597991943,-91.84558868408203,35.903350830078125,1.331355094909668,-91.84558868408203,35.903350830078125,1.331355094909668,-91.84558868408203,35.903350830078125,1.331355094909668,-91.84558868408203,35.903350830078125,1.331355094909668,-91.84558868408203,35.903350830078125,1.331355094909668,-91.84558868408203,35.903350830078125,1.331355094909668,-58.09558868408203,56.76477813720703,55.94243240356445,-58.09558868408203,56.76477813720703,55.94243240356445,-58.09558868408203,56.76477813720703,55.94243240356445,-58.09558868408203,56.76477813720703,55.94243240356445,-58.09558868408203,56.76477813720703,55.94243240356445,-57.698951721191406,89.87249755859375,1.3312309980392456,-57.698951721191406,89.87249755859375,1.3312309980392456,-57.698951721191406,89.87249755859375,1.3312309980392456,-57.698951721191406,89.87249755859375,1.3312309980392456,-55.54539108276367,-91.20350646972656,-2.1533758640289307,-55.54539108276367,-91.20350646972656,-2.1533758640289307,-55.54539108276367,-91.20350646972656,-2.1533758640289307,-55.54539108276367,-91.20350646972656,-2.1533758640289307,-55.54539108276367,-91.20350646972656,-2.1533758640289307,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.545372009277344,91.2035140991211,2.1537914276123047,-55.9420051574707,58.09578323364258,56.764991760253906,-55.9420051574707,58.09578323364258,56.764991760253906,-55.9420051574707,58.09578323364258,56.764991760253906,-55.9420051574707,58.09578323364258,56.764991760253906,1.3308836221694946,-91.84559631347656,-35.90335464477539,1.3308836221694946,-91.84559631347656,-35.90335464477539,1.3308836221694946,-91.84559631347656,-35.90335464477539,1.3308836221694946,-91.84559631347656,-35.90335464477539,1.3308836221694946,-91.84559631347656,-35.90335464477539,-91.20330047607422,-2.153582811355591,55.54571533203125,-91.20330047607422,-2.153582811355591,55.54571533203125,-91.20330047607422,-2.153582811355591,55.54571533203125,-91.20330047607422,-2.153582811355591,55.54571533203125,-91.20330047607422,-2.153582811355591,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.20330047607422,2.1535825729370117,55.54571533203125,-91.8456039428711,35.903350830078125,-1.3306739330291748,-91.8456039428711,35.903350830078125,-1.3306739330291748,-91.8456039428711,35.903350830078125,-1.3306739330291748,-91.8456039428711,35.903350830078125,-1.3306739330291748,-91.8456039428711,35.903350830078125,-1.3306739330291748,33.750057220458984,-3.255321701089997e-7,92.66802978515625,33.750057220458984,-3.255321701089997e-7,92.66802978515625,33.750057220458984,-3.255321701089997e-7,92.66802978515625,33.750057220458984,-3.255321701089997e-7,92.66802978515625,89.87269592285156,-1.3310151100158691,57.698638916015625,89.87269592285156,-1.3310151100158691,57.698638916015625,89.87269592285156,-1.3310151100158691,57.698638916015625,89.87269592285156,-1.3310151100158691,57.698638916015625,89.87269592285156,-1.3310151100158691,57.698638916015625,91.2037124633789,2.153581380844116,55.545047760009766,91.2037124633789,2.153581380844116,55.545047760009766,91.2037124633789,2.153581380844116,55.545047760009766,91.2037124633789,2.153581380844116,55.545047760009766,91.2037124633789,2.153581380844116,55.545047760009766,91.2037124633789,2.153581380844116,55.545047760009766,-35.903011322021484,1.3310145139694214,91.84571075439453,-35.903011322021484,1.3310145139694214,91.84571075439453,-35.903011322021484,1.3310145139694214,91.84571075439453,-35.903011322021484,1.3310145139694214,91.84571075439453,-35.903011322021484,1.3310145139694214,91.84571075439453,-35.903011322021484,-1.33101487159729,91.84571075439453,-35.903011322021484,-1.33101487159729,91.84571075439453,-35.903011322021484,-1.33101487159729,91.84571075439453,-35.903011322021484,-1.33101487159729,91.84571075439453,-35.903011322021484,-1.33101487159729,91.84571075439453,-33.74938201904297,-5.100424687043414e-7,92.66827392578125,-33.74938201904297,-5.100424687043414e-7,92.66827392578125,-33.74938201904297,-5.100424687043414e-7,92.66827392578125,-33.74938201904297,-5.100424687043414e-7,92.66827392578125,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,1.0764577388763428,55.84297561645508,-91.01956939697266,-.00033518741838634014,55.17742919921875,-91.43085479736328,-.00033518741838634014,55.17742919921875,-91.43085479736328,-.00033518741838634014,55.17742919921875,-91.43085479736328,-.00033518741838634014,55.17742919921875,-91.43085479736328,-.00033518741838634014,55.17742919921875,-91.43085479736328,-.00033518741838634014,55.17742919921875,-91.43085479736328,54.21428298950195,-92.02606964111328,-.00019521401554811746,54.21428298950195,-92.02606964111328,-.00019521401554811746,54.21428298950195,-92.02606964111328,-.00019521401554811746,54.21428298950195,-92.02606964111328,-.00019521401554811746,54.21428298950195,-92.02606964111328,-.00019521401554811746,54.21428298950195,-92.02606964111328,-.00019521401554811746,55.545372009277344,-91.20350646972656,-2.153782844543457,55.545372009277344,-91.20350646972656,-2.153782844543457,55.545372009277344,-91.20350646972656,-2.153782844543457,55.545372009277344,-91.20350646972656,-2.153782844543457,55.545372009277344,-91.20350646972656,-2.153782844543457,91.8455810546875,-35.903350830078125,-1.331348180770874,91.8455810546875,-35.903350830078125,-1.331348180770874,91.8455810546875,-35.903350830078125,-1.331348180770874,91.8455810546875,-35.903350830078125,-1.331348180770874,91.8455810546875,-35.903350830078125,-1.331348180770874,91.8455810546875,-35.903350830078125,-1.331348180770874,-54.21428298950195,92.02607727050781,.00020320962357800454,-54.21428298950195,92.02607727050781,.00020320962357800454,-54.21428298950195,92.02607727050781,.00020320962357800454,-54.21428298950195,92.02607727050781,.00020320962357800454,-54.21428298950195,92.02607727050781,.00020320962357800454,-54.21428298950195,92.02607727050781,.00020320962357800454,55.9420051574707,58.09579086303711,-56.76498031616211,55.9420051574707,58.09579086303711,-56.76498031616211,55.9420051574707,58.09579086303711,-56.76498031616211,55.9420051574707,58.09579086303711,-56.76498031616211,55.9420051574707,58.09579086303711,-56.76498031616211,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,57.69895935058594,89.87249755859375,1.3308056592941284,-1.330683946609497,57.698951721191406,89.87248229980469,-1.330683946609497,57.698951721191406,89.87248229980469,-1.330683946609497,57.698951721191406,89.87248229980469,-1.330683946609497,57.698951721191406,89.87248229980469,-1.330683946609497,57.698951721191406,89.87248229980469,1.3313459157943726,57.698951721191406,89.87246704101562,1.3313459157943726,57.698951721191406,89.87246704101562,1.3313459157943726,57.698951721191406,89.87246704101562,1.3313459157943726,57.698951721191406,89.87246704101562,1.3313459157943726,57.698951721191406,89.87246704101562,1.3313459157943726,57.698951721191406,89.87246704101562,-33.75006103515625,-3.2792155479910434e-7,-92.66804504394531,-33.75006103515625,-3.2792155479910434e-7,-92.66804504394531,-33.75006103515625,-3.2792155479910434e-7,-92.66804504394531,-33.75006103515625,-3.2792155479910434e-7,-92.66804504394531,1.3306846618652344,-57.69895935058594,-89.87250518798828,1.3306846618652344,-57.69895935058594,-89.87250518798828,1.3306846618652344,-57.69895935058594,-89.87250518798828,1.3306846618652344,-57.69895935058594,-89.87250518798828,1.3306846618652344,-57.69895935058594,-89.87250518798828,35.903011322021484,-1.33101487159729,-91.8457260131836,35.903011322021484,-1.33101487159729,-91.8457260131836,35.903011322021484,-1.33101487159729,-91.8457260131836,35.903011322021484,-1.33101487159729,-91.8457260131836,35.903011322021484,-1.33101487159729,-91.8457260131836,1.331345796585083,-57.6989631652832,89.87246704101562,1.331345796585083,-57.6989631652832,89.87246704101562,1.331345796585083,-57.6989631652832,89.87246704101562,1.331345796585083,-57.6989631652832,89.87246704101562,1.331345796585083,-57.6989631652832,89.87246704101562,1.331345796585083,-57.6989631652832,89.87246704101562,-58.09558868408203,-56.76478576660156,55.94243240356445,-58.09558868408203,-56.76478576660156,55.94243240356445,-58.09558868408203,-56.76478576660156,55.94243240356445,-58.09558868408203,-56.76478576660156,55.94243240356445,-55.9420051574707,-58.09579849243164,56.764991760253906,-55.9420051574707,-58.09579849243164,56.764991760253906,-55.9420051574707,-58.09579849243164,56.764991760253906,-55.9420051574707,-58.09579849243164,56.764991760253906,-55.9420051574707,-58.09579849243164,56.764991760253906,-89.87269592285156,1.3310145139694214,-57.69862365722656,-89.87269592285156,1.3310145139694214,-57.69862365722656,-89.87269592285156,1.3310145139694214,-57.69862365722656,-89.87269592285156,1.3310145139694214,-57.69862365722656,-89.87269592285156,1.3310145139694214,-57.69862365722656,-89.87269592285156,1.3310145139694214,-57.69862365722656,55.942420959472656,58.09578323364258,56.764583587646484,55.942420959472656,58.09578323364258,56.764583587646484,55.942420959472656,58.09578323364258,56.764583587646484,55.942420959472656,58.09578323364258,56.764583587646484,55.942420959472656,58.09578323364258,56.764583587646484,-.00012307056749705225,-92.66816711425781,-33.749717712402344,-.00012307056749705225,-92.66816711425781,-33.749717712402344,-.00012307056749705225,-92.66816711425781,-33.749717712402344,-.00012307056749705225,-92.66816711425781,-33.749717712402344,-1.3311455249786377,-91.84559631347656,-35.90334701538086,-1.3311455249786377,-91.84559631347656,-35.90334701538086,-1.3311455249786377,-91.84559631347656,-35.90334701538086,-1.3311455249786377,-91.84559631347656,-35.90334701538086,-1.3311455249786377,-91.84559631347656,-35.90334701538086,-1.3311455249786377,-91.84559631347656,-35.90334701538086,58.09599685668945,-56.76478576660156,55.94200897216797,58.09599685668945,-56.76478576660156,55.94200897216797,58.09599685668945,-56.76478576660156,55.94200897216797,58.09599685668945,-56.76478576660156,55.94200897216797,55.54539108276367,91.2035140991211,2.15338134765625,55.54539108276367,91.2035140991211,2.15338134765625,55.54539108276367,91.2035140991211,2.15338134765625,55.54539108276367,91.2035140991211,2.15338134765625,55.54539108276367,91.2035140991211,2.15338134765625,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,2.153247594833374,-55.545379638671875,-91.20352172851562,-.0003373770450707525,-54.21428298950195,-92.02607727050781,-.0003373770450707525,-54.21428298950195,-92.02607727050781,-.0003373770450707525,-54.21428298950195,-92.02607727050781,-.0003373770450707525,-54.21428298950195,-92.02607727050781,-.0003373770450707525,-54.21428298950195,-92.02607727050781,-.0003373770450707525,-54.21428298950195,-92.02607727050781,1.3311474323272705,91.84559631347656,35.90334701538086,1.3311474323272705,91.84559631347656,35.90334701538086,1.3311474323272705,91.84559631347656,35.90334701538086,1.3311474323272705,91.84559631347656,35.90334701538086,1.3311474323272705,91.84559631347656,35.90334701538086,54.21428298950195,92.02607727050781,-.00019560271175578237,54.21428298950195,92.02607727050781,-.00019560271175578237,54.21428298950195,92.02607727050781,-.00019560271175578237,54.21428298950195,92.02607727050781,-.00019560271175578237,54.21428298950195,92.02607727050781,-.00019560271175578237,54.21428298950195,92.02607727050781,-.00019560271175578237,-56.76456832885742,55.94220733642578,58.096012115478516,-56.76456832885742,55.94220733642578,58.096012115478516,-56.76456832885742,55.94220733642578,58.096012115478516,-56.76456832885742,55.94220733642578,58.096012115478516,-56.76456832885742,55.94220733642578,58.096012115478516,-56.76456832885742,55.94220733642578,58.096012115478516,-1.3308817148208618,91.84559631347656,35.90335464477539,-1.3308817148208618,91.84559631347656,35.90335464477539,-1.3308817148208618,91.84559631347656,35.90335464477539,-1.3308817148208618,91.84559631347656,35.90335464477539,-1.3308817148208618,91.84559631347656,35.90335464477539,-1.3308817148208618,91.84559631347656,35.90335464477539,-92.66816711425781,33.749717712402344,.0003441836452111602,-92.66816711425781,33.749717712402344,.0003441836452111602,-92.66816711425781,33.749717712402344,.0003441836452111602,-92.66816711425781,33.749717712402344,.0003441836452111602,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-92.02587127685547,-3.414504305965238e-7,54.21462631225586,-89.87227630615234,-1.3310153484344482,57.69929885864258,-89.87227630615234,-1.3310153484344482,57.69929885864258,-89.87227630615234,-1.3310153484344482,57.69929885864258,-89.87227630615234,-1.3310153484344482,57.69929885864258,-89.87227630615234,-1.3310153484344482,57.69929885864258,-89.87227630615234,-1.3310153484344482,57.69929885864258,-56.76499557495117,-55.94221496582031,-58.095577239990234,-56.76499557495117,-55.94221496582031,-58.095577239990234,-56.76499557495117,-55.94221496582031,-58.095577239990234,-56.76499557495117,-55.94221496582031,-58.095577239990234,-89.87269592285156,-1.3310151100158691,-57.69862365722656,-89.87269592285156,-1.3310151100158691,-57.69862365722656,-89.87269592285156,-1.3310151100158691,-57.69862365722656,-89.87269592285156,-1.3310151100158691,-57.69862365722656,-89.87269592285156,-1.3310151100158691,-57.69862365722656,-91.2037124633789,2.1535816192626953,-55.54503631591797,-91.2037124633789,2.1535816192626953,-55.54503631591797,-91.2037124633789,2.1535816192626953,-55.54503631591797,-91.2037124633789,2.1535816192626953,-55.54503631591797,-91.2037124633789,2.1535816192626953,-55.54503631591797,-91.2037124633789,2.1535816192626953,-55.54503631591797,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.6989631652832,-89.87248229980469,-1.3307993412017822,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,-57.69895553588867,-89.87248229980469,1.331230640411377,91.2037124633789,-2.1535840034484863,55.545047760009766,91.2037124633789,-2.1535840034484863,55.545047760009766,91.2037124633789,-2.1535840034484863,55.545047760009766,91.2037124633789,-2.1535840034484863,55.545047760009766,91.2037124633789,-2.1535840034484863,55.545047760009766,91.84559631347656,-35.903350830078125,1.3306814432144165,91.84559631347656,-35.903350830078125,1.3306814432144165,91.84559631347656,-35.903350830078125,1.3306814432144165,91.84559631347656,-35.903350830078125,1.3306814432144165,91.84559631347656,-35.903350830078125,1.3306814432144165,.00033884088043123484,-54.21428298950195,92.02606964111328,.00033884088043123484,-54.21428298950195,92.02606964111328,.00033884088043123484,-54.21428298950195,92.02606964111328,.00033884088043123484,-54.21428298950195,92.02606964111328,.00033884088043123484,-54.21428298950195,92.02606964111328,.00033884088043123484,-54.21428298950195,92.02606964111328,1.3311470746994019,-91.84559631347656,35.90334701538086,1.3311470746994019,-91.84559631347656,35.90334701538086,1.3311470746994019,-91.84559631347656,35.90334701538086,1.3311470746994019,-91.84559631347656,35.90334701538086,1.3311470746994019,-91.84559631347656,35.90334701538086,91.8456039428711,35.903350830078125,1.330681324005127,91.8456039428711,35.903350830078125,1.330681324005127,91.8456039428711,35.903350830078125,1.330681324005127,91.8456039428711,35.903350830078125,1.330681324005127,91.8456039428711,35.903350830078125,1.330681324005127,57.698951721191406,89.87249755859375,-1.3312232494354248,57.698951721191406,89.87249755859375,-1.3312232494354248,57.698951721191406,89.87249755859375,-1.3312232494354248,57.698951721191406,89.87249755859375,-1.3312232494354248,35.903690338134766,-1.331014633178711,91.84544372558594,35.903690338134766,-1.331014633178711,91.84544372558594,35.903690338134766,-1.331014633178711,91.84544372558594,35.903690338134766,-1.331014633178711,91.84544372558594,35.903690338134766,-1.331014633178711,91.84544372558594,35.903690338134766,-1.331014633178711,91.84544372558594,-56.76456832885742,-55.94221496582031,58.096012115478516,-56.76456832885742,-55.94221496582031,58.096012115478516,-56.76456832885742,-55.94221496582031,58.096012115478516,-56.76456832885742,-55.94221496582031,58.096012115478516,-56.76456832885742,-55.94221496582031,58.096012115478516,-56.76456832885742,-55.94221496582031,58.096012115478516,-2.1532464027404785,-55.545379638671875,91.20350646972656,-2.1532464027404785,-55.545379638671875,91.20350646972656,-2.1532464027404785,-55.545379638671875,91.20350646972656,-2.1532464027404785,-55.545379638671875,91.20350646972656,-2.1532464027404785,-55.545379638671875,91.20350646972656,.00012470953515730798,-92.66816711425781,33.74972152709961,.00012470953515730798,-92.66816711425781,33.74972152709961,.00012470953515730798,-92.66816711425781,33.74972152709961,.00012470953515730798,-92.66816711425781,33.74972152709961,-1.33088219165802,-91.84559631347656,35.90335464477539,-1.33088219165802,-91.84559631347656,35.90335464477539,-1.33088219165802,-91.84559631347656,35.90335464477539,-1.33088219165802,-91.84559631347656,35.90335464477539,-1.33088219165802,-91.84559631347656,35.90335464477539,-1.33088219165802,-91.84559631347656,35.90335464477539,-55.545372009277344,-91.20350646972656,2.153789758682251,-55.545372009277344,-91.20350646972656,2.153789758682251,-55.545372009277344,-91.20350646972656,2.153789758682251,-55.545372009277344,-91.20350646972656,2.153789758682251,56.76456832885742,-55.94221878051758,-58.09599304199219,56.76456832885742,-55.94221878051758,-58.09599304199219,56.76456832885742,-55.94221878051758,-58.09599304199219,56.76456832885742,-55.94221878051758,-58.09599304199219,92.66815185546875,-33.749717712402344,-.0003363910655025393,92.66815185546875,-33.749717712402344,-.0003363910655025393,92.66815185546875,-33.749717712402344,-.0003363910655025393,92.66815185546875,-33.749717712402344,-.0003363910655025393,91.20330047607422,-2.1535825729370117,-55.54570388793945,91.20330047607422,-2.1535825729370117,-55.54570388793945,91.20330047607422,-2.1535825729370117,-55.54570388793945,91.20330047607422,-2.1535825729370117,-55.54570388793945,91.20330047607422,-2.1535825729370117,-55.54570388793945,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,92.02587127685547,-3.892050415288395e-7,-54.2146110534668,.0003386797325219959,54.21427536010742,92.02606964111328,.0003386797325219959,54.21427536010742,92.02606964111328,.0003386797325219959,54.21427536010742,92.02606964111328,.0003386797325219959,54.21427536010742,92.02606964111328,.0003386797325219959,54.21427536010742,92.02606964111328,.0003386797325219959,54.21427536010742,92.02606964111328,2.1539180278778076,55.54536819458008,91.2034912109375,2.1539180278778076,55.54536819458008,91.2034912109375,2.1539180278778076,55.54536819458008,91.2034912109375,2.1539180278778076,55.54536819458008,91.2034912109375,91.20330047607422,2.153582811355591,-55.54570388793945,91.20330047607422,2.153582811355591,-55.54570388793945,91.20330047607422,2.153582811355591,-55.54570388793945,91.20330047607422,2.153582811355591,-55.54570388793945,91.20330047607422,2.153582811355591,-55.54570388793945,89.87227630615234,1.3310145139694214,-57.69927978515625,89.87227630615234,1.3310145139694214,-57.69927978515625,89.87227630615234,1.3310145139694214,-57.69927978515625,89.87227630615234,1.3310145139694214,-57.69927978515625,89.87227630615234,1.3310145139694214,-57.69927978515625,89.87227630615234,1.3310145139694214,-57.69927978515625,56.76456832885742,55.94220733642578,-58.09599304199219,56.76456832885742,55.94220733642578,-58.09599304199219,56.76456832885742,55.94220733642578,-58.09599304199219,56.76456832885742,55.94220733642578,-58.09599304199219,56.76456832885742,55.94220733642578,-58.09599304199219,58.09558868408203,56.76477813720703,-55.942420959472656,58.09558868408203,56.76477813720703,-55.942420959472656,58.09558868408203,56.76477813720703,-55.942420959472656,58.09558868408203,56.76477813720703,-55.942420959472656,55.54539108276367,-91.20350646972656,2.153383255004883,55.54539108276367,-91.20350646972656,2.153383255004883,55.54539108276367,-91.20350646972656,2.153383255004883,55.54539108276367,-91.20350646972656,2.153383255004883,55.54539108276367,-91.20350646972656,2.153383255004883,55.54539108276367,-91.20350646972656,2.153383255004883,91.84558868408203,35.903350830078125,-1.3313480615615845,91.84558868408203,35.903350830078125,-1.3313480615615845,91.84558868408203,35.903350830078125,-1.3313480615615845,91.84558868408203,35.903350830078125,-1.3313480615615845,91.84558868408203,35.903350830078125,-1.3313480615615845,91.84558868408203,35.903350830078125,-1.3313480615615845,-35.903690338134766,-1.331014633178711,-91.84546661376953,-35.903690338134766,-1.331014633178711,-91.84546661376953,-35.903690338134766,-1.331014633178711,-91.84546661376953,-35.903690338134766,-1.331014633178711,-91.84546661376953,-35.903690338134766,-1.331014633178711,-91.84546661376953,-35.903690338134766,-1.331014633178711,-91.84546661376953,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-54.21428298950195,-92.02606964111328,.00020284479251131415,-35.903690338134766,1.331014633178711,-91.84546661376953,-35.903690338134766,1.331014633178711,-91.84546661376953,-35.903690338134766,1.331014633178711,-91.84546661376953,-35.903690338134766,1.331014633178711,-91.84546661376953,-35.903690338134766,1.331014633178711,-91.84546661376953,89.87227630615234,-1.3310154676437378,-57.69927978515625,89.87227630615234,-1.3310154676437378,-57.69927978515625,89.87227630615234,-1.3310154676437378,-57.69927978515625,89.87227630615234,-1.3310154676437378,-57.69927978515625,89.87227630615234,-1.3310154676437378,-57.69927978515625,89.87227630615234,-1.3310154676437378,-57.69927978515625,55.942420959472656,-58.09579849243164,56.764583587646484,55.942420959472656,-58.09579849243164,56.764583587646484,55.942420959472656,-58.09579849243164,56.764583587646484,55.942420959472656,-58.09579849243164,56.764583587646484,55.942420959472656,-58.09579849243164,56.764583587646484,56.76499557495117,-55.94221496582031,58.0955924987793,56.76499557495117,-55.94221496582031,58.0955924987793,56.76499557495117,-55.94221496582031,58.0955924987793,56.76499557495117,-55.94221496582031,58.0955924987793,56.76499557495117,-55.94221496582031,58.0955924987793,2.1539194583892822,-55.545379638671875,91.2034912109375,2.1539194583892822,-55.545379638671875,91.2034912109375,2.1539194583892822,-55.545379638671875,91.2034912109375,2.1539194583892822,-55.545379638671875,91.2034912109375,2.1539194583892822,-55.545379638671875,91.2034912109375,2.1539194583892822,-55.545379638671875,91.2034912109375,-55.942420959472656,-58.09579849243164,-56.76457214355469,-55.942420959472656,-58.09579849243164,-56.76457214355469,-55.942420959472656,-58.09579849243164,-56.76457214355469,-55.942420959472656,-58.09579849243164,-56.76457214355469,-55.942420959472656,-58.09579849243164,-56.76457214355469,-55.942420959472656,-58.09579849243164,-56.76457214355469,-58.09599685668945,-56.76478576660156,-55.941993713378906,-58.09599685668945,-56.76478576660156,-55.941993713378906,-58.09599685668945,-56.76478576660156,-55.941993713378906,-58.09599685668945,-56.76478576660156,-55.941993713378906,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,92.0262680053711,-4.4363298457028577e-7,54.21394729614258,55.9420051574707,-58.095802307128906,-56.76498031616211,55.9420051574707,-58.095802307128906,-56.76498031616211,55.9420051574707,-58.095802307128906,-56.76498031616211,55.9420051574707,-58.095802307128906,-56.76498031616211,55.9420051574707,-58.095802307128906,-56.76498031616211,55.9420051574707,-58.095802307128906,-56.76498031616211,58.09558868408203,-56.76478576660156,-55.942420959472656,58.09558868408203,-56.76478576660156,-55.942420959472656,58.09558868408203,-56.76478576660156,-55.942420959472656,58.09558868408203,-56.76478576660156,-55.942420959472656,58.09558868408203,-56.76478576660156,-55.942420959472656,89.87269592285156,1.3310145139694214,57.698638916015625,89.87269592285156,1.3310145139694214,57.698638916015625,89.87269592285156,1.3310145139694214,57.698638916015625,89.87269592285156,1.3310145139694214,57.698638916015625,89.87269592285156,1.3310145139694214,57.698638916015625,89.87269592285156,1.3310145139694214,57.698638916015625,57.6989631652832,-89.87248229980469,1.330806851387024,57.6989631652832,-89.87248229980469,1.330806851387024,57.6989631652832,-89.87248229980469,1.330806851387024,57.6989631652832,-89.87248229980469,1.330806851387024,57.6989631652832,-89.87248229980469,1.330806851387024,57.6989631652832,-89.87248229980469,1.330806851387024,57.69895553588867,-89.87248229980469,-1.3312231302261353,57.69895553588867,-89.87248229980469,-1.3312231302261353,57.69895553588867,-89.87248229980469,-1.3312231302261353,57.69895553588867,-89.87248229980469,-1.3312231302261353,57.69895553588867,-89.87248229980469,-1.3312231302261353,57.69895553588867,-89.87248229980469,-1.3312231302261353,-1.331344485282898,-57.69895935058594,-89.87249755859375,-1.331344485282898,-57.69895935058594,-89.87249755859375,-1.331344485282898,-57.69895935058594,-89.87249755859375,-1.331344485282898,-57.69895935058594,-89.87249755859375,-1.331344485282898,-57.69895935058594,-89.87249755859375,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-92.0262680053711,-3.9587837363797007e-7,-54.21393585205078,-58.09599685668945,56.76477813720703,-55.941993713378906,-58.09599685668945,56.76477813720703,-55.941993713378906,-58.09599685668945,56.76477813720703,-55.941993713378906,-58.09599685668945,56.76477813720703,-55.941993713378906,-58.09599685668945,56.76477813720703,-55.941993713378906,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-57.69895935058594,89.87249755859375,-1.3307981491088867,-1.0771249532699585,55.84297561645508,-91.01956939697266,-1.0771249532699585,55.84297561645508,-91.01956939697266,-1.0771249532699585,55.84297561645508,-91.01956939697266,-1.0771249532699585,55.84297561645508,-91.01956939697266,-1.0771249532699585,55.84297561645508,-91.01956939697266,-1.0771249532699585,55.84297561645508,-91.01956939697266,.6651760339736938,56.91976547241211,-90.35406494140625,.6651760339736938,56.91976547241211,-90.35406494140625,.6651760339736938,56.91976547241211,-90.35406494140625,.6651760339736938,56.91976547241211,-90.35406494140625,.6651760339736938,56.91976547241211,-90.35406494140625,-.6658390760421753,56.91976547241211,-90.35406494140625,-.6658390760421753,56.91976547241211,-90.35406494140625,-.6658390760421753,56.91976547241211,-90.35406494140625,-.6658390760421753,56.91976547241211,-90.35406494140625,-.6658390760421753,56.91976547241211,-90.35406494140625,-1.3311461210250854,91.84559631347656,-35.90334701538086,-1.3311461210250854,91.84559631347656,-35.90334701538086,-1.3311461210250854,91.84559631347656,-35.90334701538086,-1.3311461210250854,91.84559631347656,-35.90334701538086,-1.3311461210250854,91.84559631347656,-35.90334701538086,-1.3311461210250854,91.84559631347656,-35.90334701538086,-.00012322973634582013,92.66816711425781,-33.749717712402344,-.00012322973634582013,92.66816711425781,-33.749717712402344,-.00012322973634582013,92.66816711425781,-33.749717712402344,-.00012322973634582013,92.66816711425781,-33.749717712402344,-89.87227630615234,1.3310145139694214,57.69929885864258,-89.87227630615234,1.3310145139694214,57.69929885864258,-89.87227630615234,1.3310145139694214,57.69929885864258,-89.87227630615234,1.3310145139694214,57.69929885864258,-2.153247833251953,55.54536819458008,91.20350646972656,-2.153247833251953,55.54536819458008,91.20350646972656,-2.153247833251953,55.54536819458008,91.20350646972656,-2.153247833251953,55.54536819458008,91.20350646972656],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[-.32300448417663574,.7980563640594482,-.5086984634399414,-.3229999840259552,.7980471849441528,-.5087158679962158,-.32299789786338806,.7980540990829468,-.5087060928344727,-.3229975402355194,.7980594038963318,-.5086981654167175,-.322995662689209,.7980546951293945,-.5087066292762756,-.32297030091285706,.7980630397796631,-.5087097883224487,-.3145313560962677,.8124136924743652,-.4909725487232208,-.3145303428173065,.8124191761016846,-.4909641742706299,-.31452667713165283,.8123946189880371,-.49100714921951294,-.31452617049217224,.8124018907546997,-.49099525809288025,-.31451353430747986,.8124081492424011,-.49099329113960266,.7977177500724792,.5067335963249207,.3269055485725403,.797724187374115,.5067331790924072,.3268907070159912,.7977266907691956,.5067335367202759,.32688409090042114,.797727644443512,.5067120790481567,.3269153833389282,.7977277636528015,.5067290663719177,.3268887996673584,-.48681509494781494,-.3170761168003082,-.8139249086380005,-.486814022064209,-.31705862283706665,-.8139324188232422,-.4868130683898926,-.31705430150032043,-.8139346241950989,-.486799031496048,-.3170582056045532,-.8139415383338928,-.48679620027542114,-.31705963611602783,-.8139426112174988,-.4867938756942749,-.3170706033706665,-.8139398097991943,.4910266399383545,.2948715388774872,-.8197216391563416,.4910283386707306,.29487162828445435,-.8197205662727356,.4910544753074646,.29487064480781555,-.8197053670883179,.49105706810951233,.2948714792728424,-.8197034597396851,.49106070399284363,.2948935925960541,-.8196933269500732,.49107053875923157,.29487308859825134,-.8196947574615479,.019486773759126663,.0034609902650117874,-.9998041391372681,.01950395107269287,.003431154415011406,-.9998038411140442,.01951080560684204,.0034348517656326294,-.9998037219047546,.019518375396728516,.003450945019721985,-.9998035430908203,.4929899275302887,.2909228503704071,.8199541568756104,.4929942488670349,.29094332456588745,.8199442028999329,.49299705028533936,.29093438386917114,.8199459314346313,.49300453066825867,.29094645380973816,.8199370503425598,.49301400780677795,.29092937707901,.8199374079704285,.506730854511261,.3268951177597046,.7977238893508911,.5067356824874878,.32688724994659424,.797724187374115,.5067362189292908,.3268929123878479,.7977213859558105,.5067363381385803,.3269083499908447,.7977150082588196,.5067551732063293,.32688796520233154,.7977114319801331,-.30085650086402893,-.8039307594299316,.5130113363265991,-.3008539080619812,-.8039156794548035,.5130366683006287,-.3008496165275574,-.8039196729660034,.5130329728126526,-.30084699392318726,-.8039218187332153,.5130308866500854,-.3008323013782501,-.8039500713348389,.5129954814910889,-.3008321523666382,-.8039198517799377,.5130428671836853,.999752938747406,.022229939699172974,-27254223823547363e-21,.9997531175613403,.02221774309873581,2555549144744873e-21,.9997531175613403,.022219747304916382,-11578202247619629e-21,.9997537136077881,.022191841155290604,-5044043064117432e-21,-6690621376037598e-21,.9997531771659851,.022219300270080566,15208497643470764e-22,.9997526407241821,.02224019356071949,7711350917816162e-21,.9997531771659851,.022218987345695496,25779008865356445e-21,.9997528791427612,.022229254245758057,-.8199474215507507,-.4929923415184021,.29093796014785767,-.8199467658996582,-.49298861622810364,.29094576835632324,-.8199445605278015,-.4929924011230469,.2909456789493561,-.8199410438537598,-.4930053651332855,.2909337878227234,-.8199405670166016,-.4929971694946289,.29094862937927246,-.8199316263198853,-.4930025041103363,.2909652292728424,-.503142237663269,.32643717527389526,-.800179123878479,-.503139078617096,.3264300227165222,-.8001841306686401,-.5031341314315796,.3264409899711609,-.8001827001571655,-.5031154155731201,.32642847299575806,-.800199568271637,-.9997532367706299,-.02221621572971344,-50961971282958984e-22,-.9997530579566956,-.02221750095486641,10980293154716492e-21,-.9997529983520508,-.022224798798561096,-216066837310791e-19,-.9997526407241821,-.022240420803427696,5041249096393585e-21,-.8199519515037537,-.4929916560649872,-.29092633724212646,-.8199494481086731,-.4929870665073395,-.29094117879867554,-.8199440240859985,-.4930054545402527,-.29092511534690857,-.8199396729469299,-.4930015802383423,-.29094383120536804,-.8199336528778076,-.4930025637149811,-.29095908999443054,-.8139479756355286,-.48679518699645996,-.3170475959777832,-.8139445185661316,-.4867909550666809,-.31706294417381287,-.8139359951019287,-.4868128299713135,-.3170514404773712,-.8139359951019287,-.4868128299713135,-.3170514404773712,-.8139272928237915,-.4868120551109314,-.3170749247074127,.291377991437912,.817572832107544,-.4966624081134796,.2913815379142761,.817571222782135,-.4966628849506378,.29140985012054443,.8175534605979919,-.49667567014694214,.29141905903816223,.8175671696662903,-.49664777517318726,.2914317846298218,.8175531625747681,-.49666333198547363,.3144916296005249,.8124189376831055,-.4909893870353699,.314521849155426,.812416136264801,-.4909745156764984,.31452593207359314,.8124017119407654,-.4909958243370056,.31453219056129456,.8123990893363953,-.4909961223602295,.31453219056129456,.8123990893363953,-.4909961223602295,.31453603506088257,.8124093413352966,-.49097663164138794,-.8199474215507507,.4929920434951782,.2909386157989502,-.8199455142021179,.4929906129837036,.29094627499580383,-.8199436664581299,.492990642786026,.29095107316970825,-.8199414610862732,.4929976165294647,.2909456193447113,-.8199408054351807,.49300891160964966,.290928453207016,-.8199315071105957,.4930025339126587,.2909652292728424,-.7977402210235596,.5067192316055298,.3268728256225586,-.797728419303894,.5067235827445984,.3268952965736389,-.7977269291877747,.5067242383956909,.32689791917800903,-.7977257370948792,.5067130923271179,.3269180655479431,-.7977219223976135,.5067331790924072,.32689642906188965,-.8039276003837585,.513014554977417,.30085939168930054,-.803920328617096,.5130298733711243,.30085256695747375,-.8039193153381348,.513033926486969,.30084848403930664,-.8039184808731079,.5130314230918884,.3008551299571991,-.3170892596244812,-.8139346837997437,-.4867902398109436,-.3170653283596039,-.813935399055481,-.48680463433265686,-.3170589804649353,-.8139439225196838,-.4867946207523346,-.3170560896396637,-.8139365315437317,-.486808717250824,-.31703075766563416,-.813947319984436,-.4868071973323822,-.3170735538005829,.8139387965202332,.4867936074733734,-.31706538796424866,.8139315843582153,.48681098222732544,-.3170650601387024,.8139441609382629,.4867902994155884,-.31706249713897705,.8139439225196838,.4867921471595764,-.3170546293258667,.8139438629150391,.4867975413799286,-.31705403327941895,.8139353394508362,.4868120551109314,-.31705284118652344,.8139360547065735,.4868115782737732,-.32690656185150146,.797716498374939,.5067349672317505,-.32688647508621216,.7977249026298523,.5067349076271057,-.32688552141189575,.7977311611175537,.506725549697876,-.3268853724002838,.7977126240730286,.5067547559738159,.2909286618232727,-.8199402689933777,-.49300962686538696,.290932297706604,-.8199490904808044,-.4929928183555603,.290941059589386,-.8199471831321716,-.49299079179763794,.2909466624259949,-.8199383020401001,-.49300238490104675,.2909603714942932,-.8199326395988464,-.49300357699394226,-.8139441013336182,-.4867924749851227,.31706178188323975,-.8139419555664062,-.4867969751358032,.3170603811740875,-.8139404058456421,-.4868042469024658,.31705325841903687,-.8139353394508362,-.48680993914604187,.31705722212791443,-.8139327764511108,-.486809641122818,.3170642554759979,-.8139600157737732,.48677366971969604,.31704968214035034,-.8139446973800659,.4867933988571167,.31705862283706665,-.8139420747756958,.48679694533348083,.31706005334854126,-.813937246799469,.48679330945014954,.3170780539512634,-.8139326572418213,.4868103265762329,.3170636296272278,-.8139210939407349,.4868491590023041,.31703364849090576,-.8199512958526611,.4929920434951782,-.29092729091644287,-.8199489712715149,.4929892122745514,-.2909389138221741,-.8199403882026672,.49300849437713623,-.29093047976493835,-.8199390172958374,.4930011034011841,-.2909468710422516,-.8199335932731628,.49300262331962585,-.2909591794013977,.022224154323339462,8113682270050049e-21,.999752938747406,.022224217653274536,-7063150405883789e-21,.9997529983520508,.02223508059978485,-2683699131011963e-20,.9997528195381165,.022243808954954147,14416873455047607e-22,.9997525811195374,.5130226612091064,-.30085763335227966,.8039230704307556,.5130249857902527,-.30090412497520447,.8039043545722961,.5130347013473511,-.3008493185043335,.8039185404777527,.5130426287651062,-.30085936188697815,.8039097785949707,.5130426287651062,-.30085936188697815,.8039097785949707,.8139259815216064,.4868123233318329,.31707778573036194,.8139373064041138,.4867918789386749,.31708046793937683,.8139375448226929,.48680996894836426,.3170512318611145,.8139379024505615,.4868050515651703,.3170582354068756,.8139469027519226,.48679566383361816,.3170495331287384,.8139491677284241,.48678889870643616,.31705406308174133,-.49300631880760193,.29092955589294434,.8199419379234314,-.4929933547973633,.29095086455345154,.8199421167373657,-.4929933547973633,.29095086455345154,.8199421167373657,-.49299073219299316,.2909349799156189,.8199493885040283,-.4929877817630768,.290939062833786,.8199498057365417,-.49300646781921387,-.29092955589294434,.8199418783187866,-.4929991066455841,-.2909305989742279,.8199458718299866,-.4929991066455841,-.2909305989742279,.8199458718299866,-.4929906129837036,-.29093536734580994,.8199493885040283,-.49298787117004395,-.2909401059150696,.819949209690094,-.022236576303839684,-14398247003555298e-22,.9997527003288269,-.022226199507713318,26732683181762695e-21,.9997529983520508,-.022215761244297028,-4159286618232727e-21,.9997531771659851,-.022215470671653748,28014183044433594e-22,.9997532963752747,.4860762059688568,.31750911474227905,-.8141976594924927,.4860828220844269,.3174929618835449,-.8142000436782837,.4860839545726776,.31748220324516296,-.8142036199569702,.48609045147895813,.31749191880226135,-.8141958713531494,.48609644174575806,.31749197840690613,-.8141922950744629,.48610714077949524,.3175130784511566,-.8141777515411377,.48611539602279663,.31747305393218994,-.8141883611679077,-346451997756958e-19,.016819089651107788,-.9998586177825928,-2047419548034668e-20,.016789883375167847,-.999859094619751,-13813376426696777e-21,.016806378960609436,-.9998587369918823,-277138315141201e-20,.016810698434710503,-.9998586773872375,65267086029052734e-22,.016805753111839294,-.9998587965965271,18220569472759962e-21,.016794271767139435,-.9998589754104614,.016185671091079712,-.9998690485954285,-3345310688018799e-20,.01620444655418396,-.999868631362915,-10926742106676102e-22,.016207069158554077,-.999868631362915,11086463928222656e-21,.01620793342590332,-.999868631362915,-10415911674499512e-21,.016219258308410645,-.9998684525489807,-2.980232238769531e-7,.016219640150666237,-.9998684525489807,-4.5890919864177704e-7,.3170523941516876,-.8139364719390869,-.486811101436615,.3170545697212219,-.8139440417289734,-.48679736256599426,.31706172227859497,-.8139370083808899,-.48680418729782104,.3170723617076874,-.8139404058456421,-.486791729927063,.31707704067230225,-.8139263391494751,-.48681217432022095,.8199406266212463,-.4929971992969513,-.29094862937927246,.8199410438537598,-.49300533533096313,-.290933758020401,.8199447989463806,-.49299201369285583,-.2909456193447113,.8199467658996582,-.4929884672164917,-.290946364402771,.819947361946106,-.492992103099823,-.2909383773803711,.8199547529220581,-.49298709630966187,-.2909259796142578,-.016219263896346092,.9998684525489807,5.702022463083267e-7,-.016217336058616638,.9998685717582703,-4.023313522338867e-7,-.016208097338676453,.9998686909675598,-1023709774017334e-20,-.016207024455070496,.9998686909675598,11369585990905762e-21,-.01620444655418396,.9998686909675598,10926742106676102e-22,-.01616719365119934,.9998693466186523,33482909202575684e-21,.32295531034469604,.7980619072914124,-.5087209343910217,.32295531034469604,.7980619072914124,-.5087209343910217,.3229907155036926,.798053503036499,-.5087116956710815,.3229965567588806,.7980476021766663,-.50871741771698,.32300084829330444,.7980570793151855,-.5086997747421265,.8039142489433289,.5130448937416077,.30084332823753357,.8039181232452393,.5130343437194824,.3008510172367096,.8039227724075317,.5130297541618347,.300846129655838,.8039230108261108,.5130389332771301,.300830215215683,.8039236664772034,.5130265355110168,.30084937810897827,.8039326667785645,.5130090117454529,.3008555769920349,.8039484024047852,.512998104095459,.3008320927619934,-.30085283517837524,.8039165735244751,.5130358934402466,-.300849586725235,.8039194345474243,.5130332708358765,-.3008473813533783,.803921639919281,.5130310654640198,-.3008348345756531,.8039216995239258,.5130383372306824,-.3008311986923218,.8039206862449646,.5130419731140137,.300837904214859,.803917407989502,.5130431056022644,.30084890127182007,.8039129972457886,.5130437016487122,.30085113644599915,.803921639919281,.5130288004875183,.3008517622947693,.8039230704307556,.5130261182785034,.3008546531200409,.8039194941520691,.5130301117897034,.3008613586425781,.8039342164993286,.5130031108856201,-.019525907933712006,.0034512635320425034,-.999803364276886,-.019515730440616608,.003434911370277405,-.9998036623001099,-.01951080560684204,.0034344345331192017,-.9998037815093994,-.01949400082230568,.003460988402366638,-.9998040795326233,.30084559321403503,-.8039190173149109,-.5130363702774048,.3008456826210022,-.8039130568504333,-.5130454301834106,.30084726214408875,-.8039217591285706,-.5130307674407959,.30084937810897827,-.8039229512214661,-.5130279660224915,.3008571267127991,-.803926944732666,-.5130170583724976,.49298426508903503,-.29092302918434143,-.8199574947357178,.4929867684841156,-.290944904088974,-.819948136806488,.4929903745651245,-.29092836380004883,-.8199520111083984,.4929988384246826,-.29094645380973816,-.819940447807312,.4930066466331482,-.29092955589294434,-.8199417591094971,.30083754658699036,-.8039181232452393,.5130423307418823,.3008488714694977,-.8039132356643677,.5130434036254883,.3008507788181305,-.8039216995239258,.5130287408828735,.30085182189941406,-.8039235472679138,.5130254030227661,.30085495114326477,-.8039181232452393,.5130321383476257,.30085986852645874,-.8039340376853943,.5130043029785156,-.797728419303894,-.5067229270935059,.3268962502479553,-.7977258563041687,-.506712794303894,.3269183933734894,-.797725260257721,-.5067326426506042,.3268887996673584,-.7977154850959778,-.5067335367202759,.32691144943237305,-.3269064426422119,-.7977167367935181,.5067347884178162,-.3268938660621643,-.7977226376533508,.5067335367202759,-.3268907070159912,-.7977270483970642,.5067287087440491,-.3268868923187256,-.7977240085601807,.5067360997200012,-.3268852233886719,-.7977129817008972,.5067545175552368,-.5089601278305054,.3034306466579437,-.805536687374115,-.5089573860168457,.30343058705329895,-.805538535118103,-.5089519619941711,.30339932441711426,-.8055538535118103,-.5089257955551147,.30343857407569885,-.8055554628372192,-.5089184045791626,.3034357726573944,-.8055611252784729,-.5088995695114136,.30344462394714355,-.8055697679519653,.3268873393535614,.7977280616760254,.5067291259765625,.32689282298088074,.7977269887924194,.5067273378372192,.3269011378288269,.7977209091186523,.5067315101623535,.3269102871417999,.7977165579795837,.5067325234413147,.32691535353660583,.7977278828620911,.5067119002342224,-26047229766845703e-21,-.999752938747406,-.02222883701324463,-8940696716308594e-21,-.9997531175613403,-.022218912839889526,-15245750546455383e-22,-.9997526407241821,-.02224019728600979,7366761565208435e-21,-.9997531175613403,-.02221873588860035,-.290948748588562,-.8199450969696045,-.49298956990242004,-.2909458875656128,-.8199467658996582,-.49298855662345886,-.2909458577632904,-.8199422955513,-.4929962456226349,-.29093700647354126,-.8199491500854492,-.4929898679256439,-.29093021154403687,-.8199409246444702,-.4930077791213989,-.2909247875213623,-.8199558854103088,-.4929860532283783,.7977120280265808,-.5067539215087891,.32688847184181213,.7977270483970642,-.506733775138855,.3268832564353943,.7977273464202881,-.5067236423492432,.32689768075942993,.7977273464202881,-.5067236423492432,.32689768075942993,.3170563578605652,.8139361143112183,.48680925369262695,.3170570433139801,.8139445185661316,.4867948889732361,.3170689344406128,.813934862613678,.4868030846118927,.3170716166496277,.8139290809631348,.4868110716342926,.31707435846328735,.8139417171478271,.48678815364837646,.4867840111255646,-.3170663118362427,-.8139473795890808,.486789345741272,-.3170621991157532,-.8139458894729614,.4867922365665436,-.31707215309143066,-.8139402270317078,.48679348826408386,-.317050039768219,-.8139480948448181,.4868071973323822,-.3170592784881592,-.8139362335205078,.48680734634399414,-.31705474853515625,-.8139378428459167,.4868084490299225,-.3170764446258545,-.8139288425445557,-13574957847595215e-21,-.01111060380935669,-.9999383091926575,-4933535819873214e-21,-.011075659655034542,-.9999386072158813,7039896445348859e-21,-.011118302121758461,-.9999381303787231,852346420288086e-20,-.01112416386604309,-.9999381899833679,14200806617736816e-21,-.011078417301177979,-.9999385476112366,3071129322052002e-20,-.011100709438323975,-.9999383687973022,.29092466831207275,.8199556469917297,.49298620223999023,.2909298241138458,.8199406862258911,.4930081367492676,.2909347116947174,.8199495077133179,.4929908514022827,.2909448742866516,.8199471235275269,.49298879504203796,.29094886779785156,.8199383020401001,.49300071597099304,.016171813011169434,.9998692274093628,-3343820571899414e-20,.01620444655418396,.999868631362915,-10915100574493408e-22,.01620711386203766,.9998686909675598,-10520219802856445e-21,.01620851457118988,.9998686909675598,1023709774017334e-20,.01621788740158081,.9998685121536255,1.7881393432617188e-7,.016219263896346092,.9998685121536255,-3.4598633646965027e-7,-.5067505836486816,.3268905580043793,.7977132201194763,-.5067304372787476,.3269084393978119,.7977187037467957,-.5067296028137207,.3268975615501404,.797723650932312,-.5067266225814819,.3268991708755493,.7977248430252075,-.5067264437675476,.32688987255096436,.7977288961410522,-.5067263245582581,.32689154148101807,.7977282404899597,-.2909603714942932,.8199325203895569,.49300387501716614,-.2909455895423889,.8199446797370911,.4929923117160797,-.2909436821937561,.8199417591094971,.4929981827735901,-.2909405529499054,.8199470639228821,.4929913282394409,-.2909325659275055,.8199489712715149,.4929928183555603,-.2909291386604309,.819939911365509,.4930098354816437,-.9997537136077881,.022191839292645454,504031777381897e-20,-.9997531175613403,.02221798151731491,-2693384885787964e-21,-.9997531175613403,.022219747304916382,11652708053588867e-21,-.9997529983520508,.022228829562664032,273287296295166e-19,-.9998690485954285,-4357099533081055e-20,.01618865132331848,-.999868631362915,8.069910109043121e-7,.016208183020353317,-.9998685717582703,-448375940322876e-19,.01621093973517418,-.9998685717582703,-8761882781982422e-21,.01621145009994507,-.9998685717582703,11309981346130371e-21,.01621215045452118,-.9998684525489807,-10132789611816406e-22,.01622423529624939,-.9998683929443359,10335352271795273e-22,.016223950311541557,-.5130453705787659,-.3008093237876892,.8039266467094421,-.5130453705787659,-.3008093237876892,.8039266467094421,-.5130347013473511,-.30084866285324097,.8039188385009766,-.5130272507667542,-.3008646070957184,.803917646408081,-.5130270719528198,-.3008405864238739,.8039267659187317,-.5130001902580261,-.3008325397968292,.8039469718933105,-.5067576169967651,-.3268996477127075,-.7977050542831421,-.5067576169967651,-.3268996477127075,-.7977050542831421,-.5067268013954163,-.3268904387950897,-.7977283596992493,-.5067136287689209,-.32691413164138794,-.7977270483970642,-.5130422711372375,-.30085960030555725,-.8039097785949707,-.5130422711372375,-.30085960030555725,-.8039097785949707,-.5130351185798645,-.3008493185043335,-.8039183616638184,-.5130186080932617,-.30085819959640503,-.8039255738258362,-.5130038857460022,-.3008323609828949,-.8039445877075195,-.8139479756355286,.4867886006832123,-.31705790758132935,-.8139469027519226,.4867956042289734,-.3170493245124817,-.8139386773109436,.4867936074733734,-.31707385182380676,-.8139375448226929,.48680996894836426,-.3170512914657593,-.8139374256134033,.486805260181427,-.3170590400695801,-.8139272928237915,.4868119955062866,-.31707483530044556,-.8039371967315674,-.5130016803741455,-.3008561134338379,-.8039246797561646,-.5130265951156616,-.30084672570228577,-.8039228916168213,-.5130297541618347,-.30084607005119324,-.803920567035675,-.5130411386489868,-.3008330762386322,-.803917407989502,-.5130360126495361,-.3008502721786499,-.8039128184318542,-.5130437016487122,-.30084937810897827,-.8039510250091553,-.5129914879798889,.30083632469177246,-.803925633430481,-.513030469417572,.30083781480789185,-.8039206862449646,-.5130295753479004,.3008521795272827,-.8039200901985168,-.5130325555801392,.3008491098880768,-.8039183616638184,-.5130420923233032,.30083730816841125,-.8039169311523438,-.513033390045166,.3008556663990021,-.8039165735244751,-.5130240321159363,.3008728623390198,.8139259219169617,-.4868123531341553,.3170778751373291,.8139362335205078,-.48681262135505676,.31705108284950256,.8139362335205078,-.48681262135505676,.31705108284950256,.8139456510543823,-.4867914915084839,.31705909967422485,.8139479756355286,-.4867952764034271,.3170475363731384,.8199337124824524,-.4930025637149811,.29095906019210815,.8199397325515747,-.4930015802383423,.29094383120536804,.8199440240859985,-.4930053949356079,.29092511534690857,.8199495673179626,-.49298688769340515,.290941059589386,.8199518918991089,-.4929915964603424,.29092657566070557,-30502676963806152e-21,-.01617613434791565,.9998691082000732,-8180737495422363e-21,-.016205251216888428,.999868631362915,11175870895385742e-22,-.01622094213962555,.9998685121536255,46496279537677765e-22,-.01620444841682911,.9998686909675598,6626127287745476e-21,-.016218557953834534,.9998685121536255,16480684280395508e-21,-.016207247972488403,.999868631362915,.2909298837184906,-.8199405670166016,.493008553981781,.2909371554851532,-.819949209690094,.49298959970474243,.290944904088974,-.8199470043182373,.4929887652397156,.29094886779785156,-.8199384212493896,.4930006265640259,.29096388816833496,-.8199325799942017,.49300146102905273,.8199388980865479,.4930010437965393,.2909468710422516,.8199397325515747,.4930093288421631,.2909305691719055,.8199490904808044,.49298906326293945,.2909387946128845,.8199512362480164,.4929920732975006,.2909274697303772,.8199567198753357,.4929872155189514,.29091987013816833,.8039079904556274,.5130425095558167,-.30086418986320496,.8039079904556274,.5130425095558167,-.30086418986320496,.8039183616638184,.513031542301178,-.3008551597595215,.8039308786392212,.5130091905593872,-.30085980892181396,.4929937720298767,-.29094550013542175,.8199437856674194,.4929945468902588,-.2909424602985382,.819944441318512,.4929971694946289,-.2909335792064667,.8199460506439209,.49299973249435425,-.29094603657722473,.8199400305747986,.4930054247379303,-.2909621000289917,.819930911064148,.4930139482021332,-.2909294068813324,.8199374079704285,-.5067506432533264,-.326890766620636,.7977131605148315,-.5067328214645386,-.32690688967704773,.797717809677124,-.5067287087440491,-.326896071434021,.7977248430252075,-.5067263841629028,-.3268885314464569,.7977295517921448,-.5067260265350342,-.3268907368183136,.7977287173271179,-.5067246556282043,-.3268979489803314,.7977266907691956,-.4868078827857971,-.31707385182380676,.8139301538467407,-.48680680990219116,-.31705403327941895,.8139384388923645,-.4868009090423584,-.3170638084411621,.8139382600784302,-.4867950677871704,-.3170577883720398,.8139441013336182,-.486785888671875,-.31707119941711426,.8139443397521973,-63907355070114136e-22,-.9997531175613403,.02221914753317833,15255063772201538e-22,-.9997526407241821,.022240199148654938,7659196853637695e-21,-.9997530579566956,.022218987345695496,25704503059387207e-21,-.9997528791427612,.022229783236980438,-.2909602224826813,-.8199326992034912,.49300363659858704,-.2909456193447113,-.8199447989463806,.4929920732975006,-.2909436523914337,-.8199417591094971,.4929981827735901,-.2909403145313263,-.8199471235275269,.4929913580417633,-.2909320592880249,-.8199489116668701,.4929931163787842,-.2909291386604309,-.8199397325515747,.4930102229118347,-.3170614242553711,-.8139365911483765,.4868052303791046,-.3170546591281891,-.8139438629150391,.4867975413799286,-.31705236434936523,-.8139365911483765,.4868110716342926,-.31705206632614136,-.8139435052871704,.4867997169494629,.5067088007926941,-.32691431045532227,-.7977301478385925,.5067205429077148,-.32689112424850464,-.7977320551872253,.506729781627655,-.32688722014427185,-.7977279424667358,.5067307949066162,-.32690852880477905,-.797718346118927,.9997526407241821,-.022240418940782547,-5042180418968201e-21,.9997529983520508,-.02222476899623871,216066837310791e-19,.9997532367706299,-.022217553108930588,-11643394827842712e-21,.9997532963752747,-.022216007113456726,49620866775512695e-22,.8139346837997437,-.48679178953170776,-.31708675622940063,.8139352798461914,-.48680993914604187,-.31705716252326965,.8139358758926392,-.48680379986763,-.31706541776657104,.8139419555664062,-.4867968261241913,-.3170607388019562,.8139616847038269,-.4867711067199707,-.3170492947101593,.9998683333396912,9.019859135150909e-7,-.016223222017288208,.9998684525489807,-9.5367431640625e-7,-.016224414110183716,.999868631362915,-858306884765625e-20,-.01621215045452118,.999868631362915,8.074566721916199e-7,-.016208184882998466,.999868631362915,11593103408813477e-21,-.016211628913879395,.9998686909675598,-31620264053344727e-21,-.016208022832870483,.9998689293861389,-4826486110687256e-20,-.0161912702023983,-838935375213623e-20,.016203731298446655,.9998688101768494,9.622890502214432e-7,.01622016541659832,.9998683929443359,4648929461836815e-21,.01620445027947426,.9998686909675598,64373016357421875e-22,.01621994376182556,.9998685717582703,1582503318786621e-20,.016208693385124207,.9998685121536255,3847479820251465e-20,.016177505254745483,.999869167804718,.48680007457733154,.31705743074417114,.813941240310669,.48680129647254944,.3170565962791443,.8139409422874451,.4868077337741852,.3170599937438965,.8139355778694153,.48685207962989807,.3170304000377655,.8139206767082214,.8139327168464661,.48680904507637024,-.31706565618515015,.8139352798461914,.48680996894836426,-.3170573115348816,.813941240310669,.48680001497268677,-.31705746054649353,.8139423727989197,.4867967665195465,-.31705957651138306,.8139436841011047,.48679426312446594,-.3170599341392517,.5088772773742676,.30341875553131104,-.8055935502052307,.5089110136032104,.3034226894378662,-.8055708408355713,.5089132785797119,.30345800518989563,-.8055559992790222,.5089139342308044,.30345267057418823,-.8055576086044312,.508934497833252,.30343055725097656,-.8055529594421387,.5089894533157349,.303387314081192,-.8055344820022583,.5031076073646545,.3264298439025879,-.8002038598060608,.5031241178512573,.3264410197734833,-.8001890182495117,.5031249523162842,.32645124197006226,-.8001842498779297,.5031318664550781,.3264358937740326,-.8001861572265625,.5031365752220154,.3264387249946594,-.8001821041107178,.797707200050354,.506753146648407,-.3269011378288269,.797707200050354,.506753146648407,-.3269011378288269,.7977266907691956,.5067112445831299,-.32691892981529236,.7977287769317627,.5067213773727417,-.3268980383872986,.3170560896396637,-.8139365315437317,.486808717250824,.31705886125564575,-.8139439821243286,.48679447174072266,.3170628845691681,-.813936173915863,.4868050217628479,.3170718252658844,-.8139439821243286,.48678603768348694,.31708014011383057,-.8139369487762451,.48679235577583313,.31708040833473206,-.8139251470565796,.48681211471557617,.8199315071105957,.4930025637149811,-.2909652590751648,.8199403285980225,.49300968647003174,-.2909284830093384,.8199413418769836,.49299755692481995,-.2909456491470337,.8199435472488403,.49299076199531555,-.29095104336738586,.8199455142021179,.4929905831813812,-.2909463047981262,.8199475407600403,.4929920434951782,-.2909378409385681,-.49301081895828247,-.2909294068813324,-.8199392557144165,-.4930001497268677,-.29094603657722473,-.8199397325515747,-.4929942190647125,-.29094552993774414,-.8199436664581299,-.49299415946006775,-.2909356355667114,-.8199470043182373,-.4929927885532379,-.2909421920776367,-.8199455738067627,-.49299028515815735,-.29092299938201904,-.8199537992477417,-.016219697892665863,-.9998685121536255,1.8882565200328827e-7,-.016219332814216614,-.9998683929443359,4.917383193969727e-7,-.016213014721870422,-.9998685121536255,4868209362030029e-20,-.016209125518798828,-.999868631362915,-10088086128234863e-21,-.016207367181777954,-.999868631362915,10952353477478027e-21,-.01620444655418396,-.9998686909675598,-9.727664291858673e-7,-.01618608832359314,-.9998689889907837,3844499588012695e-20,-.49107488989830017,.2948729395866394,-.8196921944618225,-.49106675386428833,.29489362239837646,-.8196896314620972,-.49106061458587646,.2948709726333618,-.8197014927864075,-.49105924367904663,.2948675751686096,-.8197035193443298,-.4910484552383423,.2948729693889618,-.8197080492973328,.5130017399787903,-.30085939168930054,-.8039357662200928,.5130244493484497,-.30084937810897827,-.803925096988678,.513026773929596,-.3008493483066559,-.8039234280586243,.513030469417572,-.30085432529449463,-.8039193749427795,.5130401253700256,-.30083391070365906,-.8039209842681885,.5130414366722107,-.30084913969039917,-.8039143681526184,.32688838243484497,-.7977268695831299,.5067307949066162,.3268934488296509,-.797727644443512,.5067262649536133,.3268952965736389,-.7977220416069031,.5067338347434998,.3269088566303253,-.7977157235145569,.5067347288131714,.32691681385040283,-.7977270483970642,.5067120790481567,.506731390953064,-.3268928527832031,.7977245450019836,.5067368745803833,-.3268938362598419,.7977205514907837,.5067563056945801,-.3268866240978241,.7977113723754883,.5067574977874756,-.3268994987010956,.7977052927017212,.5067574977874756,-.3268994987010956,.7977052927017212,.48679232597351074,-.31706538796424866,.8139427304267883,.4867943525314331,-.3170838952064514,.8139344453811646,.48680126667022705,-.317055344581604,.8139413595199585,.48680776357650757,-.31706103682518005,.8139351010322571,.4868128001689911,-.3170541524887085,.813934862613678,.4868144989013672,-.3170735836029053,.8139262199401855,-.3269168436527252,-.7977273464202881,-.5067114233970642,-.3269089162349701,-.7977157235145569,-.5067346096038818,-.32690006494522095,-.7977253198623657,-.5067254304885864,-.3268975615501404,-.7977211475372314,-.5067336559295654,-.326894074678421,-.7977250218391418,-.5067296624183655,-.32689133286476135,-.7977280020713806,-.5067267417907715,-.7977375388145447,-.5067383050918579,-.3268502950668335,-.7977375388145447,-.5067383050918579,-.3268502950668335,-.7977255582809448,-.5067352652549744,-.326884001493454,-.7977122068405151,-.5067542791366577,-.32688724994659424,.9998685717582703,-1.9371509552001953e-7,.016211718320846558,.9998686909675598,-7063150405883789e-21,.01620452105998993,.9998686909675598,5.688052624464035e-7,.01620963215827942,.9998687505722046,8.088536560535431e-7,.01620098017156124,.9998687505722046,9447336196899414e-21,.016203224658966064,.9998690485954285,-34227967262268066e-21,.01618596911430359,.3268680274486542,-.7977415323257446,-.5067204236984253,.3268900513648987,-.7977254986763,-.5067315697669983,.32689306139945984,-.7977262735366821,-.5067285299301147,.3268945813179016,-.7977228164672852,-.5067329406738281,.32689517736434937,-.7977268099784851,-.5067262649536133,.32691502571105957,-.7977272272109985,-.5067128539085388,.7977112531661987,-.5067529678344727,-.32689201831817627,.7977154850959778,-.5067335963249207,-.32691144943237305,.7977215647697449,-.506732702255249,-.32689809799194336,.7977254390716553,-.5067287087440491,-.32689452171325684,.7977267503738403,-.5067309141159058,-.32688814401626587,.5130077004432678,.30085963010787964,.8039320707321167,.5130297541618347,.30084937810897827,.8039216995239258,.5130323171615601,.3008490204811096,.8039200901985168,.5130364894866943,.30085432529449463,.8039156794548035,.5130462050437927,.3008359372615814,.8039162158966064,.51304692029953,.30084913969039917,.8039107918739319,.8039127588272095,-.5130437612533569,.30084940791130066,.8039186596870422,-.5130347609519958,.3008493483066559,.8039190769195557,-.5130429863929749,.30083420872688293,.8039229512214661,-.5130298137664795,.30084604024887085,.8039247393608093,-.5130265951156616,.3008466958999634,.8039315938949585,-.5130106210708618,.3008553087711334,.8039183616638184,-.5130316615104675,-.30085524916648865,.803918719291687,-.5130422711372375,-.3008360266685486,.8039200305938721,-.5130326151847839,-.30084913969039917,.8039206862449646,-.5130296349525452,-.3008522093296051,.8039317727088928,-.513005793094635,-.30086347460746765,.8039458394050598,-.5129998922348022,-.3008357584476471,-.30086222290992737,-.8039306402206421,-.5130082964897156,-.30085277557373047,-.8039199113845825,-.513030469417572,-.300851047039032,-.8039217591285706,-.513028621673584,-.3008507788181305,-.8039173483848572,-.5130357146263123,-.3008337914943695,-.8039432168006897,-.5130053162574768,-.9998691082000732,-34242868423461914e-21,-.01618131995201111,-.9998687505722046,8.067581802606583e-7,-.01620098017156124,-.9998687505722046,9641051292419434e-21,-.016203448176383972,-.9998686909675598,-7212162017822266e-21,-.016204625368118286,-.9998686909675598,6.223563104867935e-7,-.016209648922085762,-.9998685121536255,-1.9371509552001953e-7,-.01621153950691223,-.7977283596992493,.5067322254180908,-.326882004737854,-.7977277636528015,.5067290663719177,-.3268887996673584,-.7977234125137329,.5067338943481445,-.32689157128334045,-.7977177500724792,.5067336559295654,-.32690560817718506,-.7977122068405151,.5067541599273682,-.326887309551239,-.8039452433586121,.5130032300949097,-.3008318245410919,-.8039326071739197,.5130090713500977,-.3008555769920349,-.8039237856864929,.5130265951156616,-.30084937810897827,-.8039227724075317,.5130298137664795,-.3008461892604828,-.8039199709892273,.5130324363708496,-.30084940791130066,-.8039199709892273,.5130419135093689,-.30083346366882324,-.8039143681526184,.5130447745323181,-.30084335803985596,-.4861213266849518,.3174731433391571,-.8141847252845764,-.4861072897911072,.3175134062767029,-.8141775131225586,-.4861047863960266,.31748297810554504,-.8141908049583435,-.4861007332801819,.3174685537815094,-.8141988515853882,-.4860859811306,.31749480962753296,-.8141974210739136,-.48608478903770447,.3174983561038971,-.814196765422821,.30044397711753845,.8036642670631409,-.5136703848838806,.30044645071029663,.8036598563194275,-.5136758685112,.3004480004310608,.8036625981330872,-.5136705636978149,.3004538118839264,.8036926984786987,-.5136200785636902,.30045652389526367,.8036901950836182,-.5136222839355469,-.3004720211029053,.8036836981773376,-.5136234760284424,-.30045682191848755,.8036627769470215,-.513664960861206,-.3004477024078369,.8036642670631409,-.5136681795120239,-.30044496059417725,.8036916851997375,-.5136268734931946,-.3004448711872101,.8036707043647766,-.5136595964431763,-.29143548011779785,.8175532221794128,-.4966612160205841,-.2914249300956726,.8175643086433411,-.4966491460800171,-.2914220690727234,.8175652623176575,-.49664899706840515,-.2914113402366638,.8175539374351501,-.4966740012168884,-.2913860082626343,.8175709843635559,-.49666067957878113,-.2913796901702881,.8175732493400574,-.49666085839271545,-2612173557281494e-20,.9997528791427612,-.022229932248592377,-7601454854011536e-21,.9997532367706299,-.02221878245472908,13606622815132141e-22,.9997526407241821,-.02224019542336464,6318092346191406e-21,.9997531771659851,-.022218704223632812,-.5130420923233032,.3008320927619934,.8039203882217407,-.5130420923233032,.3008320927619934,.8039203882217407,-.513036847114563,.30085039138793945,.8039168119430542,-.5130102634429932,.3008587956428528,.8039306998252869,-.48680686950683594,.31705421209335327,.8139384388923645,-.48680058121681213,.31706511974334717,.8139378428459167,-.4867952764034271,.3170567750930786,.8139443397521973,-.48679250478744507,.3170604407787323,.8139445781707764],normalized:!1},uv:{itemSize:2,type:"Float32Array",array:[.01962309330701828,.012889564037322998,.02023136429488659,.10979831218719482,.07965327799320221,.07732349634170532,.07965327799320221,.07732349634170532,.02023136429488659,.10979831218719482,.5619750022888184,.14709901809692383,.02450018748641014,.02645343542098999,.06788178533315659,.04795658588409424,.0796533077955246,.04795646667480469,.02450018748641014,.02645343542098999,.503350019454956,.1835920214653015,.3125010132789612,.3969320058822632,.10002404451370239,.04638880491256714,.0839850902557373,.04795658588409424,.01962309330701828,.008929312229156494,.10002404451370239,.04638880491256714,.018139563500881195,.03942161798477173,.05488619580864906,.04795628786087036,.503491997718811,.058592021465301514,.09820473194122314,.10979831218719482,.05488619580864906,.04795628786087036,.018139563500881195,.03942161798477173,.04933025687932968,.08043122291564941,.04933025687932968,.08043122291564941,.03322688490152359,.0800524353981018,.03322688490152359,.0800524353981018,.0619719997048378,.7201650142669678,.012844499200582504,.020931720733642578,.5630499720573425,.345100998878479,.09606381505727768,.008966565132141113,.011493649333715439,.020151853561401367,.03200281038880348,.0800524353981018,.6875010132789612,.5218279957771301,.05055434629321098,.07732337713241577,.05055434629321098,.07732337713241577,.11814413964748383,.008967041969299316,.0850236713886261,.029828131198883057,.057423245161771774,.008966565132141113,.10158386081457138,.04638880491256714,.057423245161771774,.008966565132141113,.6874989867210388,.5953599810600281,.01827225834131241,.008149445056915283,.019623126834630966,.045423686504364014,.03755871579051018,.047578275203704834,.09387288242578506,.07732349634170532,.24622400104999542,.4335950016975403,.019623126834630966,.045423686504364014,.03755871579051018,.047578275203704834,.0850236713886261,.040868282318115234,.07398355007171631,.008967041969299316,.07532140612602234,.08043128252029419,.18750199675559998,.5220270156860352,.04066653922200203,.04795628786087036,.3125,.021938025951385498,.10997618734836578,.10979831218719482,.02358332648873329,.01918947696685791,.05190323293209076,.046388089656829834,.05190323293209076,.046388089656829834,.05488622561097145,.08043128252029419,.08367279171943665,.023528218269348145,.05488622561097145,.08043128252029419,.3124989867210388,.5957159996032715,.018272243440151215,.013669490814208984,.10554412007331848,.008966803550720215,.019007263705134392,.10979831218719482,.4383139908313751,.39722001552581787,.10253656655550003,.10979831218719482,.0503433421254158,.04638814926147461,.0850236713886261,.024307966232299805,.3124980032444,.22047501802444458,.10131248831748962,.10979825258255005,.10131248831748962,.10979825258255005,.0850236713886261,.022748231887817383,.05366211757063866,.08043128252029419,.1875,.27190500497817993,.10131251811981201,.08043169975280762,.02450021728873253,.04338186979293823,.06294332444667816,.008966565132141113,.1285640001296997,.3085939884185791,.02450021728873253,.04338186979293823,.09387288242578506,.08043169975280762,.09387288242578506,.08043169975280762,.006182555109262466,.02567189931869507,.027670973911881447,.08005237579345703,.312734991312027,.34500598907470703,.09387288242578506,.10979831218719482,.007099363952875137,.04590404033660889,.007099363952875137,.04590404033660889,.059218067675828934,.08043104410171509,.37151700258255005,.3090599775314331,.007099363952875137,.04590404033660889,.10997628420591354,.07732337713241577,.10997628420591354,.07732337713241577,.10253656655550003,.07732349634170532,.10253656655550003,.07732349634170532,.006182555109262466,.020151853561401367,.0625,.14693999290466309,.0625,.2202470302581787,.03322688490152359,.07694470882415771,.03378301486372948,.04638814926147461,.08502364158630371,.013267934322357178,.03378301486372948,.04638814926147461,.02598363533616066,.024411678314208984,.12137900292873383,.1835939884185791,.03378315269947052,.008967041969299316,.10253656655550003,.04795682430267334,.02450018748641014,.030413687229156494,.028895026072859764,.047577083110809326,.04622248187661171,.07732313871383667,.6290850043296814,.1835920214653015,.02450018748641014,.030413687229156494,.02450018748641014,.0239296555519104,.02450018748641014,.0239296555519104,.02450018748641014,.0239296555519104,.035342950373888016,.008967041969299316,.041890617460012436,.07732313871383667,.035342950373888016,.008967041969299316,.4962030053138733,.3085950016975403,.4375010132789612,.27205002307891846,.02333913929760456,.07694411277770996,.035342950373888016,.04638814926147461,.08367279171943665,.012488067150115967,.012844499200582504,.024891972541809082,.06232589855790138,.047956228256225586,.06232589855790138,.047956228256225586,.0883169174194336,.07732337713241577,.06249900162220001,.47056400775909424,.08087734878063202,.10979831218719482,.05190323293209076,.00896763801574707,.024500157684087753,.03689777851104736,.25286900997161865,.5585929751396179,.08087734878063202,.10979831218719482,.02598368003964424,.038939595222473145,.03322688490152359,.047577738761901855,.10997621715068817,.04795706272125244,.02598368003964424,.038939595222473145,.03322688490152359,.047577738761901855,.003621000098064542,.1835939884185791,.07794374972581863,.008966684341430664,.07794374972581863,.008966684341430664,.007533404976129532,.020931720733642578,.10131248831748962,.07732349634170532,.5625010132789612,.5218250155448914,.04933026805520058,.07732349634170532,.07532145082950592,.04795658588409424,.0850236713886261,.028268277645111084,.6875020265579224,.2718750238418579,.008582886308431625,.03737819194793701,.008582886308431625,.03737819194793701,.11658430099487305,.04638892412185669,.11106422543525696,.00896674394607544,.12150800228118896,.3085930347442627,.007099427282810211,.03942000865936279,.007099427282810211,.03942000865936279,.25360798835754395,.4335930347442627,.10002404451370239,.00896674394607544,.07242370396852493,.046388447284698486,.007099427282810211,.03942000865936279,.01857360079884529,.019969403743743896,.0462225005030632,.10979831218719482,.06249900162220001,.5952410101890564,.059218067675828934,.04795658588409424,.059218067675828934,.04795658588409424,.01857360079884529,.018409550189971924,.044998399913311005,.10979831218719482,.4374989867210388,.09534800052642822,.06690356880426407,.008966684341430664,.06690356880426407,.008966684341430664,.6874979734420776,.34531301259994507,.017222747206687927,.01918947696685791,.06846341490745544,.008966624736785889,.057993993163108826,.04795658588409424,.032921500504016876,.10979831218719482,.029636148363351822,.019969403743743896,.02364526502788067,.10979831218719482,.029636148363351822,.019969403743743896,.02364526502788067,.10979831218719482,.01326248049736023,.04464298486709595,.12177500128746033,.6835950016975403,.012804049998521805,.04527390003204346,.0372520349919796,.10979831218719482,.0372520349919796,.10979831218719482,.5033249855041504,.3086329698562622,.03230946138501167,.10979831218719482,.03230946138501167,.10979831218719482,.019623063504695892,.032455623149871826,.12873399257659912,.6835910081863403,.06665770709514618,.10979819297790527,.06354992836713791,.07732325792312622,.06354992836713791,.07732325792312622,.06665770709514618,.10979819297790527,.0031109999399632215,.4335930347442627,.06232583895325661,.077323317527771,.04066653922200203,.08043086528778076,.019623063504695892,.030895769596099854,.019623063504695892,.030895769596099854,.0635499358177185,.08043128252029419,.08367279171943665,.018008112907409668,.0635499358177185,.08043128252029419,.07098956406116486,.04795658588409424,.07098956406116486,.04795658588409424,.4375010132789612,.5215610265731812,.04066656902432442,.0773230791091919,.06665772199630737,.047956645488739014,.06665772199630737,.047956645488739014,.04066656902432442,.0773230791091919,.37138599157333374,.0585939884185791,.0235833041369915,.02519160509109497,.05921806022524834,.10979831218719482,.3133150041103363,.27218103408813477,.024563191458582878,.08005183935165405,.024563191458582878,.08005183935165405,.006182555109262466,.014631807804107666,.1068684309720993,.10979831218719482,.08398514240980148,.07732337713241577,.37139201164245605,.4335950016975403,.08398514240980148,.07732337713241577,.1068684309720993,.10979831218719482,.007099427282810211,.04338020086288452,.007099427282810211,.04338020086288452,.02333918772637844,.047576963901519775,.1056443378329277,.07732349634170532,.3787969946861267,.3085930347442627,.018139638006687164,.02645343542098999,.02333918772637844,.047576963901519775,.0558633916079998,.046388328075408936,.1068684458732605,.07732337713241577,.6207290291786194,.4335950016975403,.1068684458732605,.07732337713241577,.0558633916079998,.046388328075408936,.017222747206687927,.02519160509109497,.037558771669864655,.08005297183990479,.08367282897233963,.04560840129852295,.09698063135147095,.08043169975280762,.5630019903182983,.2720860242843628,.09054373949766159,.008966386318206787,.08831693977117538,.047956764698028564,.12188900262117386,.4335950016975403,.08831693977117538,.047956764698028564,.018139630556106567,.03689777851104736,.4375010132789612,.14693796634674072,.09450394660234451,.008966565132141113,.09450394660234451,.008966565132141113,.05055436119437218,.08043122291564941,.012844499200582504,.01937192678451538,.039303116500377655,.008966505527496338,.09264880418777466,.07732337713241577,.7453330159187317,.4335939884185791,.09264880418777466,.07732337713241577,.039303116500377655,.008966505527496338,.019623126834630966,.043863773345947266,.08087734878063202,.08043140172958374,.012844476848840714,.01385188102722168,.08831700682640076,.08043140172958374,.3125010132789612,.5214719772338867,.1875009983778,.3970370292663574,.08954101800918579,.08043140172958374,.08954101800918579,.08043140172958374,.03755873069167137,.0769452452659607,.011493649333715439,.014631807804107666,.07098963111639023,.08043122291564941,.07098963111639023,.08043122291564941,.10554413497447968,.046388864517211914,.10554413497447968,.046388864517211914,.49645400047302246,.4340590238571167,.025983694940805435,.045423686504364014,.05586344376206398,.008966565132141113,.08520916849374771,.04795658588409424,.08520916849374771,.04795658588409424,.5625010132789612,.39734500646591187,.01962309330701828,.007369518280029297,.011493649333715439,.02567189931869507,.04499842971563339,.04795628786087036,.18750199675559998,.6470130085945129,.06354992836713791,.04795616865158081,.08954101800918579,.07732349634170532,.04622248187661171,.04795628786087036,.08954101800918579,.07732349634170532,.04622248187661171,.04795628786087036,.012844499200582504,.026451826095581055,.6875010132789612,.14722901582717896,.024934161454439163,.01444941759109497,.04638303443789482,.008966565132141113,.11262404918670654,.046388864517211914,.6874989867210388,.09525102376937866,.5042709708213806,.4335930347442627,.1112002432346344,.08043169975280762,.08520916849374771,.07732337713241577,.008582878857851028,.043862223625183105,.008582878857851028,.043862223625183105,.01962309330701828,.03737986087799072,.08898389339447021,.008966386318206787,.01962309330701828,.03737986087799072,.09450394660234451,.04638838768005371,.08898389339447021,.008966386318206787,.4963819980621338,.18359601497650146,.01962309330701828,.03737986087799072,.09606381505727768,.046388328075408936,.6216750144958496,.308555006980896,.09698067605495453,.10979819297790527,.09698067605495453,.10979819297790527,.09606381505727768,.046388328075408936,.01962309330701828,.038939714431762695,.5624989867210388,.46984195709228516,.02493416890501976,.0184096097946167,.1112002432346344,.10979825258255005,.1112002432346344,.10979825258255005,.1068684458732605,.04795706272125244,.008582878857851028,.04542207717895508,.25361400842666626,.0585939884185791,.09264880418777466,.10979819297790527,.10997617989778519,.08043175935745239,.10997617989778519,.08043175935745239,.09264880418777466,.10979819297790527,.08502364158630371,.01170814037322998,.06250099837779999,.5219460129737854,.024563191458582878,.07694411277770996,.03200285881757736,.07694464921951294,.024563191458582878,.07694411277770996,.03200285881757736,.07694464921951294,.4374989867210388,.3451380133628845,.10564440488815308,.04795706272125244,.10564440488815308,.04795706272125244,.041890617460012436,.04795628786087036,.041890617460012436,.04795628786087036,.02493416890501976,.019969403743743896,.3125019967556,.14671200513839722,.0795036107301712,.008966624736785889,.11120033264160156,.07732337713241577,.007533404976129532,.01937192678451538,.02598368003964424,.03737974166870117,.37174901366233826,.18359798192977905,.02598368003964424,.03737974166870117,.05034333094954491,.00896763801574707,.11120033264160156,.04795718193054199,.05034333094954491,.00896763801574707,.11120033264160156,.04795718193054199,.04499838873744011,.08043122291564941,.49654099345207214,.058596014976501465,.07965327799320221,.10979831218719482,.023583341389894485,.038159728050231934,.023583341389894485,.038159728050231934,.023583341389894485,.038159728050231934,.06138351559638977,.04638826847076416,.5624989867210388,.09532797336578369,.05488619580864906,.07732349634170532,.007533375173807144,.009891688823699951,.061383482068777084,.008966565132141113,.621508002281189,.058596014976501465,.07221363484859467,.08043122291564941,.025983694940805435,.043863773345947266,.025983694940805435,.043863773345947266,.02450021728873253,.04590564966201782,.07794374972581863,.04638850688934326,.02450021728873253,.04590564966201782,.6215639710426331,.5585950016975403,.10710396617650986,.046388864517211914,.02450021728873253,.04590564966201782,.025983672589063644,.030895769596099854,.05366221442818642,.10979831218719482,.2464359998703003,.3085939884185791,.02767101861536503,.047577083110809326,.02767101861536503,.047577083110809326,.05366221442818642,.10979831218719482,.025983672589063644,.032455503940582275,.025983672589063644,.032455503940582275,.37213099002838135,.5585950016975403,.05488622561097145,.10979831218719482,.08831696212291718,.10979831218719482,.08831696212291718,.10979831218719482,.025983672589063644,.032455503940582275,.007099442183971405,.03689616918563843,.11262404918670654,.00896674394607544,.6286150217056274,.058592021465301514,.007099442183971405,.03689616918563843,.12366431206464767,.046389102935791016,.6875010132789612,.021937012672424316,.06232582405209541,.08043128252029419,.0850236713886261,.017228126525878906,.12366431206464767,.00896763801574707,.12366431206464767,.00896763801574707,.017222747206687927,.04464375972747803,.06846341490745544,.04638838768005371,.06846341490745544,.04638838768005371,.7464879751205444,.30859601497650146,.07532142847776413,.077323317527771,.07532142847776413,.077323317527771,.0850236713886261,.033788442611694336,.06788180023431778,.08043128252029419,.06788180023431778,.08043128252029419,.09264878183603287,.04795682430267334,.6875,.3975909948348999,.1068684309720993,.08043169975280762,.08367282897233963,.04008835554122925,.07242365181446075,.008967041969299316,.07242365181446075,.008967041969299316,.3124989867210388,.4702550172805786,.057993993163108826,.08043110370635986,.2463259994983673,.18359601497650146,.1056443527340889,.10979831218719482,.006182555109262466,.044642090797424316,.11658430099487305,.008967041969299316,.07654549926519394,.04795658588409424,.07654549926519394,.04795658588409424,.11658430099487305,.008967041969299316,.0625,.2718600034713745,.08367279171943665,.029048264026641846,.012844476848840714,.015411734580993652,.4375010132789612,.02183997631072998,.03633471950888634,.0769452452659607,.03633471950888634,.0769452452659607,.07965333014726639,.08043140172958374,.07965333014726639,.08043140172958374,.018139638006687164,.04590564966201782,.37845900654792786,.058592021465301514,.036334652453660965,.047578275203704834,.06690356880426407,.04638850688934326,.018139638006687164,.04590564966201782,.09698062390089035,.07732349634170532,.18749800324440002,.7201740145683289,.06665777415037155,.08043122291564941,.0850236713886261,.03534823656082153,.1874990016222,.47015100717544556,.09387288242578506,.04795682430267334,.09387288242578506,.04795682430267334,.09820473194122314,.07732337713241577,.09820473194122314,.07732337713241577,.08367279171943665,.03456830978393555,.08954101800918579,.10979831218719482,.09820473194122314,.04795682430267334,.12877599895000458,.4335930347442627,.02450018748641014,.032937586307525635,.012844454497098923,.008331894874572754,.08898389339447021,.04638838768005371,.08398512005805969,.08043140172958374,.4374989867210388,.2202489972114563,.18749800324440002,.5951610207557678,.0850236713886261,.018788039684295654,.07221363484859467,.04795658588409424,.12210442870855331,.00896763801574707,.007099363952875137,.03041207790374756,.4969879984855652,.5585939884185791,.0852091833949089,.10979831218719482,.07098958641290665,.07732349634170532,.007099363952875137,.03041207790374756,.0753214880824089,.10979819297790527,.07221363484859467,.07732337713241577,.07221363484859467,.07732337713241577,.24624399840831757,.5585960149765015,.0753214880824089,.10979819297790527,.008582886308431625,.030893981456756592,.008582886308431625,.030893981456756592,.05799401178956032,.07732337713241577,.05799401178956032,.07732337713241577,.6285120248794556,.30859100818634033,.04933030903339386,.047956645488739014,.04933030903339386,.047956645488739014,.01962307095527649,.024411559104919434,.018139563500881195,.0239296555519104,.05055434629321098,.04795658588409424,.057423245161771774,.046388328075408936,.7465599775314331,.5585950016975403,.02023131214082241,.0475764274597168,.1286740005016327,.1835920214653015,.008582886308431625,.032453835010528564,.07654549926519394,.10979831218719482,.02023131214082241,.0475764274597168,.007099427282810211,.03293585777282715,.007099427282810211,.03293585777282715,.019007263705134392,.0475764274597168,.007099427282810211,.03293585777282715,.04933033511042595,.10979831218719482,.0032250001095235348,.6835929751396179,.061973001807928085,.647022008895874,.01900731585919857,.07694333791732788,.02333913929760456,.08005183935165405,.01900731585919857,.07694333791732788,.007533375173807144,.01385188102722168,.05799407511949539,.10979831218719482,.1874990016222,.22021400928497314,.007533375173807144,.015411734580993652,.02023131214082241,.07694333791732788,.6296669840812683,.4335930347442627,.06788180023431778,.10979831218719482,.04482320323586464,.04638856649398804,.018139563500881195,.032937586307525635,.018139563500881195,.032937586307525635,.018139563500881195,.032937586307525635,.1875009983778,.14697301387786865,.0850236713886261,.03930848836898804,.1056443378329277,.08043169975280762,.1056443378329277,.08043169975280762,.07654549926519394,.08043128252029419,.07654549926519394,.08043128252029419,.0850236713886261,.04638838768005371,.07221363484859467,.10979831218719482,.07221363484859467,.10979831218719482,.09820473194122314,.08043169975280762,.09820473194122314,.08043169975280762,.5625010132789612,.02186000347137451,.044998399913311005,.0773230791091919,.09698063135147095,.04795682430267334,.023583319038152695,.031675636768341064,.044998399913311005,.0773230791091919,.09698063135147095,.04795682430267334,.24626600742340088,.6835960149765015,.023583319038152695,.031675636768341064,.0850236713886261,.044828593730926514,.437734991312027,.46996796131134033,.036334652453660965,.08005297183990479,.036334652453660965,.08005297183990479,.07098956406116486,.10979831218719482,.006182555109262466,.031673967838287354,.05055436119437218,.10979831218719482,.3786180019378662,.1835920214653015,.08398512005805969,.10979831218719482,.08398512005805969,.10979831218719482,.05055436119437218,.10979831218719482,.03930313140153885,.04638850688934326,.04482320323586464,.008966565132141113,.04482320323586464,.008966565132141113,.6875,.4695960283279419,.02358332648873329,.013669490814208984,.04086293280124664,.04638850688934326,.04086293280124664,.04638850688934326,.024934161454439163,.012889564037322998,.0625,.3453270196914673,.11106422543525696,.04638880491256714,.018139638006687164,.04338186979293823,.018139638006687164,.04338186979293823,.07654549926519394,.07732349634170532,.04086294770240784,.008966505527496338,.0034920000471174717,.3085939884185791,.018139638006687164,.04338186979293823,.007533375173807144,.008331894874572754,.6874989867210388,.21995800733566284,.05366221442818642,.07732349634170532,.028895026072859764,.07694411277770996,.05366221442818642,.07732349634170532,.028895026072859764,.07694411277770996,.06294332444667816,.04638826847076416,.1875,.34528303146362305,.027670973911881447,.07694411277770996,.006182555109262466,.009111762046813965,.07398355007171631,.04638838768005371,.12210451066493988,.046389102935791016,.12210451066493988,.046389102935791016,.12875600159168243,.5585910081863403,.07398355007171631,.04638838768005371,.006182555109262466,.03815799951553345,.06250099837779999,.39662301540374756,.0905437171459198,.04638838768005371,.040666673332452774,.10979831218719482,.040666673332452774,.10979831218719482,.0905437171459198,.04638838768005371,.012844454497098923,.009891688823699951,.011493615806102753,.009111762046813965,.4374989867210388,.5956270098686218,.08520913124084473,.08043140172958374,.08520913124084473,.08043140172958374,.04189063608646393,.10979831218719482,.008582908660173416,.03893798589706421,.11814413964748383,.04638892412185669,.6284400224685669,.5585929751396179,.10158386081457138,.00896674394607544,.10158386081457138,.00896674394607544,.11814413964748383,.04638892412185669,.06232590600848198,.10979831218719482,.04638301953673363,.04638856649398804,.04638301953673363,.04638856649398804,.7463849782943726,.058596014976501465,.06232590600848198,.10979831218719482,.01722273975610733,.031675636768341064,.04189063608646393,.08043086528778076,.04189063608646393,.08043086528778076,.0635499358177185,.10979831218719482,.3780120015144348,.5585929751396179,.018139611929655075,.030413687229156494,.018139611929655075,.030413687229156494,.017222747206687927,.038159728050231934,.08954101800918579,.047956764698028564,.7459149956703186,.18359500169754028,.05366213247179985,.04795628786087036,.017222747206687927,.038159728050231934,.023583341389894485,.04464375972747803,.25325098633766174,.18358999490737915,.0795036107301712,.04638838768005371,.10253656655550003,.08043175935745239,.10253656655550003,.08043175935745239,.0795036107301712,.04638838768005371,.08087733387947083,.07732349634170532,.10710396617650986,.008966803550720215,.10710396617650986,.008966803550720215,.5624989867210388,.5953620076179504,.01962309330701828,.014449357986450195,.025983653962612152,.02597147226333618,.025983653962612152,.02597147226333618,.10131251811981201,.04795682430267334,.5034360289573669,.5585929751396179,.08087733387947083,.04795646667480469,.08087733387947083,.04795646667480469,.10131251811981201,.04795682430267334,.37854599952697754,.4331200122833252,.01326248049736023,.04590487480163574,.019313467666506767,.08005118370056152,.03664000332355499,.10979831218719482,.019313467666506767,.08005118370056152,.029636148363351822,.018707633018493652,.25348299741744995,.3081200122833252,.02889440953731537,.019728541374206543,.024257240816950798,.10979831218719482,.02797701396048069,.10979831218719482,.02797701396048069,.10979831218719482,.02889440953731537,.01894855499267578,.028589049354195595,.10979831218719482,.621649980545044,.18359601497650146,.02889440953731537,.01894855499267578,.019925372675061226,.08005118370056152,.561972975730896,.22008800506591797,.02889503724873066,.08005237579345703,.02889503724873066,.08005237579345703,.007533404976129532,.02645176649093628,.06788178533315659,.07732349634170532,.06788178533315659,.07732349634170532,.007533404976129532,.024891972541809082,.06665770709514618,.07732349634170532,.3125,.0952489972114563,.09264882653951645,.08043169975280762,.0036299999337643385,.5585929751396179,.04622241482138634,.08043122291564941,.03200281038880348,.047577738761901855,.024500224739313126,.03942161798477173,.12137000262737274,.5585950016975403,.024563191458582878,.047576963901519775,.059218067675828934,.07732349634170532,.01962307095527649,.025971412658691406],normalized:!1}},index:{type:"Uint16Array",array:[28,234,182,303,269,285,521,391,482,142,593,355,209,84,89,440,512,467,168,146,454,320,118,222,535,280,109,40,32,563,488,479,398,419,273,186,541,74,78,326,69,331,240,435,295,473,26,178,626,53,309,51,436,448,96,97,103,255,422,45,5,618,615,65,508,264,284,376,373,315,160,632,550,126,237,254,61,366,499,344,348,165,408,414,557,201,576,506,431,365,329,95,140,145,406,36,578,572,486,16,302,296,72,59,68,158,163,169,177,179,603,62,594,0,393,48,489,352,350,76,543,346,534,378,197,437,528,417,42,480,477,212,613,173,607,230,223,635,595,102,111,555,432,556,494,507,232,86,289,218,314,121,100,244,30,27,407,252,259,304,55,325,157,147,374,396,11,154,14,270,41,271,279,122,330,129,341,522,281,525,624,82,621,427,421,387,199,447,438,495,260,511,80,313,85,573,552,560,501,426,429,43,410,258,187,389,420,248,424,390,493,445,465,347,540,77,411,131,251,462,474,481,12,565,155,150,283,372,490,217,392,587,71,66,386,402,144,161,453,634,58,363,367,94,597,141,277,238,125,3,600,8,136,319,98,300,498,233,17,538,345,324,202,115,394,548,49,318,220,119,33,456,143,335,56,128,39,225,460,91,336,134,198,567,575,361,537,107,383,166,416,404,562,35,189,123,192,211,174,610,116,101,120,208,397,478,515,559,434,226,321,221,306,311,54,620,612,614,369,257,253,291,554,235,139,586,327,245,524,531,268,216,287,569,520,484,23,513,243,622,204,625,1,604,64,545,379,439,592,263,356,509,181,231,25,184,172,297,242,293,503,276,272,405,526,151,159,337,164,28,298,234,303,227,269,521,247,391,142,598,593,209,608,84,468,464,451,450,444,470,168,384,146,320,117,118,535,581,280,40,461,32,488,463,479,419,505,273,541,360,74,326,585,69,240,514,435,473,472,26,626,206,53,51,547,436,96,137,97,255,430,422,5,10,618,65,602,508,284,570,376,315,628,160,550,191,126,254,130,61,499,18,344,165,338,408,557,441,201,358,106,364,110,502,370,185,195,487,194,577,485,239,583,292,579,21,290,79,584,357,354,265,351,46,250,529,533,381,413,616,609,175,457,458,635,458,230,635,112,207,9,6,596,113,219,400,90,87,308,288,371,549,152,153,561,148,396,215,11,631,135,342,132,332,340,200,443,446,496,349,261,81,627,310,574,193,553,504,418,425,47,415,409,190,483,388,246,44,423,492,50,449,347,343,540,412,339,127,466,469,476,15,38,564,150,527,283,491,399,213,588,75,70,385,530,403,162,171,452,60,73,359,93,105,601,275,580,236,2,590,599,133,630,317,299,19,497,20,582,536,323,52,205,395,156,544,316,633,224,34,459,455,333,67,57,37,266,229,92,328,334,196,377,571,362,542,539,382,170,167,401,149,566,188,274,124,210,475,176,114,104,99,208,88,397,516,442,558,228,307,322,305,286,312,619,83,611,368,428,256,294,433,551,138,353,589,249,518,523,267,13,214,568,282,519,22,471,517,623,7,203,4,617,606,546,375,380,591,63,262,510,605,180,24,31,183,301,29,241,500,108,278,405,532,526,159,629,337]},boundingSphere:{center:[0,0,-762939453125e-17],radius:160.50603975869993}},rotationCombinations:{"1,2":[-58,-18,-148],"1,3":[122,-18,32],"1,4":[-159,30,-69],"1,5":[21,150,-69],"1,6":[21,-30,69],"1,7":[0,90,-90],"1,8":[122,18,-32],"1,9":[-58,126,32],"1,10":[58,54,148],"1,11":[-122,-18,-32],"1,12":[159,30,69],"1,13":[58,54,-32],"1,14":[-58,54,32],"1,15":[90,0,90],"1,16":[-90,0,-90],"1,17":[122,54,32],"1,18":[-122,54,-32],"1,19":[-21,30,69],"1,20":[58,-18,-32],"1,21":[58,126,-32],"1,22":[-58,54,-148],"1,23":[-58,18,-32],"1,24":[0,90,90],"1,25":[-21,30,-111],"1,26":[21,30,111],"1,27":[-21,-150,-69],"1,28":[-58,-18,32],"1,29":[58,18,32],"1,30":[-180,0,0],"2,3":[-21,150,69],"2,4":[-58,-126,-32],"2,5":[122,-54,-32],"2,6":[-58,54,-148],"2,7":[-122,-54,32],"2,8":[0,-180,0],"2,9":[-159,-30,69],"2,10":[-122,-18,-32],"2,11":[58,-18,148],"2,12":[159,-30,-69],"2,13":[58,-162,-32],"2,14":[-58,-54,148],"2,15":[-159,30,-69],"2,16":[21,-30,69],"2,17":[21,-150,69],"2,18":[0,-90,90],"2,19":[-58,-18,-148],"2,20":[58,126,-32],"2,21":[0,-90,-90],"2,22":[-58,-54,-32],"2,23":[-21,-30,111],"2,24":[58,-126,32],"2,25":[-58,-18,32],"2,26":[-90,0,-90],"2,27":[122,18,-32],"2,28":[0,0,-180],"2,29":[58,162,32],"2,30":[-58,-162,32],"3,4":[90,0,-90],"3,5":[90,0,90],"3,6":[-90,0,90],"3,7":[122,54,32],"3,8":[21,30,-69],"3,9":[58,54,148],"3,10":[0,90,90],"3,11":[122,-54,-32],"3,12":[58,18,32],"3,13":[0,90,-90],"3,14":[159,30,69],"3,15":[-21,30,69],"3,16":[159,-30,-69],"3,17":[58,54,-32],"3,18":[122,18,-32],"3,19":[21,150,-69],"3,20":[-58,18,-32],"3,21":[-58,162,-32],"3,22":[-21,150,69],"3,23":[180,0,0],"3,24":[-58,126,32],"3,25":[-159,30,-69],"3,26":[58,126,-32],"3,27":[21,-30,69],"3,28":[-159,-30,69],"3,29":[-58,54,32],"3,30":[58,-18,-32],"4,5":[0,0,180],"4,6":[180,0,0],"4,7":[-58,18,148],"4,8":[-58,-54,-32],"4,9":[-58,-18,-148],"4,10":[-90,0,90],"4,11":[58,18,32],"4,12":[-21,-30,111],"4,13":[-90,0,-90],"4,14":[-58,54,-148],"4,15":[-122,-54,32],"4,16":[58,54,-32],"4,17":[-58,-18,32],"4,18":[-21,30,69],"4,19":[-122,54,-32],"4,20":[21,-150,69],"4,21":[-21,30,-111],"4,22":[-58,54,32],"4,23":[0,90,90],"4,24":[-58,18,-32],"4,25":[58,126,-32],"4,26":[-122,18,32],"4,27":[58,-54,-148],"4,28":[122,54,32],"4,29":[-122,-18,-32],"4,30":[21,-30,69],"5,6":[0,180,0],"5,7":[58,-18,-32],"5,8":[58,54,148],"5,9":[58,18,32],"5,10":[90,0,-90],"5,11":[-58,-18,-148],"5,12":[21,30,-69],"5,13":[90,0,90],"5,14":[58,-54,32],"5,15":[-58,126,32],"5,16":[-58,-54,148],"5,17":[58,18,-148],"5,18":[21,-30,-111],"5,19":[-58,-126,-32],"5,20":[159,30,69],"5,21":[21,-30,69],"5,22":[58,-54,-148],"5,23":[0,-90,-90],"5,24":[58,-18,148],"5,25":[122,-54,-32],"5,26":[-58,-162,32],"5,27":[-58,54,32],"5,28":[58,-126,32],"5,29":[-58,162,-32],"5,30":[-21,30,-111],"6,7":[-58,162,-32],"6,8":[122,-54,-32],"6,9":[-58,-162,32],"6,10":[90,0,90],"6,11":[-122,18,32],"6,12":[-21,-150,-69],"6,13":[90,0,-90],"6,14":[-58,126,32],"6,15":[58,-54,32],"6,16":[-122,54,-32],"6,17":[122,-18,32],"6,18":[159,30,69],"6,19":[58,54,-32],"6,20":[21,-30,-111],"6,21":[-21,150,69],"6,22":[122,54,32],"6,23":[0,90,-90],"6,24":[122,18,-32],"6,25":[58,54,148],"6,26":[58,18,32],"6,27":[58,-126,32],"6,28":[-58,54,32],"6,29":[58,-18,-32],"6,30":[-159,-30,69],"7,8":[-58,54,-148],"7,9":[-21,30,69],"7,10":[21,30,-69],"7,11":[58,-126,32],"7,12":[-58,18,-32],"7,13":[21,30,111],"7,14":[21,-30,69],"7,15":[0,90,-90],"7,16":[0,-90,-90],"7,17":[-21,30,-111],"7,18":[-21,-30,-69],"7,19":[58,-18,148],"7,20":[122,54,32],"7,21":[-21,-30,111],"7,22":[21,-30,-111],"7,23":[58,-54,32],"7,24":[0,0,180],"7,25":[58,-18,-32],"7,26":[58,18,-148],"7,27":[-122,18,32],"7,28":[-58,-126,-32],"7,29":[58,54,148],"7,30":[-90,0,-90],"8,9":[-21,30,-111],"8,10":[-58,18,148],"8,11":[122,18,-32],"8,12":[21,30,111],"8,13":[-58,18,-32],"8,14":[-122,54,-32],"8,15":[-21,-30,111],"8,16":[-21,150,69],"8,17":[-21,30,69],"8,18":[0,90,90],"8,19":[-122,18,32],"8,20":[-58,-54,-32],"8,21":[0,90,-90],"8,22":[58,126,-32],"8,23":[-159,30,-69],"8,24":[-58,54,32],"8,25":[58,162,32],"8,26":[-90,0,90],"8,27":[58,-18,148],"8,28":[180,0,0],"8,29":[-58,-18,32],"8,30":[58,18,32],"9,10":[21,-30,-111],"9,11":[58,162,32],"9,12":[-21,30,-111],"9,13":[21,-30,69],"9,14":[-58,-54,-32],"9,15":[58,18,-148],"9,16":[58,-162,-32],"9,17":[0,0,-180],"9,18":[-58,-18,-148],"9,19":[0,-90,90],"9,20":[90,0,90],"9,21":[-58,-18,32],"9,22":[-58,-54,148],"9,23":[58,-126,32],"9,24":[-21,-30,111],"9,25":[0,-90,-90],"9,26":[58,-54,-148],"9,27":[0,90,-90],"9,28":[21,-150,69],"9,29":[58,-18,148],"9,30":[-58,54,-148],"10,11":[-21,-150,-69],"10,12":[-58,-54,-32],"10,13":[0,0,180],"10,14":[58,-18,148],"10,15":[-58,18,-32],"10,16":[122,-18,32],"10,17":[-21,-30,-69],"10,18":[58,-54,32],"10,19":[58,18,-148],"10,20":[-58,54,-148],"10,21":[58,-54,-148],"10,22":[58,-18,-32],"10,23":[90,0,90],"10,24":[21,-30,-111],"10,25":[58,18,32],"10,26":[21,30,-69],"10,27":[-122,-18,-32],"10,28":[-58,162,-32],"10,29":[-21,30,-111],"10,30":[58,-126,32],"11,12":[-90,0,90],"11,13":[-159,30,-69],"11,14":[0,90,90],"11,15":[-159,-30,69],"11,16":[21,30,-69],"11,17":[-122,18,32],"11,18":[-58,54,32],"11,19":[122,54,32],"11,20":[159,-30,-69],"11,21":[-58,54,-148],"11,22":[0,90,-90],"11,23":[58,54,-32],"11,24":[-122,54,-32],"11,25":[-58,126,32],"11,26":[159,30,69],"11,27":[-58,-54,148],"11,28":[58,18,32],"11,29":[-180,0,0],"11,30":[-58,-18,32],"12,13":[58,54,148],"12,14":[90,0,90],"12,15":[-58,54,32],"12,16":[122,-54,-32],"12,17":[21,30,-69],"12,18":[58,-18,-32],"12,19":[-58,162,-32],"12,20":[-122,54,-32],"12,21":[58,-18,148],"12,22":[90,0,-90],"12,23":[122,-18,32],"12,24":[58,18,-148],"12,25":[122,18,-32],"12,26":[-58,126,32],"12,27":[-58,-18,32],"12,28":[-21,-150,-69],"12,29":[0,90,-90],"12,30":[-21,-30,-69],"13,14":[-58,18,-32],"13,15":[58,-18,148],"13,16":[58,162,32],"13,17":[21,30,111],"13,18":[-58,54,-148],"13,19":[-58,-18,32],"13,20":[58,-54,32],"13,21":[-58,54,32],"13,22":[-58,18,148],"13,23":[-90,0,-90],"13,24":[-21,30,69],"13,25":[-58,-18,-148],"13,26":[-21,-30,111],"13,27":[-58,162,-32],"13,28":[-122,-18,-32],"13,29":[21,-30,69],"13,30":[122,54,32],"14,15":[-58,162,-32],"14,16":[-58,-18,-148],"14,17":[58,54,148],"14,18":[-21,30,-111],"14,19":[21,-30,69],"14,20":[122,-18,32],"14,21":[-21,30,69],"14,22":[0,0,180],"14,23":[-21,-30,-69],"14,24":[21,30,111],"14,25":[21,-30,-111],"14,26":[58,-18,148],"14,27":[21,150,-69],"14,28":[-58,-54,-32],"14,29":[90,0,90],"14,30":[-122,54,-32],"15,16":[180,0,0],"15,17":[58,-18,-32],"15,18":[122,-18,32],"15,19":[-58,126,32],"15,20":[-21,30,-111],"15,21":[-58,-162,32],"15,22":[122,18,-32],"15,23":[159,30,69],"15,24":[90,0,-90],"15,25":[122,54,32],"15,26":[58,54,-32],"15,27":[-58,-54,-32],"15,28":[21,150,-69],"15,29":[21,30,-69],"15,30":[0,-90,-90],"16,17":[-122,-18,-32],"16,18":[-58,-18,32],"16,19":[-58,54,-148],"16,20":[-21,150,69],"16,21":[-58,-18,-148],"16,22":[-58,18,-32],"16,23":[-21,30,69],"16,24":[-90,0,-90],"16,25":[-58,54,32],"16,26":[-122,54,-32],"16,27":[122,-54,-32],"16,28":[21,30,111],"16,29":[-159,30,-69],"16,30":[0,-90,90],"17,18":[58,18,32],"17,19":[0,90,-90],"17,20":[-90,0,-90],"17,21":[58,18,-148],"17,22":[58,54,-32],"17,23":[122,54,32],"17,24":[21,30,-69],"17,25":[0,90,90],"17,26":[-58,54,32],"17,27":[0,-90,90],"17,28":[159,30,69],"17,29":[-58,18,-32],"17,30":[58,-54,32],"18,19":[58,54,148],"18,20":[-159,30,-69],"18,21":[0,0,-180],"18,22":[21,30,-69],"18,23":[58,18,32],"18,24":[-21,30,-111],"18,25":[58,54,-32],"18,26":[0,90,-90],"18,27":[-122,-54,32],"18,28":[90,0,90],"18,29":[-122,54,-32],"18,30":[-58,-54,-32],"19,20":[0,-90,-90],"19,21":[58,54,-32],"19,22":[21,30,111],"19,23":[-21,30,-111],"19,24":[58,18,32],"19,25":[0,0,180],"19,26":[21,-30,69],"19,27":[0,180,0],"19,28":[-58,18,-32],"19,29":[58,-54,32],"19,30":[159,30,69],"20,21":[21,150,-69],"20,22":[58,162,32],"20,23":[-122,-18,-32],"20,24":[58,126,-32],"20,25":[-90,0,-90],"20,26":[-58,18,148],"20,27":[90,0,90],"20,28":[-122,-54,32],"20,29":[-21,30,69],"20,30":[122,18,-32],"21,22":[-21,-30,111],"21,23":[-58,-18,-148],"21,24":[21,-30,69],"21,25":[-58,-54,148],"21,26":[0,-90,90],"21,27":[-58,126,32],"21,28":[-90,0,-90],"21,29":[-58,-126,-32],"21,30":[58,54,148],"22,23":[21,30,111],"22,24":[-21,-30,-69],"22,25":[-21,30,69],"22,26":[-58,18,-32],"22,27":[159,-30,-69],"22,28":[58,54,148],"22,29":[-90,0,-90],"22,30":[-58,-126,-32],"23,24":[-58,54,-148],"23,25":[21,30,-69],"23,26":[58,54,148],"23,27":[-159,-30,69],"23,28":[21,-30,69],"23,29":[122,54,32],"23,30":[-122,-18,-32],"24,25":[-58,18,148],"24,26":[-58,-18,32],"24,27":[-58,-162,32],"24,28":[-122,54,-32],"24,29":[-58,-54,-32],"24,30":[90,0,90],"25,26":[-21,30,-111],"25,27":[-180,0,0],"25,28":[58,-18,148],"25,29":[-58,54,-148],"25,30":[21,-150,69],"26,27":[21,-150,69],"26,28":[0,90,-90],"26,29":[-21,-30,-69],"26,30":[-21,-150,-69],"27,28":[58,-162,-32],"27,29":[-58,126,32],"27,30":[21,-30,-111],"28,29":[122,-18,32],"28,30":[-122,18,32],"29,30":[122,-18,32]}}},d="167",p=1,m=2,g=3,y=0,v=1,x=2,b=100,_=101,S=102,M=200,w=201,E=202,T=203,A=204,C=205,P=206,R=207,I=208,D=209,L=210,N=211,O=212,U=213,B=214,z=0,V=1,k=2,G=0,H=1,W=2,j=3,X=4,q=5,Y=6,K=7,Z="attached",Q=301,J=302,ee=306,te=1e3,ie=1001,ne=1002,re=1003,se=1004,ae=1005,oe=1006,le=1007,ce=1008,he=1009,ue=1010,de=1011,pe=1012,me=1013,fe=1014,ge=1015,ye=1016,ve=1017,xe=1018,be=1020,_e=35902,Se=1021,Me=1022,we=1023,Ee=1024,Te=1025,Ae=1026,Ce=1027,Pe=1028,Re=1029,Ie=1030,De=1031,Le=1033,Ne=33776,Fe=33777,Oe=33778,Ue=33779,Be=35840,ze=35841,Ve=35842,ke=35843,Ge=36196,He=37492,We=37496,je=37808,Xe=37809,qe=37810,Ye=37811,Ke=37812,Ze=37813,Qe=37814,Je=37815,$e=37816,et=37817,tt=37818,it=37819,nt=37820,rt=37821,st=36492,at=36494,ot=36495,lt=36283,ct=36284,ht=36285,ut=36286,dt=2300,pt=2301,mt=2302,ft=2400,gt=2401,yt=2402,vt=2500,xt="",bt="srgb",_t="srgb-linear",St="display-p3",Mt="display-p3-linear",wt="linear",Et="srgb",Tt="rec709",At="p3",Ct=7680,Pt=512,Rt=513,It=514,Dt=515,Lt=516,Nt=517,Ft=518,Ot=519,Ut=35044,Bt="300 es",zt=2e3,Vt=2001;
/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */let kt=class EventDispatcher{addEventListener(t,i){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(i)&&r[t].push(i)}hasEventListener(t,i){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(i)}removeEventListener(t,i){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(i);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const i=this._listeners[t.type];if(void 0!==i){t.target=this;const r=i.slice(0);for(let i=0,a=r.length;i<a;i++)r[i].call(this,t);t.target=null}}};const Gt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ht=1234567;const Wt=Math.PI/180,jt=180/Math.PI;function generateUUID(){const t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(Gt[255&t]+Gt[t>>8&255]+Gt[t>>16&255]+Gt[t>>24&255]+"-"+Gt[255&i]+Gt[i>>8&255]+"-"+Gt[i>>16&15|64]+Gt[i>>24&255]+"-"+Gt[63&r|128]+Gt[r>>8&255]+"-"+Gt[r>>16&255]+Gt[r>>24&255]+Gt[255&a]+Gt[a>>8&255]+Gt[a>>16&255]+Gt[a>>24&255]).toLowerCase()}function clamp(t,i,r){return Math.max(i,Math.min(r,t))}function euclideanModulo(t,i){return(t%i+i)%i}function lerp(t,i,r){return(1-r)*t+r*i}function denormalize(t,i){switch(i.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function normalize(t,i){switch(i.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Xt={DEG2RAD:Wt,RAD2DEG:jt,generateUUID,clamp,euclideanModulo,mapLinear:function mapLinear(t,i,r,a,o){return a+(t-i)*(o-a)/(r-i)},inverseLerp:function inverseLerp(t,i,r){return t!==i?(r-t)/(i-t):0},lerp,damp:function damp(t,i,r,a){return lerp(t,i,1-Math.exp(-r*a))},pingpong:function pingpong(t,i=1){return i-Math.abs(euclideanModulo(t,2*i)-i)},smoothstep:function smoothstep(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*(3-2*t)},smootherstep:function smootherstep(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*t*(t*(6*t-15)+10)},randInt:function randInt(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function randFloat(t,i){return t+Math.random()*(i-t)},randFloatSpread:function randFloatSpread(t){return t*(.5-Math.random())},seededRandom:function seededRandom(t){void 0!==t&&(Ht=t);let i=Ht+=1831565813;return i=Math.imul(i^i>>>15,1|i),i^=i+Math.imul(i^i>>>7,61|i),((i^i>>>14)>>>0)/4294967296},degToRad:function degToRad(t){return t*Wt},radToDeg:function radToDeg(t){return t*jt},isPowerOfTwo:function isPowerOfTwo(t){return!(t&t-1)&&0!==t},ceilPowerOfTwo:function ceilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function floorPowerOfTwo(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function setQuaternionFromProperEuler(t,i,r,a,o){const l=Math.cos,c=Math.sin,h=l(r/2),u=c(r/2),d=l((i+a)/2),p=c((i+a)/2),m=l((i-a)/2),g=c((i-a)/2),y=l((a-i)/2),v=c((a-i)/2);switch(o){case"XYX":t.set(h*p,u*m,u*g,h*d);break;case"YZY":t.set(u*g,h*p,u*m,h*d);break;case"ZXZ":t.set(u*m,u*g,h*p,h*d);break;case"XZX":t.set(h*p,u*v,u*y,h*d);break;case"YXY":t.set(u*y,h*p,u*v,h*d);break;case"ZYZ":t.set(u*v,u*y,h*p,h*d)}},normalize,denormalize};class Vector2{constructor(t=0,i=0){Vector2.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,r=this.y,a=t.elements;return this.x=a[0]*i+a[3]*r+a[6],this.y=a[1]*i+a[4]*r+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const r=this.dot(t)/i;return Math.acos(clamp(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,r=this.y-t.y;return i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const r=Math.cos(i),a=Math.sin(i),o=this.x-t.x,l=this.y-t.y;return this.x=o*r-l*a+t.x,this.y=o*a+l*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(t,i,r,a,o,l,c,h,u){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,i,r,a,o,l,c,h,u)}set(t,i,r,a,o,l,c,h,u){const d=this.elements;return d[0]=t,d[1]=a,d[2]=c,d[3]=i,d[4]=o,d[5]=h,d[6]=r,d[7]=l,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,r=t.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this}extractBasis(t,i,r){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const r=t.elements,a=i.elements,o=this.elements,l=r[0],c=r[3],h=r[6],u=r[1],d=r[4],p=r[7],m=r[2],g=r[5],y=r[8],v=a[0],x=a[3],b=a[6],_=a[1],S=a[4],M=a[7],w=a[2],E=a[5],T=a[8];return o[0]=l*v+c*_+h*w,o[3]=l*x+c*S+h*E,o[6]=l*b+c*M+h*T,o[1]=u*v+d*_+p*w,o[4]=u*x+d*S+p*E,o[7]=u*b+d*M+p*T,o[2]=m*v+g*_+y*w,o[5]=m*x+g*S+y*E,o[8]=m*b+g*M+y*T,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],r=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=t[8];return i*l*d-i*c*u-r*o*d+r*c*h+a*o*u-a*l*h}invert(){const t=this.elements,i=t[0],r=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=t[8],p=d*l-c*u,m=c*h-d*o,g=u*o-l*h,y=i*p+r*m+a*g;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);const v=1/y;return t[0]=p*v,t[1]=(a*u-d*r)*v,t[2]=(c*r-a*l)*v,t[3]=m*v,t[4]=(d*i-a*h)*v,t[5]=(a*o-c*i)*v,t[6]=g*v,t[7]=(r*h-u*i)*v,t[8]=(l*i-r*o)*v,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,r,a,o,l,c){const h=Math.cos(o),u=Math.sin(o);return this.set(r*h,r*u,-r*(h*l+u*c)+l+t,-a*u,a*h,-a*(-u*l+h*c)+c+i,0,0,1),this}scale(t,i){return this.premultiply(qt.makeScale(t,i)),this}rotate(t){return this.premultiply(qt.makeRotation(-t)),this}translate(t,i){return this.premultiply(qt.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),r=Math.sin(t);return this.set(i,-r,0,r,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,r=t.elements;for(let t=0;t<9;t++)if(i[t]!==r[t])return!1;return!0}fromArray(t,i=0){for(let r=0;r<9;r++)this.elements[r]=t[r+i];return this}toArray(t=[],i=0){const r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const qt=new Matrix3;function arrayNeedsUint32(t){for(let i=t.length-1;i>=0;--i)if(t[i]>=65535)return!0;return!1}const Yt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(t,i){return new Yt[t](i)}function createElementNS(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function createCanvasElement(){const t=createElementNS("canvas");return t.style.display="block",t}const Kt={};function warnOnce(t){t in Kt||(Kt[t]=!0)}const Zt=(new Matrix3).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Qt=(new Matrix3).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Jt={[_t]:{transfer:wt,primaries:Tt,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[bt]:{transfer:Et,primaries:Tt,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Mt]:{transfer:wt,primaries:At,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(Qt),fromReference:t=>t.applyMatrix3(Zt)},[St]:{transfer:Et,primaries:At,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(Qt),fromReference:t=>t.applyMatrix3(Zt).convertLinearToSRGB()}},$t=new Set([_t,Mt]),ei={enabled:!0,_workingColorSpace:_t,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!$t.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,i,r){if(!1===this.enabled||i===r||!i||!r)return t;const a=Jt[i].toReference;return(0,Jt[r].fromReference)(a(t))},fromWorkingColorSpace:function(t,i){return this.convert(t,this._workingColorSpace,i)},toWorkingColorSpace:function(t,i){return this.convert(t,i,this._workingColorSpace)},getPrimaries:function(t){return Jt[t].primaries},getTransfer:function(t){return t===xt?wt:Jt[t].transfer},getLuminanceCoefficients:function(t,i=this._workingColorSpace){return t.fromArray(Jt[i].luminanceCoefficients)}};function SRGBToLinear(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function LinearToSRGB(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let ti;class ImageUtils{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{void 0===ti&&(ti=createElementNS("canvas")),ti.width=t.width,ti.height=t.height;const r=ti.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=ti}return i.width>2048||i.height>2048?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=createElementNS("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const a=r.getImageData(0,0,t.width,t.height),o=a.data;for(let t=0;t<o.length;t++)o[t]=255*SRGBToLinear(o[t]/255);return r.putImageData(a,0,0),i}if(t.data){const i=t.data.slice(0);for(let t=0;t<i.length;t++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[t]=Math.floor(255*SRGBToLinear(i[t]/255)):i[t]=SRGBToLinear(i[t]);return{data:i,width:t.width,height:t.height}}return t}}let ii=0;class Source{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ii++}),this.uuid=generateUUID(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.images[this.uuid])return t.images[this.uuid];const r={uuid:this.uuid,url:""},a=this.data;if(null!==a){let t;if(Array.isArray(a)){t=[];for(let i=0,r=a.length;i<r;i++)a[i].isDataTexture?t.push(serializeImage(a[i].image)):t.push(serializeImage(a[i]))}else t=serializeImage(a);r.url=t}return i||(t.images[this.uuid]=r),r}}function serializeImage(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ImageUtils.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let ni=0;class Texture extends kt{constructor(t=Texture.DEFAULT_IMAGE,i=Texture.DEFAULT_MAPPING,r=1001,a=1001,o=1006,l=1008,c=we,h=he,u=Texture.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ni++}),this.uuid=generateUUID(),this.name="",this.source=new Source(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=a,this.magFilter=o,this.minFilter=l,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=h,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case te:t.x=t.x-Math.floor(t.x);break;case ie:t.x=t.x<0?0:1;break;case ne:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case te:t.y=t.y-Math.floor(t.y);break;case ie:t.y=t.y<0?0:1;break;case ne:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=300,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(t=0,i=0,r=0,a=1){Vector4.prototype.isVector4=!0,this.x=t,this.y=i,this.z=r,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,r,a){return this.x=t,this.y=i,this.z=r,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,r=this.y,a=this.z,o=this.w,l=t.elements;return this.x=l[0]*i+l[4]*r+l[8]*a+l[12]*o,this.y=l[1]*i+l[5]*r+l[9]*a+l[13]*o,this.z=l[2]*i+l[6]*r+l[10]*a+l[14]*o,this.w=l[3]*i+l[7]*r+l[11]*a+l[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,r,a,o;const l=.01,c=.1,h=t.elements,u=h[0],d=h[4],p=h[8],m=h[1],g=h[5],y=h[9],v=h[2],x=h[6],b=h[10];if(Math.abs(d-m)<l&&Math.abs(p-v)<l&&Math.abs(y-x)<l){if(Math.abs(d+m)<c&&Math.abs(p+v)<c&&Math.abs(y+x)<c&&Math.abs(u+g+b-3)<c)return this.set(1,0,0,0),this;i=Math.PI;const t=(u+1)/2,h=(g+1)/2,_=(b+1)/2,S=(d+m)/4,M=(p+v)/4,w=(y+x)/4;return t>h&&t>_?t<l?(r=0,a=.707106781,o=.707106781):(r=Math.sqrt(t),a=S/r,o=M/r):h>_?h<l?(r=.707106781,a=0,o=.707106781):(a=Math.sqrt(h),r=S/a,o=w/a):_<l?(r=.707106781,a=.707106781,o=0):(o=Math.sqrt(_),r=M/o,a=w/o),this.set(r,a,o,i),this}let _=Math.sqrt((x-y)*(x-y)+(p-v)*(p-v)+(m-d)*(m-d));return Math.abs(_)<.001&&(_=1),this.x=(x-y)/_,this.y=(p-v)/_,this.z=(m-d)/_,this.w=Math.acos((u+g+b-1)/2),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this.w=t.w+(i.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends kt{constructor(t=1,i=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new Vector4(0,0,t,i),this.scissorTest=!1,this.viewport=new Vector4(0,0,t,i);const a={width:t,height:i,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oe,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new Texture(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const l=r.count;for(let t=0;t<l;t++)this.textures[t]=o.clone(),this.textures[t].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,i,r=1){if(this.width!==t||this.height!==i||this.depth!==r){this.width=t,this.height=i,this.depth=r;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=t,this.textures[a].image.height=i,this.textures[a].image.depth=r;this.dispose()}this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const i=Object.assign({},t.texture.image);return this.texture.source=new Source(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(t=1,i=1,r={}){super(t,i,r),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(t=null,i=1,r=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:r,depth:a},this.magFilter=re,this.minFilter=re,this.wrapR=ie,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(t=null,i=1,r=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:r,depth:a},this.magFilter=re,this.minFilter=re,this.wrapR=ie,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let ri=class Quaternion{constructor(t=0,i=0,r=0,a=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=a}static slerpFlat(t,i,r,a,o,l,c){let h=r[a+0],u=r[a+1],d=r[a+2],p=r[a+3];const m=o[l+0],g=o[l+1],y=o[l+2],v=o[l+3];if(0===c)return t[i+0]=h,t[i+1]=u,t[i+2]=d,void(t[i+3]=p);if(1===c)return t[i+0]=m,t[i+1]=g,t[i+2]=y,void(t[i+3]=v);if(p!==v||h!==m||u!==g||d!==y){let t=1-c;const i=h*m+u*g+d*y+p*v,r=i>=0?1:-1,a=1-i*i;if(a>Number.EPSILON){const o=Math.sqrt(a),l=Math.atan2(o,i*r);t=Math.sin(t*l)/o,c=Math.sin(c*l)/o}const o=c*r;if(h=h*t+m*o,u=u*t+g*o,d=d*t+y*o,p=p*t+v*o,t===1-c){const t=1/Math.sqrt(h*h+u*u+d*d+p*p);h*=t,u*=t,d*=t,p*=t}}t[i]=h,t[i+1]=u,t[i+2]=d,t[i+3]=p}static multiplyQuaternionsFlat(t,i,r,a,o,l){const c=r[a],h=r[a+1],u=r[a+2],d=r[a+3],p=o[l],m=o[l+1],g=o[l+2],y=o[l+3];return t[i]=c*y+d*p+h*g-u*m,t[i+1]=h*y+d*m+u*p-c*g,t[i+2]=u*y+d*g+c*m-h*p,t[i+3]=d*y-c*p-h*m-u*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,r,a){return this._x=t,this._y=i,this._z=r,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const r=t._x,a=t._y,o=t._z,l=t._order,c=Math.cos,h=Math.sin,u=c(r/2),d=c(a/2),p=c(o/2),m=h(r/2),g=h(a/2),y=h(o/2);switch(l){case"XYZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"YXZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"ZXY":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"ZYX":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"YZX":this._x=m*d*p+u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p-m*g*y;break;case"XZY":this._x=m*d*p-u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p+m*g*y}return!0===i&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const r=i/2,a=Math.sin(r);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,r=i[0],a=i[4],o=i[8],l=i[1],c=i[5],h=i[9],u=i[2],d=i[6],p=i[10],m=r+c+p;if(m>0){const t=.5/Math.sqrt(m+1);this._w=.25/t,this._x=(d-h)*t,this._y=(o-u)*t,this._z=(l-a)*t}else if(r>c&&r>p){const t=2*Math.sqrt(1+r-c-p);this._w=(d-h)/t,this._x=.25*t,this._y=(a+l)/t,this._z=(o+u)/t}else if(c>p){const t=2*Math.sqrt(1+c-r-p);this._w=(o-u)/t,this._x=(a+l)/t,this._y=.25*t,this._z=(h+d)/t}else{const t=2*Math.sqrt(1+p-r-c);this._w=(l-a)/t,this._x=(o+u)/t,this._y=(h+d)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(clamp(this.dot(t),-1,1)))}rotateTowards(t,i){const r=this.angleTo(t);if(0===r)return this;const a=Math.min(1,i/r);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const r=t._x,a=t._y,o=t._z,l=t._w,c=i._x,h=i._y,u=i._z,d=i._w;return this._x=r*d+l*c+a*u-o*h,this._y=a*d+l*h+o*c-r*u,this._z=o*d+l*u+r*h-a*c,this._w=l*d-r*c-a*h-o*u,this._onChangeCallback(),this}slerp(t,i){if(0===i)return this;if(1===i)return this.copy(t);const r=this._x,a=this._y,o=this._z,l=this._w;let c=l*t._w+r*t._x+a*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=l,this._x=r,this._y=a,this._z=o,this;const h=1-c*c;if(h<=Number.EPSILON){const t=1-i;return this._w=t*l+i*this._w,this._x=t*r+i*this._x,this._y=t*a+i*this._y,this._z=t*o+i*this._z,this.normalize(),this}const u=Math.sqrt(h),d=Math.atan2(u,c),p=Math.sin((1-i)*d)/u,m=Math.sin(i*d)/u;return this._w=l*p+this._w*m,this._x=r*p+this._x*m,this._y=a*p+this._y*m,this._z=o*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,i,r){return this.copy(t).slerp(i,r)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),r=Math.random(),a=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(a*Math.sin(t),a*Math.cos(t),o*Math.sin(i),o*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class Vector3{constructor(t=0,i=0,r=0){Vector3.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}set(t,i,r){return void 0===r&&(r=this.z),this.x=t,this.y=i,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(ai.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(ai.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*i+o[3]*r+o[6]*a,this.y=o[1]*i+o[4]*r+o[7]*a,this.z=o[2]*i+o[5]*r+o[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,r=this.y,a=this.z,o=t.elements,l=1/(o[3]*i+o[7]*r+o[11]*a+o[15]);return this.x=(o[0]*i+o[4]*r+o[8]*a+o[12])*l,this.y=(o[1]*i+o[5]*r+o[9]*a+o[13])*l,this.z=(o[2]*i+o[6]*r+o[10]*a+o[14])*l,this}applyQuaternion(t){const i=this.x,r=this.y,a=this.z,o=t.x,l=t.y,c=t.z,h=t.w,u=2*(l*a-c*r),d=2*(c*i-o*a),p=2*(o*r-l*i);return this.x=i+h*u+l*p-c*d,this.y=r+h*d+c*u-o*p,this.z=a+h*p+o*d-l*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*i+o[4]*r+o[8]*a,this.y=o[1]*i+o[5]*r+o[9]*a,this.z=o[2]*i+o[6]*r+o[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const r=t.x,a=t.y,o=t.z,l=i.x,c=i.y,h=i.z;return this.x=a*h-o*c,this.y=o*l-r*h,this.z=r*c-a*l,this}projectOnVector(t){const i=t.lengthSq();if(0===i)return this.set(0,0,0);const r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return si.copy(this).projectOnVector(t),this.sub(si)}reflect(t){return this.sub(si.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const r=this.dot(t)/i;return Math.acos(clamp(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,r=this.y-t.y,a=this.z-t.z;return i*i+r*r+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,r){const a=Math.sin(i)*t;return this.x=a*Math.sin(r),this.y=Math.cos(i)*t,this.z=a*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=a,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=2*Math.random()-1,r=Math.sqrt(1-i*i);return this.x=r*Math.cos(t),this.y=i,this.z=r*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const si=new Vector3,ai=new ri;class Box3{constructor(t=new Vector3(1/0,1/0,1/0),i=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){this.makeEmpty();for(let i=0,r=t.length;i<r;i+=3)this.expandByPoint(li.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,r=t.count;i<r;i++)this.expandByPoint(li.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,r=t.length;i<r;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const r=li.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(void 0!==r){const a=r.getAttribute("position");if(!0===i&&void 0!==a&&!0!==t.isInstancedMesh)for(let i=0,r=a.count;i<r;i++)!0===t.isMesh?t.getVertexPosition(i,li):li.fromBufferAttribute(a,i),li.applyMatrix4(t.matrixWorld),this.expandByPoint(li);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),ci.copy(t.boundingBox)):(null===r.boundingBox&&r.computeBoundingBox(),ci.copy(r.boundingBox)),ci.applyMatrix4(t.matrixWorld),this.union(ci)}const a=t.children;for(let t=0,r=a.length;t<r;t++)this.expandByObject(a[t],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,li),li.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,r;return t.normal.x>0?(i=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),i<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(yi),vi.subVectors(this.max,yi),hi.subVectors(t.a,yi),di.subVectors(t.b,yi),pi.subVectors(t.c,yi),mi.subVectors(di,hi),fi.subVectors(pi,di),gi.subVectors(hi,pi);let i=[0,-mi.z,mi.y,0,-fi.z,fi.y,0,-gi.z,gi.y,mi.z,0,-mi.x,fi.z,0,-fi.x,gi.z,0,-gi.x,-mi.y,mi.x,0,-fi.y,fi.x,0,-gi.y,gi.x,0];return!!satForAxes(i,hi,di,pi,vi)&&(i=[1,0,0,0,1,0,0,0,1],!!satForAxes(i,hi,di,pi,vi)&&(xi.crossVectors(mi,fi),i=[xi.x,xi.y,xi.z],satForAxes(i,hi,di,pi,vi)))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,li).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(li).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(oi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),oi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),oi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),oi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),oi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),oi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),oi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),oi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(oi)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const oi=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],li=new Vector3,ci=new Box3,hi=new Vector3,di=new Vector3,pi=new Vector3,mi=new Vector3,fi=new Vector3,gi=new Vector3,yi=new Vector3,vi=new Vector3,xi=new Vector3,bi=new Vector3;function satForAxes(t,i,r,a,o){for(let l=0,c=t.length-3;l<=c;l+=3){bi.fromArray(t,l);const c=o.x*Math.abs(bi.x)+o.y*Math.abs(bi.y)+o.z*Math.abs(bi.z),h=i.dot(bi),u=r.dot(bi),d=a.dot(bi);if(Math.max(-Math.max(h,u,d),Math.min(h,u,d))>c)return!1}return!0}const _i=new Box3,Si=new Vector3,Mi=new Vector3;class Sphere{constructor(t=new Vector3,i=-1){this.isSphere=!0,this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const r=this.center;void 0!==i?r.copy(i):_i.setFromPoints(t).getCenter(r);let a=0;for(let i=0,o=t.length;i<o;i++)a=Math.max(a,r.distanceToSquared(t[i]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const r=this.center.distanceToSquared(t);return i.copy(t),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Si.subVectors(t,this.center);const i=Si.lengthSq();if(i>this.radius*this.radius){const t=Math.sqrt(i),r=.5*(t-this.radius);this.center.addScaledVector(Si,r/t),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Mi.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Si.copy(t.center).add(Mi)),this.expandByPoint(Si.copy(t.center).sub(Mi))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const wi=new Vector3,Ei=new Vector3,Ti=new Vector3,Ai=new Vector3,Ci=new Vector3,Pi=new Vector3,Ri=new Vector3;class Ray{constructor(t=new Vector3,i=new Vector3(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,wi)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=wi.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(wi.copy(this.origin).addScaledVector(this.direction,i),wi.distanceToSquared(t))}distanceSqToSegment(t,i,r,a){Ei.copy(t).add(i).multiplyScalar(.5),Ti.copy(i).sub(t).normalize(),Ai.copy(this.origin).sub(Ei);const o=.5*t.distanceTo(i),l=-this.direction.dot(Ti),c=Ai.dot(this.direction),h=-Ai.dot(Ti),u=Ai.lengthSq(),d=Math.abs(1-l*l);let p,m,g,y;if(d>0)if(p=l*h-c,m=l*c-h,y=o*d,p>=0)if(m>=-y)if(m<=y){const t=1/d;p*=t,m*=t,g=p*(p+l*m+2*c)+m*(l*p+m+2*h)+u}else m=o,p=Math.max(0,-(l*m+c)),g=-p*p+m*(m+2*h)+u;else m=-o,p=Math.max(0,-(l*m+c)),g=-p*p+m*(m+2*h)+u;else m<=-y?(p=Math.max(0,-(-l*o+c)),m=p>0?-o:Math.min(Math.max(-o,-h),o),g=-p*p+m*(m+2*h)+u):m<=y?(p=0,m=Math.min(Math.max(-o,-h),o),g=m*(m+2*h)+u):(p=Math.max(0,-(l*o+c)),m=p>0?o:Math.min(Math.max(-o,-h),o),g=-p*p+m*(m+2*h)+u);else m=l>0?-o:o,p=Math.max(0,-(l*m+c)),g=-p*p+m*(m+2*h)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,p),a&&a.copy(Ei).addScaledVector(Ti,m),g}intersectSphere(t,i){wi.subVectors(t.center,this.origin);const r=wi.dot(this.direction),a=wi.dot(wi)-r*r,o=t.radius*t.radius;if(a>o)return null;const l=Math.sqrt(o-a),c=r-l,h=r+l;return h<0?null:c<0?this.at(h,i):this.at(c,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(0===i)return 0===t.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/i;return r>=0?r:null}intersectPlane(t,i){const r=this.distanceToPlane(t);return null===r?null:this.at(r,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);if(0===i)return!0;return t.normal.dot(this.direction)*i<0}intersectBox(t,i){let r,a,o,l,c,h;const u=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return u>=0?(r=(t.min.x-m.x)*u,a=(t.max.x-m.x)*u):(r=(t.max.x-m.x)*u,a=(t.min.x-m.x)*u),d>=0?(o=(t.min.y-m.y)*d,l=(t.max.y-m.y)*d):(o=(t.max.y-m.y)*d,l=(t.min.y-m.y)*d),r>l||o>a?null:((o>r||isNaN(r))&&(r=o),(l<a||isNaN(a))&&(a=l),p>=0?(c=(t.min.z-m.z)*p,h=(t.max.z-m.z)*p):(c=(t.max.z-m.z)*p,h=(t.min.z-m.z)*p),r>h||c>a?null:((c>r||r!=r)&&(r=c),(h<a||a!=a)&&(a=h),a<0?null:this.at(r>=0?r:a,i)))}intersectsBox(t){return null!==this.intersectBox(t,wi)}intersectTriangle(t,i,r,a,o){Ci.subVectors(i,t),Pi.subVectors(r,t),Ri.crossVectors(Ci,Pi);let l,c=this.direction.dot(Ri);if(c>0){if(a)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}Ai.subVectors(this.origin,t);const h=l*this.direction.dot(Pi.crossVectors(Ai,Pi));if(h<0)return null;const u=l*this.direction.dot(Ci.cross(Ai));if(u<0)return null;if(h+u>c)return null;const d=-l*Ai.dot(Ri);return d<0?null:this.at(d/c,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(t,i,r,a,o,l,c,h,u,d,p,m,g,y,v,x){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,i,r,a,o,l,c,h,u,d,p,m,g,y,v,x)}set(t,i,r,a,o,l,c,h,u,d,p,m,g,y,v,x){const b=this.elements;return b[0]=t,b[4]=i,b[8]=r,b[12]=a,b[1]=o,b[5]=l,b[9]=c,b[13]=h,b[2]=u,b[6]=d,b[10]=p,b[14]=m,b[3]=g,b[7]=y,b[11]=v,b[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(t){const i=this.elements,r=t.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this}copyPosition(t){const i=this.elements,r=t.elements;return i[12]=r[12],i[13]=r[13],i[14]=r[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,r){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,i,r){return this.set(t.x,i.x,r.x,0,t.y,i.y,r.y,0,t.z,i.z,r.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,r=t.elements,a=1/Ii.setFromMatrixColumn(t,0).length(),o=1/Ii.setFromMatrixColumn(t,1).length(),l=1/Ii.setFromMatrixColumn(t,2).length();return i[0]=r[0]*a,i[1]=r[1]*a,i[2]=r[2]*a,i[3]=0,i[4]=r[4]*o,i[5]=r[5]*o,i[6]=r[6]*o,i[7]=0,i[8]=r[8]*l,i[9]=r[9]*l,i[10]=r[10]*l,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,r=t.x,a=t.y,o=t.z,l=Math.cos(r),c=Math.sin(r),h=Math.cos(a),u=Math.sin(a),d=Math.cos(o),p=Math.sin(o);if("XYZ"===t.order){const t=l*d,r=l*p,a=c*d,o=c*p;i[0]=h*d,i[4]=-h*p,i[8]=u,i[1]=r+a*u,i[5]=t-o*u,i[9]=-c*h,i[2]=o-t*u,i[6]=a+r*u,i[10]=l*h}else if("YXZ"===t.order){const t=h*d,r=h*p,a=u*d,o=u*p;i[0]=t+o*c,i[4]=a*c-r,i[8]=l*u,i[1]=l*p,i[5]=l*d,i[9]=-c,i[2]=r*c-a,i[6]=o+t*c,i[10]=l*h}else if("ZXY"===t.order){const t=h*d,r=h*p,a=u*d,o=u*p;i[0]=t-o*c,i[4]=-l*p,i[8]=a+r*c,i[1]=r+a*c,i[5]=l*d,i[9]=o-t*c,i[2]=-l*u,i[6]=c,i[10]=l*h}else if("ZYX"===t.order){const t=l*d,r=l*p,a=c*d,o=c*p;i[0]=h*d,i[4]=a*u-r,i[8]=t*u+o,i[1]=h*p,i[5]=o*u+t,i[9]=r*u-a,i[2]=-u,i[6]=c*h,i[10]=l*h}else if("YZX"===t.order){const t=l*h,r=l*u,a=c*h,o=c*u;i[0]=h*d,i[4]=o-t*p,i[8]=a*p+r,i[1]=p,i[5]=l*d,i[9]=-c*d,i[2]=-u*d,i[6]=r*p+a,i[10]=t-o*p}else if("XZY"===t.order){const t=l*h,r=l*u,a=c*h,o=c*u;i[0]=h*d,i[4]=-p,i[8]=u*d,i[1]=t*p+o,i[5]=l*d,i[9]=r*p-a,i[2]=a*p-r,i[6]=c*d,i[10]=o*p+t}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Li,t,Ni)}lookAt(t,i,r){const a=this.elements;return Ui.subVectors(t,i),0===Ui.lengthSq()&&(Ui.z=1),Ui.normalize(),Fi.crossVectors(r,Ui),0===Fi.lengthSq()&&(1===Math.abs(r.z)?Ui.x+=1e-4:Ui.z+=1e-4,Ui.normalize(),Fi.crossVectors(r,Ui)),Fi.normalize(),Oi.crossVectors(Ui,Fi),a[0]=Fi.x,a[4]=Oi.x,a[8]=Ui.x,a[1]=Fi.y,a[5]=Oi.y,a[9]=Ui.y,a[2]=Fi.z,a[6]=Oi.z,a[10]=Ui.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const r=t.elements,a=i.elements,o=this.elements,l=r[0],c=r[4],h=r[8],u=r[12],d=r[1],p=r[5],m=r[9],g=r[13],y=r[2],v=r[6],x=r[10],b=r[14],_=r[3],S=r[7],M=r[11],w=r[15],E=a[0],T=a[4],A=a[8],C=a[12],P=a[1],R=a[5],I=a[9],D=a[13],L=a[2],N=a[6],O=a[10],U=a[14],B=a[3],z=a[7],V=a[11],k=a[15];return o[0]=l*E+c*P+h*L+u*B,o[4]=l*T+c*R+h*N+u*z,o[8]=l*A+c*I+h*O+u*V,o[12]=l*C+c*D+h*U+u*k,o[1]=d*E+p*P+m*L+g*B,o[5]=d*T+p*R+m*N+g*z,o[9]=d*A+p*I+m*O+g*V,o[13]=d*C+p*D+m*U+g*k,o[2]=y*E+v*P+x*L+b*B,o[6]=y*T+v*R+x*N+b*z,o[10]=y*A+v*I+x*O+b*V,o[14]=y*C+v*D+x*U+b*k,o[3]=_*E+S*P+M*L+w*B,o[7]=_*T+S*R+M*N+w*z,o[11]=_*A+S*I+M*O+w*V,o[15]=_*C+S*D+M*U+w*k,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],r=t[4],a=t[8],o=t[12],l=t[1],c=t[5],h=t[9],u=t[13],d=t[2],p=t[6],m=t[10],g=t[14];return t[3]*(+o*h*p-a*u*p-o*c*m+r*u*m+a*c*g-r*h*g)+t[7]*(+i*h*g-i*u*m+o*l*m-a*l*g+a*u*d-o*h*d)+t[11]*(+i*u*p-i*c*g-o*l*p+r*l*g+o*c*d-r*u*d)+t[15]*(-a*c*d-i*h*p+i*c*m+a*l*p-r*l*m+r*h*d)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,r){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=i,a[14]=r),this}invert(){const t=this.elements,i=t[0],r=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=t[8],p=t[9],m=t[10],g=t[11],y=t[12],v=t[13],x=t[14],b=t[15],_=p*x*u-v*m*u+v*h*g-c*x*g-p*h*b+c*m*b,S=y*m*u-d*x*u-y*h*g+l*x*g+d*h*b-l*m*b,M=d*v*u-y*p*u+y*c*g-l*v*g-d*c*b+l*p*b,w=y*p*h-d*v*h-y*c*m+l*v*m+d*c*x-l*p*x,E=i*_+r*S+a*M+o*w;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/E;return t[0]=_*T,t[1]=(v*m*o-p*x*o-v*a*g+r*x*g+p*a*b-r*m*b)*T,t[2]=(c*x*o-v*h*o+v*a*u-r*x*u-c*a*b+r*h*b)*T,t[3]=(p*h*o-c*m*o-p*a*u+r*m*u+c*a*g-r*h*g)*T,t[4]=S*T,t[5]=(d*x*o-y*m*o+y*a*g-i*x*g-d*a*b+i*m*b)*T,t[6]=(y*h*o-l*x*o-y*a*u+i*x*u+l*a*b-i*h*b)*T,t[7]=(l*m*o-d*h*o+d*a*u-i*m*u-l*a*g+i*h*g)*T,t[8]=M*T,t[9]=(y*p*o-d*v*o-y*r*g+i*v*g+d*r*b-i*p*b)*T,t[10]=(l*v*o-y*c*o+y*r*u-i*v*u-l*r*b+i*c*b)*T,t[11]=(d*c*o-l*p*o-d*r*u+i*p*u+l*r*g-i*c*g)*T,t[12]=w*T,t[13]=(d*v*a-y*p*a+y*r*m-i*v*m-d*r*x+i*p*x)*T,t[14]=(y*c*a-l*v*a-y*r*h+i*v*h+l*r*x-i*c*x)*T,t[15]=(l*p*a-d*c*a+d*r*h-i*p*h-l*r*m+i*c*m)*T,this}scale(t){const i=this.elements,r=t.x,a=t.y,o=t.z;return i[0]*=r,i[4]*=a,i[8]*=o,i[1]*=r,i[5]*=a,i[9]*=o,i[2]*=r,i[6]*=a,i[10]*=o,i[3]*=r,i[7]*=a,i[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,r,a))}makeTranslation(t,i,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,r,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,i,-r,0,0,r,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),r=Math.sin(t);return this.set(i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),r=Math.sin(t);return this.set(i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const r=Math.cos(i),a=Math.sin(i),o=1-r,l=t.x,c=t.y,h=t.z,u=o*l,d=o*c;return this.set(u*l+r,u*c-a*h,u*h+a*c,0,u*c+a*h,d*c+r,d*h-a*l,0,u*h-a*c,d*h+a*l,o*h*h+r,0,0,0,0,1),this}makeScale(t,i,r){return this.set(t,0,0,0,0,i,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,i,r,a,o,l){return this.set(1,r,o,0,t,1,l,0,i,a,1,0,0,0,0,1),this}compose(t,i,r){const a=this.elements,o=i._x,l=i._y,c=i._z,h=i._w,u=o+o,d=l+l,p=c+c,m=o*u,g=o*d,y=o*p,v=l*d,x=l*p,b=c*p,_=h*u,S=h*d,M=h*p,w=r.x,E=r.y,T=r.z;return a[0]=(1-(v+b))*w,a[1]=(g+M)*w,a[2]=(y-S)*w,a[3]=0,a[4]=(g-M)*E,a[5]=(1-(m+b))*E,a[6]=(x+_)*E,a[7]=0,a[8]=(y+S)*T,a[9]=(x-_)*T,a[10]=(1-(m+v))*T,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,i,r){const a=this.elements;let o=Ii.set(a[0],a[1],a[2]).length();const l=Ii.set(a[4],a[5],a[6]).length(),c=Ii.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),t.x=a[12],t.y=a[13],t.z=a[14],Di.copy(this);const h=1/o,u=1/l,d=1/c;return Di.elements[0]*=h,Di.elements[1]*=h,Di.elements[2]*=h,Di.elements[4]*=u,Di.elements[5]*=u,Di.elements[6]*=u,Di.elements[8]*=d,Di.elements[9]*=d,Di.elements[10]*=d,i.setFromRotationMatrix(Di),r.x=o,r.y=l,r.z=c,this}makePerspective(t,i,r,a,o,l,c=2e3){const h=this.elements,u=2*o/(i-t),d=2*o/(r-a),p=(i+t)/(i-t),m=(r+a)/(r-a);let g,y;if(c===zt)g=-(l+o)/(l-o),y=-2*l*o/(l-o);else{if(c!==Vt)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);g=-l/(l-o),y=-l*o/(l-o)}return h[0]=u,h[4]=0,h[8]=p,h[12]=0,h[1]=0,h[5]=d,h[9]=m,h[13]=0,h[2]=0,h[6]=0,h[10]=g,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,i,r,a,o,l,c=2e3){const h=this.elements,u=1/(i-t),d=1/(r-a),p=1/(l-o),m=(i+t)*u,g=(r+a)*d;let y,v;if(c===zt)y=(l+o)*p,v=-2*p;else{if(c!==Vt)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);y=o*p,v=-1*p}return h[0]=2*u,h[4]=0,h[8]=0,h[12]=-m,h[1]=0,h[5]=2*d,h[9]=0,h[13]=-g,h[2]=0,h[6]=0,h[10]=v,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const i=this.elements,r=t.elements;for(let t=0;t<16;t++)if(i[t]!==r[t])return!1;return!0}fromArray(t,i=0){for(let r=0;r<16;r++)this.elements[r]=t[r+i];return this}toArray(t=[],i=0){const r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t[i+9]=r[9],t[i+10]=r[10],t[i+11]=r[11],t[i+12]=r[12],t[i+13]=r[13],t[i+14]=r[14],t[i+15]=r[15],t}}const Ii=new Vector3,Di=new Matrix4,Li=new Vector3(0,0,0),Ni=new Vector3(1,1,1),Fi=new Vector3,Oi=new Vector3,Ui=new Vector3,Bi=new Matrix4,zi=new ri;class Euler{constructor(t=0,i=0,r=0,a=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,a=this._order){return this._x=t,this._y=i,this._z=r,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const a=t.elements,o=a[0],l=a[4],c=a[8],h=a[1],u=a[5],d=a[9],p=a[2],m=a[6],g=a[10];switch(i){case"XYZ":this._y=Math.asin(clamp(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,g),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-l,u)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-clamp(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,u));break;case"YZX":this._z=Math.asin(clamp(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,g));break;case"XZY":this._z=Math.asin(-clamp(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,g),this._y=0)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return Bi.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Bi,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return zi.setFromEuler(this),this.setFromQuaternion(zi,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Vi=0;const ki=new Vector3,Gi=new ri,Hi=new Matrix4,Wi=new Vector3,ji=new Vector3,Xi=new Vector3,qi=new ri,Yi=new Vector3(1,0,0),Ki=new Vector3(0,1,0),Zi=new Vector3(0,0,1),Qi={type:"added"},Ji={type:"removed"},$i={type:"childadded",child:null},en={type:"childremoved",child:null};class Object3D extends kt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Vi++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const t=new Vector3,i=new Euler,r=new ri,a=new Vector3(1,1,1);i._onChange((function onRotationChange(){r.setFromEuler(i,!1)})),r._onChange((function onQuaternionChange(){i.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Gi.setFromAxisAngle(t,i),this.quaternion.multiply(Gi),this}rotateOnWorldAxis(t,i){return Gi.setFromAxisAngle(t,i),this.quaternion.premultiply(Gi),this}rotateX(t){return this.rotateOnAxis(Yi,t)}rotateY(t){return this.rotateOnAxis(Ki,t)}rotateZ(t){return this.rotateOnAxis(Zi,t)}translateOnAxis(t,i){return ki.copy(t).applyQuaternion(this.quaternion),this.position.add(ki.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Yi,t)}translateY(t){return this.translateOnAxis(Ki,t)}translateZ(t){return this.translateOnAxis(Zi,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Hi.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Wi.copy(t):Wi.set(t,i,r);const a=this.parent;this.updateWorldMatrix(!0,!1),ji.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hi.lookAt(ji,Wi,this.up):Hi.lookAt(Wi,ji,this.up),this.quaternion.setFromRotationMatrix(Hi),a&&(Hi.extractRotation(a.matrixWorld),Gi.setFromRotationMatrix(Hi),this.quaternion.premultiply(Gi.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Qi),$i.child=t,this.dispatchEvent($i),$i.child=null),this}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Ji),en.child=t,this.dispatchEvent(en),en.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Hi.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Hi.multiply(t.parent.matrixWorld)),t.applyMatrix4(Hi),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Qi),$i.child=t,this.dispatchEvent($i),$i.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,a=this.children.length;r<a;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const a=this.children;for(let o=0,l=a.length;o<l;o++)a[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ji,t,Xi),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ji,qi,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,a=i.length;r<a;r++){i[r].updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const t=this.children;for(let i=0,r=t.length;i<r;i++){t[i].updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};function serialize(i,r){return void 0===i[r.uuid]&&(i[r.uuid]=r.toJSON(t)),r.uuid}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map((t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}))),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(a.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),null!==this.boundingBox&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=serialize(t.geometries,this.geometry);const i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){const r=i.shapes;if(Array.isArray(r))for(let i=0,a=r.length;i<a;i++){const a=r[i];serialize(t.shapes,a)}else serialize(t.shapes,r)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const i=[];for(let r=0,a=this.material.length;r<a;r++)i.push(serialize(t.materials,this.material[r]));a.material=i}else a.material=serialize(t.materials,this.material);if(this.children.length>0){a.children=[];for(let i=0;i<this.children.length;i++)a.children.push(this.children[i].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let i=0;i<this.animations.length;i++){const r=this.animations[i];a.animations.push(serialize(t.animations,r))}}if(i){const i=extractFromCache(t.geometries),a=extractFromCache(t.materials),o=extractFromCache(t.textures),l=extractFromCache(t.images),c=extractFromCache(t.shapes),h=extractFromCache(t.skeletons),u=extractFromCache(t.animations),d=extractFromCache(t.nodes);i.length>0&&(r.geometries=i),a.length>0&&(r.materials=a),o.length>0&&(r.textures=o),l.length>0&&(r.images=l),c.length>0&&(r.shapes=c),h.length>0&&(r.skeletons=h),u.length>0&&(r.animations=u),d.length>0&&(r.nodes=d)}return r.object=a,r;function extractFromCache(t){const i=[];for(const r in t){const a=t[r];delete a.metadata,i.push(a)}return i}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let i=0;i<t.children.length;i++){const r=t.children[i];this.add(r.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const tn=new Vector3,nn=new Vector3,rn=new Vector3,sn=new Vector3,an=new Vector3,ln=new Vector3,cn=new Vector3,hn=new Vector3,un=new Vector3,dn=new Vector3;class Triangle{constructor(t=new Vector3,i=new Vector3,r=new Vector3){this.a=t,this.b=i,this.c=r}static getNormal(t,i,r,a){a.subVectors(r,i),tn.subVectors(t,i),a.cross(tn);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(t,i,r,a,o){tn.subVectors(a,i),nn.subVectors(r,i),rn.subVectors(t,i);const l=tn.dot(tn),c=tn.dot(nn),h=tn.dot(rn),u=nn.dot(nn),d=nn.dot(rn),p=l*u-c*c;if(0===p)return o.set(0,0,0),null;const m=1/p,g=(u*h-c*d)*m,y=(l*d-c*h)*m;return o.set(1-g-y,y,g)}static containsPoint(t,i,r,a){return null!==this.getBarycoord(t,i,r,a,sn)&&(sn.x>=0&&sn.y>=0&&sn.x+sn.y<=1)}static getInterpolation(t,i,r,a,o,l,c,h){return null===this.getBarycoord(t,i,r,a,sn)?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,sn.x),h.addScaledVector(l,sn.y),h.addScaledVector(c,sn.z),h)}static isFrontFacing(t,i,r,a){return tn.subVectors(r,i),nn.subVectors(t,i),tn.cross(nn).dot(a)<0}set(t,i,r){return this.a.copy(t),this.b.copy(i),this.c.copy(r),this}setFromPointsAndIndices(t,i,r,a){return this.a.copy(t[i]),this.b.copy(t[r]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,i,r,a){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,a),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return tn.subVectors(this.c,this.b),nn.subVectors(this.a,this.b),.5*tn.cross(nn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Triangle.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Triangle.getBarycoord(t,this.a,this.b,this.c,i)}getInterpolation(t,i,r,a,o){return Triangle.getInterpolation(t,this.a,this.b,this.c,i,r,a,o)}containsPoint(t){return Triangle.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Triangle.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const r=this.a,a=this.b,o=this.c;let l,c;an.subVectors(a,r),ln.subVectors(o,r),hn.subVectors(t,r);const h=an.dot(hn),u=ln.dot(hn);if(h<=0&&u<=0)return i.copy(r);un.subVectors(t,a);const d=an.dot(un),p=ln.dot(un);if(d>=0&&p<=d)return i.copy(a);const m=h*p-d*u;if(m<=0&&h>=0&&d<=0)return l=h/(h-d),i.copy(r).addScaledVector(an,l);dn.subVectors(t,o);const g=an.dot(dn),y=ln.dot(dn);if(y>=0&&g<=y)return i.copy(o);const v=g*u-h*y;if(v<=0&&u>=0&&y<=0)return c=u/(u-y),i.copy(r).addScaledVector(ln,c);const x=d*y-g*p;if(x<=0&&p-d>=0&&g-y>=0)return cn.subVectors(o,a),c=(p-d)/(p-d+(g-y)),i.copy(a).addScaledVector(cn,c);const b=1/(x+v+m);return l=v*b,c=m*b,i.copy(r).addScaledVector(an,l).addScaledVector(ln,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mn={h:0,s:0,l:0},fn={h:0,s:0,l:0};function hue2rgb(t,i,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(i-t)*r:r<.5?i:r<2/3?t+6*(i-t)*(2/3-r):t}let gn=class Color{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,r)}set(t,i,r){if(void 0===i&&void 0===r){const i=t;i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i)}else this.setRGB(t,i,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=bt){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ei.toWorkingColorSpace(this,i),this}setRGB(t,i,r,a=ei.workingColorSpace){return this.r=t,this.g=i,this.b=r,ei.toWorkingColorSpace(this,a),this}setHSL(t,i,r,a=ei.workingColorSpace){if(t=euclideanModulo(t,1),i=clamp(i,0,1),r=clamp(r,0,1),0===i)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+i):r+i-r*i,o=2*r-a;this.r=hue2rgb(o,a,t+1/3),this.g=hue2rgb(o,a,t),this.b=hue2rgb(o,a,t-1/3)}return ei.toWorkingColorSpace(this,a),this}setStyle(t,i=bt){function handleAlpha(t){void 0!==t&&parseFloat(t)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let t;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return handleAlpha(t[4]),this.setRGB(Math.min(255,parseInt(t[1],10))/255,Math.min(255,parseInt(t[2],10))/255,Math.min(255,parseInt(t[3],10))/255,i);if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return handleAlpha(t[4]),this.setRGB(Math.min(100,parseInt(t[1],10))/100,Math.min(100,parseInt(t[2],10))/100,Math.min(100,parseInt(t[3],10))/100,i);break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return handleAlpha(t[4]),this.setHSL(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,i)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],a=t.length;if(3===a)return this.setRGB(parseInt(t.charAt(0),16)/15,parseInt(t.charAt(1),16)/15,parseInt(t.charAt(2),16)/15,i);if(6===a)return this.setHex(parseInt(t,16),i)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=bt){const r=pn[t.toLowerCase()];return void 0!==r&&this.setHex(r,i),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=SRGBToLinear(t.r),this.g=SRGBToLinear(t.g),this.b=SRGBToLinear(t.b),this}copyLinearToSRGB(t){return this.r=LinearToSRGB(t.r),this.g=LinearToSRGB(t.g),this.b=LinearToSRGB(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=bt){return ei.fromWorkingColorSpace(yn.copy(this),t),65536*Math.round(clamp(255*yn.r,0,255))+256*Math.round(clamp(255*yn.g,0,255))+Math.round(clamp(255*yn.b,0,255))}getHexString(t=bt){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=ei.workingColorSpace){ei.fromWorkingColorSpace(yn.copy(this),i);const r=yn.r,a=yn.g,o=yn.b,l=Math.max(r,a,o),c=Math.min(r,a,o);let h,u;const d=(c+l)/2;if(c===l)h=0,u=0;else{const t=l-c;switch(u=d<=.5?t/(l+c):t/(2-l-c),l){case r:h=(a-o)/t+(a<o?6:0);break;case a:h=(o-r)/t+2;break;case o:h=(r-a)/t+4}h/=6}return t.h=h,t.s=u,t.l=d,t}getRGB(t,i=ei.workingColorSpace){return ei.fromWorkingColorSpace(yn.copy(this),i),t.r=yn.r,t.g=yn.g,t.b=yn.b,t}getStyle(t=bt){ei.fromWorkingColorSpace(yn.copy(this),t);const i=yn.r,r=yn.g,a=yn.b;return t!==bt?`color(${t} ${i.toFixed(3)} ${r.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(255*i)},${Math.round(255*r)},${Math.round(255*a)})`}offsetHSL(t,i,r){return this.getHSL(mn),this.setHSL(mn.h+t,mn.s+i,mn.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(mn),t.getHSL(fn);const r=lerp(mn.h,fn.h,i),a=lerp(mn.s,fn.s,i),o=lerp(mn.l,fn.l,i);return this.setHSL(r,a,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,r=this.g,a=this.b,o=t.elements;return this.r=o[0]*i+o[3]*r+o[6]*a,this.g=o[1]*i+o[4]*r+o[7]*a,this.b=o[2]*i+o[5]*r+o[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const yn=new gn;gn.NAMES=pn;let vn=0;class Material extends kt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vn++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=1,this.side=y,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=A,this.blendDst=205,this.blendEquation=b,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gn(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ct,this.stencilZFail=Ct,this.stencilZPass=Ct,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const i in t){const r=t[i];if(void 0===r)continue;const a=this[i];void 0!==a&&(a&&a.isColor?a.set(r):a&&a.isVector3&&r&&r.isVector3?a.copy(r):this[i]=r)}}toJSON(t){const i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function extractFromCache(t){const i=[];for(const r in t){const a=t[r];delete a.metadata,i.push(a)}return i}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(r.dispersion=this.dispersion),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(r.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapRotation&&(r.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),this.side!==y&&(r.side=this.side),!0===this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=!0),this.blendSrc!==A&&(r.blendSrc=this.blendSrc),205!==this.blendDst&&(r.blendDst=this.blendDst),this.blendEquation!==b&&(r.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(r.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(r.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(r.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(r.depthFunc=this.depthFunc),!1===this.depthTest&&(r.depthTest=this.depthTest),!1===this.depthWrite&&(r.depthWrite=this.depthWrite),!1===this.colorWrite&&(r.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(r.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(r.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(r.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ct&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ct&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ct&&(r.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(r.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaHash&&(r.alphaHash=!0),!0===this.alphaToCoverage&&(r.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=!0),!0===this.forceSinglePass&&(r.forceSinglePass=!0),!0===this.wireframe&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),i){const i=extractFromCache(t.textures),a=extractFromCache(t.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let r=null;if(null!==i){const t=i.length;r=new Array(t);for(let a=0;a!==t;++a)r[a]=i[a].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){}onBeforeRender(){}}class MeshBasicMaterial extends Material{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const xn=_generateTables();function _generateTables(){const t=new ArrayBuffer(4),i=new Float32Array(t),r=new Uint32Array(t),a=new Uint32Array(512),o=new Uint32Array(512);for(let t=0;t<256;++t){const i=t-127;i<-27?(a[t]=0,a[256|t]=32768,o[t]=24,o[256|t]=24):i<-14?(a[t]=1024>>-i-14,a[256|t]=1024>>-i-14|32768,o[t]=-i-1,o[256|t]=-i-1):i<=15?(a[t]=i+15<<10,a[256|t]=i+15<<10|32768,o[t]=13,o[256|t]=13):i<128?(a[t]=31744,a[256|t]=64512,o[t]=24,o[256|t]=24):(a[t]=31744,a[256|t]=64512,o[t]=13,o[256|t]=13)}const l=new Uint32Array(2048),c=new Uint32Array(64),h=new Uint32Array(64);for(let t=1;t<1024;++t){let i=t<<13,r=0;for(;!(8388608&i);)i<<=1,r-=8388608;i&=-8388609,r+=947912704,l[t]=i|r}for(let t=1024;t<2048;++t)l[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)c[t]=t<<23;c[31]=1199570944,c[32]=2147483648;for(let t=33;t<63;++t)c[t]=2147483648+(t-32<<23);c[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(h[t]=1024);return{floatView:i,uint32View:r,baseTable:a,shiftTable:o,mantissaTable:l,exponentTable:c,offsetTable:h}}const bn={toHalfFloat:function toHalfFloat(t){Math.abs(t),t=clamp(t,-65504,65504),xn.floatView[0]=t;const i=xn.uint32View[0],r=i>>23&511;return xn.baseTable[r]+((8388607&i)>>xn.shiftTable[r])},fromHalfFloat:function fromHalfFloat(t){const i=t>>10;return xn.uint32View[0]=xn.mantissaTable[xn.offsetTable[i]+(1023&t)]+xn.exponentTable[i],xn.floatView[0]}},_n=new Vector3,Sn=new Vector2;class BufferAttribute{constructor(t,i,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=void 0!==t?t.length/i:0,this.normalized=r,this.usage=Ut,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ge,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,r){t*=this.itemSize,r*=i.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[t+a]=i.array[r+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let i=0,r=this.count;i<r;i++)Sn.fromBufferAttribute(this,i),Sn.applyMatrix3(t),this.setXY(i,Sn.x,Sn.y);else if(3===this.itemSize)for(let i=0,r=this.count;i<r;i++)_n.fromBufferAttribute(this,i),_n.applyMatrix3(t),this.setXYZ(i,_n.x,_n.y,_n.z);return this}applyMatrix4(t){for(let i=0,r=this.count;i<r;i++)_n.fromBufferAttribute(this,i),_n.applyMatrix4(t),this.setXYZ(i,_n.x,_n.y,_n.z);return this}applyNormalMatrix(t){for(let i=0,r=this.count;i<r;i++)_n.fromBufferAttribute(this,i),_n.applyNormalMatrix(t),this.setXYZ(i,_n.x,_n.y,_n.z);return this}transformDirection(t){for(let i=0,r=this.count;i<r;i++)_n.fromBufferAttribute(this,i),_n.transformDirection(t),this.setXYZ(i,_n.x,_n.y,_n.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let r=this.array[t*this.itemSize+i];return this.normalized&&(r=denormalize(r,this.array)),r}setComponent(t,i,r){return this.normalized&&(r=normalize(r,this.array)),this.array[t*this.itemSize+i]=r,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=denormalize(i,this.array)),i}setX(t,i){return this.normalized&&(i=normalize(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=denormalize(i,this.array)),i}setY(t,i){return this.normalized&&(i=normalize(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=denormalize(i,this.array)),i}setZ(t,i){return this.normalized&&(i=normalize(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=denormalize(i,this.array)),i}setW(t,i){return this.normalized&&(i=normalize(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,r){return t*=this.itemSize,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array)),this.array[t+0]=i,this.array[t+1]=r,this}setXYZ(t,i,r,a){return t*=this.itemSize,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array),a=normalize(a,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=a,this}setXYZW(t,i,r,a,o){return t*=this.itemSize,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array),a=normalize(a,this.array),o=normalize(o,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=a,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Ut&&(t.usage=this.usage),t}}class Uint16BufferAttribute extends BufferAttribute{constructor(t,i,r){super(new Uint16Array(t),i,r)}}class Uint32BufferAttribute extends BufferAttribute{constructor(t,i,r){super(new Uint32Array(t),i,r)}}class Float32BufferAttribute extends BufferAttribute{constructor(t,i,r){super(new Float32Array(t),i,r)}}let Mn=0;const wn=new Matrix4,En=new Object3D,Tn=new Vector3,An=new Box3,Cn=new Box3,Pn=new Vector3;class BufferGeometry extends kt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mn++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(arrayNeedsUint32(t)?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,i,r=0){this.groups.push({start:t,count:i,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;void 0!==i&&(i.applyMatrix4(t),i.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const i=(new Matrix3).getNormalMatrix(t);r.applyNormalMatrix(i),r.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(t),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return wn.makeRotationFromQuaternion(t),this.applyMatrix4(wn),this}rotateX(t){return wn.makeRotationX(t),this.applyMatrix4(wn),this}rotateY(t){return wn.makeRotationY(t),this.applyMatrix4(wn),this}rotateZ(t){return wn.makeRotationZ(t),this.applyMatrix4(wn),this}translate(t,i,r){return wn.makeTranslation(t,i,r),this.applyMatrix4(wn),this}scale(t,i,r){return wn.makeScale(t,i,r),this.applyMatrix4(wn),this}lookAt(t){return En.lookAt(t),En.updateMatrix(),this.applyMatrix4(En.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tn).negate(),this.translate(Tn.x,Tn.y,Tn.z),this}setFromPoints(t){const i=[];for(let r=0,a=t.length;r<a;r++){const a=t[r];i.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Float32BufferAttribute(i,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),i)for(let t=0,r=i.length;t<r;t++){const r=i[t];An.setFromBufferAttribute(r),this.morphTargetsRelative?(Pn.addVectors(this.boundingBox.min,An.min),this.boundingBox.expandByPoint(Pn),Pn.addVectors(this.boundingBox.max,An.max),this.boundingBox.expandByPoint(Pn)):(this.boundingBox.expandByPoint(An.min),this.boundingBox.expandByPoint(An.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new Vector3,1/0);else if(t){const r=this.boundingSphere.center;if(An.setFromBufferAttribute(t),i)for(let t=0,r=i.length;t<r;t++){const r=i[t];Cn.setFromBufferAttribute(r),this.morphTargetsRelative?(Pn.addVectors(An.min,Cn.min),An.expandByPoint(Pn),Pn.addVectors(An.max,Cn.max),An.expandByPoint(Pn)):(An.expandByPoint(Cn.min),An.expandByPoint(Cn.max))}An.getCenter(r);let a=0;for(let i=0,o=t.count;i<o;i++)Pn.fromBufferAttribute(t,i),a=Math.max(a,r.distanceToSquared(Pn));if(i)for(let o=0,l=i.length;o<l;o++){const l=i[o],c=this.morphTargetsRelative;for(let i=0,o=l.count;i<o;i++)Pn.fromBufferAttribute(l,i),c&&(Tn.fromBufferAttribute(t,i),Pn.add(Tn)),a=Math.max(a,r.distanceToSquared(Pn))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)}}computeTangents(){const t=this.index,i=this.attributes;if(null===t||void 0===i.position||void 0===i.normal||void 0===i.uv)return;const r=i.position,a=i.normal,o=i.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*r.count),4));const l=this.getAttribute("tangent"),c=[],h=[];for(let t=0;t<r.count;t++)c[t]=new Vector3,h[t]=new Vector3;const u=new Vector3,d=new Vector3,p=new Vector3,m=new Vector2,g=new Vector2,y=new Vector2,v=new Vector3,x=new Vector3;function handleTriangle(t,i,a){u.fromBufferAttribute(r,t),d.fromBufferAttribute(r,i),p.fromBufferAttribute(r,a),m.fromBufferAttribute(o,t),g.fromBufferAttribute(o,i),y.fromBufferAttribute(o,a),d.sub(u),p.sub(u),g.sub(m),y.sub(m);const l=1/(g.x*y.y-y.x*g.y);isFinite(l)&&(v.copy(d).multiplyScalar(y.y).addScaledVector(p,-g.y).multiplyScalar(l),x.copy(p).multiplyScalar(g.x).addScaledVector(d,-y.x).multiplyScalar(l),c[t].add(v),c[i].add(v),c[a].add(v),h[t].add(x),h[i].add(x),h[a].add(x))}let b=this.groups;0===b.length&&(b=[{start:0,count:t.count}]);for(let i=0,r=b.length;i<r;++i){const r=b[i],a=r.start;for(let i=a,o=a+r.count;i<o;i+=3)handleTriangle(t.getX(i+0),t.getX(i+1),t.getX(i+2))}const _=new Vector3,S=new Vector3,M=new Vector3,w=new Vector3;function handleVertex(t){M.fromBufferAttribute(a,t),w.copy(M);const i=c[t];_.copy(i),_.sub(M.multiplyScalar(M.dot(i))).normalize(),S.crossVectors(w,i);const r=S.dot(h[t])<0?-1:1;l.setXYZW(t,_.x,_.y,_.z,r)}for(let i=0,r=b.length;i<r;++i){const r=b[i],a=r.start;for(let i=a,o=a+r.count;i<o;i+=3)handleVertex(t.getX(i+0)),handleVertex(t.getX(i+1)),handleVertex(t.getX(i+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(void 0!==i){let r=this.getAttribute("normal");if(void 0===r)r=new BufferAttribute(new Float32Array(3*i.count),3),this.setAttribute("normal",r);else for(let t=0,i=r.count;t<i;t++)r.setXYZ(t,0,0,0);const a=new Vector3,o=new Vector3,l=new Vector3,c=new Vector3,h=new Vector3,u=new Vector3,d=new Vector3,p=new Vector3;if(t)for(let m=0,g=t.count;m<g;m+=3){const g=t.getX(m+0),y=t.getX(m+1),v=t.getX(m+2);a.fromBufferAttribute(i,g),o.fromBufferAttribute(i,y),l.fromBufferAttribute(i,v),d.subVectors(l,o),p.subVectors(a,o),d.cross(p),c.fromBufferAttribute(r,g),h.fromBufferAttribute(r,y),u.fromBufferAttribute(r,v),c.add(d),h.add(d),u.add(d),r.setXYZ(g,c.x,c.y,c.z),r.setXYZ(y,h.x,h.y,h.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let t=0,c=i.count;t<c;t+=3)a.fromBufferAttribute(i,t+0),o.fromBufferAttribute(i,t+1),l.fromBufferAttribute(i,t+2),d.subVectors(l,o),p.subVectors(a,o),d.cross(p),r.setXYZ(t+0,d.x,d.y,d.z),r.setXYZ(t+1,d.x,d.y,d.z),r.setXYZ(t+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,r=t.count;i<r;i++)Pn.fromBufferAttribute(t,i),Pn.normalize(),t.setXYZ(i,Pn.x,Pn.y,Pn.z)}toNonIndexed(){function convertBufferAttribute(t,i){const r=t.array,a=t.itemSize,o=t.normalized,l=new r.constructor(i.length*a);let c=0,h=0;for(let o=0,u=i.length;o<u;o++){c=t.isInterleavedBufferAttribute?i[o]*t.data.stride+t.offset:i[o]*a;for(let t=0;t<a;t++)l[h++]=r[c++]}return new BufferAttribute(l,a,o)}if(null===this.index)return this;const t=new BufferGeometry,i=this.index.array,r=this.attributes;for(const a in r){const o=convertBufferAttribute(r[a],i);t.setAttribute(a,o)}const a=this.morphAttributes;for(const r in a){const o=[],l=a[r];for(let t=0,r=l.length;t<r;t++){const r=convertBufferAttribute(l[t],i);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let i=0,r=o.length;i<r;i++){const r=o[i];t.addGroup(r.start,r.count,r.materialIndex)}return t}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const i=this.parameters;for(const r in i)void 0!==i[r]&&(t[r]=i[r]);return t}t.data={attributes:{}};const i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const r=this.attributes;for(const i in r){const a=r[i];t.data.attributes[i]=a.toJSON(t.data)}const a={};let o=!1;for(const i in this.morphAttributes){const r=this.morphAttributes[i],l=[];for(let i=0,a=r.length;i<a;i++){const a=r[i];l.push(a.toJSON(t.data))}l.length>0&&(a[i]=l,o=!0)}o&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(t.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const r=t.index;null!==r&&this.setIndex(r.clone(i));const a=t.attributes;for(const t in a){const r=a[t];this.setAttribute(t,r.clone(i))}const o=t.morphAttributes;for(const t in o){const r=[],a=o[t];for(let t=0,o=a.length;t<o;t++)r.push(a[t].clone(i));this.morphAttributes[t]=r}this.morphTargetsRelative=t.morphTargetsRelative;const l=t.groups;for(let t=0,i=l.length;t<i;t++){const i=l[t];this.addGroup(i.start,i.count,i.materialIndex)}const c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());const h=t.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Rn=new Matrix4,In=new Ray,Dn=new Sphere,Ln=new Vector3,Nn=new Vector3,Fn=new Vector3,On=new Vector3,Un=new Vector3,Bn=new Vector3,zn=new Vector2,Vn=new Vector2,kn=new Vector2,Gn=new Vector3,Hn=new Vector3,Wn=new Vector3,jn=new Vector3,Xn=new Vector3;class Mesh extends Object3D{constructor(t=new BufferGeometry,i=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=r.length;t<i;t++){const i=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}getVertexPosition(t,i){const r=this.geometry,a=r.attributes.position,o=r.morphAttributes.position,l=r.morphTargetsRelative;i.fromBufferAttribute(a,t);const c=this.morphTargetInfluences;if(o&&c){Bn.set(0,0,0);for(let r=0,a=o.length;r<a;r++){const a=c[r],h=o[r];0!==a&&(Un.fromBufferAttribute(h,t),l?Bn.addScaledVector(Un,a):Bn.addScaledVector(Un.sub(i),a))}i.add(Bn)}return i}raycast(t,i){const r=this.geometry,a=this.material,o=this.matrixWorld;if(void 0!==a){if(null===r.boundingSphere&&r.computeBoundingSphere(),Dn.copy(r.boundingSphere),Dn.applyMatrix4(o),In.copy(t.ray).recast(t.near),!1===Dn.containsPoint(In.origin)){if(null===In.intersectSphere(Dn,Ln))return;if(In.origin.distanceToSquared(Ln)>(t.far-t.near)**2)return}Rn.copy(o).invert(),In.copy(t.ray).applyMatrix4(Rn),null!==r.boundingBox&&!1===In.intersectsBox(r.boundingBox)||this._computeIntersections(t,i,In)}}_computeIntersections(t,i,r){let a;const o=this.geometry,l=this.material,c=o.index,h=o.attributes.position,u=o.attributes.uv,d=o.attributes.uv1,p=o.attributes.normal,m=o.groups,g=o.drawRange;if(null!==c)if(Array.isArray(l))for(let o=0,h=m.length;o<h;o++){const h=m[o],y=l[h.materialIndex];for(let o=Math.max(h.start,g.start),l=Math.min(c.count,Math.min(h.start+h.count,g.start+g.count));o<l;o+=3){a=checkGeometryIntersection(this,y,t,r,u,d,p,c.getX(o),c.getX(o+1),c.getX(o+2)),a&&(a.faceIndex=Math.floor(o/3),a.face.materialIndex=h.materialIndex,i.push(a))}}else{for(let o=Math.max(0,g.start),h=Math.min(c.count,g.start+g.count);o<h;o+=3){a=checkGeometryIntersection(this,l,t,r,u,d,p,c.getX(o),c.getX(o+1),c.getX(o+2)),a&&(a.faceIndex=Math.floor(o/3),i.push(a))}}else if(void 0!==h)if(Array.isArray(l))for(let o=0,c=m.length;o<c;o++){const c=m[o],y=l[c.materialIndex];for(let o=Math.max(c.start,g.start),l=Math.min(h.count,Math.min(c.start+c.count,g.start+g.count));o<l;o+=3){a=checkGeometryIntersection(this,y,t,r,u,d,p,o,o+1,o+2),a&&(a.faceIndex=Math.floor(o/3),a.face.materialIndex=c.materialIndex,i.push(a))}}else{for(let o=Math.max(0,g.start),c=Math.min(h.count,g.start+g.count);o<c;o+=3){a=checkGeometryIntersection(this,l,t,r,u,d,p,o,o+1,o+2),a&&(a.faceIndex=Math.floor(o/3),i.push(a))}}}}function checkGeometryIntersection(t,i,r,a,o,l,c,h,u,d){t.getVertexPosition(h,Nn),t.getVertexPosition(u,Fn),t.getVertexPosition(d,On);const p=function checkIntersection$1(t,i,r,a,o,l,c,h){let u;if(u=i.side===v?a.intersectTriangle(c,l,o,!0,h):a.intersectTriangle(o,l,c,i.side===y,h),null===u)return null;Xn.copy(h),Xn.applyMatrix4(t.matrixWorld);const d=r.ray.origin.distanceTo(Xn);return d<r.near||d>r.far?null:{distance:d,point:Xn.clone(),object:t}}(t,i,r,a,Nn,Fn,On,jn);if(p){o&&(zn.fromBufferAttribute(o,h),Vn.fromBufferAttribute(o,u),kn.fromBufferAttribute(o,d),p.uv=Triangle.getInterpolation(jn,Nn,Fn,On,zn,Vn,kn,new Vector2)),l&&(zn.fromBufferAttribute(l,h),Vn.fromBufferAttribute(l,u),kn.fromBufferAttribute(l,d),p.uv1=Triangle.getInterpolation(jn,Nn,Fn,On,zn,Vn,kn,new Vector2)),c&&(Gn.fromBufferAttribute(c,h),Hn.fromBufferAttribute(c,u),Wn.fromBufferAttribute(c,d),p.normal=Triangle.getInterpolation(jn,Nn,Fn,On,Gn,Hn,Wn,new Vector3),p.normal.dot(a.direction)>0&&p.normal.multiplyScalar(-1));const t={a:h,b:u,c:d,normal:new Vector3,materialIndex:0};Triangle.getNormal(Nn,Fn,On,t.normal),p.face=t}return p}class BoxGeometry extends BufferGeometry{constructor(t=1,i=1,r=1,a=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:r,widthSegments:a,heightSegments:o,depthSegments:l};const c=this;a=Math.floor(a),o=Math.floor(o),l=Math.floor(l);const h=[],u=[],d=[],p=[];let m=0,g=0;function buildPlane(t,i,r,a,o,l,y,v,x,b,_){const S=l/x,M=y/b,w=l/2,E=y/2,T=v/2,A=x+1,C=b+1;let P=0,R=0;const I=new Vector3;for(let l=0;l<C;l++){const c=l*M-E;for(let h=0;h<A;h++){const m=h*S-w;I[t]=m*a,I[i]=c*o,I[r]=T,u.push(I.x,I.y,I.z),I[t]=0,I[i]=0,I[r]=v>0?1:-1,d.push(I.x,I.y,I.z),p.push(h/x),p.push(1-l/b),P+=1}}for(let t=0;t<b;t++)for(let i=0;i<x;i++){const r=m+i+A*t,a=m+i+A*(t+1),o=m+(i+1)+A*(t+1),l=m+(i+1)+A*t;h.push(r,a,l),h.push(a,o,l),R+=6}c.addGroup(g,R,_),g+=R,m+=P}buildPlane("z","y","x",-1,-1,r,i,t,l,o,0),buildPlane("z","y","x",1,-1,r,i,-t,l,o,1),buildPlane("x","z","y",1,1,t,r,i,a,l,2),buildPlane("x","z","y",1,-1,t,r,-i,a,l,3),buildPlane("x","y","z",1,-1,t,i,r,a,o,4),buildPlane("x","y","z",-1,-1,t,i,-r,a,o,5),this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new BoxGeometry(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function cloneUniforms(t){const i={};for(const r in t){i[r]={};for(const a in t[r]){const o=t[r][a];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?i[r][a]=null:i[r][a]=o.clone():Array.isArray(o)?i[r][a]=o.slice():i[r][a]=o}}return i}function mergeUniforms(t){const i={};for(let r=0;r<t.length;r++){const a=cloneUniforms(t[r]);for(const t in a)i[t]=a[t]}return i}function getUnlitUniformColorSpace(t){const i=t.getRenderTarget();return null===i?t.outputColorSpace:!0===i.isXRRenderTarget?i.texture.colorSpace:ei.workingColorSpace}const qn={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cloneUniforms(t.uniforms),this.uniformsGroups=function cloneUniformsGroups(t){const i=[];for(let r=0;r<t.length;r++)i.push(t[r].clone());return i}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?i.uniforms[r]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?i.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?i.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?i.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?i.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?i.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?i.uniforms[r]={type:"m4",value:a.toArray()}:i.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const r={};for(const t in this.extensions)!0===this.extensions[t]&&(r[t]=!0);return Object.keys(r).length>0&&(i.extensions=r),i}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=zt}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Yn=new Vector3,Kn=new Vector2,Zn=new Vector2;class PerspectiveCamera extends Camera{constructor(t=50,i=1,r=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=a,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=2*jt*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Wt*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*jt*Math.atan(Math.tan(.5*Wt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,i,r){Yn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Yn.x,Yn.y).multiplyScalar(-t/Yn.z),Yn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Yn.x,Yn.y).multiplyScalar(-t/Yn.z)}getViewSize(t,i){return this.getViewBounds(t,Kn,Zn),i.subVectors(Zn,Kn)}setViewOffset(t,i,r,a,o,l){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=a,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(.5*Wt*this.fov)/this.zoom,r=2*i,a=this.aspect*r,o=-.5*a;const l=this.view;if(null!==this.view&&this.view.enabled){const t=l.fullWidth,c=l.fullHeight;o+=l.offsetX*a/t,i-=l.offsetY*r/c,a*=l.width/t,r*=l.height/c}const c=this.filmOffset;0!==c&&(o+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,i,i-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,null!==this.view&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const Qn=-90;class CubeCamera extends Object3D{constructor(t,i,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new PerspectiveCamera(Qn,1,t,i);a.layers=this.layers,this.add(a);const o=new PerspectiveCamera(Qn,1,t,i);o.layers=this.layers,this.add(o);const l=new PerspectiveCamera(Qn,1,t,i);l.layers=this.layers,this.add(l);const c=new PerspectiveCamera(Qn,1,t,i);c.layers=this.layers,this.add(c);const h=new PerspectiveCamera(Qn,1,t,i);h.layers=this.layers,this.add(h);const u=new PerspectiveCamera(Qn,1,t,i);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,i=this.children.concat(),[r,a,o,l,c,h]=i;for(const t of i)this.remove(t);if(t===zt)r.up.set(0,1,0),r.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else{if(t!==Vt)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);r.up.set(0,-1,0),r.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1)}for(const t of i)this.add(t),t.updateMatrixWorld()}update(t,i){null===this.parent&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,l,c,h,u,d]=this.children,p=t.getRenderTarget(),m=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),y=t.xr.enabled;t.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,a),t.render(i,o),t.setRenderTarget(r,1,a),t.render(i,l),t.setRenderTarget(r,2,a),t.render(i,c),t.setRenderTarget(r,3,a),t.render(i,h),t.setRenderTarget(r,4,a),t.render(i,u),r.texture.generateMipmaps=v,t.setRenderTarget(r,5,a),t.render(i,d),t.setRenderTarget(p,m,g),t.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(t,i,r,a,o,l,c,h,u,d){super(t=void 0!==t?t:[],i=void 0!==i?i:Q,r,a,o,l,c,h,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},a=[r,r,r,r,r,r];this.texture=new CubeTexture(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:oe}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},a=new BoxGeometry(5,5,5),o=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:v,blending:0});o.uniforms.tEquirect.value=i;const l=new Mesh(a,o),c=i.minFilter;i.minFilter===ce&&(i.minFilter=oe);return new CubeCamera(1,10,this).update(t,l),i.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(t,i,r,a){const o=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(i,r,a);t.setRenderTarget(o)}}const Jn=new Vector3,$n=new Vector3,er=new Matrix3;class Plane{constructor(t=new Vector3(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,r,a){return this.normal.set(t,i,r),this.constant=a,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,r){const a=Jn.subVectors(r,i).cross($n.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,i){const r=t.delta(Jn),a=this.normal.dot(r);if(0===a)return 0===this.distanceToPoint(t.start)?i.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:i.copy(t.start).addScaledVector(r,o)}intersectsLine(t){const i=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return i<0&&r>0||r<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const r=i||er.getNormalMatrix(t),a=this.coplanarPoint(Jn).applyMatrix4(t),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const tr=new Sphere,ir=new Vector3;class Frustum{constructor(t=new Plane,i=new Plane,r=new Plane,a=new Plane,o=new Plane,l=new Plane){this.planes=[t,i,r,a,o,l]}set(t,i,r,a,o,l){const c=this.planes;return c[0].copy(t),c[1].copy(i),c[2].copy(r),c[3].copy(a),c[4].copy(o),c[5].copy(l),this}copy(t){const i=this.planes;for(let r=0;r<6;r++)i[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,i=2e3){const r=this.planes,a=t.elements,o=a[0],l=a[1],c=a[2],h=a[3],u=a[4],d=a[5],p=a[6],m=a[7],g=a[8],y=a[9],v=a[10],x=a[11],b=a[12],_=a[13],S=a[14],M=a[15];if(r[0].setComponents(h-o,m-u,x-g,M-b).normalize(),r[1].setComponents(h+o,m+u,x+g,M+b).normalize(),r[2].setComponents(h+l,m+d,x+y,M+_).normalize(),r[3].setComponents(h-l,m-d,x-y,M-_).normalize(),r[4].setComponents(h-c,m-p,x-v,M-S).normalize(),i===zt)r[5].setComponents(h+c,m+p,x+v,M+S).normalize();else{if(i!==Vt)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);r[5].setComponents(c,p,v,S).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),tr.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const i=t.geometry;null===i.boundingSphere&&i.computeBoundingSphere(),tr.copy(i.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(tr)}intersectsSprite(t){return tr.center.set(0,0,0),tr.radius=.7071067811865476,tr.applyMatrix4(t.matrixWorld),this.intersectsSphere(tr)}intersectsSphere(t){const i=this.planes,r=t.center,a=-t.radius;for(let t=0;t<6;t++){if(i[t].distanceToPoint(r)<a)return!1}return!0}intersectsBox(t){const i=this.planes;for(let r=0;r<6;r++){const a=i[r];if(ir.x=a.normal.x>0?t.max.x:t.min.x,ir.y=a.normal.y>0?t.max.y:t.min.y,ir.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(ir)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let r=0;r<6;r++)if(i[r].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let t=null,i=!1,r=null,a=null;function onAnimationFrame(i,o){r(i,o),a=t.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==i&&null!==r&&(a=t.requestAnimationFrame(onAnimationFrame),i=!0)},stop:function(){t.cancelAnimationFrame(a),i=!1},setAnimationLoop:function(t){r=t},setContext:function(i){t=i}}}function WebGLAttributes(t){const i=new WeakMap;return{get:function get(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function remove(r){r.isInterleavedBufferAttribute&&(r=r.data);const a=i.get(r);a&&(t.deleteBuffer(a.buffer),i.delete(r))},update:function update(r,a){if(r.isInterleavedBufferAttribute&&(r=r.data),r.isGLBufferAttribute){const t=i.get(r);return void((!t||t.version<r.version)&&i.set(r,{buffer:r.buffer,type:r.type,bytesPerElement:r.elementSize,version:r.version}))}const o=i.get(r);if(void 0===o)i.set(r,function createBuffer(i,r){const a=i.array,o=i.usage,l=a.byteLength,c=t.createBuffer();let h;if(t.bindBuffer(r,c),t.bufferData(r,a,o),i.onUploadCallback(),a instanceof Float32Array)h=t.FLOAT;else if(a instanceof Uint16Array)h=i.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(a instanceof Int16Array)h=t.SHORT;else if(a instanceof Uint32Array)h=t.UNSIGNED_INT;else if(a instanceof Int32Array)h=t.INT;else if(a instanceof Int8Array)h=t.BYTE;else if(a instanceof Uint8Array)h=t.UNSIGNED_BYTE;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);h=t.UNSIGNED_BYTE}return{buffer:c,type:h,bytesPerElement:a.BYTES_PER_ELEMENT,version:i.version,size:l}}(r,a));else if(o.version<r.version){if(o.size!==r.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function updateBuffer(i,r,a){const o=r.array,l=r._updateRange,c=r.updateRanges;if(t.bindBuffer(a,i),-1===l.count&&0===c.length&&t.bufferSubData(a,0,o),0!==c.length){for(let i=0,r=c.length;i<r;i++){const r=c[i];t.bufferSubData(a,r.start*o.BYTES_PER_ELEMENT,o,r.start,r.count)}r.clearUpdateRanges()}-1!==l.count&&(t.bufferSubData(a,l.offset*o.BYTES_PER_ELEMENT,o,l.offset,l.count),l.count=-1),r.onUploadCallback()}(o.buffer,r,a),o.version=r.version}}}}class PlaneGeometry extends BufferGeometry{constructor(t=1,i=1,r=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:r,heightSegments:a};const o=t/2,l=i/2,c=Math.floor(r),h=Math.floor(a),u=c+1,d=h+1,p=t/c,m=i/h,g=[],y=[],v=[],x=[];for(let t=0;t<d;t++){const i=t*m-l;for(let r=0;r<u;r++){const a=r*p-o;y.push(a,-i,0),v.push(0,0,1),x.push(r/c),x.push(1-t/h)}}for(let t=0;t<h;t++)for(let i=0;i<c;i++){const r=i+u*t,a=i+u*(t+1),o=i+1+u*(t+1),l=i+1+u*t;g.push(r,a,l),g.push(a,o,l)}this.setIndex(g),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(v,3)),this.setAttribute("uv",new Float32BufferAttribute(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new PlaneGeometry(t.width,t.height,t.widthSegments,t.heightSegments)}}const nr={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},rr={common:{diffuse:{value:new gn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new gn(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},sr={basic:{uniforms:mergeUniforms([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.fog]),vertexShader:nr.meshbasic_vert,fragmentShader:nr.meshbasic_frag},lambert:{uniforms:mergeUniforms([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new gn(0)}}]),vertexShader:nr.meshlambert_vert,fragmentShader:nr.meshlambert_frag},phong:{uniforms:mergeUniforms([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new gn(0)},specular:{value:new gn(1118481)},shininess:{value:30}}]),vertexShader:nr.meshphong_vert,fragmentShader:nr.meshphong_frag},standard:{uniforms:mergeUniforms([rr.common,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.roughnessmap,rr.metalnessmap,rr.fog,rr.lights,{emissive:{value:new gn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag},toon:{uniforms:mergeUniforms([rr.common,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.gradientmap,rr.fog,rr.lights,{emissive:{value:new gn(0)}}]),vertexShader:nr.meshtoon_vert,fragmentShader:nr.meshtoon_frag},matcap:{uniforms:mergeUniforms([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,{matcap:{value:null}}]),vertexShader:nr.meshmatcap_vert,fragmentShader:nr.meshmatcap_frag},points:{uniforms:mergeUniforms([rr.points,rr.fog]),vertexShader:nr.points_vert,fragmentShader:nr.points_frag},dashed:{uniforms:mergeUniforms([rr.common,rr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nr.linedashed_vert,fragmentShader:nr.linedashed_frag},depth:{uniforms:mergeUniforms([rr.common,rr.displacementmap]),vertexShader:nr.depth_vert,fragmentShader:nr.depth_frag},normal:{uniforms:mergeUniforms([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,{opacity:{value:1}}]),vertexShader:nr.meshnormal_vert,fragmentShader:nr.meshnormal_frag},sprite:{uniforms:mergeUniforms([rr.sprite,rr.fog]),vertexShader:nr.sprite_vert,fragmentShader:nr.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nr.background_vert,fragmentShader:nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:nr.backgroundCube_vert,fragmentShader:nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nr.cube_vert,fragmentShader:nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nr.equirect_vert,fragmentShader:nr.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([rr.common,rr.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nr.distanceRGBA_vert,fragmentShader:nr.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([rr.lights,rr.fog,{color:{value:new gn(0)},opacity:{value:1}}]),vertexShader:nr.shadow_vert,fragmentShader:nr.shadow_frag}};sr.physical={uniforms:mergeUniforms([sr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new gn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new gn(0)},specularColor:{value:new gn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag};const ar={r:0,b:0,g:0},or=new Euler,lr=new Matrix4;function WebGLBackground(t,i,r,a,o,l,c){const h=new gn(0);let u,d,p=!0===l?0:1,m=null,g=0,x=null;function getBackground(t){let a=!0===t.isScene?t.background:null;if(a&&a.isTexture){a=(t.backgroundBlurriness>0?r:i).get(a)}return a}function setClear(i,r){i.getRGB(ar,getUnlitUniformColorSpace(t)),a.buffers.color.setClear(ar.r,ar.g,ar.b,r,c)}return{getClearColor:function(){return h},setClearColor:function(t,i=1){h.set(t),p=i,setClear(h,p)},getClearAlpha:function(){return p},setClearAlpha:function(t){p=t,setClear(h,p)},render:function render(i){let r=!1;const o=getBackground(i);null===o?setClear(h,p):o&&o.isColor&&(setClear(o,1),r=!0);const l=t.xr.getEnvironmentBlendMode();"additive"===l?a.buffers.color.setClear(0,0,0,1,c):"alpha-blend"===l&&a.buffers.color.setClear(0,0,0,0,c),(t.autoClear||r)&&(a.buffers.depth.setTest(!0),a.buffers.depth.setMask(!0),a.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function addToRenderList(i,r){const a=getBackground(r);a&&(a.isCubeTexture||a.mapping===ee)?(void 0===d&&(d=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(sr.backgroundCube.uniforms),vertexShader:sr.backgroundCube.vertexShader,fragmentShader:sr.backgroundCube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(t,i,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(d)),or.copy(r.backgroundRotation),or.x*=-1,or.y*=-1,or.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(or.y*=-1,or.z*=-1),d.material.uniforms.envMap.value=a,d.material.uniforms.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=r.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(lr.makeRotationFromEuler(or)),d.material.toneMapped=ei.getTransfer(a.colorSpace)!==Et,m===a&&g===a.version&&x===t.toneMapping||(d.material.needsUpdate=!0,m=a,g=a.version,x=t.toneMapping),d.layers.enableAll(),i.unshift(d,d.geometry,d.material,0,0,null)):a&&a.isTexture&&(void 0===u&&(u=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(sr.background.uniforms),vertexShader:sr.background.vertexShader,fragmentShader:sr.background.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=a,u.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,u.material.toneMapped=ei.getTransfer(a.colorSpace)!==Et,!0===a.matrixAutoUpdate&&a.updateMatrix(),u.material.uniforms.uvTransform.value.copy(a.matrix),m===a&&g===a.version&&x===t.toneMapping||(u.material.needsUpdate=!0,m=a,g=a.version,x=t.toneMapping),u.layers.enableAll(),i.unshift(u,u.geometry,u.material,0,0,null))}}}function WebGLBindingStates(t,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),a={},o=createBindingState(null);let l=o,c=!1;function bindVertexArrayObject(i){return t.bindVertexArray(i)}function deleteVertexArrayObject(i){return t.deleteVertexArray(i)}function createBindingState(t){const i=[],a=[],o=[];for(let t=0;t<r;t++)i[t]=0,a[t]=0,o[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:i,enabledAttributes:a,attributeDivisors:o,object:t,attributes:{},index:null}}function initAttributes(){const t=l.newAttributes;for(let i=0,r=t.length;i<r;i++)t[i]=0}function enableAttribute(t){enableAttributeAndDivisor(t,0)}function enableAttributeAndDivisor(i,r){const a=l.newAttributes,o=l.enabledAttributes,c=l.attributeDivisors;a[i]=1,0===o[i]&&(t.enableVertexAttribArray(i),o[i]=1),c[i]!==r&&(t.vertexAttribDivisor(i,r),c[i]=r)}function disableUnusedAttributes(){const i=l.newAttributes,r=l.enabledAttributes;for(let a=0,o=r.length;a<o;a++)r[a]!==i[a]&&(t.disableVertexAttribArray(a),r[a]=0)}function vertexAttribPointer(i,r,a,o,l,c,h){!0===h?t.vertexAttribIPointer(i,r,a,l,c):t.vertexAttribPointer(i,r,a,o,l,c)}function reset(){resetDefaultState(),c=!0,l!==o&&(l=o,bindVertexArrayObject(l.object))}function resetDefaultState(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:function setup(r,o,h,u,d){let p=!1;const m=function getBindingState(i,r,o){const l=!0===o.wireframe;let c=a[i.id];void 0===c&&(c={},a[i.id]=c);let h=c[r.id];void 0===h&&(h={},c[r.id]=h);let u=h[l];void 0===u&&(u=createBindingState(function createVertexArrayObject(){return t.createVertexArray()}()),h[l]=u);return u}(u,h,o);l!==m&&(l=m,bindVertexArrayObject(l.object)),p=function needsUpdate(t,i,r,a){const o=l.attributes,c=i.attributes;let h=0;const u=r.getAttributes();for(const i in u){if(u[i].location>=0){const r=o[i];let a=c[i];if(void 0===a&&("instanceMatrix"===i&&t.instanceMatrix&&(a=t.instanceMatrix),"instanceColor"===i&&t.instanceColor&&(a=t.instanceColor)),void 0===r)return!0;if(r.attribute!==a)return!0;if(a&&r.data!==a.data)return!0;h++}}return l.attributesNum!==h||l.index!==a}(r,u,h,d),p&&function saveCache(t,i,r,a){const o={},c=i.attributes;let h=0;const u=r.getAttributes();for(const i in u){if(u[i].location>=0){let r=c[i];void 0===r&&("instanceMatrix"===i&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===i&&t.instanceColor&&(r=t.instanceColor));const a={};a.attribute=r,r&&r.data&&(a.data=r.data),o[i]=a,h++}}l.attributes=o,l.attributesNum=h,l.index=a}(r,u,h,d),null!==d&&i.update(d,t.ELEMENT_ARRAY_BUFFER),(p||c)&&(c=!1,function setupVertexAttributes(r,a,o,l){initAttributes();const c=l.attributes,h=o.getAttributes(),u=a.defaultAttributeValues;for(const a in h){const o=h[a];if(o.location>=0){let h=c[a];if(void 0===h&&("instanceMatrix"===a&&r.instanceMatrix&&(h=r.instanceMatrix),"instanceColor"===a&&r.instanceColor&&(h=r.instanceColor)),void 0!==h){const a=h.normalized,c=h.itemSize,u=i.get(h);if(void 0===u)continue;const d=u.buffer,p=u.type,m=u.bytesPerElement,g=p===t.INT||p===t.UNSIGNED_INT||h.gpuType===me;if(h.isInterleavedBufferAttribute){const i=h.data,u=i.stride,y=h.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)enableAttributeAndDivisor(o.location+t,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<o.locationSize;t++)enableAttribute(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,d);for(let t=0;t<o.locationSize;t++)vertexAttribPointer(o.location+t,c/o.locationSize,p,a,u*m,(y+c/o.locationSize*t)*m,g)}else{if(h.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)enableAttributeAndDivisor(o.location+t,h.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=h.meshPerAttribute*h.count)}else for(let t=0;t<o.locationSize;t++)enableAttribute(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,d);for(let t=0;t<o.locationSize;t++)vertexAttribPointer(o.location+t,c/o.locationSize,p,a,c*m,c/o.locationSize*t*m,g)}}else if(void 0!==u){const i=u[a];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(o.location,i);break;case 3:t.vertexAttrib3fv(o.location,i);break;case 4:t.vertexAttrib4fv(o.location,i);break;default:t.vertexAttrib1fv(o.location,i)}}}}disableUnusedAttributes()}(r,o,h,u),null!==d&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.get(d).buffer))},reset,resetDefaultState,dispose:function dispose(){reset();for(const t in a){const i=a[t];for(const t in i){const r=i[t];for(const t in r)deleteVertexArrayObject(r[t].object),delete r[t];delete i[t]}delete a[t]}},releaseStatesOfGeometry:function releaseStatesOfGeometry(t){if(void 0===a[t.id])return;const i=a[t.id];for(const t in i){const r=i[t];for(const t in r)deleteVertexArrayObject(r[t].object),delete r[t];delete i[t]}delete a[t.id]},releaseStatesOfProgram:function releaseStatesOfProgram(t){for(const i in a){const r=a[i];if(void 0===r[t.id])continue;const o=r[t.id];for(const t in o)deleteVertexArrayObject(o[t].object),delete o[t];delete r[t.id]}},initAttributes,enableAttribute,disableUnusedAttributes}}function WebGLBufferRenderer(t,i,r){let a;function renderInstances(i,o,l){0!==l&&(t.drawArraysInstanced(a,i,o,l),r.update(o,a,l))}this.setMode=function setMode(t){a=t},this.render=function render(i,o){t.drawArrays(a,i,o),r.update(o,a,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function renderMultiDraw(t,o,l){if(0===l)return;i.get("WEBGL_multi_draw").multiDrawArraysWEBGL(a,t,0,o,0,l);let c=0;for(let t=0;t<l;t++)c+=o[t];r.update(c,a,1)},this.renderMultiDrawInstances=function renderMultiDrawInstances(t,o,l,c){if(0===l)return;const h=i.get("WEBGL_multi_draw");if(null===h)for(let i=0;i<t.length;i++)renderInstances(t[i],o[i],c[i]);else{h.multiDrawArraysInstancedWEBGL(a,t,0,o,0,c,0,l);let i=0;for(let t=0;t<l;t++)i+=o[t];for(let t=0;t<c.length;t++)r.update(i,a,c[t])}}}function WebGLCapabilities(t,i,r,a){let o;function getMaxPrecision(i){if("highp"===i){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";i="mediump"}return"mediump"===i&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=void 0!==r.precision?r.precision:"highp";const c=getMaxPrecision(l);c!==l&&(l=c);const h=!0===r.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==o)return o;if(!0===i.has("EXT_texture_filter_anisotropic")){const r=i.get("EXT_texture_filter_anisotropic");o=t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o},getMaxPrecision,textureFormatReadable:function textureFormatReadable(i){return i===we||a.convert(i)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function textureTypeReadable(r){const o=r===ye&&(i.has("EXT_color_buffer_half_float")||i.has("EXT_color_buffer_float"));return!(r!==he&&a.convert(r)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&r!==ge&&!o)},precision:l,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function WebGLClipping(t){const i=this;let r=null,a=0,o=!1,l=!1;const c=new Plane,h=new Matrix3,u={value:null,needsUpdate:!1};function projectPlanes(t,r,a,o){const l=null!==t?t.length:0;let d=null;if(0!==l){if(d=u.value,!0!==o||null===d){const i=a+4*l,o=r.matrixWorldInverse;h.getNormalMatrix(o),(null===d||d.length<i)&&(d=new Float32Array(i));for(let i=0,r=a;i!==l;++i,r+=4)c.copy(t[i]).applyMatrix4(o,h),c.normal.toArray(d,r),d[r+3]=c.constant}u.value=d,u.needsUpdate=!0}return i.numPlanes=l,i.numIntersection=0,d}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i){const r=0!==t.length||i||0!==a||o;return o=i,a=t.length,r},this.beginShadows=function(){l=!0,projectPlanes(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(t,i){r=projectPlanes(t,i,0)},this.setState=function(c,h,d){const p=c.clippingPlanes,m=c.clipIntersection,g=c.clipShadows,y=t.get(c);if(!o||null===p||0===p.length||l&&!g)l?projectPlanes(null):function resetGlobalState(){u.value!==r&&(u.value=r,u.needsUpdate=a>0);i.numPlanes=a,i.numIntersection=0}();else{const t=l?0:a,i=4*t;let o=y.clippingState||null;u.value=o,o=projectPlanes(p,h,i,d);for(let t=0;t!==i;++t)o[t]=r[t];y.clippingState=o,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=t}}}function WebGLCubeMaps(t){let i=new WeakMap;function mapTextureMapping(t,i){return 303===i?t.mapping=Q:304===i&&(t.mapping=J),t}function onTextureDispose(t){const r=t.target;r.removeEventListener("dispose",onTextureDispose);const a=i.get(r);void 0!==a&&(i.delete(r),a.dispose())}return{get:function get(r){if(r&&r.isTexture){const a=r.mapping;if(303===a||304===a){if(i.has(r)){return mapTextureMapping(i.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=new WebGLCubeRenderTarget(a.height);return o.fromEquirectangularTexture(t,r),i.set(r,o),r.addEventListener("dispose",onTextureDispose),mapTextureMapping(o.texture,r.mapping)}return null}}}return r},dispose:function dispose(){i=new WeakMap}}}class OrthographicCamera extends Camera{constructor(t=-1,i=1,r=1,a=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=r,this.bottom=a,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,i,r,a,o,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=a,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=r-t,l=r+t,c=a+i,h=a-i;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,i=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=t*this.view.offsetX,l=o+t*this.view.width,c-=i*this.view.offsetY,h=c-i*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,null!==this.view&&(i.object.view=Object.assign({},this.view)),i}}const cr=[.125,.215,.35,.446,.526,.582],hr=20,ur=new OrthographicCamera,dr=new gn;let pr=null,mr=0,fr=0,gr=!1;const yr=(1+Math.sqrt(5))/2,vr=1/yr,xr=[new Vector3(-yr,vr,0),new Vector3(yr,vr,0),new Vector3(-vr,0,yr),new Vector3(vr,0,yr),new Vector3(0,yr,-vr),new Vector3(0,yr,vr),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,r=.1,a=100){pr=this._renderer.getRenderTarget(),mr=this._renderer.getActiveCubeFace(),fr=this._renderer.getActiveMipmapLevel(),gr=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,r,a,o),i>0&&this._blur(o,0,0,i),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(pr,mr,fr),this._renderer.xr.enabled=gr,t.scissorTest=!1,_setViewport(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===Q||t.mapping===J?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),pr=this._renderer.getRenderTarget(),mr=this._renderer.getActiveCubeFace(),fr=this._renderer.getActiveMipmapLevel(),gr=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=i||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,r={magFilter:oe,minFilter:oe,generateMipmaps:!1,type:ye,format:we,colorSpace:_t,depthBuffer:!1},a=_createRenderTarget(t,i,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(t,i,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function _createPlanes(t){const i=[],r=[],a=[];let o=t;const l=t-4+1+cr.length;for(let c=0;c<l;c++){const l=Math.pow(2,o);r.push(l);let h=1/l;c>t-4?h=cr[c-t+4-1]:0===c&&(h=0),a.push(h);const u=1/(l-2),d=-u,p=1+u,m=[d,d,p,d,p,p,d,d,p,p,d,p],g=6,y=6,v=3,x=2,b=1,_=new Float32Array(v*y*g),S=new Float32Array(x*y*g),M=new Float32Array(b*y*g);for(let t=0;t<g;t++){const i=t%3*2/3-1,r=t>2?0:-1,a=[i,r,0,i+2/3,r,0,i+2/3,r+1,0,i,r,0,i+2/3,r+1,0,i,r+1,0];_.set(a,v*y*t),S.set(m,x*y*t);const o=[t,t,t,t,t,t];M.set(o,b*y*t)}const w=new BufferGeometry;w.setAttribute("position",new BufferAttribute(_,v)),w.setAttribute("uv",new BufferAttribute(S,x)),w.setAttribute("faceIndex",new BufferAttribute(M,b)),i.push(w),o>4&&o--}return{lodPlanes:i,sizeLods:r,sigmas:a}}(a)),this._blurMaterial=function _getBlurShader(t,i,r){const a=new Float32Array(hr),o=new Vector3(0,1,0),l=new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:hr,CUBEUV_TEXEL_WIDTH:1/i,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return l}(a,t,i)}return a}_compileMaterial(t){const i=new Mesh(this._lodPlanes[0],t);this._renderer.compile(i,ur)}_sceneToCubeUV(t,i,r,a){const o=new PerspectiveCamera(90,1,i,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.autoClear,d=h.toneMapping;h.getClearColor(dr),h.toneMapping=G,h.autoClear=!1;const p=new MeshBasicMaterial({name:"PMREM.Background",side:v,depthWrite:!1,depthTest:!1}),m=new Mesh(new BoxGeometry,p);let g=!1;const y=t.background;y?y.isColor&&(p.color.copy(y),t.background=null,g=!0):(p.color.copy(dr),g=!0);for(let i=0;i<6;i++){const r=i%3;0===r?(o.up.set(0,l[i],0),o.lookAt(c[i],0,0)):1===r?(o.up.set(0,0,l[i]),o.lookAt(0,c[i],0)):(o.up.set(0,l[i],0),o.lookAt(0,0,c[i]));const u=this._cubeSize;_setViewport(a,r*u,i>2?u:0,u,u),h.setRenderTarget(a),g&&h.render(m,o),h.render(t,o)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=d,h.autoClear=u,t.background=y}_textureToCubeUV(t,i){const r=this._renderer,a=t.mapping===Q||t.mapping===J;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const o=a?this._cubemapMaterial:this._equirectMaterial,l=new Mesh(this._lodPlanes[0],o);o.uniforms.envMap.value=t;const c=this._cubeSize;_setViewport(i,0,0,3*c,2*c),r.setRenderTarget(i),r.render(l,ur)}_applyPMREM(t){const i=this._renderer,r=i.autoClear;i.autoClear=!1;const a=this._lodPlanes.length;for(let i=1;i<a;i++){const r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=xr[(a-i-1)%xr.length];this._blur(t,i-1,i,r,o)}i.autoClear=r}_blur(t,i,r,a,o){const l=this._pingPongRenderTarget;this._halfBlur(t,l,i,r,a,"latitudinal",o),this._halfBlur(l,t,r,r,a,"longitudinal",o)}_halfBlur(t,i,r,a,o,l,c){const h=this._renderer,u=this._blurMaterial,d=new Mesh(this._lodPlanes[a],u),p=u.uniforms,m=this._sizeLods[r]-1,g=isFinite(o)?Math.PI/(2*m):2*Math.PI/39,y=o/g,v=isFinite(o)?1+Math.floor(3*y):hr,x=[];let b=0;for(let t=0;t<hr;++t){const i=t/y,r=Math.exp(-i*i/2);x.push(r),0===t?b+=r:t<v&&(b+=2*r)}for(let t=0;t<x.length;t++)x[t]=x[t]/b;p.envMap.value=t.texture,p.samples.value=v,p.weights.value=x,p.latitudinal.value="latitudinal"===l,c&&(p.poleAxis.value=c);const{_lodMax:_}=this;p.dTheta.value=g,p.mipInt.value=_-r;const S=this._sizeLods[a];_setViewport(i,3*S*(a>_-4?a-_+4:0),4*(this._cubeSize-S),3*S,2*S),h.setRenderTarget(i),h.render(d,ur)}}function _createRenderTarget(t,i,r){const a=new WebGLRenderTarget(t,i,r);return a.texture.mapping=ee,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function _setViewport(t,i,r,a,o){t.viewport.set(i,r,a,o),t.scissor.set(i,r,a,o)}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(t){let i=new WeakMap,r=null;function onTextureDispose(t){const r=t.target;r.removeEventListener("dispose",onTextureDispose);const a=i.get(r);void 0!==a&&(i.delete(r),a.dispose())}return{get:function get(a){if(a&&a.isTexture){const o=a.mapping,l=303===o||304===o,c=o===Q||o===J;if(l||c){let o=i.get(a);const h=void 0!==o?o.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return null===r&&(r=new PMREMGenerator(t)),o=l?r.fromEquirectangular(a,o):r.fromCubemap(a,o),o.texture.pmremVersion=a.pmremVersion,i.set(a,o),o.texture;if(void 0!==o)return o.texture;{const h=a.image;return l&&h&&h.height>0||c&&h&&function isCubeTextureComplete(t){let i=0;const r=6;for(let a=0;a<r;a++)void 0!==t[a]&&i++;return i===r}(h)?(null===r&&(r=new PMREMGenerator(t)),o=l?r.fromEquirectangular(a):r.fromCubemap(a),o.texture.pmremVersion=a.pmremVersion,i.set(a,o),a.addEventListener("dispose",onTextureDispose),o.texture):null}}}return a},dispose:function dispose(){i=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function WebGLExtensions(t){const i={};function getExtension(r){if(void 0!==i[r])return i[r];let a;switch(r){case"WEBGL_depth_texture":a=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=t.getExtension(r)}return i[r]=a,a}return{has:function(t){return null!==getExtension(t)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(t){const i=getExtension(t);return null===i&&warnOnce("THREE.WebGLRenderer: "+t+" extension not supported."),i}}}function WebGLGeometries(t,i,r,a){const o={},l=new WeakMap;function onGeometryDispose(t){const c=t.target;null!==c.index&&i.remove(c.index);for(const t in c.attributes)i.remove(c.attributes[t]);for(const t in c.morphAttributes){const r=c.morphAttributes[t];for(let t=0,a=r.length;t<a;t++)i.remove(r[t])}c.removeEventListener("dispose",onGeometryDispose),delete o[c.id];const h=l.get(c);h&&(i.remove(h),l.delete(c)),a.releaseStatesOfGeometry(c),!0===c.isInstancedBufferGeometry&&delete c._maxInstanceCount,r.memory.geometries--}function updateWireframeAttribute(t){const r=[],a=t.index,o=t.attributes.position;let c=0;if(null!==a){const t=a.array;c=a.version;for(let i=0,a=t.length;i<a;i+=3){const a=t[i+0],o=t[i+1],l=t[i+2];r.push(a,o,o,l,l,a)}}else{if(void 0===o)return;{const t=o.array;c=o.version;for(let i=0,a=t.length/3-1;i<a;i+=3){const t=i+0,a=i+1,o=i+2;r.push(t,a,a,o,o,t)}}}const h=new(arrayNeedsUint32(r)?Uint32BufferAttribute:Uint16BufferAttribute)(r,1);h.version=c;const u=l.get(t);u&&i.remove(u),l.set(t,h)}return{get:function get(t,i){return!0===o[i.id]||(i.addEventListener("dispose",onGeometryDispose),o[i.id]=!0,r.memory.geometries++),i},update:function update(r){const a=r.attributes;for(const r in a)i.update(a[r],t.ARRAY_BUFFER);const o=r.morphAttributes;for(const r in o){const a=o[r];for(let r=0,o=a.length;r<o;r++)i.update(a[r],t.ARRAY_BUFFER)}},getWireframeAttribute:function getWireframeAttribute(t){const i=l.get(t);if(i){const r=t.index;null!==r&&i.version<r.version&&updateWireframeAttribute(t)}else updateWireframeAttribute(t);return l.get(t)}}}function WebGLIndexedBufferRenderer(t,i,r){let a,o,l;function renderInstances(i,c,h){0!==h&&(t.drawElementsInstanced(a,c,o,i*l,h),r.update(c,a,h))}this.setMode=function setMode(t){a=t},this.setIndex=function setIndex(t){o=t.type,l=t.bytesPerElement},this.render=function render(i,c){t.drawElements(a,c,o,i*l),r.update(c,a,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function renderMultiDraw(t,l,c){if(0===c)return;i.get("WEBGL_multi_draw").multiDrawElementsWEBGL(a,l,0,o,t,0,c);let h=0;for(let t=0;t<c;t++)h+=l[t];r.update(h,a,1)},this.renderMultiDrawInstances=function renderMultiDrawInstances(t,c,h,u){if(0===h)return;const d=i.get("WEBGL_multi_draw");if(null===d)for(let i=0;i<t.length;i++)renderInstances(t[i]/l,c[i],u[i]);else{d.multiDrawElementsInstancedWEBGL(a,c,0,o,t,0,u,0,h);let i=0;for(let t=0;t<h;t++)i+=c[t];for(let t=0;t<u.length;t++)r.update(i,a,u[t])}}}function WebGLInfo(t){const i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:i,programs:null,autoReset:!0,reset:function reset(){i.calls=0,i.triangles=0,i.points=0,i.lines=0},update:function update(r,a,o){switch(i.calls++,a){case t.TRIANGLES:i.triangles+=o*(r/3);break;case t.LINES:i.lines+=o*(r/2);break;case t.LINE_STRIP:i.lines+=o*(r-1);break;case t.LINE_LOOP:i.lines+=o*r;break;case t.POINTS:i.points+=o*r}}}}function WebGLMorphtargets(t,i,r){const a=new WeakMap,o=new Vector4;return{update:function update(l,c,h){const u=l.morphTargetInfluences,d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let m=a.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const g=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,v=void 0!==c.morphAttributes.color,x=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===y&&(S=2),!0===v&&(S=3);let M=c.attributes.position.count*S,w=1;M>i.maxTextureSize&&(w=Math.ceil(M/i.maxTextureSize),M=i.maxTextureSize);const E=new Float32Array(M*w*4*p),T=new DataArrayTexture(E,M,w,p);T.type=ge,T.needsUpdate=!0;const A=4*S;for(let C=0;C<p;C++){const P=x[C],R=b[C],I=_[C],D=M*w*4*C;for(let L=0;L<P.count;L++){const N=L*A;!0===g&&(o.fromBufferAttribute(P,L),E[D+N+0]=o.x,E[D+N+1]=o.y,E[D+N+2]=o.z,E[D+N+3]=0),!0===y&&(o.fromBufferAttribute(R,L),E[D+N+4]=o.x,E[D+N+5]=o.y,E[D+N+6]=o.z,E[D+N+7]=0),!0===v&&(o.fromBufferAttribute(I,L),E[D+N+8]=o.x,E[D+N+9]=o.y,E[D+N+10]=o.z,E[D+N+11]=4===I.itemSize?o.w:1)}}function disposeTexture(){T.dispose(),a.delete(c),c.removeEventListener("dispose",disposeTexture)}m={count:p,texture:T,size:new Vector2(M,w)},a.set(c,m),c.addEventListener("dispose",disposeTexture)}if(!0===l.isInstancedMesh&&null!==l.morphTexture)h.getUniforms().setValue(t,"morphTexture",l.morphTexture,r);else{let O=0;for(let B=0;B<u.length;B++)O+=u[B];const U=c.morphTargetsRelative?1:1-O;h.getUniforms().setValue(t,"morphTargetBaseInfluence",U),h.getUniforms().setValue(t,"morphTargetInfluences",u)}h.getUniforms().setValue(t,"morphTargetsTexture",m.texture,r),h.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}}}function WebGLObjects(t,i,r,a){let o=new WeakMap;function onInstancedMeshDispose(t){const i=t.target;i.removeEventListener("dispose",onInstancedMeshDispose),r.remove(i.instanceMatrix),null!==i.instanceColor&&r.remove(i.instanceColor)}return{update:function update(l){const c=a.render.frame,h=l.geometry,u=i.get(l,h);if(o.get(u)!==c&&(i.update(u),o.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",onInstancedMeshDispose)&&l.addEventListener("dispose",onInstancedMeshDispose),o.get(l)!==c&&(r.update(l.instanceMatrix,t.ARRAY_BUFFER),null!==l.instanceColor&&r.update(l.instanceColor,t.ARRAY_BUFFER),o.set(l,c))),l.isSkinnedMesh){const t=l.skeleton;o.get(t)!==c&&(t.update(),o.set(t,c))}return u},dispose:function dispose(){o=new WeakMap}}}class DepthTexture extends Texture{constructor(t,i,r,a,o,l,c,h,u,d=1026){if(d!==Ae&&d!==Ce)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&d===Ae&&(r=fe),void 0===r&&d===Ce&&(r=be),super(null,a,o,l,c,h,d,r,u),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=void 0!==c?c:re,this.minFilter=void 0!==h?h:re,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const i=super.toJSON(t);return null!==this.compareFunction&&(i.compareFunction=this.compareFunction),i}}const br=new Texture,_r=new DepthTexture(1,1),Sr=new DataArrayTexture,Mr=new Data3DTexture,wr=new CubeTexture,Er=[],Tr=[],Ar=new Float32Array(16),Cr=new Float32Array(9),Pr=new Float32Array(4);function flatten(t,i,r){const a=t[0];if(a<=0||a>0)return t;const o=i*r;let l=Er[o];if(void 0===l&&(l=new Float32Array(o),Er[o]=l),0!==i){a.toArray(l,0);for(let a=1,o=0;a!==i;++a)o+=r,t[a].toArray(l,o)}return l}function arraysEqual(t,i){if(t.length!==i.length)return!1;for(let r=0,a=t.length;r<a;r++)if(t[r]!==i[r])return!1;return!0}function copyArray(t,i){for(let r=0,a=i.length;r<a;r++)t[r]=i[r]}function allocTexUnits(t,i){let r=Tr[i];void 0===r&&(r=new Int32Array(i),Tr[i]=r);for(let a=0;a!==i;++a)r[a]=t.allocateTextureUnit();return r}function setValueV1f(t,i){const r=this.cache;r[0]!==i&&(t.uniform1f(this.addr,i),r[0]=i)}function setValueV2f(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y||(t.uniform2f(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(arraysEqual(r,i))return;t.uniform2fv(this.addr,i),copyArray(r,i)}}function setValueV3f(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z||(t.uniform3f(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else if(void 0!==i.r)r[0]===i.r&&r[1]===i.g&&r[2]===i.b||(t.uniform3f(this.addr,i.r,i.g,i.b),r[0]=i.r,r[1]=i.g,r[2]=i.b);else{if(arraysEqual(r,i))return;t.uniform3fv(this.addr,i),copyArray(r,i)}}function setValueV4f(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z&&r[3]===i.w||(t.uniform4f(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(arraysEqual(r,i))return;t.uniform4fv(this.addr,i),copyArray(r,i)}}function setValueM2(t,i){const r=this.cache,a=i.elements;if(void 0===a){if(arraysEqual(r,i))return;t.uniformMatrix2fv(this.addr,!1,i),copyArray(r,i)}else{if(arraysEqual(r,a))return;Pr.set(a),t.uniformMatrix2fv(this.addr,!1,Pr),copyArray(r,a)}}function setValueM3(t,i){const r=this.cache,a=i.elements;if(void 0===a){if(arraysEqual(r,i))return;t.uniformMatrix3fv(this.addr,!1,i),copyArray(r,i)}else{if(arraysEqual(r,a))return;Cr.set(a),t.uniformMatrix3fv(this.addr,!1,Cr),copyArray(r,a)}}function setValueM4(t,i){const r=this.cache,a=i.elements;if(void 0===a){if(arraysEqual(r,i))return;t.uniformMatrix4fv(this.addr,!1,i),copyArray(r,i)}else{if(arraysEqual(r,a))return;Ar.set(a),t.uniformMatrix4fv(this.addr,!1,Ar),copyArray(r,a)}}function setValueV1i(t,i){const r=this.cache;r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i)}function setValueV2i(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y||(t.uniform2i(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(arraysEqual(r,i))return;t.uniform2iv(this.addr,i),copyArray(r,i)}}function setValueV3i(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z||(t.uniform3i(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else{if(arraysEqual(r,i))return;t.uniform3iv(this.addr,i),copyArray(r,i)}}function setValueV4i(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z&&r[3]===i.w||(t.uniform4i(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(arraysEqual(r,i))return;t.uniform4iv(this.addr,i),copyArray(r,i)}}function setValueV1ui(t,i){const r=this.cache;r[0]!==i&&(t.uniform1ui(this.addr,i),r[0]=i)}function setValueV2ui(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y||(t.uniform2ui(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(arraysEqual(r,i))return;t.uniform2uiv(this.addr,i),copyArray(r,i)}}function setValueV3ui(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z||(t.uniform3ui(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else{if(arraysEqual(r,i))return;t.uniform3uiv(this.addr,i),copyArray(r,i)}}function setValueV4ui(t,i){const r=this.cache;if(void 0!==i.x)r[0]===i.x&&r[1]===i.y&&r[2]===i.z&&r[3]===i.w||(t.uniform4ui(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(arraysEqual(r,i))return;t.uniform4uiv(this.addr,i),copyArray(r,i)}}function setValueT1(t,i,r){const a=this.cache,o=r.allocateTextureUnit();let l;a[0]!==o&&(t.uniform1i(this.addr,o),a[0]=o),this.type===t.SAMPLER_2D_SHADOW?(_r.compareFunction=Dt,l=_r):l=br,r.setTexture2D(i||l,o)}function setValueT3D1(t,i,r){const a=this.cache,o=r.allocateTextureUnit();a[0]!==o&&(t.uniform1i(this.addr,o),a[0]=o),r.setTexture3D(i||Mr,o)}function setValueT6(t,i,r){const a=this.cache,o=r.allocateTextureUnit();a[0]!==o&&(t.uniform1i(this.addr,o),a[0]=o),r.setTextureCube(i||wr,o)}function setValueT2DArray1(t,i,r){const a=this.cache,o=r.allocateTextureUnit();a[0]!==o&&(t.uniform1i(this.addr,o),a[0]=o),r.setTexture2DArray(i||Sr,o)}function setValueV1fArray(t,i){t.uniform1fv(this.addr,i)}function setValueV2fArray(t,i){const r=flatten(i,this.size,2);t.uniform2fv(this.addr,r)}function setValueV3fArray(t,i){const r=flatten(i,this.size,3);t.uniform3fv(this.addr,r)}function setValueV4fArray(t,i){const r=flatten(i,this.size,4);t.uniform4fv(this.addr,r)}function setValueM2Array(t,i){const r=flatten(i,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function setValueM3Array(t,i){const r=flatten(i,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function setValueM4Array(t,i){const r=flatten(i,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function setValueV1iArray(t,i){t.uniform1iv(this.addr,i)}function setValueV2iArray(t,i){t.uniform2iv(this.addr,i)}function setValueV3iArray(t,i){t.uniform3iv(this.addr,i)}function setValueV4iArray(t,i){t.uniform4iv(this.addr,i)}function setValueV1uiArray(t,i){t.uniform1uiv(this.addr,i)}function setValueV2uiArray(t,i){t.uniform2uiv(this.addr,i)}function setValueV3uiArray(t,i){t.uniform3uiv(this.addr,i)}function setValueV4uiArray(t,i){t.uniform4uiv(this.addr,i)}function setValueT1Array(t,i,r){const a=this.cache,o=i.length,l=allocTexUnits(r,o);arraysEqual(a,l)||(t.uniform1iv(this.addr,l),copyArray(a,l));for(let t=0;t!==o;++t)r.setTexture2D(i[t]||br,l[t])}function setValueT3DArray(t,i,r){const a=this.cache,o=i.length,l=allocTexUnits(r,o);arraysEqual(a,l)||(t.uniform1iv(this.addr,l),copyArray(a,l));for(let t=0;t!==o;++t)r.setTexture3D(i[t]||Mr,l[t])}function setValueT6Array(t,i,r){const a=this.cache,o=i.length,l=allocTexUnits(r,o);arraysEqual(a,l)||(t.uniform1iv(this.addr,l),copyArray(a,l));for(let t=0;t!==o;++t)r.setTextureCube(i[t]||wr,l[t])}function setValueT2DArrayArray(t,i,r){const a=this.cache,o=i.length,l=allocTexUnits(r,o);arraysEqual(a,l)||(t.uniform1iv(this.addr,l),copyArray(a,l));for(let t=0;t!==o;++t)r.setTexture2DArray(i[t]||Sr,l[t])}class SingleUniform{constructor(t,i,r){this.id=t,this.addr=r,this.cache=[],this.type=i.type,this.setValue=function getSingularSetter(t){switch(t){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(i.type)}}class PureArrayUniform{constructor(t,i,r){this.id=t,this.addr=r,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=function getPureArraySetter(t){switch(t){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(i.type)}}class StructuredUniform{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,r){const a=this.seq;for(let o=0,l=a.length;o!==l;++o){const l=a[o];l.setValue(t,i[l.id],r)}}}const Rr=/(\w+)(\])?(\[|\.)?/g;function addUniform(t,i){t.seq.push(i),t.map[i.id]=i}function parseUniform(t,i,r){const a=t.name,o=a.length;for(Rr.lastIndex=0;;){const l=Rr.exec(a),c=Rr.lastIndex;let h=l[1];const u="]"===l[2],d=l[3];if(u&&(h|=0),void 0===d||"["===d&&c+2===o){addUniform(r,void 0===d?new SingleUniform(h,t,i):new PureArrayUniform(h,t,i));break}{let t=r.map[h];void 0===t&&(t=new StructuredUniform(h),addUniform(r,t)),r=t}}}class WebGLUniforms{constructor(t,i){this.seq=[],this.map={};const r=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){const r=t.getActiveUniform(i,a);parseUniform(r,t.getUniformLocation(i,r.name),this)}}setValue(t,i,r,a){const o=this.map[i];void 0!==o&&o.setValue(t,r,a)}setOptional(t,i,r){const a=i[r];void 0!==a&&this.setValue(t,r,a)}static upload(t,i,r,a){for(let o=0,l=i.length;o!==l;++o){const l=i[o],c=r[l.id];!1!==c.needsUpdate&&l.setValue(t,c.value,a)}}static seqWithValue(t,i){const r=[];for(let a=0,o=t.length;a!==o;++a){const o=t[a];o.id in i&&r.push(o)}return r}}function WebGLShader(t,i,r){const a=t.createShader(i);return t.shaderSource(a,r),t.compileShader(a),a}const Ir=37297;let Dr=0;function getShaderErrors(t,i,r){const a=t.getShaderParameter(i,t.COMPILE_STATUS),o=t.getShaderInfoLog(i).trim();if(a&&""===o)return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const a=parseInt(l[1]);return r.toUpperCase()+"\n\n"+o+"\n\n"+function handleSource(t,i){const r=t.split("\n"),a=[],o=Math.max(i-6,0),l=Math.min(i+6,r.length);for(let t=o;t<l;t++){const o=t+1;a.push(`${o===i?">":" "} ${o}: ${r[t]}`)}return a.join("\n")}(t.getShaderSource(i),a)}return o}function getTexelEncodingFunction(t,i){const r=function getEncodingComponents(t){const i=ei.getPrimaries(ei.workingColorSpace),r=ei.getPrimaries(t);let a;switch(i===r?a="":i===At&&r===Tt?a="LinearDisplayP3ToLinearSRGB":i===Tt&&r===At&&(a="LinearSRGBToLinearDisplayP3"),t){case _t:case Mt:return[a,"LinearTransferOETF"];case bt:case St:return[a,"sRGBTransferOETF"];default:return[a,"LinearTransferOETF"]}}(i);return`vec4 ${t}( vec4 value ) { return ${r[0]}( ${r[1]}( value ) ); }`}function getToneMappingFunction(t,i){let r;switch(i){case H:r="Linear";break;case W:r="Reinhard";break;case j:r="OptimizedCineon";break;case X:r="ACESFilmic";break;case Y:r="AgX";break;case K:r="Neutral";break;case q:r="Custom";break;default:r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const Lr=new Vector3;function getLuminanceFunction(){ei.getLuminanceCoefficients(Lr);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Lr.x.toFixed(4)}, ${Lr.y.toFixed(4)}, ${Lr.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(t){return""!==t}function replaceLightNums(t,i){const r=i.numSpotLightShadows+i.numSpotLightMaps-i.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,i.numDirLights).replace(/NUM_SPOT_LIGHTS/g,i.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,i.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,i.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,i.numPointLights).replace(/NUM_HEMI_LIGHTS/g,i.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,i.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,i.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,i.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,i.numPointLightShadows)}function replaceClippingPlaneNums(t,i){return t.replace(/NUM_CLIPPING_PLANES/g,i.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,i.numClippingPlanes-i.numClipIntersection)}const Nr=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(t){return t.replace(Nr,includeReplacer)}const Fr=new Map;function includeReplacer(t,i){let r=nr[i];if(void 0===r){const t=Fr.get(i);if(void 0===t)throw new Error("Can not resolve #include <"+i+">");r=nr[t]}return resolveIncludes(r)}const Or=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(t){return t.replace(Or,loopReplacer)}function loopReplacer(t,i,r,a){let o="";for(let t=parseInt(i);t<parseInt(r);t++)o+=a.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return o}function generatePrecision(t){let i=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?i+="\n#define HIGH_PRECISION":"mediump"===t.precision?i+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(i+="\n#define LOW_PRECISION"),i}function WebGLProgram(t,i,r,a){const o=t.getContext(),l=r.defines;let c=r.vertexShader,h=r.fragmentShader;const u=function generateShadowMapTypeDefine(t){let i="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===p?i="SHADOWMAP_TYPE_PCF":t.shadowMapType===m?i="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===g&&(i="SHADOWMAP_TYPE_VSM"),i}(r),d=function generateEnvMapTypeDefine(t){let i="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Q:case J:i="ENVMAP_TYPE_CUBE";break;case ee:i="ENVMAP_TYPE_CUBE_UV"}return i}(r),y=function generateEnvMapModeDefine(t){let i="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===J&&(i="ENVMAP_MODE_REFRACTION");return i}(r),v=function generateEnvMapBlendingDefine(t){let i="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case z:i="ENVMAP_BLENDING_MULTIPLY";break;case V:i="ENVMAP_BLENDING_MIX";break;case k:i="ENVMAP_BLENDING_ADD"}return i}(r),x=function generateCubeUVSize(t){const i=t.envMapCubeUVHeight;if(null===i)return null;const r=Math.log2(i)-2,a=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:a,maxMip:r}}(r),b=function generateVertexExtensions(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(r),_=function generateDefines(t){const i=[];for(const r in t){const a=t[r];!1!==a&&i.push("#define "+r+" "+a)}return i.join("\n")}(l),S=o.createProgram();let M,w,E=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(M=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,_].filter(filterEmptyLine).join("\n"),M.length>0&&(M+="\n"),w=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,_].filter(filterEmptyLine).join("\n"),w.length>0&&(w+="\n")):(M=[generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,_,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+y:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),w=[generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,_,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.envMap?"#define "+y:"",r.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==G?"#define TONE_MAPPING":"",r.toneMapping!==G?nr.tonemapping_pars_fragment:"",r.toneMapping!==G?getToneMappingFunction("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",nr.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",r.outputColorSpace),getLuminanceFunction(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),c=resolveIncludes(c),c=replaceLightNums(c,r),c=replaceClippingPlaneNums(c,r),h=resolveIncludes(h),h=replaceLightNums(h,r),h=replaceClippingPlaneNums(h,r),c=unrollLoops(c),h=unrollLoops(h),!0!==r.isRawShaderMaterial&&(E="#version 300 es\n",M=[b,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+M,w=["#define varying in",r.glslVersion===Bt?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Bt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+w);const T=E+M+c,A=E+w+h,C=WebGLShader(o,o.VERTEX_SHADER,T),P=WebGLShader(o,o.FRAGMENT_SHADER,A);function onFirstUse(i){if(t.debug.checkShaderErrors){const r=o.getProgramInfoLog(S).trim(),a=o.getShaderInfoLog(C).trim(),l=o.getShaderInfoLog(P).trim();let c=!0,h=!0;if(!1===o.getProgramParameter(S,o.LINK_STATUS))if(c=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(o,S,C,P);else{getShaderErrors(o,C,"vertex"),getShaderErrors(o,P,"fragment")}else""!==r||""!==a&&""!==l||(h=!1);h&&(i.diagnostics={runnable:c,programLog:r,vertexShader:{log:a,prefix:M},fragmentShader:{log:l,prefix:w}})}o.deleteShader(C),o.deleteShader(P),R=new WebGLUniforms(o,S),I=function fetchAttributeLocations(t,i){const r={},a=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES);for(let o=0;o<a;o++){const a=t.getActiveAttrib(i,o),l=a.name;let c=1;a.type===t.FLOAT_MAT2&&(c=2),a.type===t.FLOAT_MAT3&&(c=3),a.type===t.FLOAT_MAT4&&(c=4),r[l]={type:a.type,location:t.getAttribLocation(i,l),locationSize:c}}return r}(o,S)}let R,I;o.attachShader(S,C),o.attachShader(S,P),void 0!==r.index0AttributeName?o.bindAttribLocation(S,0,r.index0AttributeName):!0===r.morphTargets&&o.bindAttribLocation(S,0,"position"),o.linkProgram(S),this.getUniforms=function(){return void 0===R&&onFirstUse(this),R},this.getAttributes=function(){return void 0===I&&onFirstUse(this),I};let D=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===D&&(D=o.getProgramParameter(S,Ir)),D},this.destroy=function(){a.releaseStatesOfProgram(this),o.deleteProgram(S),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Dr++,this.cacheKey=i,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=P,this}let Ur=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,r=t.fragmentShader,a=this._getShaderStage(i),o=this._getShaderStage(r),l=this._getShaderCacheForMaterial(t);return!1===l.has(a)&&(l.add(a),a.usedTimes++),!1===l.has(o)&&(l.add(o),o.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const t of i)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;let r=i.get(t);return void 0===r&&(r=new Set,i.set(t,r)),r}_getShaderStage(t){const i=this.shaderCache;let r=i.get(t);return void 0===r&&(r=new WebGLShaderStage(t),i.set(t,r)),r}}class WebGLShaderStage{constructor(t){this.id=Ur++,this.code=t,this.usedTimes=0}}function WebGLPrograms(t,i,r,a,o,l,c){const h=new Layers,u=new WebGLShaderCache,d=new Set,p=[],m=o.logarithmicDepthBuffer,g=o.vertexTextures;let y=o.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(t){return d.add(t),0===t?"uv":`uv${t}`}return{getParameters:function getParameters(l,h,p,b,_){const S=b.fog,M=_.geometry,w=l.isMeshStandardMaterial?b.environment:null,E=(l.isMeshStandardMaterial?r:i).get(l.envMap||w),T=E&&E.mapping===ee?E.image.height:null,A=x[l.type];null!==l.precision&&(y=o.getMaxPrecision(l.precision),l.precision);const C=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,P=void 0!==C?C.length:0;let R,I,D,L,N=0;if(void 0!==M.morphAttributes.position&&(N=1),void 0!==M.morphAttributes.normal&&(N=2),void 0!==M.morphAttributes.color&&(N=3),A){const t=sr[A];R=t.vertexShader,I=t.fragmentShader}else R=l.vertexShader,I=l.fragmentShader,u.update(l),D=u.getVertexShaderID(l),L=u.getFragmentShaderID(l);const O=t.getRenderTarget(),U=!0===_.isInstancedMesh,B=!0===_.isBatchedMesh,z=!!l.map,V=!!l.matcap,k=!!E,H=!!l.aoMap,W=!!l.lightMap,j=!!l.bumpMap,X=!!l.normalMap,q=!!l.displacementMap,Y=!!l.emissiveMap,K=!!l.metalnessMap,Z=!!l.roughnessMap,Q=l.anisotropy>0,J=l.clearcoat>0,$=l.dispersion>0,te=l.iridescence>0,ie=l.sheen>0,ne=l.transmission>0,re=Q&&!!l.anisotropyMap,se=J&&!!l.clearcoatMap,ae=J&&!!l.clearcoatNormalMap,oe=J&&!!l.clearcoatRoughnessMap,le=te&&!!l.iridescenceMap,ce=te&&!!l.iridescenceThicknessMap,he=ie&&!!l.sheenColorMap,ue=ie&&!!l.sheenRoughnessMap,de=!!l.specularMap,pe=!!l.specularColorMap,me=!!l.specularIntensityMap,fe=ne&&!!l.transmissionMap,ge=ne&&!!l.thicknessMap,ye=!!l.gradientMap,ve=!!l.alphaMap,xe=l.alphaTest>0,be=!!l.alphaHash,_e=!!l.extensions;let Se=G;l.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(Se=t.toneMapping));const Me={shaderID:A,shaderType:l.type,shaderName:l.name,vertexShader:R,fragmentShader:I,defines:l.defines,customVertexShaderID:D,customFragmentShaderID:L,isRawShaderMaterial:!0===l.isRawShaderMaterial,glslVersion:l.glslVersion,precision:y,batching:B,batchingColor:B&&null!==_._colorsTexture,instancing:U,instancingColor:U&&null!==_.instanceColor,instancingMorph:U&&null!==_.morphTexture,supportsVertexTextures:g,outputColorSpace:null===O?t.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:_t,alphaToCoverage:!!l.alphaToCoverage,map:z,matcap:V,envMap:k,envMapMode:k&&E.mapping,envMapCubeUVHeight:T,aoMap:H,lightMap:W,bumpMap:j,normalMap:X,displacementMap:g&&q,emissiveMap:Y,normalMapObjectSpace:X&&1===l.normalMapType,normalMapTangentSpace:X&&0===l.normalMapType,metalnessMap:K,roughnessMap:Z,anisotropy:Q,anisotropyMap:re,clearcoat:J,clearcoatMap:se,clearcoatNormalMap:ae,clearcoatRoughnessMap:oe,dispersion:$,iridescence:te,iridescenceMap:le,iridescenceThicknessMap:ce,sheen:ie,sheenColorMap:he,sheenRoughnessMap:ue,specularMap:de,specularColorMap:pe,specularIntensityMap:me,transmission:ne,transmissionMap:fe,thicknessMap:ge,gradientMap:ye,opaque:!1===l.transparent&&1===l.blending&&!1===l.alphaToCoverage,alphaMap:ve,alphaTest:xe,alphaHash:be,combine:l.combine,mapUv:z&&getChannel(l.map.channel),aoMapUv:H&&getChannel(l.aoMap.channel),lightMapUv:W&&getChannel(l.lightMap.channel),bumpMapUv:j&&getChannel(l.bumpMap.channel),normalMapUv:X&&getChannel(l.normalMap.channel),displacementMapUv:q&&getChannel(l.displacementMap.channel),emissiveMapUv:Y&&getChannel(l.emissiveMap.channel),metalnessMapUv:K&&getChannel(l.metalnessMap.channel),roughnessMapUv:Z&&getChannel(l.roughnessMap.channel),anisotropyMapUv:re&&getChannel(l.anisotropyMap.channel),clearcoatMapUv:se&&getChannel(l.clearcoatMap.channel),clearcoatNormalMapUv:ae&&getChannel(l.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:oe&&getChannel(l.clearcoatRoughnessMap.channel),iridescenceMapUv:le&&getChannel(l.iridescenceMap.channel),iridescenceThicknessMapUv:ce&&getChannel(l.iridescenceThicknessMap.channel),sheenColorMapUv:he&&getChannel(l.sheenColorMap.channel),sheenRoughnessMapUv:ue&&getChannel(l.sheenRoughnessMap.channel),specularMapUv:de&&getChannel(l.specularMap.channel),specularColorMapUv:pe&&getChannel(l.specularColorMap.channel),specularIntensityMapUv:me&&getChannel(l.specularIntensityMap.channel),transmissionMapUv:fe&&getChannel(l.transmissionMap.channel),thicknessMapUv:ge&&getChannel(l.thicknessMap.channel),alphaMapUv:ve&&getChannel(l.alphaMap.channel),vertexTangents:!!M.attributes.tangent&&(X||Q),vertexColors:l.vertexColors,vertexAlphas:!0===l.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,pointsUvs:!0===_.isPoints&&!!M.attributes.uv&&(z||ve),fog:!!S,useFog:!0===l.fog,fogExp2:!!S&&S.isFogExp2,flatShading:!0===l.flatShading,sizeAttenuation:!0===l.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==M.morphAttributes.position,morphNormals:void 0!==M.morphAttributes.normal,morphColors:void 0!==M.morphAttributes.color,morphTargetsCount:P,morphTextureStride:N,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numSpotLightMaps:h.spotLightMap.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numSpotLightShadowsWithMaps:h.numSpotLightShadowsWithMaps,numLightProbes:h.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:l.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:Se,decodeVideoTexture:z&&!0===l.map.isVideoTexture&&ei.getTransfer(l.map.colorSpace)===Et,premultipliedAlpha:l.premultipliedAlpha,doubleSided:2===l.side,flipSided:l.side===v,useDepthPacking:l.depthPacking>=0,depthPacking:l.depthPacking||0,index0AttributeName:l.index0AttributeName,extensionClipCullDistance:_e&&!0===l.extensions.clipCullDistance&&a.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(_e&&!0===l.extensions.multiDraw||B)&&a.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:a.has("KHR_parallel_shader_compile"),customProgramCacheKey:l.customProgramCacheKey()};return Me.vertexUv1s=d.has(1),Me.vertexUv2s=d.has(2),Me.vertexUv3s=d.has(3),d.clear(),Me},getProgramCacheKey:function getProgramCacheKey(i){const r=[];if(i.shaderID?r.push(i.shaderID):(r.push(i.customVertexShaderID),r.push(i.customFragmentShaderID)),void 0!==i.defines)for(const t in i.defines)r.push(t),r.push(i.defines[t]);return!1===i.isRawShaderMaterial&&(!function getProgramCacheKeyParameters(t,i){t.push(i.precision),t.push(i.outputColorSpace),t.push(i.envMapMode),t.push(i.envMapCubeUVHeight),t.push(i.mapUv),t.push(i.alphaMapUv),t.push(i.lightMapUv),t.push(i.aoMapUv),t.push(i.bumpMapUv),t.push(i.normalMapUv),t.push(i.displacementMapUv),t.push(i.emissiveMapUv),t.push(i.metalnessMapUv),t.push(i.roughnessMapUv),t.push(i.anisotropyMapUv),t.push(i.clearcoatMapUv),t.push(i.clearcoatNormalMapUv),t.push(i.clearcoatRoughnessMapUv),t.push(i.iridescenceMapUv),t.push(i.iridescenceThicknessMapUv),t.push(i.sheenColorMapUv),t.push(i.sheenRoughnessMapUv),t.push(i.specularMapUv),t.push(i.specularColorMapUv),t.push(i.specularIntensityMapUv),t.push(i.transmissionMapUv),t.push(i.thicknessMapUv),t.push(i.combine),t.push(i.fogExp2),t.push(i.sizeAttenuation),t.push(i.morphTargetsCount),t.push(i.morphAttributeCount),t.push(i.numDirLights),t.push(i.numPointLights),t.push(i.numSpotLights),t.push(i.numSpotLightMaps),t.push(i.numHemiLights),t.push(i.numRectAreaLights),t.push(i.numDirLightShadows),t.push(i.numPointLightShadows),t.push(i.numSpotLightShadows),t.push(i.numSpotLightShadowsWithMaps),t.push(i.numLightProbes),t.push(i.shadowMapType),t.push(i.toneMapping),t.push(i.numClippingPlanes),t.push(i.numClipIntersection),t.push(i.depthPacking)}(r,i),function getProgramCacheKeyBooleans(t,i){h.disableAll(),i.supportsVertexTextures&&h.enable(0);i.instancing&&h.enable(1);i.instancingColor&&h.enable(2);i.instancingMorph&&h.enable(3);i.matcap&&h.enable(4);i.envMap&&h.enable(5);i.normalMapObjectSpace&&h.enable(6);i.normalMapTangentSpace&&h.enable(7);i.clearcoat&&h.enable(8);i.iridescence&&h.enable(9);i.alphaTest&&h.enable(10);i.vertexColors&&h.enable(11);i.vertexAlphas&&h.enable(12);i.vertexUv1s&&h.enable(13);i.vertexUv2s&&h.enable(14);i.vertexUv3s&&h.enable(15);i.vertexTangents&&h.enable(16);i.anisotropy&&h.enable(17);i.alphaHash&&h.enable(18);i.batching&&h.enable(19);i.dispersion&&h.enable(20);i.batchingColor&&h.enable(21);t.push(h.mask),h.disableAll(),i.fog&&h.enable(0);i.useFog&&h.enable(1);i.flatShading&&h.enable(2);i.logarithmicDepthBuffer&&h.enable(3);i.skinning&&h.enable(4);i.morphTargets&&h.enable(5);i.morphNormals&&h.enable(6);i.morphColors&&h.enable(7);i.premultipliedAlpha&&h.enable(8);i.shadowMapEnabled&&h.enable(9);i.doubleSided&&h.enable(10);i.flipSided&&h.enable(11);i.useDepthPacking&&h.enable(12);i.dithering&&h.enable(13);i.transmission&&h.enable(14);i.sheen&&h.enable(15);i.opaque&&h.enable(16);i.pointsUvs&&h.enable(17);i.decodeVideoTexture&&h.enable(18);i.alphaToCoverage&&h.enable(19);t.push(h.mask)}(r,i),r.push(t.outputColorSpace)),r.push(i.customProgramCacheKey),r.join()},getUniforms:function getUniforms(t){const i=x[t.type];let r;if(i){const t=sr[i];r=qn.clone(t.uniforms)}else r=t.uniforms;return r},acquireProgram:function acquireProgram(i,r){let a;for(let t=0,i=p.length;t<i;t++){const i=p[t];if(i.cacheKey===r){a=i,++a.usedTimes;break}}return void 0===a&&(a=new WebGLProgram(t,r,i,l),p.push(a)),a},releaseProgram:function releaseProgram(t){if(0==--t.usedTimes){const i=p.indexOf(t);p[i]=p[p.length-1],p.pop(),t.destroy()}},releaseShaderCache:function releaseShaderCache(t){u.remove(t)},programs:p,dispose:function dispose(){u.dispose()}}}function WebGLProperties(){let t=new WeakMap;return{get:function get(i){let r=t.get(i);return void 0===r&&(r={},t.set(i,r)),r},remove:function remove(i){t.delete(i)},update:function update(i,r,a){t.get(i)[r]=a},dispose:function dispose(){t=new WeakMap}}}function painterSortStable(t,i){return t.groupOrder!==i.groupOrder?t.groupOrder-i.groupOrder:t.renderOrder!==i.renderOrder?t.renderOrder-i.renderOrder:t.material.id!==i.material.id?t.material.id-i.material.id:t.z!==i.z?t.z-i.z:t.id-i.id}function reversePainterSortStable(t,i){return t.groupOrder!==i.groupOrder?t.groupOrder-i.groupOrder:t.renderOrder!==i.renderOrder?t.renderOrder-i.renderOrder:t.z!==i.z?i.z-t.z:t.id-i.id}function WebGLRenderList(){const t=[];let i=0;const r=[],a=[],o=[];function getNextRenderItem(r,a,o,l,c,h){let u=t[i];return void 0===u?(u={id:r.id,object:r,geometry:a,material:o,groupOrder:l,renderOrder:r.renderOrder,z:c,group:h},t[i]=u):(u.id=r.id,u.object=r,u.geometry=a,u.material=o,u.groupOrder=l,u.renderOrder=r.renderOrder,u.z=c,u.group=h),i++,u}return{opaque:r,transmissive:a,transparent:o,init:function init(){i=0,r.length=0,a.length=0,o.length=0},push:function push(t,i,l,c,h,u){const d=getNextRenderItem(t,i,l,c,h,u);l.transmission>0?a.push(d):!0===l.transparent?o.push(d):r.push(d)},unshift:function unshift(t,i,l,c,h,u){const d=getNextRenderItem(t,i,l,c,h,u);l.transmission>0?a.unshift(d):!0===l.transparent?o.unshift(d):r.unshift(d)},finish:function finish(){for(let r=i,a=t.length;r<a;r++){const i=t[r];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function sort(t,i){r.length>1&&r.sort(t||painterSortStable),a.length>1&&a.sort(i||reversePainterSortStable),o.length>1&&o.sort(i||reversePainterSortStable)}}}function WebGLRenderLists(){let t=new WeakMap;return{get:function get(i,r){const a=t.get(i);let o;return void 0===a?(o=new WebGLRenderList,t.set(i,[o])):r>=a.length?(o=new WebGLRenderList,a.push(o)):o=a[r],o},dispose:function dispose(){t=new WeakMap}}}function UniformsCache(){const t={};return{get:function(i){if(void 0!==t[i.id])return t[i.id];let r;switch(i.type){case"DirectionalLight":r={direction:new Vector3,color:new gn};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new gn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Vector3,color:new gn,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new gn,groundColor:new gn};break;case"RectAreaLight":r={color:new gn,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return t[i.id]=r,r}}}let Br=0;function shadowCastingAndTexturingLightsFirst(t,i){return(i.castShadow?2:0)-(t.castShadow?2:0)+(i.map?1:0)-(t.map?1:0)}function WebGLLights(t){const i=new UniformsCache,r=function ShadowUniformsCache(){const t={};return{get:function(i){if(void 0!==t[i.id])return t[i.id];let r;switch(i.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return t[i.id]=r,r}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let t=0;t<9;t++)a.probe.push(new Vector3);const o=new Vector3,l=new Matrix4,c=new Matrix4;return{setup:function setup(o){let l=0,c=0,h=0;for(let t=0;t<9;t++)a.probe[t].set(0,0,0);let u=0,d=0,p=0,m=0,g=0,y=0,v=0,x=0,b=0,_=0,S=0;o.sort(shadowCastingAndTexturingLightsFirst);for(let t=0,M=o.length;t<M;t++){const M=o[t],w=M.color,E=M.intensity,T=M.distance,A=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)l+=w.r*E,c+=w.g*E,h+=w.b*E;else if(M.isLightProbe){for(let t=0;t<9;t++)a.probe[t].addScaledVector(M.sh.coefficients[t],E);S++}else if(M.isDirectionalLight){const t=i.get(M);if(t.color.copy(M.color).multiplyScalar(M.intensity),M.castShadow){const t=M.shadow,i=r.get(M);i.shadowIntensity=t.intensity,i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,a.directionalShadow[u]=i,a.directionalShadowMap[u]=A,a.directionalShadowMatrix[u]=M.shadow.matrix,y++}a.directional[u]=t,u++}else if(M.isSpotLight){const t=i.get(M);t.position.setFromMatrixPosition(M.matrixWorld),t.color.copy(w).multiplyScalar(E),t.distance=T,t.coneCos=Math.cos(M.angle),t.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),t.decay=M.decay,a.spot[p]=t;const o=M.shadow;if(M.map&&(a.spotLightMap[b]=M.map,b++,o.updateMatrices(M),M.castShadow&&_++),a.spotLightMatrix[p]=o.matrix,M.castShadow){const t=r.get(M);t.shadowIntensity=o.intensity,t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,a.spotShadow[p]=t,a.spotShadowMap[p]=A,x++}p++}else if(M.isRectAreaLight){const t=i.get(M);t.color.copy(w).multiplyScalar(E),t.halfWidth.set(.5*M.width,0,0),t.halfHeight.set(0,.5*M.height,0),a.rectArea[m]=t,m++}else if(M.isPointLight){const t=i.get(M);if(t.color.copy(M.color).multiplyScalar(M.intensity),t.distance=M.distance,t.decay=M.decay,M.castShadow){const t=M.shadow,i=r.get(M);i.shadowIntensity=t.intensity,i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,a.pointShadow[d]=i,a.pointShadowMap[d]=A,a.pointShadowMatrix[d]=M.shadow.matrix,v++}a.point[d]=t,d++}else if(M.isHemisphereLight){const t=i.get(M);t.skyColor.copy(M.color).multiplyScalar(E),t.groundColor.copy(M.groundColor).multiplyScalar(E),a.hemi[g]=t,g++}}m>0&&(!0===t.has("OES_texture_float_linear")?(a.rectAreaLTC1=rr.LTC_FLOAT_1,a.rectAreaLTC2=rr.LTC_FLOAT_2):(a.rectAreaLTC1=rr.LTC_HALF_1,a.rectAreaLTC2=rr.LTC_HALF_2)),a.ambient[0]=l,a.ambient[1]=c,a.ambient[2]=h;const M=a.hash;M.directionalLength===u&&M.pointLength===d&&M.spotLength===p&&M.rectAreaLength===m&&M.hemiLength===g&&M.numDirectionalShadows===y&&M.numPointShadows===v&&M.numSpotShadows===x&&M.numSpotMaps===b&&M.numLightProbes===S||(a.directional.length=u,a.spot.length=p,a.rectArea.length=m,a.point.length=d,a.hemi.length=g,a.directionalShadow.length=y,a.directionalShadowMap.length=y,a.pointShadow.length=v,a.pointShadowMap.length=v,a.spotShadow.length=x,a.spotShadowMap.length=x,a.directionalShadowMatrix.length=y,a.pointShadowMatrix.length=v,a.spotLightMatrix.length=x+b-_,a.spotLightMap.length=b,a.numSpotLightShadowsWithMaps=_,a.numLightProbes=S,M.directionalLength=u,M.pointLength=d,M.spotLength=p,M.rectAreaLength=m,M.hemiLength=g,M.numDirectionalShadows=y,M.numPointShadows=v,M.numSpotShadows=x,M.numSpotMaps=b,M.numLightProbes=S,a.version=Br++)},setupView:function setupView(t,i){let r=0,h=0,u=0,d=0,p=0;const m=i.matrixWorldInverse;for(let i=0,g=t.length;i<g;i++){const g=t[i];if(g.isDirectionalLight){const t=a.directional[r];t.direction.setFromMatrixPosition(g.matrixWorld),o.setFromMatrixPosition(g.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(m),r++}else if(g.isSpotLight){const t=a.spot[u];t.position.setFromMatrixPosition(g.matrixWorld),t.position.applyMatrix4(m),t.direction.setFromMatrixPosition(g.matrixWorld),o.setFromMatrixPosition(g.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(m),u++}else if(g.isRectAreaLight){const t=a.rectArea[d];t.position.setFromMatrixPosition(g.matrixWorld),t.position.applyMatrix4(m),c.identity(),l.copy(g.matrixWorld),l.premultiply(m),c.extractRotation(l),t.halfWidth.set(.5*g.width,0,0),t.halfHeight.set(0,.5*g.height,0),t.halfWidth.applyMatrix4(c),t.halfHeight.applyMatrix4(c),d++}else if(g.isPointLight){const t=a.point[h];t.position.setFromMatrixPosition(g.matrixWorld),t.position.applyMatrix4(m),h++}else if(g.isHemisphereLight){const t=a.hemi[p];t.direction.setFromMatrixPosition(g.matrixWorld),t.direction.transformDirection(m),p++}}},state:a}}function WebGLRenderState(t){const i=new WebGLLights(t),r=[],a=[];const o={lightsArray:r,shadowsArray:a,camera:null,lights:i,transmissionRenderTarget:{}};return{init:function init(t){o.camera=t,r.length=0,a.length=0},state:o,setupLights:function setupLights(){i.setup(r)},setupLightsView:function setupLightsView(t){i.setupView(r,t)},pushLight:function pushLight(t){r.push(t)},pushShadow:function pushShadow(t){a.push(t)}}}function WebGLRenderStates(t){let i=new WeakMap;return{get:function get(r,a=0){const o=i.get(r);let l;return void 0===o?(l=new WebGLRenderState(t),i.set(r,[l])):a>=o.length?(l=new WebGLRenderState(t),o.push(l)):l=o[a],l},dispose:function dispose(){i=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function WebGLShadowMap(t,i,r){let a=new Frustum;const o=new Vector2,l=new Vector2,c=new Vector4,h=new MeshDepthMaterial({depthPacking:3201}),u=new MeshDistanceMaterial,d={},m=r.maxTextureSize,b={[y]:v,[v]:y,[x]:2},_=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=_.clone();S.defines.HORIZONTAL_PASS=1;const M=new BufferGeometry;M.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Mesh(M,_),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p;let T=this.type;function VSMPass(r,a){const l=i.update(w);_.defines.VSM_SAMPLES!==r.blurSamples&&(_.defines.VSM_SAMPLES=r.blurSamples,S.defines.VSM_SAMPLES=r.blurSamples,_.needsUpdate=!0,S.needsUpdate=!0),null===r.mapPass&&(r.mapPass=new WebGLRenderTarget(o.x,o.y)),_.uniforms.shadow_pass.value=r.map.texture,_.uniforms.resolution.value=r.mapSize,_.uniforms.radius.value=r.radius,t.setRenderTarget(r.mapPass),t.clear(),t.renderBufferDirect(a,null,l,_,w,null),S.uniforms.shadow_pass.value=r.mapPass.texture,S.uniforms.resolution.value=r.mapSize,S.uniforms.radius.value=r.radius,t.setRenderTarget(r.map),t.clear(),t.renderBufferDirect(a,null,l,S,w,null)}function getDepthMaterial(i,r,a,o){let l=null;const c=!0===a.isPointLight?i.customDistanceMaterial:i.customDepthMaterial;if(void 0!==c)l=c;else if(l=!0===a.isPointLight?u:h,t.localClippingEnabled&&!0===r.clipShadows&&Array.isArray(r.clippingPlanes)&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0||r.map&&r.alphaTest>0){const t=l.uuid,i=r.uuid;let a=d[t];void 0===a&&(a={},d[t]=a);let o=a[i];void 0===o&&(o=l.clone(),a[i]=o,r.addEventListener("dispose",onMaterialDispose)),l=o}if(l.visible=r.visible,l.wireframe=r.wireframe,l.side=o===g?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:b[r.side],l.alphaMap=r.alphaMap,l.alphaTest=r.alphaTest,l.map=r.map,l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.displacementMap=r.displacementMap,l.displacementScale=r.displacementScale,l.displacementBias=r.displacementBias,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===a.isPointLight&&!0===l.isMeshDistanceMaterial){t.properties.get(l).light=a}return l}function renderObject(r,o,l,c,h){if(!1===r.visible)return;if(r.layers.test(o.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&h===g)&&(!r.frustumCulled||a.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,r.matrixWorld);const a=i.update(r),u=r.material;if(Array.isArray(u)){const i=a.groups;for(let d=0,p=i.length;d<p;d++){const p=i[d],m=u[p.materialIndex];if(m&&m.visible){const i=getDepthMaterial(r,m,c,h);r.onBeforeShadow(t,r,o,l,a,i,p),t.renderBufferDirect(l,null,a,i,r,p),r.onAfterShadow(t,r,o,l,a,i,p)}}}else if(u.visible){const i=getDepthMaterial(r,u,c,h);r.onBeforeShadow(t,r,o,l,a,i,null),t.renderBufferDirect(l,null,a,i,r,null),r.onAfterShadow(t,r,o,l,a,i,null)}}const u=r.children;for(let t=0,i=u.length;t<i;t++)renderObject(u[t],o,l,c,h)}function onMaterialDispose(t){t.target.removeEventListener("dispose",onMaterialDispose);for(const i in d){const r=d[i],a=t.target.uuid;if(a in r){r[a].dispose(),delete r[a]}}}this.render=function(i,r,h){if(!1===E.enabled)return;if(!1===E.autoUpdate&&!1===E.needsUpdate)return;if(0===i.length)return;const u=t.getRenderTarget(),d=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),y=t.state;y.setBlending(0),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);const v=T!==g&&this.type===g,x=T===g&&this.type!==g;for(let u=0,d=i.length;u<d;u++){const d=i[u],p=d.shadow;if(void 0===p)continue;if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;o.copy(p.mapSize);const b=p.getFrameExtents();if(o.multiply(b),l.copy(p.mapSize),(o.x>m||o.y>m)&&(o.x>m&&(l.x=Math.floor(m/b.x),o.x=l.x*b.x,p.mapSize.x=l.x),o.y>m&&(l.y=Math.floor(m/b.y),o.y=l.y*b.y,p.mapSize.y=l.y)),null===p.map||!0===v||!0===x){const t=this.type!==g?{minFilter:re,magFilter:re}:{};null!==p.map&&p.map.dispose(),p.map=new WebGLRenderTarget(o.x,o.y,t),p.map.texture.name=d.name+".shadowMap",p.camera.updateProjectionMatrix()}t.setRenderTarget(p.map),t.clear();const _=p.getViewportCount();for(let t=0;t<_;t++){const i=p.getViewport(t);c.set(l.x*i.x,l.y*i.y,l.x*i.z,l.y*i.w),y.viewport(c),p.updateMatrices(d,t),a=p.getFrustum(),renderObject(r,h,p.camera,d,this.type)}!0!==p.isPointLightShadow&&this.type===g&&VSMPass(p,h),p.needsUpdate=!1}T=this.type,E.needsUpdate=!1,t.setRenderTarget(u,d,p)}}function WebGLState(t){const i=new function ColorBuffer(){let i=!1;const r=new Vector4;let a=null;const o=new Vector4(0,0,0,0);return{setMask:function(r){a===r||i||(t.colorMask(r,r,r,r),a=r)},setLocked:function(t){i=t},setClear:function(i,a,l,c,h){!0===h&&(i*=c,a*=c,l*=c),r.set(i,a,l,c),!1===o.equals(r)&&(t.clearColor(i,a,l,c),o.copy(r))},reset:function(){i=!1,a=null,o.set(-1,0,0,0)}}},r=new function DepthBuffer(){let i=!1,r=null,a=null,o=null;return{setTest:function(i){i?enable(t.DEPTH_TEST):disable(t.DEPTH_TEST)},setMask:function(a){r===a||i||(t.depthMask(a),r=a)},setFunc:function(i){if(a!==i){switch(i){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}a=i}},setLocked:function(t){i=t},setClear:function(i){o!==i&&(t.clearDepth(i),o=i)},reset:function(){i=!1,r=null,a=null,o=null}}},a=new function StencilBuffer(){let i=!1,r=null,a=null,o=null,l=null,c=null,h=null,u=null,d=null;return{setTest:function(r){i||(r?enable(t.STENCIL_TEST):disable(t.STENCIL_TEST))},setMask:function(a){r===a||i||(t.stencilMask(a),r=a)},setFunc:function(i,r,c){a===i&&o===r&&l===c||(t.stencilFunc(i,r,c),a=i,o=r,l=c)},setOp:function(i,r,a){c===i&&h===r&&u===a||(t.stencilOp(i,r,a),c=i,h=r,u=a)},setLocked:function(t){i=t},setClear:function(i){d!==i&&(t.clearStencil(i),d=i)},reset:function(){i=!1,r=null,a=null,o=null,l=null,c=null,h=null,u=null,d=null}}},o=new WeakMap,l=new WeakMap;let c={},h={},u=new WeakMap,d=[],p=null,m=!1,g=null,y=null,x=null,z=null,V=null,k=null,G=null,H=new gn(0,0,0),W=0,j=!1,X=null,q=null,Y=null,K=null,Z=null;const Q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,$=0;const ee=t.getParameter(t.VERSION);-1!==ee.indexOf("WebGL")?($=parseFloat(/^WebGL (\d)/.exec(ee)[1]),J=$>=1):-1!==ee.indexOf("OpenGL ES")&&($=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),J=$>=2);let te=null,ie={};const ne=t.getParameter(t.SCISSOR_BOX),re=t.getParameter(t.VIEWPORT),se=(new Vector4).fromArray(ne),ae=(new Vector4).fromArray(re);function createTexture(i,r,a,o){const l=new Uint8Array(4),c=t.createTexture();t.bindTexture(i,c),t.texParameteri(i,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let c=0;c<a;c++)i===t.TEXTURE_3D||i===t.TEXTURE_2D_ARRAY?t.texImage3D(r,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,l):t.texImage2D(r+c,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,l);return c}const oe={};function enable(i){!0!==c[i]&&(t.enable(i),c[i]=!0)}function disable(i){!1!==c[i]&&(t.disable(i),c[i]=!1)}oe[t.TEXTURE_2D]=createTexture(t.TEXTURE_2D,t.TEXTURE_2D,1),oe[t.TEXTURE_CUBE_MAP]=createTexture(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),oe[t.TEXTURE_2D_ARRAY]=createTexture(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),oe[t.TEXTURE_3D]=createTexture(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),r.setClear(1),a.setClear(0),enable(t.DEPTH_TEST),r.setFunc(3),setFlipSided(!1),setCullFace(1),enable(t.CULL_FACE),setBlending(0);const le={[b]:t.FUNC_ADD,[_]:t.FUNC_SUBTRACT,[S]:t.FUNC_REVERSE_SUBTRACT};le[103]=t.MIN,le[104]=t.MAX;const ce={[M]:t.ZERO,[w]:t.ONE,[E]:t.SRC_COLOR,[A]:t.SRC_ALPHA,[L]:t.SRC_ALPHA_SATURATE,[I]:t.DST_COLOR,[P]:t.DST_ALPHA,[T]:t.ONE_MINUS_SRC_COLOR,[C]:t.ONE_MINUS_SRC_ALPHA,[D]:t.ONE_MINUS_DST_COLOR,[R]:t.ONE_MINUS_DST_ALPHA,[N]:t.CONSTANT_COLOR,[O]:t.ONE_MINUS_CONSTANT_COLOR,[U]:t.CONSTANT_ALPHA,[B]:t.ONE_MINUS_CONSTANT_ALPHA};function setBlending(i,r,a,o,l,c,h,u,d,p){if(0!==i){if(!1===m&&(enable(t.BLEND),m=!0),5===i)l=l||r,c=c||a,h=h||o,r===y&&l===V||(t.blendEquationSeparate(le[r],le[l]),y=r,V=l),a===x&&o===z&&c===k&&h===G||(t.blendFuncSeparate(ce[a],ce[o],ce[c],ce[h]),x=a,z=o,k=c,G=h),!1!==u.equals(H)&&d===W||(t.blendColor(u.r,u.g,u.b,d),H.copy(u),W=d),g=i,j=!1;else if(i!==g||p!==j){if(y===b&&V===b||(t.blendEquation(t.FUNC_ADD),y=b,V=b),p)switch(i){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)}else switch(i){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFunc(t.ZERO,t.SRC_COLOR)}x=null,z=null,k=null,G=null,H.set(0,0,0),W=0,g=i,j=p}}else!0===m&&(disable(t.BLEND),m=!1)}function setFlipSided(i){X!==i&&(i?t.frontFace(t.CW):t.frontFace(t.CCW),X=i)}function setCullFace(i){0!==i?(enable(t.CULL_FACE),i!==q&&(1===i?t.cullFace(t.BACK):2===i?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):disable(t.CULL_FACE),q=i}function setPolygonOffset(i,r,a){i?(enable(t.POLYGON_OFFSET_FILL),K===r&&Z===a||(t.polygonOffset(r,a),K=r,Z=a)):disable(t.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:r,stencil:a},enable,disable,bindFramebuffer:function bindFramebuffer(i,r){return h[i]!==r&&(t.bindFramebuffer(i,r),h[i]=r,i===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=r),i===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=r),!0)},drawBuffers:function drawBuffers(i,r){let a=d,o=!1;if(i){a=u.get(r),void 0===a&&(a=[],u.set(r,a));const l=i.textures;if(a.length!==l.length||a[0]!==t.COLOR_ATTACHMENT0){for(let i=0,r=l.length;i<r;i++)a[i]=t.COLOR_ATTACHMENT0+i;a.length=l.length,o=!0}}else a[0]!==t.BACK&&(a[0]=t.BACK,o=!0);o&&t.drawBuffers(a)},useProgram:function useProgram(i){return p!==i&&(t.useProgram(i),p=i,!0)},setBlending,setMaterial:function setMaterial(o,l){2===o.side?disable(t.CULL_FACE):enable(t.CULL_FACE);let c=o.side===v;l&&(c=!c),setFlipSided(c),1===o.blending&&!1===o.transparent?setBlending(0):setBlending(o.blending,o.blendEquation,o.blendSrc,o.blendDst,o.blendEquationAlpha,o.blendSrcAlpha,o.blendDstAlpha,o.blendColor,o.blendAlpha,o.premultipliedAlpha),r.setFunc(o.depthFunc),r.setTest(o.depthTest),r.setMask(o.depthWrite),i.setMask(o.colorWrite);const h=o.stencilWrite;a.setTest(h),h&&(a.setMask(o.stencilWriteMask),a.setFunc(o.stencilFunc,o.stencilRef,o.stencilFuncMask),a.setOp(o.stencilFail,o.stencilZFail,o.stencilZPass)),setPolygonOffset(o.polygonOffset,o.polygonOffsetFactor,o.polygonOffsetUnits),!0===o.alphaToCoverage?enable(t.SAMPLE_ALPHA_TO_COVERAGE):disable(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided,setCullFace,setLineWidth:function setLineWidth(i){i!==Y&&(J&&t.lineWidth(i),Y=i)},setPolygonOffset,setScissorTest:function setScissorTest(i){i?enable(t.SCISSOR_TEST):disable(t.SCISSOR_TEST)},activeTexture:function activeTexture(i){void 0===i&&(i=t.TEXTURE0+Q-1),te!==i&&(t.activeTexture(i),te=i)},bindTexture:function bindTexture(i,r,a){void 0===a&&(a=null===te?t.TEXTURE0+Q-1:te);let o=ie[a];void 0===o&&(o={type:void 0,texture:void 0},ie[a]=o),o.type===i&&o.texture===r||(te!==a&&(t.activeTexture(a),te=a),t.bindTexture(i,r||oe[i]),o.type=i,o.texture=r)},unbindTexture:function unbindTexture(){const i=ie[te];void 0!==i&&void 0!==i.type&&(t.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)},compressedTexImage2D:function compressedTexImage2D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},compressedTexImage3D:function compressedTexImage3D(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){}},texImage2D:function texImage2D(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function texImage3D(){try{t.texImage3D.apply(t,arguments)}catch(t){}},updateUBOMapping:function updateUBOMapping(i,r){let a=l.get(r);void 0===a&&(a=new WeakMap,l.set(r,a));let o=a.get(i);void 0===o&&(o=t.getUniformBlockIndex(r,i.name),a.set(i,o))},uniformBlockBinding:function uniformBlockBinding(i,r){const a=l.get(r).get(i);o.get(r)!==a&&(t.uniformBlockBinding(r,a,i.__bindingPointIndex),o.set(r,a))},texStorage2D:function texStorage2D(){try{t.texStorage2D.apply(t,arguments)}catch(t){}},texStorage3D:function texStorage3D(){try{t.texStorage3D.apply(t,arguments)}catch(t){}},texSubImage2D:function texSubImage2D(){try{t.texSubImage2D.apply(t,arguments)}catch(t){}},texSubImage3D:function texSubImage3D(){try{t.texSubImage3D.apply(t,arguments)}catch(t){}},compressedTexSubImage2D:function compressedTexSubImage2D(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){}},compressedTexSubImage3D:function compressedTexSubImage3D(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){}},scissor:function scissor(i){!1===se.equals(i)&&(t.scissor(i.x,i.y,i.z,i.w),se.copy(i))},viewport:function viewport(i){!1===ae.equals(i)&&(t.viewport(i.x,i.y,i.z,i.w),ae.copy(i))},reset:function reset(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},te=null,ie={},h={},u=new WeakMap,d=[],p=null,m=!1,g=null,y=null,x=null,z=null,V=null,k=null,G=null,H=new gn(0,0,0),W=0,j=!1,X=null,q=null,Y=null,K=null,Z=null,se.set(0,0,t.canvas.width,t.canvas.height),ae.set(0,0,t.canvas.width,t.canvas.height),i.reset(),r.reset(),a.reset()}}}function getByteLength(t,i,r,a){const o=function getTextureTypeByteLength(t){switch(t){case he:case ue:return{byteLength:1,components:1};case pe:case de:case ye:return{byteLength:2,components:1};case ve:case xe:return{byteLength:2,components:4};case fe:case me:case ge:return{byteLength:4,components:1};case _e:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(a);switch(r){case Se:case Ee:return t*i;case Te:return t*i*2;case Pe:case Re:return t*i/o.components*o.byteLength;case Ie:case De:return t*i*2/o.components*o.byteLength;case Me:return t*i*3/o.components*o.byteLength;case we:case Le:return t*i*4/o.components*o.byteLength;case Ne:case Fe:return Math.floor((t+3)/4)*Math.floor((i+3)/4)*8;case Oe:case Ue:return Math.floor((t+3)/4)*Math.floor((i+3)/4)*16;case ze:case ke:return Math.max(t,16)*Math.max(i,8)/4;case Be:case Ve:return Math.max(t,8)*Math.max(i,8)/2;case Ge:case He:return Math.floor((t+3)/4)*Math.floor((i+3)/4)*8;case We:case je:return Math.floor((t+3)/4)*Math.floor((i+3)/4)*16;case Xe:return Math.floor((t+4)/5)*Math.floor((i+3)/4)*16;case qe:return Math.floor((t+4)/5)*Math.floor((i+4)/5)*16;case Ye:return Math.floor((t+5)/6)*Math.floor((i+4)/5)*16;case Ke:return Math.floor((t+5)/6)*Math.floor((i+5)/6)*16;case Ze:return Math.floor((t+7)/8)*Math.floor((i+4)/5)*16;case Qe:return Math.floor((t+7)/8)*Math.floor((i+5)/6)*16;case Je:return Math.floor((t+7)/8)*Math.floor((i+7)/8)*16;case $e:return Math.floor((t+9)/10)*Math.floor((i+4)/5)*16;case et:return Math.floor((t+9)/10)*Math.floor((i+5)/6)*16;case tt:return Math.floor((t+9)/10)*Math.floor((i+7)/8)*16;case it:return Math.floor((t+9)/10)*Math.floor((i+9)/10)*16;case nt:return Math.floor((t+11)/12)*Math.floor((i+9)/10)*16;case rt:return Math.floor((t+11)/12)*Math.floor((i+11)/12)*16;case st:case at:case ot:return Math.ceil(t/4)*Math.ceil(i/4)*16;case lt:case ct:return Math.ceil(t/4)*Math.ceil(i/4)*8;case ht:case ut:return Math.ceil(t/4)*Math.ceil(i/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function WebGLTextures(t,i,r,a,o,l,c){const h=i.has("WEBGL_multisampled_render_to_texture")?i.get("WEBGL_multisampled_render_to_texture"):null,u="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new Vector2,p=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function createCanvas(t,i){return y?new OffscreenCanvas(t,i):createElementNS("canvas")}function resizeImage(t,i,r){let a=1;const o=getDimensions(t);if((o.width>r||o.height>r)&&(a=r/Math.max(o.width,o.height)),a<1){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame){const r=Math.floor(a*o.width),l=Math.floor(a*o.height);void 0===m&&(m=createCanvas(r,l));const c=i?createCanvas(r,l):m;c.width=r,c.height=l;return c.getContext("2d").drawImage(t,0,0,r,l),c}return t}return t}function textureNeedsGenerateMipmaps(t){return t.generateMipmaps&&t.minFilter!==re&&t.minFilter!==oe}function generateMipmap(i){t.generateMipmap(i)}function getInternalFormat(r,a,o,l,c=!1){if(null!==r&&void 0!==t[r])return t[r];let h=a;if(a===t.RED&&(o===t.FLOAT&&(h=t.R32F),o===t.HALF_FLOAT&&(h=t.R16F),o===t.UNSIGNED_BYTE&&(h=t.R8)),a===t.RED_INTEGER&&(o===t.UNSIGNED_BYTE&&(h=t.R8UI),o===t.UNSIGNED_SHORT&&(h=t.R16UI),o===t.UNSIGNED_INT&&(h=t.R32UI),o===t.BYTE&&(h=t.R8I),o===t.SHORT&&(h=t.R16I),o===t.INT&&(h=t.R32I)),a===t.RG&&(o===t.FLOAT&&(h=t.RG32F),o===t.HALF_FLOAT&&(h=t.RG16F),o===t.UNSIGNED_BYTE&&(h=t.RG8)),a===t.RG_INTEGER&&(o===t.UNSIGNED_BYTE&&(h=t.RG8UI),o===t.UNSIGNED_SHORT&&(h=t.RG16UI),o===t.UNSIGNED_INT&&(h=t.RG32UI),o===t.BYTE&&(h=t.RG8I),o===t.SHORT&&(h=t.RG16I),o===t.INT&&(h=t.RG32I)),a===t.RGB&&o===t.UNSIGNED_INT_5_9_9_9_REV&&(h=t.RGB9_E5),a===t.RGBA){const i=c?wt:ei.getTransfer(l);o===t.FLOAT&&(h=t.RGBA32F),o===t.HALF_FLOAT&&(h=t.RGBA16F),o===t.UNSIGNED_BYTE&&(h=i===Et?t.SRGB8_ALPHA8:t.RGBA8),o===t.UNSIGNED_SHORT_4_4_4_4&&(h=t.RGBA4),o===t.UNSIGNED_SHORT_5_5_5_1&&(h=t.RGB5_A1)}return h!==t.R16F&&h!==t.R32F&&h!==t.RG16F&&h!==t.RG32F&&h!==t.RGBA16F&&h!==t.RGBA32F||i.get("EXT_color_buffer_float"),h}function getInternalDepthFormat(i,r){let a;return i?null===r||r===fe||r===be?a=t.DEPTH24_STENCIL8:r===ge?a=t.DEPTH32F_STENCIL8:r===pe&&(a=t.DEPTH24_STENCIL8):null===r||r===fe||r===be?a=t.DEPTH_COMPONENT24:r===ge?a=t.DEPTH_COMPONENT32F:r===pe&&(a=t.DEPTH_COMPONENT16),a}function getMipLevels(t,i){return!0===textureNeedsGenerateMipmaps(t)||t.isFramebufferTexture&&t.minFilter!==re&&t.minFilter!==oe?Math.log2(Math.max(i.width,i.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?i.mipmaps.length:1}function onTextureDispose(t){const i=t.target;i.removeEventListener("dispose",onTextureDispose),function deallocateTexture(t){const i=a.get(t);if(void 0===i.__webglInit)return;const r=t.source,o=g.get(r);if(o){const a=o[i.__cacheKey];a.usedTimes--,0===a.usedTimes&&deleteTexture(t),0===Object.keys(o).length&&g.delete(r)}a.remove(t)}(i),i.isVideoTexture&&p.delete(i)}function onRenderTargetDispose(i){const r=i.target;r.removeEventListener("dispose",onRenderTargetDispose),function deallocateRenderTarget(i){const r=a.get(i);i.depthTexture&&i.depthTexture.dispose();if(i.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let a=0;a<r.__webglFramebuffer[i].length;a++)t.deleteFramebuffer(r.__webglFramebuffer[i][a]);else t.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let i=0;i<r.__webglFramebuffer.length;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]);else t.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let i=0;i<r.__webglColorRenderbuffer.length;i++)r.__webglColorRenderbuffer[i]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[i]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}const o=i.textures;for(let i=0,r=o.length;i<r;i++){const r=a.get(o[i]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),c.memory.textures--),a.remove(o[i])}a.remove(i)}(r)}function deleteTexture(i){const r=a.get(i);t.deleteTexture(r.__webglTexture);const o=i.source;delete g.get(o)[r.__cacheKey],c.memory.textures--}let v=0;function setTexture2D(i,o){const l=a.get(i);if(i.isVideoTexture&&function updateVideoTexture(t){const i=c.render.frame;p.get(t)!==i&&(p.set(t,i),t.update())}(i),!1===i.isRenderTargetTexture&&i.version>0&&l.__version!==i.version){const t=i.image;if(null===t);else if(!1!==t.complete)return void uploadTexture(l,i,o)}r.bindTexture(t.TEXTURE_2D,l.__webglTexture,t.TEXTURE0+o)}const x={[te]:t.REPEAT,[ie]:t.CLAMP_TO_EDGE,[ne]:t.MIRRORED_REPEAT},b={[re]:t.NEAREST,[se]:t.NEAREST_MIPMAP_NEAREST,[ae]:t.NEAREST_MIPMAP_LINEAR,[oe]:t.LINEAR,[le]:t.LINEAR_MIPMAP_NEAREST,[ce]:t.LINEAR_MIPMAP_LINEAR},_={[Pt]:t.NEVER,[Ot]:t.ALWAYS,[Rt]:t.LESS,[Dt]:t.LEQUAL,[It]:t.EQUAL,[Ft]:t.GEQUAL,[Lt]:t.GREATER,[Nt]:t.NOTEQUAL};function setTextureParameters(r,l){if(l.type===ge&&!1===i.has("OES_texture_float_linear")&&(l.magFilter===oe||l.magFilter===le||l.magFilter===ae||l.magFilter===ce||l.minFilter===oe||l.minFilter===le||l.minFilter===ae||l.minFilter),t.texParameteri(r,t.TEXTURE_WRAP_S,x[l.wrapS]),t.texParameteri(r,t.TEXTURE_WRAP_T,x[l.wrapT]),r!==t.TEXTURE_3D&&r!==t.TEXTURE_2D_ARRAY||t.texParameteri(r,t.TEXTURE_WRAP_R,x[l.wrapR]),t.texParameteri(r,t.TEXTURE_MAG_FILTER,b[l.magFilter]),t.texParameteri(r,t.TEXTURE_MIN_FILTER,b[l.minFilter]),l.compareFunction&&(t.texParameteri(r,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(r,t.TEXTURE_COMPARE_FUNC,_[l.compareFunction])),!0===i.has("EXT_texture_filter_anisotropic")){if(l.magFilter===re)return;if(l.minFilter!==ae&&l.minFilter!==ce)return;if(l.type===ge&&!1===i.has("OES_texture_float_linear"))return;if(l.anisotropy>1||a.get(l).__currentAnisotropy){const c=i.get("EXT_texture_filter_anisotropic");t.texParameterf(r,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(l.anisotropy,o.getMaxAnisotropy())),a.get(l).__currentAnisotropy=l.anisotropy}}}function initTexture(i,r){let a=!1;void 0===i.__webglInit&&(i.__webglInit=!0,r.addEventListener("dispose",onTextureDispose));const o=r.source;let l=g.get(o);void 0===l&&(l={},g.set(o,l));const h=function getTextureCacheKey(t){const i=[];return i.push(t.wrapS),i.push(t.wrapT),i.push(t.wrapR||0),i.push(t.magFilter),i.push(t.minFilter),i.push(t.anisotropy),i.push(t.internalFormat),i.push(t.format),i.push(t.type),i.push(t.generateMipmaps),i.push(t.premultiplyAlpha),i.push(t.flipY),i.push(t.unpackAlignment),i.push(t.colorSpace),i.join()}(r);if(h!==i.__cacheKey){void 0===l[h]&&(l[h]={texture:t.createTexture(),usedTimes:0},c.memory.textures++,a=!0),l[h].usedTimes++;const o=l[i.__cacheKey];void 0!==o&&(l[i.__cacheKey].usedTimes--,0===o.usedTimes&&deleteTexture(r)),i.__cacheKey=h,i.__webglTexture=l[h].texture}return a}function uploadTexture(i,c,h){let u=t.TEXTURE_2D;(c.isDataArrayTexture||c.isCompressedArrayTexture)&&(u=t.TEXTURE_2D_ARRAY),c.isData3DTexture&&(u=t.TEXTURE_3D);const d=initTexture(i,c),p=c.source;r.bindTexture(u,i.__webglTexture,t.TEXTURE0+h);const m=a.get(p);if(p.version!==m.__version||!0===d){r.activeTexture(t.TEXTURE0+h);const i=ei.getPrimaries(ei.workingColorSpace),a=c.colorSpace===xt?null:ei.getPrimaries(c.colorSpace),g=c.colorSpace===xt||i===a?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,c.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,c.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,g);let y=resizeImage(c.image,!1,o.maxTextureSize);y=verifyColorSpace(c,y);const v=l.convert(c.format,c.colorSpace),x=l.convert(c.type);let b,_=getInternalFormat(c.internalFormat,v,x,c.colorSpace,c.isVideoTexture);setTextureParameters(u,c);const S=c.mipmaps,M=!0!==c.isVideoTexture,w=void 0===m.__version||!0===d,E=p.dataReady,T=getMipLevels(c,y);if(c.isDepthTexture)_=getInternalDepthFormat(c.format===Ce,c.type),w&&(M?r.texStorage2D(t.TEXTURE_2D,1,_,y.width,y.height):r.texImage2D(t.TEXTURE_2D,0,_,y.width,y.height,0,v,x,null));else if(c.isDataTexture)if(S.length>0){M&&w&&r.texStorage2D(t.TEXTURE_2D,T,_,S[0].width,S[0].height);for(let i=0,a=S.length;i<a;i++)b=S[i],M?E&&r.texSubImage2D(t.TEXTURE_2D,i,0,0,b.width,b.height,v,x,b.data):r.texImage2D(t.TEXTURE_2D,i,_,b.width,b.height,0,v,x,b.data);c.generateMipmaps=!1}else M?(w&&r.texStorage2D(t.TEXTURE_2D,T,_,y.width,y.height),E&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,y.width,y.height,v,x,y.data)):r.texImage2D(t.TEXTURE_2D,0,_,y.width,y.height,0,v,x,y.data);else if(c.isCompressedTexture)if(c.isCompressedArrayTexture){M&&w&&r.texStorage3D(t.TEXTURE_2D_ARRAY,T,_,S[0].width,S[0].height,y.depth);for(let i=0,a=S.length;i<a;i++)if(b=S[i],c.format!==we){if(null!==v)if(M){if(E)if(c.layerUpdates.size>0){const a=getByteLength(b.width,b.height,c.format,c.type);for(const o of c.layerUpdates){const l=b.data.subarray(o*a/b.data.BYTES_PER_ELEMENT,(o+1)*a/b.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,o,b.width,b.height,1,v,l,0,0)}c.clearLayerUpdates()}else r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,0,b.width,b.height,y.depth,v,b.data,0,0)}else r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,i,_,b.width,b.height,y.depth,0,b.data,0,0)}else M?E&&r.texSubImage3D(t.TEXTURE_2D_ARRAY,i,0,0,0,b.width,b.height,y.depth,v,x,b.data):r.texImage3D(t.TEXTURE_2D_ARRAY,i,_,b.width,b.height,y.depth,0,v,x,b.data)}else{M&&w&&r.texStorage2D(t.TEXTURE_2D,T,_,S[0].width,S[0].height);for(let i=0,a=S.length;i<a;i++)b=S[i],c.format!==we?null!==v&&(M?E&&r.compressedTexSubImage2D(t.TEXTURE_2D,i,0,0,b.width,b.height,v,b.data):r.compressedTexImage2D(t.TEXTURE_2D,i,_,b.width,b.height,0,b.data)):M?E&&r.texSubImage2D(t.TEXTURE_2D,i,0,0,b.width,b.height,v,x,b.data):r.texImage2D(t.TEXTURE_2D,i,_,b.width,b.height,0,v,x,b.data)}else if(c.isDataArrayTexture)if(M){if(w&&r.texStorage3D(t.TEXTURE_2D_ARRAY,T,_,y.width,y.height,y.depth),E)if(c.layerUpdates.size>0){const i=getByteLength(y.width,y.height,c.format,c.type);for(const a of c.layerUpdates){const o=y.data.subarray(a*i/y.data.BYTES_PER_ELEMENT,(a+1)*i/y.data.BYTES_PER_ELEMENT);r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,a,y.width,y.height,1,v,x,o)}c.clearLayerUpdates()}else r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,y.width,y.height,y.depth,v,x,y.data)}else r.texImage3D(t.TEXTURE_2D_ARRAY,0,_,y.width,y.height,y.depth,0,v,x,y.data);else if(c.isData3DTexture)M?(w&&r.texStorage3D(t.TEXTURE_3D,T,_,y.width,y.height,y.depth),E&&r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,y.width,y.height,y.depth,v,x,y.data)):r.texImage3D(t.TEXTURE_3D,0,_,y.width,y.height,y.depth,0,v,x,y.data);else if(c.isFramebufferTexture){if(w)if(M)r.texStorage2D(t.TEXTURE_2D,T,_,y.width,y.height);else{let i=y.width,a=y.height;for(let o=0;o<T;o++)r.texImage2D(t.TEXTURE_2D,o,_,i,a,0,v,x,null),i>>=1,a>>=1}}else if(S.length>0){if(M&&w){const i=getDimensions(S[0]);r.texStorage2D(t.TEXTURE_2D,T,_,i.width,i.height)}for(let i=0,a=S.length;i<a;i++)b=S[i],M?E&&r.texSubImage2D(t.TEXTURE_2D,i,0,0,v,x,b):r.texImage2D(t.TEXTURE_2D,i,_,v,x,b);c.generateMipmaps=!1}else if(M){if(w){const i=getDimensions(y);r.texStorage2D(t.TEXTURE_2D,T,_,i.width,i.height)}E&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,v,x,y)}else r.texImage2D(t.TEXTURE_2D,0,_,v,x,y);textureNeedsGenerateMipmaps(c)&&generateMipmap(u),m.__version=p.version,c.onUpdate&&c.onUpdate(c)}i.__version=c.version}function setupFrameBufferTexture(i,o,c,u,d,p){const m=l.convert(c.format,c.colorSpace),g=l.convert(c.type),y=getInternalFormat(c.internalFormat,m,g,c.colorSpace);if(!a.get(o).__hasExternalTextures){const i=Math.max(1,o.width>>p),a=Math.max(1,o.height>>p);d===t.TEXTURE_3D||d===t.TEXTURE_2D_ARRAY?r.texImage3D(d,p,y,i,a,o.depth,0,m,g,null):r.texImage2D(d,p,y,i,a,0,m,g,null)}r.bindFramebuffer(t.FRAMEBUFFER,i),useMultisampledRTT(o)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,u,d,a.get(c).__webglTexture,0,getRenderTargetSamples(o)):(d===t.TEXTURE_2D||d>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&d<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,u,d,a.get(c).__webglTexture,p),r.bindFramebuffer(t.FRAMEBUFFER,null)}function setupRenderBufferStorage(i,r,a){if(t.bindRenderbuffer(t.RENDERBUFFER,i),r.depthBuffer){const o=r.depthTexture,l=o&&o.isDepthTexture?o.type:null,c=getInternalDepthFormat(r.stencilBuffer,l),u=r.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,d=getRenderTargetSamples(r);useMultisampledRTT(r)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,d,c,r.width,r.height):a?t.renderbufferStorageMultisample(t.RENDERBUFFER,d,c,r.width,r.height):t.renderbufferStorage(t.RENDERBUFFER,c,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,u,t.RENDERBUFFER,i)}else{const i=r.textures;for(let o=0;o<i.length;o++){const c=i[o],u=l.convert(c.format,c.colorSpace),d=l.convert(c.type),p=getInternalFormat(c.internalFormat,u,d,c.colorSpace),m=getRenderTargetSamples(r);a&&!1===useMultisampledRTT(r)?t.renderbufferStorageMultisample(t.RENDERBUFFER,m,p,r.width,r.height):useMultisampledRTT(r)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,m,p,r.width,r.height):t.renderbufferStorage(t.RENDERBUFFER,p,r.width,r.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function setupDepthRenderbuffer(i){const o=a.get(i),l=!0===i.isWebGLCubeRenderTarget;if(i.depthTexture&&!o.__autoAllocateDepthBuffer){if(l)throw new Error("target.depthTexture not supported in Cube render targets");!function setupDepthTexture(i,o){if(o&&o.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(t.FRAMEBUFFER,i),!o.depthTexture||!o.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");a.get(o.depthTexture).__webglTexture&&o.depthTexture.image.width===o.width&&o.depthTexture.image.height===o.height||(o.depthTexture.image.width=o.width,o.depthTexture.image.height=o.height,o.depthTexture.needsUpdate=!0),setTexture2D(o.depthTexture,0);const l=a.get(o.depthTexture).__webglTexture,c=getRenderTargetSamples(o);if(o.depthTexture.format===Ae)useMultisampledRTT(o)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,l,0,c):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,l,0);else{if(o.depthTexture.format!==Ce)throw new Error("Unknown depthTexture format");useMultisampledRTT(o)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,l,0,c):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,l,0)}}(o.__webglFramebuffer,i)}else if(l){o.__webglDepthbuffer=[];for(let a=0;a<6;a++)r.bindFramebuffer(t.FRAMEBUFFER,o.__webglFramebuffer[a]),o.__webglDepthbuffer[a]=t.createRenderbuffer(),setupRenderBufferStorage(o.__webglDepthbuffer[a],i,!1)}else r.bindFramebuffer(t.FRAMEBUFFER,o.__webglFramebuffer),o.__webglDepthbuffer=t.createRenderbuffer(),setupRenderBufferStorage(o.__webglDepthbuffer,i,!1);r.bindFramebuffer(t.FRAMEBUFFER,null)}const S=[],M=[];function getRenderTargetSamples(t){return Math.min(o.maxSamples,t.samples)}function useMultisampledRTT(t){const r=a.get(t);return t.samples>0&&!0===i.has("WEBGL_multisampled_render_to_texture")&&!1!==r.__useRenderToTexture}function verifyColorSpace(t,i){const r=t.colorSpace;t.format,t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||r!==_t&&r!==xt&&ei.getTransfer(r),i}function getDimensions(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(d.width=t.naturalWidth||t.width,d.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(d.width=t.displayWidth,d.height=t.displayHeight):(d.width=t.width,d.height=t.height),d}this.allocateTextureUnit=function allocateTextureUnit(){const t=v;return o.maxTextures,v+=1,t},this.resetTextureUnits=function resetTextureUnits(){v=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function setTexture2DArray(i,o){const l=a.get(i);i.version>0&&l.__version!==i.version?uploadTexture(l,i,o):r.bindTexture(t.TEXTURE_2D_ARRAY,l.__webglTexture,t.TEXTURE0+o)},this.setTexture3D=function setTexture3D(i,o){const l=a.get(i);i.version>0&&l.__version!==i.version?uploadTexture(l,i,o):r.bindTexture(t.TEXTURE_3D,l.__webglTexture,t.TEXTURE0+o)},this.setTextureCube=function setTextureCube(i,c){const h=a.get(i);i.version>0&&h.__version!==i.version?function uploadCubeTexture(i,c,h){if(6!==c.image.length)return;const u=initTexture(i,c),d=c.source;r.bindTexture(t.TEXTURE_CUBE_MAP,i.__webglTexture,t.TEXTURE0+h);const p=a.get(d);if(d.version!==p.__version||!0===u){r.activeTexture(t.TEXTURE0+h);const i=ei.getPrimaries(ei.workingColorSpace),a=c.colorSpace===xt?null:ei.getPrimaries(c.colorSpace),m=c.colorSpace===xt||i===a?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,c.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,c.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,m);const g=c.isCompressedTexture||c.image[0].isCompressedTexture,y=c.image[0]&&c.image[0].isDataTexture,v=[];for(let t=0;t<6;t++)v[t]=g||y?y?c.image[t].image:c.image[t]:resizeImage(c.image[t],!0,o.maxCubemapSize),v[t]=verifyColorSpace(c,v[t]);const x=v[0],b=l.convert(c.format,c.colorSpace),_=l.convert(c.type),S=getInternalFormat(c.internalFormat,b,_,c.colorSpace),M=!0!==c.isVideoTexture,w=void 0===p.__version||!0===u,E=d.dataReady;let T,A=getMipLevels(c,x);if(setTextureParameters(t.TEXTURE_CUBE_MAP,c),g){M&&w&&r.texStorage2D(t.TEXTURE_CUBE_MAP,A,S,x.width,x.height);for(let i=0;i<6;i++){T=v[i].mipmaps;for(let a=0;a<T.length;a++){const o=T[a];c.format!==we?null!==b&&(M?E&&r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,b,o.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,S,o.width,o.height,0,o.data)):M?E&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,b,_,o.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,S,o.width,o.height,0,b,_,o.data)}}}else{if(T=c.mipmaps,M&&w){T.length>0&&A++;const i=getDimensions(v[0]);r.texStorage2D(t.TEXTURE_CUBE_MAP,A,S,i.width,i.height)}for(let i=0;i<6;i++)if(y){M?E&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,v[i].width,v[i].height,b,_,v[i].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,S,v[i].width,v[i].height,0,b,_,v[i].data);for(let a=0;a<T.length;a++){const o=T[a].image[i].image;M?E&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a+1,0,0,o.width,o.height,b,_,o.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a+1,S,o.width,o.height,0,b,_,o.data)}}else{M?E&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,b,_,v[i]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,S,b,_,v[i]);for(let a=0;a<T.length;a++){const o=T[a];M?E&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a+1,0,0,b,_,o.image[i]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,a+1,S,b,_,o.image[i])}}}textureNeedsGenerateMipmaps(c)&&generateMipmap(t.TEXTURE_CUBE_MAP),p.__version=d.version,c.onUpdate&&c.onUpdate(c)}i.__version=c.version}(h,i,c):r.bindTexture(t.TEXTURE_CUBE_MAP,h.__webglTexture,t.TEXTURE0+c)},this.rebindTextures=function rebindTextures(i,r,o){const l=a.get(i);void 0!==r&&setupFrameBufferTexture(l.__webglFramebuffer,i,i.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==o&&setupDepthRenderbuffer(i)},this.setupRenderTarget=function setupRenderTarget(i){const o=i.texture,h=a.get(i),u=a.get(o);i.addEventListener("dispose",onRenderTargetDispose);const d=i.textures,p=!0===i.isWebGLCubeRenderTarget,m=d.length>1;if(m||(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=o.version,c.memory.textures++),p){h.__webglFramebuffer=[];for(let i=0;i<6;i++)if(o.mipmaps&&o.mipmaps.length>0){h.__webglFramebuffer[i]=[];for(let r=0;r<o.mipmaps.length;r++)h.__webglFramebuffer[i][r]=t.createFramebuffer()}else h.__webglFramebuffer[i]=t.createFramebuffer()}else{if(o.mipmaps&&o.mipmaps.length>0){h.__webglFramebuffer=[];for(let i=0;i<o.mipmaps.length;i++)h.__webglFramebuffer[i]=t.createFramebuffer()}else h.__webglFramebuffer=t.createFramebuffer();if(m)for(let i=0,r=d.length;i<r;i++){const r=a.get(d[i]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),c.memory.textures++)}if(i.samples>0&&!1===useMultisampledRTT(i)){h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,h.__webglMultisampledFramebuffer);for(let r=0;r<d.length;r++){const a=d[r];h.__webglColorRenderbuffer[r]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,h.__webglColorRenderbuffer[r]);const o=l.convert(a.format,a.colorSpace),c=l.convert(a.type),u=getInternalFormat(a.internalFormat,o,c,a.colorSpace,!0===i.isXRRenderTarget),p=getRenderTargetSamples(i);t.renderbufferStorageMultisample(t.RENDERBUFFER,p,u,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.RENDERBUFFER,h.__webglColorRenderbuffer[r])}t.bindRenderbuffer(t.RENDERBUFFER,null),i.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),setupRenderBufferStorage(h.__webglDepthRenderbuffer,i,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(p){r.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),setTextureParameters(t.TEXTURE_CUBE_MAP,o);for(let r=0;r<6;r++)if(o.mipmaps&&o.mipmaps.length>0)for(let a=0;a<o.mipmaps.length;a++)setupFrameBufferTexture(h.__webglFramebuffer[r][a],i,o,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+r,a);else setupFrameBufferTexture(h.__webglFramebuffer[r],i,o,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0);textureNeedsGenerateMipmaps(o)&&generateMipmap(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(m){for(let o=0,l=d.length;o<l;o++){const l=d[o],c=a.get(l);r.bindTexture(t.TEXTURE_2D,c.__webglTexture),setTextureParameters(t.TEXTURE_2D,l),setupFrameBufferTexture(h.__webglFramebuffer,i,l,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D,0),textureNeedsGenerateMipmaps(l)&&generateMipmap(t.TEXTURE_2D)}r.unbindTexture()}else{let a=t.TEXTURE_2D;if((i.isWebGL3DRenderTarget||i.isWebGLArrayRenderTarget)&&(a=i.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(a,u.__webglTexture),setTextureParameters(a,o),o.mipmaps&&o.mipmaps.length>0)for(let r=0;r<o.mipmaps.length;r++)setupFrameBufferTexture(h.__webglFramebuffer[r],i,o,t.COLOR_ATTACHMENT0,a,r);else setupFrameBufferTexture(h.__webglFramebuffer,i,o,t.COLOR_ATTACHMENT0,a,0);textureNeedsGenerateMipmaps(o)&&generateMipmap(a),r.unbindTexture()}i.depthBuffer&&setupDepthRenderbuffer(i)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(i){const o=i.textures;for(let l=0,c=o.length;l<c;l++){const c=o[l];if(textureNeedsGenerateMipmaps(c)){const o=i.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,l=a.get(c).__webglTexture;r.bindTexture(o,l),generateMipmap(o),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function updateMultisampleRenderTarget(i){if(i.samples>0)if(!1===useMultisampledRTT(i)){const o=i.textures,l=i.width,c=i.height;let h=t.COLOR_BUFFER_BIT;const d=i.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,p=a.get(i),m=o.length>1;if(m)for(let i=0;i<o.length;i++)r.bindFramebuffer(t.FRAMEBUFFER,p.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,p.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,p.__webglMultisampledFramebuffer),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,p.__webglFramebuffer);for(let r=0;r<o.length;r++){if(i.resolveDepthBuffer&&(i.depthBuffer&&(h|=t.DEPTH_BUFFER_BIT),i.stencilBuffer&&i.resolveStencilBuffer&&(h|=t.STENCIL_BUFFER_BIT)),m){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,p.__webglColorRenderbuffer[r]);const i=a.get(o[r]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}t.blitFramebuffer(0,0,l,c,0,0,l,c,h,t.NEAREST),!0===u&&(S.length=0,M.length=0,S.push(t.COLOR_ATTACHMENT0+r),i.depthBuffer&&!1===i.resolveDepthBuffer&&(S.push(d),M.push(d),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,M)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,S))}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),m)for(let i=0;i<o.length;i++){r.bindFramebuffer(t.FRAMEBUFFER,p.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,p.__webglColorRenderbuffer[i]);const l=a.get(o[i]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,p.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.TEXTURE_2D,l,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,p.__webglMultisampledFramebuffer)}else if(i.depthBuffer&&!1===i.resolveDepthBuffer&&u){const r=i.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[r])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(t,i){return{convert:function convert(r,a=""){let o;const l=ei.getTransfer(a);if(r===he)return t.UNSIGNED_BYTE;if(r===ve)return t.UNSIGNED_SHORT_4_4_4_4;if(r===xe)return t.UNSIGNED_SHORT_5_5_5_1;if(r===_e)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===ue)return t.BYTE;if(r===de)return t.SHORT;if(r===pe)return t.UNSIGNED_SHORT;if(r===me)return t.INT;if(r===fe)return t.UNSIGNED_INT;if(r===ge)return t.FLOAT;if(r===ye)return t.HALF_FLOAT;if(r===Se)return t.ALPHA;if(r===Me)return t.RGB;if(r===we)return t.RGBA;if(r===Ee)return t.LUMINANCE;if(r===Te)return t.LUMINANCE_ALPHA;if(r===Ae)return t.DEPTH_COMPONENT;if(r===Ce)return t.DEPTH_STENCIL;if(r===Pe)return t.RED;if(r===Re)return t.RED_INTEGER;if(r===Ie)return t.RG;if(r===De)return t.RG_INTEGER;if(r===Le)return t.RGBA_INTEGER;if(r===Ne||r===Fe||r===Oe||r===Ue)if(l===Et){if(o=i.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(r===Ne)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Fe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Oe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Ue)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=i.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(r===Ne)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Fe)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Oe)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ue)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(r===Be||r===ze||r===Ve||r===ke){if(o=i.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(r===Be)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ze)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ve)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===ke)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===Ge||r===He||r===We){if(o=i.get("WEBGL_compressed_texture_etc"),null===o)return null;if(r===Ge||r===He)return l===Et?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===We)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(r===je||r===Xe||r===qe||r===Ye||r===Ke||r===Ze||r===Qe||r===Je||r===$e||r===et||r===tt||r===it||r===nt||r===rt){if(o=i.get("WEBGL_compressed_texture_astc"),null===o)return null;if(r===je)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Xe)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===qe)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Ye)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Ke)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Ze)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Qe)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Je)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===$e)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===et)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===tt)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===it)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===nt)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===rt)return l===Et?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(r===st||r===at||r===ot){if(o=i.get("EXT_texture_compression_bptc"),null===o)return null;if(r===st)return l===Et?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===at)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===ot)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(r===lt||r===ct||r===ht||r===ut){if(o=i.get("EXT_texture_compression_rgtc"),null===o)return null;if(r===st)return o.COMPRESSED_RED_RGTC1_EXT;if(r===ct)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===ht)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===ut)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return r===be?t.UNSIGNED_INT_24_8:void 0!==t[r]?t[r]:null}}}class ArrayCamera extends PerspectiveCamera{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zr={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const i=this._hand;if(i)for(const r of t.hand.values())this._getHandJoint(i,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,i,r){let a=null,o=null,l=null;const c=this._targetRay,h=this._grip,u=this._hand;if(t&&"visible-blurred"!==i.session.visibilityState){if(u&&t.hand){l=!0;for(const a of t.hand.values()){const t=i.getJointPose(a,r),o=this._getHandJoint(u,a);null!==t&&(o.matrix.fromArray(t.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,o.jointRadius=t.radius),o.visible=null!==t}const a=u.joints["index-finger-tip"],o=u.joints["thumb-tip"],c=a.position.distanceTo(o.position),h=.02,d=.005;u.inputState.pinching&&c>h+d?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&c<=h-d&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==h&&t.gripSpace&&(o=i.getPose(t.gripSpace,r),null!==o&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));null!==c&&(a=i.getPose(t.targetRaySpace,r),null===a&&null!==o&&(a=o),null!==a&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(zr)))}return null!==c&&(c.visible=null!==a),null!==h&&(h.visible=null!==o),null!==u&&(u.visible=null!==l),this}_getHandJoint(t,i){if(void 0===t.joints[i.jointName]){const r=new Group;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[i.jointName]=r,t.add(r)}return t.joints[i.jointName]}}class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,i,r){if(null===this.texture){const a=new Texture;t.properties.get(a).__webglTexture=i.texture,i.depthNear==r.depthNear&&i.depthFar==r.depthFar||(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=a}}getMesh(t){if(null!==this.texture&&null===this.mesh){const i=t.cameras[0].viewport,r=new ShaderMaterial({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends kt{constructor(t,i){super();const r=this;let a=null,o=1,l=null,c="local-floor",h=1,u=null,d=null,p=null,m=null,g=null,y=null;const v=new WebXRDepthSensing,x=i.getContextAttributes();let b=null,_=null;const S=[],M=[],w=new Vector2;let E=null;const T=new PerspectiveCamera;T.layers.enable(1),T.viewport=new Vector4;const A=new PerspectiveCamera;A.layers.enable(2),A.viewport=new Vector4;const C=[T,A],P=new ArrayCamera;P.layers.enable(1),P.layers.enable(2);let R=null,I=null;function onSessionEvent(t){const i=M.indexOf(t.inputSource);if(-1===i)return;const r=S[i];void 0!==r&&(r.update(t.inputSource,t.frame,u||l),r.dispatchEvent({type:t.type,data:t.inputSource}))}function onSessionEnd(){a.removeEventListener("select",onSessionEvent),a.removeEventListener("selectstart",onSessionEvent),a.removeEventListener("selectend",onSessionEvent),a.removeEventListener("squeeze",onSessionEvent),a.removeEventListener("squeezestart",onSessionEvent),a.removeEventListener("squeezeend",onSessionEvent),a.removeEventListener("end",onSessionEnd),a.removeEventListener("inputsourceschange",onInputSourcesChange);for(let t=0;t<S.length;t++){const i=M[t];null!==i&&(M[t]=null,S[t].disconnect(i))}R=null,I=null,v.reset(),t.setRenderTarget(b),g=null,m=null,p=null,a=null,_=null,O.stop(),r.isPresenting=!1,t.setPixelRatio(E),t.setSize(w.width,w.height,!1),r.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(t){for(let i=0;i<t.removed.length;i++){const r=t.removed[i],a=M.indexOf(r);a>=0&&(M[a]=null,S[a].disconnect(r))}for(let i=0;i<t.added.length;i++){const r=t.added[i];let a=M.indexOf(r);if(-1===a){for(let t=0;t<S.length;t++){if(t>=M.length){M.push(r),a=t;break}if(null===M[t]){M[t]=r,a=t;break}}if(-1===a)break}const o=S[a];o&&o.connect(r)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let i=S[t];return void 0===i&&(i=new WebXRController,S[t]=i),i.getTargetRaySpace()},this.getControllerGrip=function(t){let i=S[t];return void 0===i&&(i=new WebXRController,S[t]=i),i.getGripSpace()},this.getHand=function(t){let i=S[t];return void 0===i&&(i=new WebXRController,S[t]=i),i.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,r.isPresenting},this.setReferenceSpaceType=function(t){c=t,r.isPresenting},this.getReferenceSpace=function(){return u||l},this.setReferenceSpace=function(t){u=t},this.getBaseLayer=function(){return null!==m?m:g},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return a},this.setSession=async function(d){if(a=d,null!==a){if(b=t.getRenderTarget(),a.addEventListener("select",onSessionEvent),a.addEventListener("selectstart",onSessionEvent),a.addEventListener("selectend",onSessionEvent),a.addEventListener("squeeze",onSessionEvent),a.addEventListener("squeezestart",onSessionEvent),a.addEventListener("squeezeend",onSessionEvent),a.addEventListener("end",onSessionEnd),a.addEventListener("inputsourceschange",onInputSourcesChange),!0!==x.xrCompatible&&await i.makeXRCompatible(),E=t.getPixelRatio(),t.getSize(w),void 0===a.renderState.layers){const r={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(a,i,r),a.updateRenderState({baseLayer:g}),t.setPixelRatio(1),t.setSize(g.framebufferWidth,g.framebufferHeight,!1),_=new WebGLRenderTarget(g.framebufferWidth,g.framebufferHeight,{format:we,type:he,colorSpace:t.outputColorSpace,stencilBuffer:x.stencil})}else{let r=null,l=null,c=null;x.depth&&(c=x.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,r=x.stencil?Ce:Ae,l=x.stencil?be:fe);const h={colorFormat:i.RGBA8,depthFormat:c,scaleFactor:o};p=new XRWebGLBinding(a,i),m=p.createProjectionLayer(h),a.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),_=new WebGLRenderTarget(m.textureWidth,m.textureHeight,{format:we,type:he,depthTexture:new DepthTexture(m.textureWidth,m.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,r),stencilBuffer:x.stencil,colorSpace:t.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:!1===m.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(h),u=null,l=await a.requestReferenceSpace(c),O.setContext(a),O.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};const D=new Vector3,L=new Vector3;function updateCamera(t,i){null===i?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(i.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===a)return;null!==v.texture&&(t.near=v.depthNear,t.far=v.depthFar),P.near=A.near=T.near=t.near,P.far=A.far=T.far=t.far,R===P.near&&I===P.far||(a.updateRenderState({depthNear:P.near,depthFar:P.far}),R=P.near,I=P.far,T.near=R,T.far=I,A.near=R,A.far=I,T.updateProjectionMatrix(),A.updateProjectionMatrix(),t.updateProjectionMatrix());const i=t.parent,r=P.cameras;updateCamera(P,i);for(let t=0;t<r.length;t++)updateCamera(r[t],i);2===r.length?function setProjectionFromUnion(t,i,r){D.setFromMatrixPosition(i.matrixWorld),L.setFromMatrixPosition(r.matrixWorld);const a=D.distanceTo(L),o=i.projectionMatrix.elements,l=r.projectionMatrix.elements,c=o[14]/(o[10]-1),h=o[14]/(o[10]+1),u=(o[9]+1)/o[5],d=(o[9]-1)/o[5],p=(o[8]-1)/o[0],m=(l[8]+1)/l[0],g=c*p,y=c*m,v=a/(-p+m),x=v*-p;i.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(x),t.translateZ(v),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const b=c+v,_=h+v,S=g-x,M=y+(a-x),w=u*h/_*b,E=d*h/_*b;t.projectionMatrix.makePerspective(S,M,w,E,b,_),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(P,T,A):P.projectionMatrix.copy(T.projectionMatrix),function updateUserCamera(t,i,r){null===r?t.matrix.copy(i.matrixWorld):(t.matrix.copy(r.matrixWorld),t.matrix.invert(),t.matrix.multiply(i.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(i.projectionMatrix),t.projectionMatrixInverse.copy(i.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*jt*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,P,i)},this.getCamera=function(){return P},this.getFoveation=function(){if(null!==m||null!==g)return h},this.setFoveation=function(t){h=t,null!==m&&(m.fixedFoveation=t),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==v.texture},this.getDepthSensingMesh=function(){return v.getMesh(P)};let N=null;const O=new WebGLAnimation;O.setAnimationLoop((function onAnimationFrame(i,o){if(d=o.getViewerPose(u||l),y=o,null!==d){const i=d.views;null!==g&&(t.setRenderTargetFramebuffer(_,g.framebuffer),t.setRenderTarget(_));let r=!1;i.length!==P.cameras.length&&(P.cameras.length=0,r=!0);for(let a=0;a<i.length;a++){const o=i[a];let l=null;if(null!==g)l=g.getViewport(o);else{const i=p.getViewSubImage(m,o);l=i.viewport,0===a&&(t.setRenderTargetTextures(_,i.colorTexture,m.ignoreDepthValues?void 0:i.depthStencilTexture),t.setRenderTarget(_))}let c=C[a];void 0===c&&(c=new PerspectiveCamera,c.layers.enable(a),c.viewport=new Vector4,C[a]=c),c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.quaternion,c.scale),c.projectionMatrix.fromArray(o.projectionMatrix),c.projectionMatrixInverse.copy(c.projectionMatrix).invert(),c.viewport.set(l.x,l.y,l.width,l.height),0===a&&(P.matrix.copy(c.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),!0===r&&P.cameras.push(c)}const o=a.enabledFeatures;if(o&&o.includes("depth-sensing")){const r=p.getDepthInformation(i[0]);r&&r.isValid&&r.texture&&v.init(t,r,a.renderState)}}for(let t=0;t<S.length;t++){const i=M[t],r=S[t];null!==i&&void 0!==r&&r.update(i,o,u||l)}N&&N(i,o),o.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:o}),y=null})),this.setAnimationLoop=function(t){N=t},this.dispose=function(){}}}const Vr=new Euler,kr=new Matrix4;function WebGLMaterials(t,i){function refreshTransformUniform(t,i){!0===t.matrixAutoUpdate&&t.updateMatrix(),i.value.copy(t.matrix)}function refreshUniformsCommon(t,r){t.opacity.value=r.opacity,r.color&&t.diffuse.value.copy(r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map,refreshTransformUniform(r.map,t.mapTransform)),r.alphaMap&&(t.alphaMap.value=r.alphaMap,refreshTransformUniform(r.alphaMap,t.alphaMapTransform)),r.bumpMap&&(t.bumpMap.value=r.bumpMap,refreshTransformUniform(r.bumpMap,t.bumpMapTransform),t.bumpScale.value=r.bumpScale,r.side===v&&(t.bumpScale.value*=-1)),r.normalMap&&(t.normalMap.value=r.normalMap,refreshTransformUniform(r.normalMap,t.normalMapTransform),t.normalScale.value.copy(r.normalScale),r.side===v&&t.normalScale.value.negate()),r.displacementMap&&(t.displacementMap.value=r.displacementMap,refreshTransformUniform(r.displacementMap,t.displacementMapTransform),t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap,refreshTransformUniform(r.emissiveMap,t.emissiveMapTransform)),r.specularMap&&(t.specularMap.value=r.specularMap,refreshTransformUniform(r.specularMap,t.specularMapTransform)),r.alphaTest>0&&(t.alphaTest.value=r.alphaTest);const a=i.get(r),o=a.envMap,l=a.envMapRotation;o&&(t.envMap.value=o,Vr.copy(l),Vr.x*=-1,Vr.y*=-1,Vr.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(Vr.y*=-1,Vr.z*=-1),t.envMapRotation.value.setFromMatrix4(kr.makeRotationFromEuler(Vr)),t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=r.reflectivity,t.ior.value=r.ior,t.refractionRatio.value=r.refractionRatio),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity,refreshTransformUniform(r.lightMap,t.lightMapTransform)),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity,refreshTransformUniform(r.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function refreshFogUniforms(i,r){r.color.getRGB(i.fogColor.value,getUnlitUniformColorSpace(t)),r.isFog?(i.fogNear.value=r.near,i.fogFar.value=r.far):r.isFogExp2&&(i.fogDensity.value=r.density)},refreshMaterialUniforms:function refreshMaterialUniforms(t,r,a,o,l){r.isMeshBasicMaterial||r.isMeshLambertMaterial?refreshUniformsCommon(t,r):r.isMeshToonMaterial?(refreshUniformsCommon(t,r),function refreshUniformsToon(t,i){i.gradientMap&&(t.gradientMap.value=i.gradientMap)}(t,r)):r.isMeshPhongMaterial?(refreshUniformsCommon(t,r),function refreshUniformsPhong(t,i){t.specular.value.copy(i.specular),t.shininess.value=Math.max(i.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(refreshUniformsCommon(t,r),function refreshUniformsStandard(t,i){t.metalness.value=i.metalness,i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap,refreshTransformUniform(i.metalnessMap,t.metalnessMapTransform));t.roughness.value=i.roughness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap,refreshTransformUniform(i.roughnessMap,t.roughnessMapTransform));i.envMap&&(t.envMapIntensity.value=i.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function refreshUniformsPhysical(t,i,r){t.ior.value=i.ior,i.sheen>0&&(t.sheenColor.value.copy(i.sheenColor).multiplyScalar(i.sheen),t.sheenRoughness.value=i.sheenRoughness,i.sheenColorMap&&(t.sheenColorMap.value=i.sheenColorMap,refreshTransformUniform(i.sheenColorMap,t.sheenColorMapTransform)),i.sheenRoughnessMap&&(t.sheenRoughnessMap.value=i.sheenRoughnessMap,refreshTransformUniform(i.sheenRoughnessMap,t.sheenRoughnessMapTransform)));i.clearcoat>0&&(t.clearcoat.value=i.clearcoat,t.clearcoatRoughness.value=i.clearcoatRoughness,i.clearcoatMap&&(t.clearcoatMap.value=i.clearcoatMap,refreshTransformUniform(i.clearcoatMap,t.clearcoatMapTransform)),i.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap,refreshTransformUniform(i.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),i.clearcoatNormalMap&&(t.clearcoatNormalMap.value=i.clearcoatNormalMap,refreshTransformUniform(i.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),i.side===v&&t.clearcoatNormalScale.value.negate()));i.dispersion>0&&(t.dispersion.value=i.dispersion);i.iridescence>0&&(t.iridescence.value=i.iridescence,t.iridescenceIOR.value=i.iridescenceIOR,t.iridescenceThicknessMinimum.value=i.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=i.iridescenceThicknessRange[1],i.iridescenceMap&&(t.iridescenceMap.value=i.iridescenceMap,refreshTransformUniform(i.iridescenceMap,t.iridescenceMapTransform)),i.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=i.iridescenceThicknessMap,refreshTransformUniform(i.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));i.transmission>0&&(t.transmission.value=i.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),i.transmissionMap&&(t.transmissionMap.value=i.transmissionMap,refreshTransformUniform(i.transmissionMap,t.transmissionMapTransform)),t.thickness.value=i.thickness,i.thicknessMap&&(t.thicknessMap.value=i.thicknessMap,refreshTransformUniform(i.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=i.attenuationDistance,t.attenuationColor.value.copy(i.attenuationColor));i.anisotropy>0&&(t.anisotropyVector.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation)),i.anisotropyMap&&(t.anisotropyMap.value=i.anisotropyMap,refreshTransformUniform(i.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=i.specularIntensity,t.specularColor.value.copy(i.specularColor),i.specularColorMap&&(t.specularColorMap.value=i.specularColorMap,refreshTransformUniform(i.specularColorMap,t.specularColorMapTransform));i.specularIntensityMap&&(t.specularIntensityMap.value=i.specularIntensityMap,refreshTransformUniform(i.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,l)):r.isMeshMatcapMaterial?(refreshUniformsCommon(t,r),function refreshUniformsMatcap(t,i){i.matcap&&(t.matcap.value=i.matcap)}(t,r)):r.isMeshDepthMaterial?refreshUniformsCommon(t,r):r.isMeshDistanceMaterial?(refreshUniformsCommon(t,r),function refreshUniformsDistance(t,r){const a=i.get(r).light;t.referencePosition.value.setFromMatrixPosition(a.matrixWorld),t.nearDistance.value=a.shadow.camera.near,t.farDistance.value=a.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?refreshUniformsCommon(t,r):r.isLineBasicMaterial?(!function refreshUniformsLine(t,i){t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,i.map&&(t.map.value=i.map,refreshTransformUniform(i.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function refreshUniformsDash(t,i){t.dashSize.value=i.dashSize,t.totalSize.value=i.dashSize+i.gapSize,t.scale.value=i.scale}(t,r)):r.isPointsMaterial?function refreshUniformsPoints(t,i,r,a){t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.size.value=i.size*r,t.scale.value=.5*a,i.map&&(t.map.value=i.map,refreshTransformUniform(i.map,t.uvTransform));i.alphaMap&&(t.alphaMap.value=i.alphaMap,refreshTransformUniform(i.alphaMap,t.alphaMapTransform));i.alphaTest>0&&(t.alphaTest.value=i.alphaTest)}(t,r,a,o):r.isSpriteMaterial?function refreshUniformsSprites(t,i){t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.rotation.value=i.rotation,i.map&&(t.map.value=i.map,refreshTransformUniform(i.map,t.mapTransform));i.alphaMap&&(t.alphaMap.value=i.alphaMap,refreshTransformUniform(i.alphaMap,t.alphaMapTransform));i.alphaTest>0&&(t.alphaTest.value=i.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(t,i,r,a){let o={},l={},c=[];const h=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(t,i,r,a){const o=t.value,l=i+"_"+r;if(void 0===a[l])return a[l]="number"==typeof o||"boolean"==typeof o?o:o.clone(),!0;{const t=a[l];if("number"==typeof o||"boolean"==typeof o){if(t!==o)return a[l]=o,!0}else if(!1===t.equals(o))return t.copy(o),!0}return!1}function getUniformSize(t){const i={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(i.boundary=4,i.storage=4):t.isVector2?(i.boundary=8,i.storage=8):t.isVector3||t.isColor?(i.boundary=16,i.storage=12):t.isVector4?(i.boundary=16,i.storage=16):t.isMatrix3?(i.boundary=48,i.storage=48):t.isMatrix4?(i.boundary=64,i.storage=64):t.isTexture,i}function onUniformsGroupsDispose(i){const r=i.target;r.removeEventListener("dispose",onUniformsGroupsDispose);const a=c.indexOf(r.__bindingPointIndex);c.splice(a,1),t.deleteBuffer(o[r.id]),delete o[r.id],delete l[r.id]}return{bind:function bind(t,i){const r=i.program;a.uniformBlockBinding(t,r)},update:function update(r,u){let d=o[r.id];void 0===d&&(!function prepareUniformsGroup(t){const i=t.uniforms;let r=0;const a=16;for(let t=0,o=i.length;t<o;t++){const o=Array.isArray(i[t])?i[t]:[i[t]];for(let t=0,i=o.length;t<i;t++){const i=o[t],l=Array.isArray(i.value)?i.value:[i.value];for(let t=0,o=l.length;t<o;t++){const o=getUniformSize(l[t]),c=r%a,h=c%o.boundary,u=c+h;r+=h,0!==u&&a-u<o.storage&&(r+=a-u),i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=r,r+=o.storage}}}const o=r%a;o>0&&(r+=a-o);return t.__size=r,t.__cache={},this}(r),d=function createBuffer(i){const r=function allocateBindingPointIndex(){for(let t=0;t<h;t++)if(-1===c.indexOf(t))return c.push(t),t;return 0}();i.__bindingPointIndex=r;const a=t.createBuffer(),o=i.__size,l=i.usage;return t.bindBuffer(t.UNIFORM_BUFFER,a),t.bufferData(t.UNIFORM_BUFFER,o,l),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,r,a),a}(r),o[r.id]=d,r.addEventListener("dispose",onUniformsGroupsDispose));const p=u.program;a.updateUBOMapping(r,p);const m=i.render.frame;l[r.id]!==m&&(!function updateBufferData(i){const r=o[i.id],a=i.uniforms,l=i.__cache;t.bindBuffer(t.UNIFORM_BUFFER,r);for(let i=0,r=a.length;i<r;i++){const r=Array.isArray(a[i])?a[i]:[a[i]];for(let a=0,o=r.length;a<o;a++){const o=r[a];if(!0===hasUniformChanged(o,i,a,l)){const i=o.__offset,r=Array.isArray(o.value)?o.value:[o.value];let a=0;for(let l=0;l<r.length;l++){const c=r[l],h=getUniformSize(c);"number"==typeof c||"boolean"==typeof c?(o.__data[0]=c,t.bufferSubData(t.UNIFORM_BUFFER,i+a,o.__data)):c.isMatrix3?(o.__data[0]=c.elements[0],o.__data[1]=c.elements[1],o.__data[2]=c.elements[2],o.__data[3]=0,o.__data[4]=c.elements[3],o.__data[5]=c.elements[4],o.__data[6]=c.elements[5],o.__data[7]=0,o.__data[8]=c.elements[6],o.__data[9]=c.elements[7],o.__data[10]=c.elements[8],o.__data[11]=0):(c.toArray(o.__data,a),a+=h.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,i,o.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(r),l[r.id]=m)},dispose:function dispose(){for(const i in o)t.deleteBuffer(o[i]);c=[],o={},l={}}}}class WebGLRenderer{constructor(t={}){const{canvas:i=createCanvasElement(),context:r=null,depth:a=!0,stencil:o=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:u=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=t;let g;if(this.isWebGLRenderer=!0,null!==r){if("undefined"!=typeof WebGLRenderingContext&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=r.getContextAttributes().alpha}else g=l;const x=new Uint32Array(4),b=new Int32Array(4);let _=null,S=null;const M=[],w=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=bt,this.toneMapping=G,this.toneMappingExposure=1;const E=this;let T=!1,A=0,C=0,P=null,R=-1,I=null;const D=new Vector4,L=new Vector4;let N=null;const O=new gn(0);let U=0,B=i.width,z=i.height,V=1,k=null,H=null;const W=new Vector4(0,0,B,z),j=new Vector4(0,0,B,z);let X=!1;const q=new Frustum;let Y=!1,K=!1;const Z=new Matrix4,Q=new Vector3,J=new Vector4,$={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ee=!1;function getTargetPixelRatio(){return null===P?V:1}let te,ie,ne,re,se,ae,oe,le,ue,de,me,ge,_e,Se,Me,we,Ee,Te,Ae,Ce,Pe,Ie,Ne,Fe,Oe=r;function getContext(t,r){return i.getContext(t,r)}try{const t={alpha:!0,depth:a,stencil:o,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${d}`),i.addEventListener("webglcontextlost",onContextLost,!1),i.addEventListener("webglcontextrestored",onContextRestore,!1),i.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===Oe){const i="webgl2";if(Oe=getContext(i,t),null===Oe)throw getContext(i)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(t){throw t}function initGLContext(){te=new WebGLExtensions(Oe),te.init(),Ie=new WebGLUtils(Oe,te),ie=new WebGLCapabilities(Oe,te,t,Ie),ne=new WebGLState(Oe),re=new WebGLInfo(Oe),se=new WebGLProperties,ae=new WebGLTextures(Oe,te,ne,se,ie,Ie,re),oe=new WebGLCubeMaps(E),le=new WebGLCubeUVMaps(E),ue=new WebGLAttributes(Oe),Ne=new WebGLBindingStates(Oe,ue),de=new WebGLGeometries(Oe,ue,re,Ne),me=new WebGLObjects(Oe,de,ue,re),Ae=new WebGLMorphtargets(Oe,ie,ae),we=new WebGLClipping(se),ge=new WebGLPrograms(E,oe,le,te,ie,Ne,we),_e=new WebGLMaterials(E,se),Se=new WebGLRenderLists,Me=new WebGLRenderStates(te),Te=new WebGLBackground(E,oe,le,ne,me,g,h),Ee=new WebGLShadowMap(E,me,ie),Fe=new WebGLUniformsGroups(Oe,re,ie,ne),Ce=new WebGLBufferRenderer(Oe,te,re),Pe=new WebGLIndexedBufferRenderer(Oe,te,re),re.programs=ge.programs,E.capabilities=ie,E.extensions=te,E.properties=se,E.renderLists=Se,E.shadowMap=Ee,E.state=ne,E.info=re}initGLContext();const Ue=new WebXRManager(E,Oe);function onContextLost(t){t.preventDefault(),T=!0}function onContextRestore(){T=!1;const t=re.autoReset,i=Ee.enabled,r=Ee.autoUpdate,a=Ee.needsUpdate,o=Ee.type;initGLContext(),re.autoReset=t,Ee.enabled=i,Ee.autoUpdate=r,Ee.needsUpdate=a,Ee.type=o}function onContextCreationError(t){}function onMaterialDispose(t){const i=t.target;i.removeEventListener("dispose",onMaterialDispose),function deallocateMaterial(t){(function releaseMaterialProgramReferences(t){const i=se.get(t).programs;void 0!==i&&(i.forEach((function(t){ge.releaseProgram(t)})),t.isShaderMaterial&&ge.releaseShaderCache(t))})(t),se.remove(t)}(i)}function prepareMaterial(t,i,r){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=v,t.needsUpdate=!0,getProgram(t,i,r),t.side=y,t.needsUpdate=!0,getProgram(t,i,r),t.side=2):getProgram(t,i,r)}this.xr=Ue,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){const t=te.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=te.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(t){void 0!==t&&(V=t,this.setSize(B,z,!1))},this.getSize=function(t){return t.set(B,z)},this.setSize=function(t,r,a=!0){Ue.isPresenting||(B=t,z=r,i.width=Math.floor(t*V),i.height=Math.floor(r*V),!0===a&&(i.style.width=t+"px",i.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(t){return t.set(B*V,z*V).floor()},this.setDrawingBufferSize=function(t,r,a){B=t,z=r,V=a,i.width=Math.floor(t*a),i.height=Math.floor(r*a),this.setViewport(0,0,t,r)},this.getCurrentViewport=function(t){return t.copy(D)},this.getViewport=function(t){return t.copy(W)},this.setViewport=function(t,i,r,a){t.isVector4?W.set(t.x,t.y,t.z,t.w):W.set(t,i,r,a),ne.viewport(D.copy(W).multiplyScalar(V).round())},this.getScissor=function(t){return t.copy(j)},this.setScissor=function(t,i,r,a){t.isVector4?j.set(t.x,t.y,t.z,t.w):j.set(t,i,r,a),ne.scissor(L.copy(j).multiplyScalar(V).round())},this.getScissorTest=function(){return X},this.setScissorTest=function(t){ne.setScissorTest(X=t)},this.setOpaqueSort=function(t){k=t},this.setTransparentSort=function(t){H=t},this.getClearColor=function(t){return t.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor.apply(Te,arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha.apply(Te,arguments)},this.clear=function(t=!0,i=!0,r=!0){let a=0;if(t){let t=!1;if(null!==P){const i=P.texture.format;t=i===Le||i===De||i===Re}if(t){const t=P.texture.type,i=t===he||t===fe||t===pe||t===be||t===ve||t===xe,r=Te.getClearColor(),a=Te.getClearAlpha(),o=r.r,l=r.g,c=r.b;i?(x[0]=o,x[1]=l,x[2]=c,x[3]=a,Oe.clearBufferuiv(Oe.COLOR,0,x)):(b[0]=o,b[1]=l,b[2]=c,b[3]=a,Oe.clearBufferiv(Oe.COLOR,0,b))}else a|=Oe.COLOR_BUFFER_BIT}i&&(a|=Oe.DEPTH_BUFFER_BIT),r&&(a|=Oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Oe.clear(a)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",onContextLost,!1),i.removeEventListener("webglcontextrestored",onContextRestore,!1),i.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),Se.dispose(),Me.dispose(),se.dispose(),oe.dispose(),le.dispose(),me.dispose(),Ne.dispose(),Fe.dispose(),ge.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",onXRSessionStart),Ue.removeEventListener("sessionend",onXRSessionEnd),ze.stop()},this.renderBufferDirect=function(t,i,r,a,o,l){null===i&&(i=$);const c=o.isMesh&&o.matrixWorld.determinant()<0,h=function setProgram(t,i,r,a,o){!0!==i.isScene&&(i=$);ae.resetTextureUnits();const l=i.fog,c=a.isMeshStandardMaterial?i.environment:null,h=null===P?E.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:_t,u=(a.isMeshStandardMaterial?le:oe).get(a.envMap||c),d=!0===a.vertexColors&&!!r.attributes.color&&4===r.attributes.color.itemSize,p=!!r.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),m=!!r.morphAttributes.position,g=!!r.morphAttributes.normal,y=!!r.morphAttributes.color;let v=G;a.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(v=E.toneMapping));const x=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,b=void 0!==x?x.length:0,_=se.get(a),M=S.state.lights;if(!0===Y&&(!0===K||t!==I)){const i=t===I&&a.id===R;we.setState(a,t,i)}let w=!1;a.version===_.__version?_.needsLights&&_.lightsStateVersion!==M.state.version||_.outputColorSpace!==h||o.isBatchedMesh&&!1===_.batching?w=!0:o.isBatchedMesh||!0!==_.batching?o.isBatchedMesh&&!0===_.batchingColor&&null===o.colorTexture||o.isBatchedMesh&&!1===_.batchingColor&&null!==o.colorTexture||o.isInstancedMesh&&!1===_.instancing?w=!0:o.isInstancedMesh||!0!==_.instancing?o.isSkinnedMesh&&!1===_.skinning?w=!0:o.isSkinnedMesh||!0!==_.skinning?o.isInstancedMesh&&!0===_.instancingColor&&null===o.instanceColor||o.isInstancedMesh&&!1===_.instancingColor&&null!==o.instanceColor||o.isInstancedMesh&&!0===_.instancingMorph&&null===o.morphTexture||o.isInstancedMesh&&!1===_.instancingMorph&&null!==o.morphTexture||_.envMap!==u||!0===a.fog&&_.fog!==l?w=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===we.numPlanes&&_.numIntersection===we.numIntersection?(_.vertexAlphas!==d||_.vertexTangents!==p||_.morphTargets!==m||_.morphNormals!==g||_.morphColors!==y||_.toneMapping!==v||_.morphTargetsCount!==b)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,_.__version=a.version);let T=_.currentProgram;!0===w&&(T=getProgram(a,i,o));let A=!1,C=!1,D=!1;const L=T.getUniforms(),N=_.uniforms;ne.useProgram(T.program)&&(A=!0,C=!0,D=!0);a.id!==R&&(R=a.id,C=!0);if(A||I!==t){L.setValue(Oe,"projectionMatrix",t.projectionMatrix),L.setValue(Oe,"viewMatrix",t.matrixWorldInverse);const i=L.map.cameraPosition;void 0!==i&&i.setValue(Oe,Q.setFromMatrixPosition(t.matrixWorld)),ie.logarithmicDepthBuffer&&L.setValue(Oe,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&L.setValue(Oe,"isOrthographic",!0===t.isOrthographicCamera),I!==t&&(I=t,C=!0,D=!0)}if(o.isSkinnedMesh){L.setOptional(Oe,o,"bindMatrix"),L.setOptional(Oe,o,"bindMatrixInverse");const t=o.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(Oe,"boneTexture",t.boneTexture,ae))}o.isBatchedMesh&&(L.setOptional(Oe,o,"batchingTexture"),L.setValue(Oe,"batchingTexture",o._matricesTexture,ae),L.setOptional(Oe,o,"batchingIdTexture"),L.setValue(Oe,"batchingIdTexture",o._indirectTexture,ae),L.setOptional(Oe,o,"batchingColorTexture"),null!==o._colorsTexture&&L.setValue(Oe,"batchingColorTexture",o._colorsTexture,ae));const O=r.morphAttributes;void 0===O.position&&void 0===O.normal&&void 0===O.color||Ae.update(o,r,T);(C||_.receiveShadow!==o.receiveShadow)&&(_.receiveShadow=o.receiveShadow,L.setValue(Oe,"receiveShadow",o.receiveShadow));a.isMeshGouraudMaterial&&null!==a.envMap&&(N.envMap.value=u,N.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1);a.isMeshStandardMaterial&&null===a.envMap&&null!==i.environment&&(N.envMapIntensity.value=i.environmentIntensity);C&&(L.setValue(Oe,"toneMappingExposure",E.toneMappingExposure),_.needsLights&&function markUniformsLightsNeedsUpdate(t,i){t.ambientLightColor.needsUpdate=i,t.lightProbe.needsUpdate=i,t.directionalLights.needsUpdate=i,t.directionalLightShadows.needsUpdate=i,t.pointLights.needsUpdate=i,t.pointLightShadows.needsUpdate=i,t.spotLights.needsUpdate=i,t.spotLightShadows.needsUpdate=i,t.rectAreaLights.needsUpdate=i,t.hemisphereLights.needsUpdate=i}(N,D),l&&!0===a.fog&&_e.refreshFogUniforms(N,l),_e.refreshMaterialUniforms(N,a,V,z,S.state.transmissionRenderTarget[t.id]),WebGLUniforms.upload(Oe,getUniformList(_),N,ae));a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(WebGLUniforms.upload(Oe,getUniformList(_),N,ae),a.uniformsNeedUpdate=!1);a.isSpriteMaterial&&L.setValue(Oe,"center",o.center);if(L.setValue(Oe,"modelViewMatrix",o.modelViewMatrix),L.setValue(Oe,"normalMatrix",o.normalMatrix),L.setValue(Oe,"modelMatrix",o.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){const t=a.uniformsGroups;for(let i=0,r=t.length;i<r;i++){const r=t[i];Fe.update(r,T),Fe.bind(r,T)}}return T}(t,i,r,a,o);ne.setMaterial(a,c);let u=r.index,d=1;if(!0===a.wireframe){if(u=de.getWireframeAttribute(r),void 0===u)return;d=2}const p=r.drawRange,m=r.attributes.position;let g=p.start*d,y=(p.start+p.count)*d;null!==l&&(g=Math.max(g,l.start*d),y=Math.min(y,(l.start+l.count)*d)),null!==u?(g=Math.max(g,0),y=Math.min(y,u.count)):null!=m&&(g=Math.max(g,0),y=Math.min(y,m.count));const v=y-g;if(v<0||v===1/0)return;let x;Ne.setup(o,a,h,r,u);let b=Ce;if(null!==u&&(x=ue.get(u),b=Pe,b.setIndex(x)),o.isMesh)!0===a.wireframe?(ne.setLineWidth(a.wireframeLinewidth*getTargetPixelRatio()),b.setMode(Oe.LINES)):b.setMode(Oe.TRIANGLES);else if(o.isLine){let t=a.linewidth;void 0===t&&(t=1),ne.setLineWidth(t*getTargetPixelRatio()),o.isLineSegments?b.setMode(Oe.LINES):o.isLineLoop?b.setMode(Oe.LINE_LOOP):b.setMode(Oe.LINE_STRIP)}else o.isPoints?b.setMode(Oe.POINTS):o.isSprite&&b.setMode(Oe.TRIANGLES);if(o.isBatchedMesh)if(null!==o._multiDrawInstances)b.renderMultiDrawInstances(o._multiDrawStarts,o._multiDrawCounts,o._multiDrawCount,o._multiDrawInstances);else if(te.get("WEBGL_multi_draw"))b.renderMultiDraw(o._multiDrawStarts,o._multiDrawCounts,o._multiDrawCount);else{const t=o._multiDrawStarts,i=o._multiDrawCounts,r=o._multiDrawCount,l=u?ue.get(u).bytesPerElement:1,c=se.get(a).currentProgram.getUniforms();for(let a=0;a<r;a++)c.setValue(Oe,"_gl_DrawID",a),b.render(t[a]/l,i[a])}else if(o.isInstancedMesh)b.renderInstances(g,v,o.count);else if(r.isInstancedBufferGeometry){const t=void 0!==r._maxInstanceCount?r._maxInstanceCount:1/0,i=Math.min(r.instanceCount,t);b.renderInstances(g,v,i)}else b.render(g,v)},this.compile=function(t,i,r=null){null===r&&(r=t),S=Me.get(r),S.init(i),w.push(S),r.traverseVisible((function(t){t.isLight&&t.layers.test(i.layers)&&(S.pushLight(t),t.castShadow&&S.pushShadow(t))})),t!==r&&t.traverseVisible((function(t){t.isLight&&t.layers.test(i.layers)&&(S.pushLight(t),t.castShadow&&S.pushShadow(t))})),S.setupLights();const a=new Set;return t.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let o=0;o<i.length;o++){const l=i[o];prepareMaterial(l,r,t),a.add(l)}else prepareMaterial(i,r,t),a.add(i)})),w.pop(),S=null,a},this.compileAsync=function(t,i,r=null){const a=this.compile(t,i,r);return new Promise((i=>{function checkMaterialsReady(){a.forEach((function(t){se.get(t).currentProgram.isReady()&&a.delete(t)})),0!==a.size?setTimeout(checkMaterialsReady,10):i(t)}null!==te.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)}))};let Be=null;function onXRSessionStart(){ze.stop()}function onXRSessionEnd(){ze.start()}const ze=new WebGLAnimation;function projectObject(t,i,r,a){if(!1===t.visible)return;if(t.layers.test(i.layers))if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(i);else if(t.isLight)S.pushLight(t),t.castShadow&&S.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||q.intersectsSprite(t)){a&&J.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Z);const i=me.update(t),o=t.material;o.visible&&_.push(t,i,o,r,J.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||q.intersectsObject(t))){const i=me.update(t),o=t.material;if(a&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),J.copy(t.boundingSphere.center)):(null===i.boundingSphere&&i.computeBoundingSphere(),J.copy(i.boundingSphere.center)),J.applyMatrix4(t.matrixWorld).applyMatrix4(Z)),Array.isArray(o)){const a=i.groups;for(let l=0,c=a.length;l<c;l++){const c=a[l],h=o[c.materialIndex];h&&h.visible&&_.push(t,i,h,r,J.z,c)}}else o.visible&&_.push(t,i,o,r,J.z,null)}const o=t.children;for(let t=0,l=o.length;t<l;t++)projectObject(o[t],i,r,a)}function renderScene(t,i,r,a){const o=t.opaque,l=t.transmissive,c=t.transparent;S.setupLightsView(r),!0===Y&&we.setGlobalState(E.clippingPlanes,r),a&&ne.viewport(D.copy(a)),o.length>0&&renderObjects(o,i,r),l.length>0&&renderObjects(l,i,r),c.length>0&&renderObjects(c,i,r),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function renderTransmissionPass(t,i,r,a){if(null!==(!0===r.isScene?r.overrideMaterial:null))return;void 0===S.state.transmissionRenderTarget[a.id]&&(S.state.transmissionRenderTarget[a.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")||te.has("EXT_color_buffer_float")?ye:he,minFilter:ce,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ei.workingColorSpace}));const l=S.state.transmissionRenderTarget[a.id],c=a.viewport||D;l.setSize(c.z,c.w);const h=E.getRenderTarget();E.setRenderTarget(l),E.getClearColor(O),U=E.getClearAlpha(),U<1&&E.setClearColor(16777215,.5),E.clear(),ee&&Te.render(r);const u=E.toneMapping;E.toneMapping=G;const d=a.viewport;if(void 0!==a.viewport&&(a.viewport=void 0),S.setupLightsView(a),!0===Y&&we.setGlobalState(E.clippingPlanes,a),renderObjects(t,r,a),ae.updateMultisampleRenderTarget(l),ae.updateRenderTargetMipmap(l),!1===te.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let o=0,l=i.length;o<l;o++){const l=i[o],c=l.object,h=l.geometry,u=l.material,d=l.group;if(2===u.side&&c.layers.test(a.layers)){const i=u.side;u.side=v,u.needsUpdate=!0,renderObject(c,r,a,h,u,d),u.side=i,u.needsUpdate=!0,t=!0}}!0===t&&(ae.updateMultisampleRenderTarget(l),ae.updateRenderTargetMipmap(l))}E.setRenderTarget(h),E.setClearColor(O,U),void 0!==d&&(a.viewport=d),E.toneMapping=u}function renderObjects(t,i,r){const a=!0===i.isScene?i.overrideMaterial:null;for(let o=0,l=t.length;o<l;o++){const l=t[o],c=l.object,h=l.geometry,u=null===a?l.material:a,d=l.group;c.layers.test(r.layers)&&renderObject(c,i,r,h,u,d)}}function renderObject(t,i,r,a,o,l){t.onBeforeRender(E,i,r,a,o,l),t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),!0===o.transparent&&2===o.side&&!1===o.forceSinglePass?(o.side=v,o.needsUpdate=!0,E.renderBufferDirect(r,i,a,o,t,l),o.side=y,o.needsUpdate=!0,E.renderBufferDirect(r,i,a,o,t,l),o.side=2):E.renderBufferDirect(r,i,a,o,t,l),t.onAfterRender(E,i,r,a,o,l)}function getProgram(t,i,r){!0!==i.isScene&&(i=$);const a=se.get(t),o=S.state.lights,l=S.state.shadowsArray,c=o.state.version,h=ge.getParameters(t,o.state,l,i,r),u=ge.getProgramCacheKey(h);let d=a.programs;a.environment=t.isMeshStandardMaterial?i.environment:null,a.fog=i.fog,a.envMap=(t.isMeshStandardMaterial?le:oe).get(t.envMap||a.environment),a.envMapRotation=null!==a.environment&&null===t.envMap?i.environmentRotation:t.envMapRotation,void 0===d&&(t.addEventListener("dispose",onMaterialDispose),d=new Map,a.programs=d);let p=d.get(u);if(void 0!==p){if(a.currentProgram===p&&a.lightsStateVersion===c)return updateCommonMaterialProperties(t,h),p}else h.uniforms=ge.getUniforms(t),t.onBeforeCompile(h,E),p=ge.acquireProgram(h,u),d.set(u,p),a.uniforms=h.uniforms;const m=a.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(m.clippingPlanes=we.uniform),updateCommonMaterialProperties(t,h),a.needsLights=function materialNeedsLights(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),a.lightsStateVersion=c,a.needsLights&&(m.ambientLightColor.value=o.state.ambient,m.lightProbe.value=o.state.probe,m.directionalLights.value=o.state.directional,m.directionalLightShadows.value=o.state.directionalShadow,m.spotLights.value=o.state.spot,m.spotLightShadows.value=o.state.spotShadow,m.rectAreaLights.value=o.state.rectArea,m.ltc_1.value=o.state.rectAreaLTC1,m.ltc_2.value=o.state.rectAreaLTC2,m.pointLights.value=o.state.point,m.pointLightShadows.value=o.state.pointShadow,m.hemisphereLights.value=o.state.hemi,m.directionalShadowMap.value=o.state.directionalShadowMap,m.directionalShadowMatrix.value=o.state.directionalShadowMatrix,m.spotShadowMap.value=o.state.spotShadowMap,m.spotLightMatrix.value=o.state.spotLightMatrix,m.spotLightMap.value=o.state.spotLightMap,m.pointShadowMap.value=o.state.pointShadowMap,m.pointShadowMatrix.value=o.state.pointShadowMatrix),a.currentProgram=p,a.uniformsList=null,p}function getUniformList(t){if(null===t.uniformsList){const i=t.currentProgram.getUniforms();t.uniformsList=WebGLUniforms.seqWithValue(i.seq,t.uniforms)}return t.uniformsList}function updateCommonMaterialProperties(t,i){const r=se.get(t);r.outputColorSpace=i.outputColorSpace,r.batching=i.batching,r.batchingColor=i.batchingColor,r.instancing=i.instancing,r.instancingColor=i.instancingColor,r.instancingMorph=i.instancingMorph,r.skinning=i.skinning,r.morphTargets=i.morphTargets,r.morphNormals=i.morphNormals,r.morphColors=i.morphColors,r.morphTargetsCount=i.morphTargetsCount,r.numClippingPlanes=i.numClippingPlanes,r.numIntersection=i.numClipIntersection,r.vertexAlphas=i.vertexAlphas,r.vertexTangents=i.vertexTangents,r.toneMapping=i.toneMapping}ze.setAnimationLoop((function onAnimationFrame(t){Be&&Be(t)})),"undefined"!=typeof self&&ze.setContext(self),this.setAnimationLoop=function(t){Be=t,Ue.setAnimationLoop(t),null===t?ze.stop():ze.start()},Ue.addEventListener("sessionstart",onXRSessionStart),Ue.addEventListener("sessionend",onXRSessionEnd),this.render=function(t,i){if(void 0!==i&&!0!==i.isCamera)return;if(!0===T)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===i.parent&&!0===i.matrixWorldAutoUpdate&&i.updateMatrixWorld(),!0===Ue.enabled&&!0===Ue.isPresenting&&(!0===Ue.cameraAutoUpdate&&Ue.updateCamera(i),i=Ue.getCamera()),!0===t.isScene&&t.onBeforeRender(E,t,i,P),S=Me.get(t,w.length),S.init(i),w.push(S),Z.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),q.setFromProjectionMatrix(Z),K=this.localClippingEnabled,Y=we.init(this.clippingPlanes,K),_=Se.get(t,M.length),_.init(),M.push(_),!0===Ue.enabled&&!0===Ue.isPresenting){const t=E.xr.getDepthSensingMesh();null!==t&&projectObject(t,i,-1/0,E.sortObjects)}projectObject(t,i,0,E.sortObjects),_.finish(),!0===E.sortObjects&&_.sort(k,H),ee=!1===Ue.enabled||!1===Ue.isPresenting||!1===Ue.hasDepthSensing(),ee&&Te.addToRenderList(_,t),this.info.render.frame++,!0===Y&&we.beginShadows();const r=S.state.shadowsArray;Ee.render(r,t,i),!0===Y&&we.endShadows(),!0===this.info.autoReset&&this.info.reset();const a=_.opaque,o=_.transmissive;if(S.setupLights(),i.isArrayCamera){const r=i.cameras;if(o.length>0)for(let i=0,l=r.length;i<l;i++){renderTransmissionPass(a,o,t,r[i])}ee&&Te.render(t);for(let i=0,a=r.length;i<a;i++){const a=r[i];renderScene(_,t,a,a.viewport)}}else o.length>0&&renderTransmissionPass(a,o,t,i),ee&&Te.render(t),renderScene(_,t,i);null!==P&&(ae.updateMultisampleRenderTarget(P),ae.updateRenderTargetMipmap(P)),!0===t.isScene&&t.onAfterRender(E,t,i),Ne.resetDefaultState(),R=-1,I=null,w.pop(),w.length>0?(S=w[w.length-1],!0===Y&&we.setGlobalState(E.clippingPlanes,S.state.camera)):S=null,M.pop(),_=M.length>0?M[M.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(t,i,r){se.get(t.texture).__webglTexture=i,se.get(t.depthTexture).__webglTexture=r;const a=se.get(t);a.__hasExternalTextures=!0,a.__autoAllocateDepthBuffer=void 0===r,a.__autoAllocateDepthBuffer||!0===te.has("WEBGL_multisampled_render_to_texture")&&(a.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,i){const r=se.get(t);r.__webglFramebuffer=i,r.__useDefaultFramebuffer=void 0===i},this.setRenderTarget=function(t,i=0,r=0){P=t,A=i,C=r;let a=!0,o=null,l=!1,c=!1;if(t){const h=se.get(t);void 0!==h.__useDefaultFramebuffer?(ne.bindFramebuffer(Oe.FRAMEBUFFER,null),a=!1):void 0===h.__webglFramebuffer?ae.setupRenderTarget(t):h.__hasExternalTextures&&ae.rebindTextures(t,se.get(t.texture).__webglTexture,se.get(t.depthTexture).__webglTexture);const u=t.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(c=!0);const d=se.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(o=Array.isArray(d[i])?d[i][r]:d[i],l=!0):o=t.samples>0&&!1===ae.useMultisampledRTT(t)?se.get(t).__webglMultisampledFramebuffer:Array.isArray(d)?d[r]:d,D.copy(t.viewport),L.copy(t.scissor),N=t.scissorTest}else D.copy(W).multiplyScalar(V).floor(),L.copy(j).multiplyScalar(V).floor(),N=X;if(ne.bindFramebuffer(Oe.FRAMEBUFFER,o)&&a&&ne.drawBuffers(t,o),ne.viewport(D),ne.scissor(L),ne.setScissorTest(N),l){const a=se.get(t.texture);Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Oe.TEXTURE_CUBE_MAP_POSITIVE_X+i,a.__webglTexture,r)}else if(c){const a=se.get(t.texture),o=i||0;Oe.framebufferTextureLayer(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,a.__webglTexture,r||0,o)}R=-1},this.readRenderTargetPixels=function(t,i,r,a,o,l,c){if(!t||!t.isWebGLRenderTarget)return;let h=se.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){ne.bindFramebuffer(Oe.FRAMEBUFFER,h);try{const c=t.texture,h=c.format,u=c.type;if(!ie.textureFormatReadable(h))return;if(!ie.textureTypeReadable(u))return;i>=0&&i<=t.width-a&&r>=0&&r<=t.height-o&&Oe.readPixels(i,r,a,o,Ie.convert(h),Ie.convert(u),l)}finally{const t=null!==P?se.get(P).__webglFramebuffer:null;ne.bindFramebuffer(Oe.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,i,r,a,o,l,c){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=se.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){ne.bindFramebuffer(Oe.FRAMEBUFFER,h);try{const c=t.texture,h=c.format,u=c.type;if(!ie.textureFormatReadable(h))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ie.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(i>=0&&i<=t.width-a&&r>=0&&r<=t.height-o){const t=Oe.createBuffer();Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,t),Oe.bufferData(Oe.PIXEL_PACK_BUFFER,l.byteLength,Oe.STREAM_READ),Oe.readPixels(i,r,a,o,Ie.convert(h),Ie.convert(u),0),Oe.flush();const c=Oe.fenceSync(Oe.SYNC_GPU_COMMANDS_COMPLETE,0);await function probeAsync(t,i,r){return new Promise((function(a,o){setTimeout((function probe(){switch(t.clientWaitSync(i,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:o();break;case t.TIMEOUT_EXPIRED:setTimeout(probe,r);break;default:a()}}),r)}))}(Oe,c,4);try{Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,t),Oe.getBufferSubData(Oe.PIXEL_PACK_BUFFER,0,l)}finally{Oe.deleteBuffer(t),Oe.deleteSync(c)}return l}}finally{const t=null!==P?se.get(P).__webglFramebuffer:null;ne.bindFramebuffer(Oe.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,i=null,r=0){!0!==t.isTexture&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),i=arguments[0]||null,t=arguments[1]);const a=Math.pow(2,-r),o=Math.floor(t.image.width*a),l=Math.floor(t.image.height*a),c=null!==i?i.x:0,h=null!==i?i.y:0;ae.setTexture2D(t,0),Oe.copyTexSubImage2D(Oe.TEXTURE_2D,r,0,0,c,h,o,l),ne.unbindTexture()},this.copyTextureToTexture=function(t,i,r=null,a=null,o=0){let l,c,h,u,d,p;!0!==t.isTexture&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),a=arguments[0]||null,t=arguments[1],i=arguments[2],o=arguments[3]||0,r=null),null!==r?(l=r.max.x-r.min.x,c=r.max.y-r.min.y,h=r.min.x,u=r.min.y):(l=t.image.width,c=t.image.height,h=0,u=0),null!==a?(d=a.x,p=a.y):(d=0,p=0);const m=Ie.convert(i.format),g=Ie.convert(i.type);ae.setTexture2D(i,0),Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,i.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,i.unpackAlignment);const y=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),v=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),x=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),b=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),_=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES),S=t.isCompressedTexture?t.mipmaps[o]:t.image;Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,S.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,S.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,h),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,u),t.isDataTexture?Oe.texSubImage2D(Oe.TEXTURE_2D,o,d,p,l,c,m,g,S.data):t.isCompressedTexture?Oe.compressedTexSubImage2D(Oe.TEXTURE_2D,o,d,p,S.width,S.height,m,S.data):Oe.texSubImage2D(Oe.TEXTURE_2D,o,d,p,l,c,m,g,S),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,y),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,v),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,x),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,b),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,_),0===o&&i.generateMipmaps&&Oe.generateMipmap(Oe.TEXTURE_2D),ne.unbindTexture()},this.copyTextureToTexture3D=function(t,i,r=null,a=null,o=0){let l,c,h,u,d,p,m,g,y;!0!==t.isTexture&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),r=arguments[0]||null,a=arguments[1]||null,t=arguments[2],i=arguments[3],o=arguments[4]||0);const v=t.isCompressedTexture?t.mipmaps[o]:t.image;null!==r?(l=r.max.x-r.min.x,c=r.max.y-r.min.y,h=r.max.z-r.min.z,u=r.min.x,d=r.min.y,p=r.min.z):(l=v.width,c=v.height,h=v.depth,u=0,d=0,p=0),null!==a?(m=a.x,g=a.y,y=a.z):(m=0,g=0,y=0);const x=Ie.convert(i.format),b=Ie.convert(i.type);let _;if(i.isData3DTexture)ae.setTexture3D(i,0),_=Oe.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return;ae.setTexture2DArray(i,0),_=Oe.TEXTURE_2D_ARRAY}Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,i.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,i.unpackAlignment);const S=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),M=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),w=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),E=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),T=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES);Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,v.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,v.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,u),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,d),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,p),t.isDataTexture||t.isData3DTexture?Oe.texSubImage3D(_,o,m,g,y,l,c,h,x,b,v.data):i.isCompressedArrayTexture?Oe.compressedTexSubImage3D(_,o,m,g,y,l,c,h,x,v.data):Oe.texSubImage3D(_,o,m,g,y,l,c,h,x,b,v),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,S),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,M),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,w),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,E),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,T),0===o&&i.generateMipmaps&&Oe.generateMipmap(_),ne.unbindTexture()},this.initRenderTarget=function(t){void 0===se.get(t).__webglFramebuffer&&ae.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?ae.setTextureCube(t,0):t.isData3DTexture?ae.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?ae.setTexture2DArray(t,0):ae.setTexture2D(t,0),ne.unbindTexture()},this.resetState=function(){A=0,C=0,P=null,ne.reset(),Ne.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zt}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const i=this.getContext();i.drawingBufferColorSpace=t===St?"display-p3":"srgb",i.unpackColorSpace=ei.workingColorSpace===Mt?"display-p3":"srgb"}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return null!==this.fog&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class InterleavedBuffer{constructor(t,i){this.isInterleavedBuffer=!0,this.array=t,this.stride=i,this.count=void 0!==t?t.length/i:0,this.usage=Ut,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return warnOnce("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,i,r){t*=this.stride,r*=i.stride;for(let a=0,o=this.stride;a<o;a++)this.array[t+a]=i.array[r+a];return this}set(t,i=0){return this.array.set(t,i),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(i,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Gr=new Vector3;class InterleavedBufferAttribute{constructor(t,i,r,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=i,this.offset=r,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,r=this.data.count;i<r;i++)Gr.fromBufferAttribute(this,i),Gr.applyMatrix4(t),this.setXYZ(i,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(t){for(let i=0,r=this.count;i<r;i++)Gr.fromBufferAttribute(this,i),Gr.applyNormalMatrix(t),this.setXYZ(i,Gr.x,Gr.y,Gr.z);return this}transformDirection(t){for(let i=0,r=this.count;i<r;i++)Gr.fromBufferAttribute(this,i),Gr.transformDirection(t),this.setXYZ(i,Gr.x,Gr.y,Gr.z);return this}getComponent(t,i){let r=this.array[t*this.data.stride+this.offset+i];return this.normalized&&(r=denormalize(r,this.array)),r}setComponent(t,i,r){return this.normalized&&(r=normalize(r,this.array)),this.data.array[t*this.data.stride+this.offset+i]=r,this}setX(t,i){return this.normalized&&(i=normalize(i,this.array)),this.data.array[t*this.data.stride+this.offset]=i,this}setY(t,i){return this.normalized&&(i=normalize(i,this.array)),this.data.array[t*this.data.stride+this.offset+1]=i,this}setZ(t,i){return this.normalized&&(i=normalize(i,this.array)),this.data.array[t*this.data.stride+this.offset+2]=i,this}setW(t,i){return this.normalized&&(i=normalize(i,this.array)),this.data.array[t*this.data.stride+this.offset+3]=i,this}getX(t){let i=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(i=denormalize(i,this.array)),i}getY(t){let i=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(i=denormalize(i,this.array)),i}getZ(t){let i=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(i=denormalize(i,this.array)),i}getW(t){let i=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(i=denormalize(i,this.array)),i}setXY(t,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this}setXYZ(t,i,r,a){return t=t*this.data.stride+this.offset,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array),a=normalize(a,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=a,this}setXYZW(t,i,r,a,o){return t=t*this.data.stride+this.offset,this.normalized&&(i=normalize(i,this.array),r=normalize(r,this.array),a=normalize(a,this.array),o=normalize(o,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=a,this.data.array[t+3]=o,this}clone(t){if(void 0===t){const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new BufferAttribute(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new InterleavedBufferAttribute(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Hr;const Wr=new Vector3,jr=new Vector3,Xr=new Vector3,qr=new Vector2,Yr=new Vector2,Kr=new Matrix4,Zr=new Vector3,Qr=new Vector3,Jr=new Vector3,$r=new Vector2,es=new Vector2,ts=new Vector2;class Sprite extends Object3D{constructor(t=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Hr){Hr=new BufferGeometry;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new InterleavedBuffer(t,5);Hr.setIndex([0,1,2,0,2,3]),Hr.setAttribute("position",new InterleavedBufferAttribute(i,3,0,!1)),Hr.setAttribute("uv",new InterleavedBufferAttribute(i,2,3,!1))}this.geometry=Hr,this.material=t,this.center=new Vector2(.5,.5)}raycast(t,i){t.camera,jr.setFromMatrixScale(this.matrixWorld),Kr.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Xr.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&jr.multiplyScalar(-Xr.z);const r=this.material.rotation;let a,o;0!==r&&(o=Math.cos(r),a=Math.sin(r));const l=this.center;transformVertex(Zr.set(-.5,-.5,0),Xr,l,jr,a,o),transformVertex(Qr.set(.5,-.5,0),Xr,l,jr,a,o),transformVertex(Jr.set(.5,.5,0),Xr,l,jr,a,o),$r.set(0,0),es.set(1,0),ts.set(1,1);let c=t.ray.intersectTriangle(Zr,Qr,Jr,!1,Wr);if(null===c&&(transformVertex(Qr.set(-.5,.5,0),Xr,l,jr,a,o),es.set(0,1),c=t.ray.intersectTriangle(Zr,Jr,Qr,!1,Wr),null===c))return;const h=t.ray.origin.distanceTo(Wr);h<t.near||h>t.far||i.push({distance:h,point:Wr.clone(),uv:Triangle.getInterpolation(Wr,Zr,Qr,Jr,$r,es,ts,new Vector2),face:null,object:this})}copy(t,i){return super.copy(t,i),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function transformVertex(t,i,r,a,o,l){qr.subVectors(t,r).addScalar(.5).multiply(a),void 0!==o?(Yr.x=l*qr.x-o*qr.y,Yr.y=o*qr.x+l*qr.y):Yr.copy(qr),t.copy(i),t.x+=Yr.x,t.y+=Yr.y,t.applyMatrix4(Kr)}const is=new Vector3,ns=new Vector4,rs=new Vector4,ss=new Vector3,as=new Matrix4,os=new Vector3,ls=new Sphere,cs=new Matrix4,hs=new Ray;class SkinnedMesh extends Mesh{constructor(t,i){super(t,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Z,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const i=t.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,os),this.boundingBox.expandByPoint(os)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const i=t.getAttribute("position");for(let t=0;t<i.count;t++)this.getVertexPosition(t,os),this.boundingSphere.expandByPoint(os)}copy(t,i){return super.copy(t,i),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,i){const r=this.material,a=this.matrixWorld;void 0!==r&&(null===this.boundingSphere&&this.computeBoundingSphere(),ls.copy(this.boundingSphere),ls.applyMatrix4(a),!1!==t.ray.intersectsSphere(ls)&&(cs.copy(a).invert(),hs.copy(t.ray).applyMatrix4(cs),null!==this.boundingBox&&!1===hs.intersectsBox(this.boundingBox)||this._computeIntersections(t,i,hs)))}getVertexPosition(t,i){return super.getVertexPosition(t,i),this.applyBoneTransform(t,i),i}bind(t,i){this.skeleton=t,void 0===i&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Vector4,i=this.geometry.attributes.skinWeight;for(let r=0,a=i.count;r<a;r++){t.fromBufferAttribute(i,r);const a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Z?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(t,i){const r=this.skeleton,a=this.geometry;ns.fromBufferAttribute(a.attributes.skinIndex,t),rs.fromBufferAttribute(a.attributes.skinWeight,t),is.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let t=0;t<4;t++){const a=rs.getComponent(t);if(0!==a){const o=ns.getComponent(t);as.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),i.addScaledVector(ss.copy(is).applyMatrix4(as),a)}}return i.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(t=null,i=1,r=1,a,o,l,c,h,u=1003,d=1003,p,m){super(null,l,c,h,u,d,a,o,p,m),this.isDataTexture=!0,this.image={data:t,width:i,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const us=new Matrix4,ds=new Matrix4;class Skeleton{constructor(t=[],i=[]){this.uuid=generateUUID(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===i.length)this.calculateInverses();else if(t.length!==i.length){this.boneInverses=[];for(let t=0,i=this.bones.length;t<i;t++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const i=new Matrix4;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,i=this.boneInverses,r=this.boneMatrices,a=this.boneTexture;for(let a=0,o=t.length;a<o;a++){const o=t[a]?t[a].matrixWorld:ds;us.multiplyMatrices(o,i[a]),us.toArray(r,16*a)}null!==a&&(a.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const i=new Float32Array(t*t*4);i.set(this.boneMatrices);const r=new DataTexture(i,t,t,we,ge);return r.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=r,this}getBoneByName(t){for(let i=0,r=this.bones.length;i<r;i++){const r=this.bones[i];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let r=0,a=t.bones.length;r<a;r++){let a=i[t.bones[r]];void 0===a&&(a=new Bone),this.bones.push(a),this.boneInverses.push((new Matrix4).fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,r=this.boneInverses;for(let a=0,o=i.length;a<o;a++){const o=i[a];t.bones.push(o.uuid);const l=r[a];t.boneInverses.push(l.toArray())}return t}}class InstancedBufferAttribute extends BufferAttribute{constructor(t,i,r,a=1){super(t,i,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const ps=new Matrix4,ms=new Matrix4,fs=[],gs=new Box3,ys=new Matrix4,vs=new Mesh,xs=new Sphere;class InstancedMesh extends Mesh{constructor(t,i,r){super(t,i),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*r),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let t=0;t<r;t++)this.setMatrixAt(t,ys)}computeBoundingBox(){const t=this.geometry,i=this.count;null===this.boundingBox&&(this.boundingBox=new Box3),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<i;r++)this.getMatrixAt(r,ps),gs.copy(t.boundingBox).applyMatrix4(ps),this.boundingBox.union(gs)}computeBoundingSphere(){const t=this.geometry,i=this.count;null===this.boundingSphere&&(this.boundingSphere=new Sphere),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<i;r++)this.getMatrixAt(r,ps),xs.copy(t.boundingSphere).applyMatrix4(ps),this.boundingSphere.union(xs)}copy(t,i){return super.copy(t,i),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,i){i.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,i){i.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,i){const r=i.morphTargetInfluences,a=this.morphTexture.source.data.data,o=t*(r.length+1)+1;for(let t=0;t<r.length;t++)r[t]=a[o+t]}raycast(t,i){const r=this.matrixWorld,a=this.count;if(vs.geometry=this.geometry,vs.material=this.material,void 0!==vs.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),xs.copy(this.boundingSphere),xs.applyMatrix4(r),!1!==t.ray.intersectsSphere(xs)))for(let o=0;o<a;o++){this.getMatrixAt(o,ps),ms.multiplyMatrices(r,ps),vs.matrixWorld=ms,vs.raycast(t,fs);for(let t=0,r=fs.length;t<r;t++){const r=fs[t];r.instanceId=o,r.object=this,i.push(r)}fs.length=0}}setColorAt(t,i){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),i.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,i){i.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,i){const r=i.morphTargetInfluences,a=r.length+1;null===this.morphTexture&&(this.morphTexture=new DataTexture(new Float32Array(a*this.count),a,this.count,Pe,ge));const o=this.morphTexture.source.data.data;let l=0;for(let t=0;t<r.length;t++)l+=r[t];const c=this.geometry.morphTargetsRelative?1:1-l,h=a*t;o[h]=c,o.set(r,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class LineBasicMaterial extends Material{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const bs=new Vector3,_s=new Vector3,Ss=new Matrix4,Ms=new Ray,ws=new Sphere,Es=new Vector3,Ts=new Vector3;class Line extends Object3D{constructor(t=new BufferGeometry,i=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const i=t.attributes.position,r=[0];for(let t=1,a=i.count;t<a;t++)bs.fromBufferAttribute(i,t-1),_s.fromBufferAttribute(i,t),r[t]=r[t-1],r[t]+=bs.distanceTo(_s);t.setAttribute("lineDistance",new Float32BufferAttribute(r,1))}return this}raycast(t,i){const r=this.geometry,a=this.matrixWorld,o=t.params.Line.threshold,l=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),ws.copy(r.boundingSphere),ws.applyMatrix4(a),ws.radius+=o,!1===t.ray.intersectsSphere(ws))return;Ss.copy(a).invert(),Ms.copy(t.ray).applyMatrix4(Ss);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,u=this.isLineSegments?2:1,d=r.index,p=r.attributes.position;if(null!==d){const r=Math.max(0,l.start),a=Math.min(d.count,l.start+l.count);for(let o=r,l=a-1;o<l;o+=u){const r=d.getX(o),a=d.getX(o+1),l=checkIntersection(this,t,Ms,h,r,a);l&&i.push(l)}if(this.isLineLoop){const o=d.getX(a-1),l=d.getX(r),c=checkIntersection(this,t,Ms,h,o,l);c&&i.push(c)}}else{const r=Math.max(0,l.start),a=Math.min(p.count,l.start+l.count);for(let o=r,l=a-1;o<l;o+=u){const r=checkIntersection(this,t,Ms,h,o,o+1);r&&i.push(r)}if(this.isLineLoop){const o=checkIntersection(this,t,Ms,h,a-1,r);o&&i.push(o)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=r.length;t<i;t++){const i=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}}function checkIntersection(t,i,r,a,o,l){const c=t.geometry.attributes.position;bs.fromBufferAttribute(c,o),_s.fromBufferAttribute(c,l);if(r.distanceSqToSegment(bs,_s,Es,Ts)>a)return;Es.applyMatrix4(t.matrixWorld);const h=i.ray.origin.distanceTo(Es);return h<i.near||h>i.far?void 0:{distance:h,point:Ts.clone().applyMatrix4(t.matrixWorld),index:o,face:null,faceIndex:null,object:t}}const As=new Vector3,Cs=new Vector3;class LineSegments extends Line{constructor(t,i){super(t,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const i=t.attributes.position,r=[];for(let t=0,a=i.count;t<a;t+=2)As.fromBufferAttribute(i,t),Cs.fromBufferAttribute(i,t+1),r[t]=0===t?0:r[t-1],r[t+1]=r[t]+As.distanceTo(Cs);t.setAttribute("lineDistance",new Float32BufferAttribute(r,1))}return this}}class LineLoop extends Line{constructor(t,i){super(t,i),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Ps=new Matrix4,Rs=new Ray,Is=new Sphere,Ds=new Vector3;class Points extends Object3D{constructor(t=new BufferGeometry,i=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,i){const r=this.geometry,a=this.matrixWorld,o=t.params.Points.threshold,l=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Is.copy(r.boundingSphere),Is.applyMatrix4(a),Is.radius+=o,!1===t.ray.intersectsSphere(Is))return;Ps.copy(a).invert(),Rs.copy(t.ray).applyMatrix4(Ps);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,u=r.index,d=r.attributes.position;if(null!==u){for(let r=Math.max(0,l.start),o=Math.min(u.count,l.start+l.count);r<o;r++){const o=u.getX(r);Ds.fromBufferAttribute(d,o),testPoint(Ds,o,h,a,t,i,this)}}else{for(let r=Math.max(0,l.start),o=Math.min(d.count,l.start+l.count);r<o;r++)Ds.fromBufferAttribute(d,r),testPoint(Ds,r,h,a,t,i,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=r.length;t<i;t++){const i=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}}function testPoint(t,i,r,a,o,l,c){const h=Rs.distanceSqToPoint(t);if(h<r){const r=new Vector3;Rs.closestPointToPoint(t,r),r.applyMatrix4(a);const u=o.ray.origin.distanceTo(r);if(u<o.near||u>o.far)return;l.push({distance:u,distanceToRay:Math.sqrt(h),point:r,index:i,face:null,object:c})}}class CanvasTexture extends Texture{constructor(t,i,r,a,o,l,c,h,u){super(t,i,r,a,o,l,c,h,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(t,i){const r=this.getUtoTmapping(t);return this.getPoint(r,i)}getPoints(t=5){const i=[];for(let r=0;r<=t;r++)i.push(this.getPoint(r/t));return i}getSpacedPoints(t=5){const i=[];for(let r=0;r<=t;r++)i.push(this.getPointAt(r/t));return i}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let r,a=this.getPoint(0),o=0;i.push(0);for(let l=1;l<=t;l++)r=this.getPoint(l/t),o+=r.distanceTo(a),i.push(o),a=r;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,i){const r=this.getLengths();let a=0;const o=r.length;let l;l=i||t*r[o-1];let c,h=0,u=o-1;for(;h<=u;)if(a=Math.floor(h+(u-h)/2),c=r[a]-l,c<0)h=a+1;else{if(!(c>0)){u=a;break}u=a-1}if(a=u,r[a]===l)return a/(o-1);const d=r[a];return(a+(l-d)/(r[a+1]-d))/(o-1)}getTangent(t,i){const r=1e-4;let a=t-r,o=t+r;a<0&&(a=0),o>1&&(o=1);const l=this.getPoint(a),c=this.getPoint(o),h=i||(l.isVector2?new Vector2:new Vector3);return h.copy(c).sub(l).normalize(),h}getTangentAt(t,i){const r=this.getUtoTmapping(t);return this.getTangent(r,i)}computeFrenetFrames(t,i){const r=new Vector3,a=[],o=[],l=[],c=new Vector3,h=new Matrix4;for(let i=0;i<=t;i++){const r=i/t;a[i]=this.getTangentAt(r,new Vector3)}o[0]=new Vector3,l[0]=new Vector3;let u=Number.MAX_VALUE;const d=Math.abs(a[0].x),p=Math.abs(a[0].y),m=Math.abs(a[0].z);d<=u&&(u=d,r.set(1,0,0)),p<=u&&(u=p,r.set(0,1,0)),m<=u&&r.set(0,0,1),c.crossVectors(a[0],r).normalize(),o[0].crossVectors(a[0],c),l[0].crossVectors(a[0],o[0]);for(let i=1;i<=t;i++){if(o[i]=o[i-1].clone(),l[i]=l[i-1].clone(),c.crossVectors(a[i-1],a[i]),c.length()>Number.EPSILON){c.normalize();const t=Math.acos(clamp(a[i-1].dot(a[i]),-1,1));o[i].applyMatrix4(h.makeRotationAxis(c,t))}l[i].crossVectors(a[i],o[i])}if(!0===i){let i=Math.acos(clamp(o[0].dot(o[t]),-1,1));i/=t,a[0].dot(c.crossVectors(o[0],o[t]))>0&&(i=-i);for(let r=1;r<=t;r++)o[r].applyMatrix4(h.makeRotationAxis(a[r],i*r)),l[r].crossVectors(a[r],o[r])}return{tangents:a,normals:o,binormals:l}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}function CubicPoly(){let t=0,i=0,r=0,a=0;function init(o,l,c,h){t=o,i=c,r=-3*o+3*l-2*c-h,a=2*o-2*l+c+h}return{initCatmullRom:function(t,i,r,a,o){init(i,r,o*(r-t),o*(a-i))},initNonuniformCatmullRom:function(t,i,r,a,o,l,c){let h=(i-t)/o-(r-t)/(o+l)+(r-i)/l,u=(r-i)/l-(a-i)/(l+c)+(a-r)/c;h*=l,u*=l,init(i,r,h,u)},calc:function(o){const l=o*o;return t+i*o+r*l+a*(l*o)}}}const Ls=new Vector3,Ns=new CubicPoly,Fs=new CubicPoly,Os=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(t=[],i=!1,r="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=i,this.curveType=r,this.tension=a}getPoint(t,i=new Vector3){const r=i,a=this.points,o=a.length,l=(o-(this.closed?0:1))*t;let c,h,u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===d&&u===o-1&&(u=o-2,d=1),this.closed||u>0?c=a[(u-1)%o]:(Ls.subVectors(a[0],a[1]).add(a[0]),c=Ls);const p=a[u%o],m=a[(u+1)%o];if(this.closed||u+2<o?h=a[(u+2)%o]:(Ls.subVectors(a[o-1],a[o-2]).add(a[o-1]),h=Ls),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let i=Math.pow(c.distanceToSquared(p),t),r=Math.pow(p.distanceToSquared(m),t),a=Math.pow(m.distanceToSquared(h),t);r<1e-4&&(r=1),i<1e-4&&(i=r),a<1e-4&&(a=r),Ns.initNonuniformCatmullRom(c.x,p.x,m.x,h.x,i,r,a),Fs.initNonuniformCatmullRom(c.y,p.y,m.y,h.y,i,r,a),Os.initNonuniformCatmullRom(c.z,p.z,m.z,h.z,i,r,a)}else"catmullrom"===this.curveType&&(Ns.initCatmullRom(c.x,p.x,m.x,h.x,this.tension),Fs.initCatmullRom(c.y,p.y,m.y,h.y,this.tension),Os.initCatmullRom(c.z,p.z,m.z,h.z,this.tension));return r.set(Ns.calc(d),Fs.calc(d),Os.calc(d)),r}copy(t){super.copy(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){const r=t.points[i];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let i=0,r=this.points.length;i<r;i++){const r=this.points[i];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){const r=t.points[i];this.points.push((new Vector3).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}class PolyhedronGeometry extends BufferGeometry{constructor(t=[],i=[],r=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:i,radius:r,detail:a};const o=[],l=[];function subdivideFace(t,i,r,a){const o=a+1,l=[];for(let a=0;a<=o;a++){l[a]=[];const c=t.clone().lerp(r,a/o),h=i.clone().lerp(r,a/o),u=o-a;for(let t=0;t<=u;t++)l[a][t]=0===t&&a===o?c:c.clone().lerp(h,t/u)}for(let t=0;t<o;t++)for(let i=0;i<2*(o-t)-1;i++){const r=Math.floor(i/2);i%2==0?(pushVertex(l[t][r+1]),pushVertex(l[t+1][r]),pushVertex(l[t][r])):(pushVertex(l[t][r+1]),pushVertex(l[t+1][r+1]),pushVertex(l[t+1][r]))}}function pushVertex(t){o.push(t.x,t.y,t.z)}function getVertexByIndex(i,r){const a=3*i;r.x=t[a+0],r.y=t[a+1],r.z=t[a+2]}function correctUV(t,i,r,a){a<0&&1===t.x&&(l[i]=t.x-1),0===r.x&&0===r.z&&(l[i]=a/2/Math.PI+.5)}function azimuth(t){return Math.atan2(t.z,-t.x)}!function subdivide(t){const r=new Vector3,a=new Vector3,o=new Vector3;for(let l=0;l<i.length;l+=3)getVertexByIndex(i[l+0],r),getVertexByIndex(i[l+1],a),getVertexByIndex(i[l+2],o),subdivideFace(r,a,o,t)}(a),function applyRadius(t){const i=new Vector3;for(let r=0;r<o.length;r+=3)i.x=o[r+0],i.y=o[r+1],i.z=o[r+2],i.normalize().multiplyScalar(t),o[r+0]=i.x,o[r+1]=i.y,o[r+2]=i.z}(r),function generateUVs(){const t=new Vector3;for(let r=0;r<o.length;r+=3){t.x=o[r+0],t.y=o[r+1],t.z=o[r+2];const a=azimuth(t)/2/Math.PI+.5,c=(i=t,Math.atan2(-i.y,Math.sqrt(i.x*i.x+i.z*i.z))/Math.PI+.5);l.push(a,1-c)}var i;(function correctUVs(){const t=new Vector3,i=new Vector3,r=new Vector3,a=new Vector3,c=new Vector2,h=new Vector2,u=new Vector2;for(let d=0,p=0;d<o.length;d+=9,p+=6){t.set(o[d+0],o[d+1],o[d+2]),i.set(o[d+3],o[d+4],o[d+5]),r.set(o[d+6],o[d+7],o[d+8]),c.set(l[p+0],l[p+1]),h.set(l[p+2],l[p+3]),u.set(l[p+4],l[p+5]),a.copy(t).add(i).add(r).divideScalar(3);const m=azimuth(a);correctUV(c,p+0,t,m),correctUV(h,p+2,i,m),correctUV(u,p+4,r,m)}})(),function correctSeam(){for(let t=0;t<l.length;t+=6){const i=l[t+0],r=l[t+2],a=l[t+4],o=Math.max(i,r,a),c=Math.min(i,r,a);o>.9&&c<.1&&(i<.2&&(l[t+0]+=1),r<.2&&(l[t+2]+=1),a<.2&&(l[t+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(o.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(l,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new PolyhedronGeometry(t.vertices,t.indices,t.radius,t.details)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(t=1,i=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,i),this.type="OctahedronGeometry",this.parameters={radius:t,detail:i}}static fromJSON(t){return new OctahedronGeometry(t.radius,t.detail)}}class SphereGeometry extends BufferGeometry{constructor(t=1,i=32,r=16,a=0,o=2*Math.PI,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:r,phiStart:a,phiLength:o,thetaStart:l,thetaLength:c},i=Math.max(3,Math.floor(i)),r=Math.max(2,Math.floor(r));const h=Math.min(l+c,Math.PI);let u=0;const d=[],p=new Vector3,m=new Vector3,g=[],y=[],v=[],x=[];for(let g=0;g<=r;g++){const b=[],_=g/r;let S=0;0===g&&0===l?S=.5/i:g===r&&h===Math.PI&&(S=-.5/i);for(let r=0;r<=i;r++){const h=r/i;p.x=-t*Math.cos(a+h*o)*Math.sin(l+_*c),p.y=t*Math.cos(l+_*c),p.z=t*Math.sin(a+h*o)*Math.sin(l+_*c),y.push(p.x,p.y,p.z),m.copy(p).normalize(),v.push(m.x,m.y,m.z),x.push(h+S,1-_),b.push(u++)}d.push(b)}for(let t=0;t<r;t++)for(let a=0;a<i;a++){const i=d[t][a+1],o=d[t][a],c=d[t+1][a],u=d[t+1][a+1];(0!==t||l>0)&&g.push(i,o,u),(t!==r-1||h<Math.PI)&&g.push(o,c,u)}this.setIndex(g),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(v,3)),this.setAttribute("uv",new Float32BufferAttribute(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new SphereGeometry(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class ShadowMaterial extends Material{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gn(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class MeshStandardMaterial extends Material{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gn(16777215),this.specular=new gn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class MeshLambertMaterial extends Material{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function convertArray(t,i,r){return!t||!r&&t.constructor===i?t:"number"==typeof i.BYTES_PER_ELEMENT?new i(t):Array.prototype.slice.call(t)}function getKeyframeOrder(t){const i=t.length,r=new Array(i);for(let t=0;t!==i;++t)r[t]=t;return r.sort((function compareTime(i,r){return t[i]-t[r]})),r}function sortedArray(t,i,r){const a=t.length,o=new t.constructor(a);for(let l=0,c=0;c!==a;++l){const a=r[l]*i;for(let r=0;r!==i;++r)o[c++]=t[a+r]}return o}function flattenJSON(t,i,r,a){let o=1,l=t[0];for(;void 0!==l&&void 0===l[a];)l=t[o++];if(void 0===l)return;let c=l[a];if(void 0!==c)if(Array.isArray(c))do{c=l[a],void 0!==c&&(i.push(l.time),r.push.apply(r,c)),l=t[o++]}while(void 0!==l);else if(void 0!==c.toArray)do{c=l[a],void 0!==c&&(i.push(l.time),c.toArray(r,r.length)),l=t[o++]}while(void 0!==l);else do{c=l[a],void 0!==c&&(i.push(l.time),r.push(c)),l=t[o++]}while(void 0!==l)}class Interpolant{constructor(t,i,r,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new i.constructor(r),this.sampleValues=i,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){const i=this.parameterPositions;let r=this._cachedIndex,a=i[r],o=i[r-1];e:{t:{let l;i:{n:if(!(t<a)){for(let l=r+2;;){if(void 0===a){if(t<o)break n;return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(o=a,a=i[++r],t<a)break t}l=i.length;break i}if(t>=o)break e;{const c=i[1];t<c&&(r=2,o=c);for(let l=r-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(a=o,o=i[--r-1],t>=o)break t}l=r,r=0}}for(;r<l;){const a=r+l>>>1;t<i[a]?l=a:r=a+1}if(a=i[r],o=i[r-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,a)}return this.interpolate_(r,o,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=t*a;for(let t=0;t!==a;++t)i[t]=r[o+t];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(t,i,r,a){super(t,i,r,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ft,endingEnd:ft}}intervalChanged_(t,i,r){const a=this.parameterPositions;let o=t-2,l=t+1,c=a[o],h=a[l];if(void 0===c)switch(this.getSettings_().endingStart){case gt:o=t,c=2*i-r;break;case yt:o=a.length-2,c=i+a[o]-a[o+1];break;default:o=t,c=r}if(void 0===h)switch(this.getSettings_().endingEnd){case gt:l=t,h=2*r-i;break;case yt:l=1,h=r+a[1]-a[0];break;default:l=t-1,h=i}const u=.5*(r-i),d=this.valueSize;this._weightPrev=u/(i-c),this._weightNext=u/(h-r),this._offsetPrev=o*d,this._offsetNext=l*d}interpolate_(t,i,r,a){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,u=h-c,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(r-i)/(a-i),v=y*y,x=v*y,b=-m*x+2*m*v-m*y,_=(1+m)*x+(-1.5-2*m)*v+(-.5+m)*y+1,S=(-1-g)*x+(1.5+g)*v+.5*y,M=g*x-g*v;for(let t=0;t!==c;++t)o[t]=b*l[d+t]+_*l[u+t]+S*l[h+t]+M*l[p+t];return o}}class LinearInterpolant extends Interpolant{constructor(t,i,r,a){super(t,i,r,a)}interpolate_(t,i,r,a){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,u=h-c,d=(r-i)/(a-i),p=1-d;for(let t=0;t!==c;++t)o[t]=l[u+t]*p+l[h+t]*d;return o}}class DiscreteInterpolant extends Interpolant{constructor(t,i,r,a){super(t,i,r,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class KeyframeTrack{constructor(t,i,r,a){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===i||0===i.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=convertArray(i,this.TimeBufferType),this.values=convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let r;if(i.toJSON!==this.toJSON)r=i.toJSON(t);else{r={name:t.name,times:convertArray(t.times,Array),values:convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(r.interpolation=i)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new LinearInterpolant(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new CubicInterpolant(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case dt:i=this.InterpolantFactoryMethodDiscrete;break;case pt:i=this.InterpolantFactoryMethodLinear;break;case mt:i=this.InterpolantFactoryMethodSmooth}if(void 0===i){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dt;case this.InterpolantFactoryMethodLinear:return pt;case this.InterpolantFactoryMethodSmooth:return mt}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const i=this.times;for(let r=0,a=i.length;r!==a;++r)i[r]+=t}return this}scale(t){if(1!==t){const i=this.times;for(let r=0,a=i.length;r!==a;++r)i[r]*=t}return this}trim(t,i){const r=this.times,a=r.length;let o=0,l=a-1;for(;o!==a&&r[o]<t;)++o;for(;-1!==l&&r[l]>i;)--l;if(++l,0!==o||l!==a){o>=l&&(l=Math.max(l,1),o=l-1);const t=this.getValueSize();this.times=r.slice(o,l),this.values=this.values.slice(o*t,l*t)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!=0&&(t=!1);const r=this.times,a=this.values,o=r.length;0===o&&(t=!1);let l=null;for(let i=0;i!==o;i++){const a=r[i];if("number"==typeof a&&isNaN(a)){t=!1;break}if(null!==l&&l>a){t=!1;break}l=a}if(void 0!==a&&function isTypedArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(a))for(let i=0,r=a.length;i!==r;++i){const r=a[i];if(isNaN(r)){t=!1;break}}return t}optimize(){const t=this.times.slice(),i=this.values.slice(),r=this.getValueSize(),a=this.getInterpolation()===mt,o=t.length-1;let l=1;for(let c=1;c<o;++c){let o=!1;const h=t[c];if(h!==t[c+1]&&(1!==c||h!==t[0]))if(a)o=!0;else{const t=c*r,a=t-r,l=t+r;for(let c=0;c!==r;++c){const r=i[t+c];if(r!==i[a+c]||r!==i[l+c]){o=!0;break}}}if(o){if(c!==l){t[l]=t[c];const a=c*r,o=l*r;for(let t=0;t!==r;++t)i[o+t]=i[a+t]}++l}}if(o>0){t[l]=t[o];for(let t=o*r,a=l*r,c=0;c!==r;++c)i[a+c]=i[t+c];++l}return l!==t.length?(this.times=t.slice(0,l),this.values=i.slice(0,l*r)):(this.times=t,this.values=i),this}clone(){const t=this.times.slice(),i=this.values.slice(),r=new(0,this.constructor)(this.name,t,i);return r.createInterpolant=this.createInterpolant,r}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=pt;class BooleanKeyframeTrack extends KeyframeTrack{constructor(t,i,r){super(t,i,r)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=dt,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(t,i,r,a){super(t,i,r,a)}interpolate_(t,i,r,a){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=(r-i)/(a-i);let u=t*c;for(let t=u+c;u!==t;u+=4)ri.slerpFlat(o,0,l,u-c,l,u,h);return o}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(t){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(t,i,r){super(t,i,r)}}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=dt,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(t="",i=-1,r=[],a=2500){this.name=t,this.tracks=r,this.duration=i,this.blendMode=a,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],r=t.tracks,a=1/(t.fps||1);for(let t=0,o=r.length;t!==o;++t)i.push(parseKeyframeTrack(r[t]).scale(a));const o=new this(t.name,t.duration,i,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const i=[],r=t.tracks,a={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,a=r.length;t!==a;++t)i.push(KeyframeTrack.toJSON(r[t]));return a}static CreateFromMorphTargetSequence(t,i,r,a){const o=i.length,l=[];for(let t=0;t<o;t++){let c=[],h=[];c.push((t+o-1)%o,t,(t+1)%o),h.push(0,1,0);const u=getKeyframeOrder(c);c=sortedArray(c,1,u),h=sortedArray(h,1,u),a||0!==c[0]||(c.push(o),h.push(h[0])),l.push(new NumberKeyframeTrack(".morphTargetInfluences["+i[t].name+"]",c,h).scale(1/r))}return new this(t,-1,l)}static findByName(t,i){let r=t;if(!Array.isArray(t)){const i=t;r=i.geometry&&i.geometry.animations||i.animations}for(let t=0;t<r.length;t++)if(r[t].name===i)return r[t];return null}static CreateClipsFromMorphTargetSequences(t,i,r){const a={},o=/^([\w-]*?)([\d]+)$/;for(let i=0,r=t.length;i<r;i++){const r=t[i],l=r.name.match(o);if(l&&l.length>1){const t=l[1];let i=a[t];i||(a[t]=i=[]),i.push(r)}}const l=[];for(const t in a)l.push(this.CreateFromMorphTargetSequence(t,a[t],i,r));return l}static parseAnimation(t,i){if(!t)return null;const addNonemptyTrack=function(t,i,r,a,o){if(0!==r.length){const l=[],c=[];flattenJSON(r,l,c,a),0!==l.length&&o.push(new t(i,l,c))}},r=[],a=t.name||"default",o=t.fps||30,l=t.blendMode;let c=t.length||-1;const h=t.hierarchy||[];for(let t=0;t<h.length;t++){const a=h[t].keys;if(a&&0!==a.length)if(a[0].morphTargets){const t={};let i;for(i=0;i<a.length;i++)if(a[i].morphTargets)for(let r=0;r<a[i].morphTargets.length;r++)t[a[i].morphTargets[r]]=-1;for(const o in t){const t=[],l=[];for(let r=0;r!==a[i].morphTargets.length;++r){const r=a[i];t.push(r.time),l.push(r.morphTarget===o?1:0)}r.push(new NumberKeyframeTrack(".morphTargetInfluence["+o+"]",t,l))}c=t.length*o}else{const o=".bones["+i[t].name+"]";addNonemptyTrack(VectorKeyframeTrack,o+".position",a,"pos",r),addNonemptyTrack(QuaternionKeyframeTrack,o+".quaternion",a,"rot",r),addNonemptyTrack(VectorKeyframeTrack,o+".scale",a,"scl",r)}}if(0===r.length)return null;return new this(a,c,r,l)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function parseKeyframeTrack(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const i=function getTrackTypeForValueTypeName(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const i=[],r=[];flattenJSON(t.keys,i,r,"value"),t.times=i,t.values=r}return void 0!==i.parse?i.parse(t):new i(t.name,t.times,t.values,t.interpolation)}const Us={enabled:!1,files:{},add:function(t,i){!1!==this.enabled&&(this.files[t]=i)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class LoadingManager{constructor(t,i,r){const a=this;let o,l=!1,c=0,h=0;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=r,this.itemStart=function(t){h++,!1===l&&void 0!==a.onStart&&a.onStart(t,c,h),l=!0},this.itemEnd=function(t){c++,void 0!==a.onProgress&&a.onProgress(t,c,h),c===h&&(l=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(t){void 0!==a.onError&&a.onError(t)},this.resolveURL=function(t){return o?o(t):t},this.setURLModifier=function(t){return o=t,this},this.addHandler=function(t,i){return u.push(t,i),this},this.removeHandler=function(t){const i=u.indexOf(t);return-1!==i&&u.splice(i,2),this},this.getHandler=function(t){for(let i=0,r=u.length;i<r;i+=2){const r=u[i],a=u[i+1];if(r.global&&(r.lastIndex=0),r.test(t))return a}return null}}}const Bs=new LoadingManager;class Loader{constructor(t){this.manager=void 0!==t?t:Bs,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise((function(a,o){r.load(t,a,i,o)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const zs={};class HttpError extends Error{constructor(t,i){super(t),this.response=i}}class FileLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Us.get(t);if(void 0!==o)return this.manager.itemStart(t),setTimeout((()=>{i&&i(o),this.manager.itemEnd(t)}),0),o;if(void 0!==zs[t])return void zs[t].push({onLoad:i,onProgress:r,onError:a});zs[t]=[],zs[t].push({onLoad:i,onProgress:r,onError:a});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,h=this.responseType;fetch(l).then((i=>{if(200===i.status||0===i.status){if(i.status,"undefined"==typeof ReadableStream||void 0===i.body||void 0===i.body.getReader)return i;const r=zs[t],a=i.body.getReader(),o=i.headers.get("X-File-Size")||i.headers.get("Content-Length"),l=o?parseInt(o):0,c=0!==l;let h=0;const u=new ReadableStream({start(t){!function readData(){a.read().then((({done:i,value:a})=>{if(i)t.close();else{h+=a.byteLength;const i=new ProgressEvent("progress",{lengthComputable:c,loaded:h,total:l});for(let t=0,a=r.length;t<a;t++){const a=r[t];a.onProgress&&a.onProgress(i)}t.enqueue(a),readData()}}),(i=>{t.error(i)}))}()}});return new Response(u)}throw new HttpError(`fetch for "${i.url}" responded with ${i.status}: ${i.statusText}`,i)})).then((t=>{switch(h){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,c)));case"json":return t.json();default:if(void 0===c)return t.text();{const i=/charset="?([^;"\s]*)"?/i.exec(c),r=i&&i[1]?i[1].toLowerCase():void 0,a=new TextDecoder(r);return t.arrayBuffer().then((t=>a.decode(t)))}}})).then((i=>{Us.add(t,i);const r=zs[t];delete zs[t];for(let t=0,a=r.length;t<a;t++){const a=r[t];a.onLoad&&a.onLoad(i)}})).catch((i=>{const r=zs[t];if(void 0===r)throw this.manager.itemError(t),i;delete zs[t];for(let t=0,a=r.length;t<a;t++){const a=r[t];a.onError&&a.onError(i)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class ImageLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Us.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout((function(){i&&i(l),o.manager.itemEnd(t)}),0),l;const c=createElementNS("img");function onImageLoad(){removeEventListeners(),Us.add(t,this),i&&i(this),o.manager.itemEnd(t)}function onImageError(i){removeEventListeners(),a&&a(i),o.manager.itemError(t),o.manager.itemEnd(t)}function removeEventListeners(){c.removeEventListener("load",onImageLoad,!1),c.removeEventListener("error",onImageError,!1)}return c.addEventListener("load",onImageLoad,!1),c.addEventListener("error",onImageError,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(t),c.src=t,c}}class CubeTextureLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){const o=new CubeTexture;o.colorSpace=bt;const l=new ImageLoader(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function loadTexture(r){l.load(t[r],(function(t){o.images[r]=t,c++,6===c&&(o.needsUpdate=!0,i&&i(o))}),void 0,a)}for(let i=0;i<t.length;++i)loadTexture(i);return o}}class DataTextureLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){const o=this,l=new DataTexture,c=new FileLoader(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(t,(function(t){let r;try{r=o.parse(t)}catch(t){if(void 0===a)return;a(t)}void 0!==r.image?l.image=r.image:void 0!==r.data&&(l.image.width=r.width,l.image.height=r.height,l.image.data=r.data),l.wrapS=void 0!==r.wrapS?r.wrapS:ie,l.wrapT=void 0!==r.wrapT?r.wrapT:ie,l.magFilter=void 0!==r.magFilter?r.magFilter:oe,l.minFilter=void 0!==r.minFilter?r.minFilter:oe,l.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.colorSpace&&(l.colorSpace=r.colorSpace),void 0!==r.flipY&&(l.flipY=r.flipY),void 0!==r.format&&(l.format=r.format),void 0!==r.type&&(l.type=r.type),void 0!==r.mipmaps&&(l.mipmaps=r.mipmaps,l.minFilter=ce),1===r.mipmapCount&&(l.minFilter=oe),void 0!==r.generateMipmaps&&(l.generateMipmaps=r.generateMipmaps),l.needsUpdate=!0,i&&i(l,r)}),r,a),l}}class TextureLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){const o=new Texture,l=new ImageLoader(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,(function(t){o.image=t,o.needsUpdate=!0,void 0!==i&&i(o)}),r,a),o}}class Light extends Object3D{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new gn(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,void 0!==this.groundColor&&(i.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(i.object.distance=this.distance),void 0!==this.angle&&(i.object.angle=this.angle),void 0!==this.decay&&(i.object.decay=this.decay),void 0!==this.penumbra&&(i.object.penumbra=this.penumbra),void 0!==this.shadow&&(i.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(i.object.target=this.target.uuid),i}}class HemisphereLight extends Light{constructor(t,i,r){super(t,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gn(i)}copy(t,i){return super.copy(t,i),this.groundColor.copy(t.groundColor),this}}const Vs=new Matrix4,ks=new Vector3,Gs=new Vector3;class LightShadow{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,r=this.matrix;ks.setFromMatrixPosition(t.matrixWorld),i.position.copy(ks),Gs.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(Gs),i.updateMatrixWorld(),Vs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vs),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Vs)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const i=this.camera,r=2*jt*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height,o=t.distance||i.far;r===i.fov&&a===i.aspect&&o===i.far||(i.fov=r,i.aspect=a,i.far=o,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class SpotLight extends Light{constructor(t,i,r=0,a=Math.PI/3,o=0,l=2){super(t,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=r,this.angle=a,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Hs=new Matrix4,Ws=new Vector3,js=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(t,i=0){const r=this.camera,a=this.matrix,o=t.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),Ws.setFromMatrixPosition(t.matrixWorld),r.position.copy(Ws),js.copy(r.position),js.add(this._cubeDirections[i]),r.up.copy(this._cubeUps[i]),r.lookAt(js),r.updateMatrixWorld(),a.makeTranslation(-Ws.x,-Ws.y,-Ws.z),Hs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hs)}}class PointLight extends Light{constructor(t,i,r=0,a=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=a,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class LoaderUtils{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let i="";for(let r=0,a=t.length;r<a;r++)i+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(i))}catch(t){return i}}static extractUrlBase(t){const i=t.lastIndexOf("/");return-1===i?"./":t.slice(0,i+1)}static resolveURL(t,i){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(i)&&/^\//.test(t)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:i+t)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class BufferGeometryLoader extends Loader{constructor(t){super(t)}load(t,i,r,a){const o=this,l=new FileLoader(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,(function(r){try{i(o.parse(JSON.parse(r)))}catch(i){a&&a(i),o.manager.itemError(t)}}),r,a)}parse(t){const i={},r={};function getInterleavedBuffer(t,a){if(void 0!==i[a])return i[a];const o=t.interleavedBuffers[a],l=function getArrayBuffer(t,i){if(void 0!==r[i])return r[i];const a=t.arrayBuffers,o=a[i],l=new Uint32Array(o).buffer;return r[i]=l,l}(t,o.buffer),c=getTypedArray(o.type,l),h=new InterleavedBuffer(c,o.stride);return h.uuid=o.uuid,i[a]=h,h}const a=t.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,o=t.data.index;if(void 0!==o){const t=getTypedArray(o.type,o.array);a.setIndex(new BufferAttribute(t,1))}const l=t.data.attributes;for(const i in l){const r=l[i];let o;if(r.isInterleavedBufferAttribute){const i=getInterleavedBuffer(t.data,r.data);o=new InterleavedBufferAttribute(i,r.itemSize,r.offset,r.normalized)}else{const t=getTypedArray(r.type,r.array);o=new(r.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(t,r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),void 0!==r.usage&&o.setUsage(r.usage),a.setAttribute(i,o)}const c=t.data.morphAttributes;if(c)for(const i in c){const r=c[i],o=[];for(let i=0,a=r.length;i<a;i++){const a=r[i];let l;if(a.isInterleavedBufferAttribute){const i=getInterleavedBuffer(t.data,a.data);l=new InterleavedBufferAttribute(i,a.itemSize,a.offset,a.normalized)}else{const t=getTypedArray(a.type,a.array);l=new BufferAttribute(t,a.itemSize,a.normalized)}void 0!==a.name&&(l.name=a.name),o.push(l)}a.morphAttributes[i]=o}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,i=h.length;t!==i;++t){const i=h[t];a.addGroup(i.start,i.count,i.materialIndex)}const u=t.data.boundingSphere;if(void 0!==u){const t=new Vector3;void 0!==u.center&&t.fromArray(u.center),a.boundingSphere=new Sphere(t,u.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class ImageBitmapLoader extends Loader{constructor(t){super(t),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,i,r,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Us.get(t);if(void 0!==l)return o.manager.itemStart(t),l.then?void l.then((r=>{i&&i(r),o.manager.itemEnd(t)})).catch((t=>{a&&a(t)})):(setTimeout((function(){i&&i(l),o.manager.itemEnd(t)}),0),l);const c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include",c.headers=this.requestHeader;const h=fetch(t,c).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(r){return Us.add(t,r),i&&i(r),o.manager.itemEnd(t),r})).catch((function(i){a&&a(i),Us.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)}));Us.add(t,h),o.manager.itemStart(t)}}class Clock{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=now();t=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=t}return t}}function now(){return("undefined"==typeof performance?Date:performance).now()}class PropertyMixer{constructor(t,i,r){let a,o,l;switch(this.binding=t,this.valueSize=r,i){case"quaternion":a=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,i){const r=this.buffer,a=this.valueSize,o=t*a+a;let l=this.cumulativeWeight;if(0===l){for(let t=0;t!==a;++t)r[o+t]=r[t];l=i}else{l+=i;const t=i/l;this._mixBufferRegion(r,o,0,t,a)}this.cumulativeWeight=l}accumulateAdditive(t){const i=this.buffer,r=this.valueSize,a=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(i,a,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){const i=this.valueSize,r=this.buffer,a=t*i+i,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const t=i*this._origIndex;this._mixBufferRegion(r,a,t,1-o,i)}l>0&&this._mixBufferRegionAdditive(r,a,this._addIndex*i,1,i);for(let t=i,o=i+i;t!==o;++t)if(r[t]!==r[t+i]){c.setValue(r,a);break}}saveOriginalState(){const t=this.binding,i=this.buffer,r=this.valueSize,a=r*this._origIndex;t.getValue(i,a);for(let t=r,o=a;t!==o;++t)i[t]=i[a+t%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,i=t+this.valueSize;for(let r=t;r<i;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[i+r]=this.buffer[t+r]}_select(t,i,r,a,o){if(a>=.5)for(let a=0;a!==o;++a)t[i+a]=t[r+a]}_slerp(t,i,r,a){ri.slerpFlat(t,i,t,i,t,r,a)}_slerpAdditive(t,i,r,a,o){const l=this._workIndex*o;ri.multiplyQuaternionsFlat(t,l,t,i,t,r),ri.slerpFlat(t,i,t,i,t,l,a)}_lerp(t,i,r,a,o){const l=1-a;for(let c=0;c!==o;++c){const o=i+c;t[o]=t[o]*l+t[r+c]*a}}_lerpAdditive(t,i,r,a,o){for(let l=0;l!==o;++l){const o=i+l;t[o]=t[o]+t[r+l]*a}}}const Xs="\\[\\]\\.:\\/",qs=new RegExp("["+Xs+"]","g"),Ys="[^"+Xs+"]",Ks="[^"+Xs.replace("\\.","")+"]",Zs=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ys)+/(WCOD+)?/.source.replace("WCOD",Ks)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ys)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ys)+"$"),Qs=["material","materials","bones","map"];class PropertyBinding{constructor(t,i,r){this.path=i,this.parsedPath=r||PropertyBinding.parseTrackName(i),this.node=PropertyBinding.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new PropertyBinding.Composite(t,i,r):new PropertyBinding(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(qs,"")}static parseTrackName(t){const i=Zs.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},a=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){const t=r.nodeName.substring(a+1);-1!==Qs.indexOf(t)&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=t)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const searchNodeSubtree=function(t){for(let r=0;r<t.length;r++){const a=t[r];if(a.name===i||a.uuid===i)return a;const o=searchNodeSubtree(a.children);if(o)return o}return null},r=searchNodeSubtree(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let a=0,o=r.length;a!==o;++a)t[i++]=r[a]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let a=0,o=r.length;a!==o;++a)r[a]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let a=0,o=r.length;a!==o;++a)r[a]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let a=0,o=r.length;a!==o;++a)r[a]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,a=i.propertyName;let o=i.propertyIndex;if(t||(t=PropertyBinding.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(r){let a=i.objectIndex;switch(r){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let i=0;i<t.length;i++)if(t[i].name===a){a=i;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return;if(!t.material.map)return;t=t.material.map;break;default:if(void 0===t[r])return;t=t[r]}if(void 0!==a){if(void 0===t[a])return;t=t[a]}}const l=t[a];if(void 0===l){i.nodeName;return}let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===a){if(!t.geometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class Composite{constructor(t,i,r){const a=r||PropertyBinding.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,a)}getValue(t,i){this.bind();const r=this._targetGroup.nCachedObjects_,a=this._bindings[r];void 0!==a&&a.getValue(t,i)}setValue(t,i){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=r.length;a!==o;++a)r[a].setValue(t,i)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationAction{constructor(t,i,r=null,a=i.blendMode){this._mixer=t,this._clip=i,this._localRoot=r,this.blendMode=a;const o=i.tracks,l=o.length,c=new Array(l),h={endingStart:ft,endingEnd:ft};for(let t=0;t!==l;++t){const i=o[t].createInterpolant(null);c[t]=i,i.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,i){return this.loop=t,this.repetitions=i,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,i,r){if(t.fadeOut(i),this.fadeIn(i),r){const r=this._clip.duration,a=t._clip.duration,o=a/r,l=r/a;t.warp(1,o,i),this.warp(l,1,i)}return this}crossFadeTo(t,i,r){return t.crossFadeFrom(this,i,r)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,i,r){const a=this._mixer,o=a.time,l=this.timeScale;let c=this._timeScaleInterpolant;null===c&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,u=c.sampleValues;return h[0]=o,h[1]=o+r,u[0]=t/l,u[1]=i/l,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,i,r,a){if(!this.enabled)return void this._updateWeight(t);const o=this._startTime;if(null!==o){const a=(t-o)*r;a<0||0===r?i=0:(this._startTime=null,i=r*a)}i*=this._updateTimeScale(t);const l=this._updateTime(i),c=this._updateWeight(t);if(c>0){const t=this._interpolants,i=this._propertyBindings;if(2501===this.blendMode)for(let r=0,a=t.length;r!==a;++r)t[r].evaluate(l),i[r].accumulateAdditive(c);else for(let r=0,o=t.length;r!==o;++r)t[r].evaluate(l),i[r].accumulate(a,c)}}_updateWeight(t){let i=0;if(this.enabled){i=this.weight;const r=this._weightInterpolant;if(null!==r){const a=r.evaluate(t)[0];i*=a,t>r.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(t){let i=0;if(!this.paused){i=this.timeScale;const r=this._timeScaleInterpolant;if(null!==r){i*=r.evaluate(t)[0],t>r.parameterPositions[1]&&(this.stopWarping(),0===i?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(t){const i=this._clip.duration,r=this.loop;let a=this.time+t,o=this._loopCount;const l=2202===r;if(0===t)return-1===o||!l||1&~o?a:i-a;if(2200===r){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=i)a=i;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===o&&(t>=0?(o=0,this._setEndings(!0,0===this.repetitions,l)):this._setEndings(0===this.repetitions,!0,l)),a>=i||a<0){const r=Math.floor(a/i);a-=i*r,o+=Math.abs(r);const c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?i:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===c){const i=t<0;this._setEndings(i,!i,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=a;if(l&&!(1&~o))return i-a}return a}_setEndings(t,i,r){const a=this._interpolantSettings;r?(a.endingStart=gt,a.endingEnd=gt):(a.endingStart=t?this.zeroSlopeAtStart?gt:ft:yt,a.endingEnd=i?this.zeroSlopeAtEnd?gt:ft:yt)}_scheduleFading(t,i,r){const a=this._mixer,o=a.time;let l=this._weightInterpolant;null===l&&(l=a._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=o,h[0]=i,c[1]=o+t,h[1]=r,this}}const Js=new Float32Array(1);class AnimationMixer extends kt{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,i){const r=t._localRoot||this._root,a=t._clip.tracks,o=a.length,l=t._propertyBindings,c=t._interpolants,h=r.uuid,u=this._bindingsByRootAndName;let d=u[h];void 0===d&&(d={},u[h]=d);for(let t=0;t!==o;++t){const o=a[t],u=o.name;let p=d[u];if(void 0!==p)++p.referenceCount,l[t]=p;else{if(p=l[t],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,h,u));continue}const a=i&&i._propertyBindings[t].binding.parsedPath;p=new PropertyMixer(PropertyBinding.create(r,u,a),o.ValueTypeName,o.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,h,u),l[t]=p}c[t].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const i=(t._localRoot||this._root).uuid,r=t._clip.uuid,a=this._actionsByClip[r];this._bindAction(t,a&&a.knownActions[0]),this._addInactiveAction(t,r,i)}const i=t._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const r=i[t];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const i=t._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const r=i[t];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const i=t._cacheIndex;return null!==i&&i<this._nActiveActions}_addInactiveAction(t,i,r){const a=this._actions,o=this._actionsByClip;let l=o[i];if(void 0===l)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[i]=l;else{const i=l.knownActions;t._byClipCacheIndex=i.length,i.push(t)}t._cacheIndex=a.length,a.push(t),l.actionByRoot[r]=t}_removeInactiveAction(t){const i=this._actions,r=i[i.length-1],a=t._cacheIndex;r._cacheIndex=a,i[a]=r,i.pop(),t._cacheIndex=null;const o=t._clip.uuid,l=this._actionsByClip,c=l[o],h=c.knownActions,u=h[h.length-1],d=t._byClipCacheIndex;u._byClipCacheIndex=d,h[d]=u,h.pop(),t._byClipCacheIndex=null;delete c.actionByRoot[(t._localRoot||this._root).uuid],0===h.length&&delete l[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const i=t._propertyBindings;for(let t=0,r=i.length;t!==r;++t){const r=i[t];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(t){const i=this._actions,r=t._cacheIndex,a=this._nActiveActions++,o=i[a];t._cacheIndex=a,i[a]=t,o._cacheIndex=r,i[r]=o}_takeBackAction(t){const i=this._actions,r=t._cacheIndex,a=--this._nActiveActions,o=i[a];t._cacheIndex=a,i[a]=t,o._cacheIndex=r,i[r]=o}_addInactiveBinding(t,i,r){const a=this._bindingsByRootAndName,o=this._bindings;let l=a[i];void 0===l&&(l={},a[i]=l),l[r]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const i=this._bindings,r=t.binding,a=r.rootNode.uuid,o=r.path,l=this._bindingsByRootAndName,c=l[a],h=i[i.length-1],u=t._cacheIndex;h._cacheIndex=u,i[u]=h,i.pop(),delete c[o],0===Object.keys(c).length&&delete l[a]}_lendBinding(t){const i=this._bindings,r=t._cacheIndex,a=this._nActiveBindings++,o=i[a];t._cacheIndex=a,i[a]=t,o._cacheIndex=r,i[r]=o}_takeBackBinding(t){const i=this._bindings,r=t._cacheIndex,a=--this._nActiveBindings,o=i[a];t._cacheIndex=a,i[a]=t,o._cacheIndex=r,i[r]=o}_lendControlInterpolant(){const t=this._controlInterpolants,i=this._nActiveControlInterpolants++;let r=t[i];return void 0===r&&(r=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,Js),r.__cacheIndex=i,t[i]=r),r}_takeBackControlInterpolant(t){const i=this._controlInterpolants,r=t.__cacheIndex,a=--this._nActiveControlInterpolants,o=i[a];t.__cacheIndex=a,i[a]=t,o.__cacheIndex=r,i[r]=o}clipAction(t,i,r){const a=i||this._root,o=a.uuid;let l="string"==typeof t?AnimationClip.findByName(a,t):t;const c=null!==l?l.uuid:t,h=this._actionsByClip[c];let u=null;if(void 0===r&&(r=null!==l?l.blendMode:vt),void 0!==h){const t=h.actionByRoot[o];if(void 0!==t&&t.blendMode===r)return t;u=h.knownActions[0],null===l&&(l=u._clip)}if(null===l)return null;const d=new AnimationAction(this,l,i,r);return this._bindAction(d,u),this._addInactiveAction(d,c,o),d}existingAction(t,i){const r=i||this._root,a=r.uuid,o="string"==typeof t?AnimationClip.findByName(r,t):t,l=o?o.uuid:t,c=this._actionsByClip[l];return void 0!==c&&c.actionByRoot[a]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const i=this._actions,r=this._nActiveActions,a=this.time+=t,o=Math.sign(t),l=this._accuIndex^=1;for(let c=0;c!==r;++c){i[c]._update(a,t,o,l)}const c=this._bindings,h=this._nActiveBindings;for(let t=0;t!==h;++t)c[t].apply(l);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const i=this._actions,r=t.uuid,a=this._actionsByClip,o=a[r];if(void 0!==o){const t=o.knownActions;for(let r=0,a=t.length;r!==a;++r){const a=t[r];this._deactivateAction(a);const o=a._cacheIndex,l=i[i.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,l._cacheIndex=o,i[o]=l,i.pop(),this._removeInactiveBindingsForAction(a)}delete a[r]}}uncacheRoot(t){const i=t.uuid,r=this._actionsByClip;for(const t in r){const a=r[t].actionByRoot[i];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}const a=this._bindingsByRootAndName[i];if(void 0!==a)for(const t in a){const i=a[t];i.restoreOriginalState(),this._removeInactiveBinding(i)}}uncacheAction(t,i){const r=this.existingAction(t,i);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}const $s=new Matrix4;class Raycaster{constructor(t,i,r=0,a=1/0){this.ray=new Ray(t,i),this.near=r,this.far=a,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,i){this.ray.set(t,i)}setFromCamera(t,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i)}setFromXRController(t){return $s.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4($s),this}intersectObject(t,i=!0,r=[]){return intersect(t,this,r,i),r.sort(ascSort),r}intersectObjects(t,i=!0,r=[]){for(let a=0,o=t.length;a<o;a++)intersect(t[a],this,r,i);return r.sort(ascSort),r}}function ascSort(t,i){return t.distance-i.distance}function intersect(t,i,r,a){let o=!0;if(t.layers.test(i.layers)){!1===t.raycast(i,r)&&(o=!1)}if(!0===o&&!0===a){const a=t.children;for(let t=0,o=a.length;t<o;t++)intersect(a[t],i,r,!0)}}function toTrianglesDrawMode(t,i){if(0===i)return t;if(2===i||1===i){let r=t.getIndex();if(null===r){const i=[],a=t.getAttribute("position");if(void 0===a)return t;for(let t=0;t<a.count;t++)i.push(t);t.setIndex(i),r=t.getIndex()}const a=r.count-2,o=[];if(2===i)for(let t=1;t<=a;t++)o.push(r.getX(0)),o.push(r.getX(t)),o.push(r.getX(t+1));else for(let t=0;t<a;t++)t%2==0?(o.push(r.getX(t)),o.push(r.getX(t+1)),o.push(r.getX(t+2))):(o.push(r.getX(t+2)),o.push(r.getX(t+1)),o.push(r.getX(t)));o.length;const l=t.clone();return l.setIndex(o),l.clearGroups(),l}return t}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=d));class GLTFLoader extends Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new GLTFMaterialsClearcoatExtension(t)})),this.register((function(t){return new GLTFMaterialsDispersionExtension(t)})),this.register((function(t){return new GLTFTextureBasisUExtension(t)})),this.register((function(t){return new GLTFTextureWebPExtension(t)})),this.register((function(t){return new GLTFTextureAVIFExtension(t)})),this.register((function(t){return new GLTFMaterialsSheenExtension(t)})),this.register((function(t){return new GLTFMaterialsTransmissionExtension(t)})),this.register((function(t){return new GLTFMaterialsVolumeExtension(t)})),this.register((function(t){return new GLTFMaterialsIorExtension(t)})),this.register((function(t){return new GLTFMaterialsEmissiveStrengthExtension(t)})),this.register((function(t){return new GLTFMaterialsSpecularExtension(t)})),this.register((function(t){return new GLTFMaterialsIridescenceExtension(t)})),this.register((function(t){return new GLTFMaterialsAnisotropyExtension(t)})),this.register((function(t){return new GLTFMaterialsBumpExtension(t)})),this.register((function(t){return new GLTFLightsExtension(t)})),this.register((function(t){return new GLTFMeshoptCompression(t)})),this.register((function(t){return new GLTFMeshGpuInstancing(t)}))}load(t,i,r,a){const o=this;let l;if(""!==this.resourcePath)l=this.resourcePath;else if(""!==this.path){const i=LoaderUtils.extractUrlBase(t);l=LoaderUtils.resolveURL(i,this.path)}else l=LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const _onError=function(i){a&&a(i),o.manager.itemError(t),o.manager.itemEnd(t)},c=new FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,(function(r){try{o.parse(r,l,(function(r){i(r),o.manager.itemEnd(t)}),_onError)}catch(t){_onError(t)}}),r,_onError)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,i,r,a){let o;const l={},c={},h=new TextDecoder;if("string"==typeof t)o=JSON.parse(t);else if(t instanceof ArrayBuffer){if(h.decode(new Uint8Array(t,0,4))===ta){try{l[ea.KHR_BINARY_GLTF]=new GLTFBinaryExtension(t)}catch(t){return void(a&&a(t))}o=JSON.parse(l[ea.KHR_BINARY_GLTF].content)}else o=JSON.parse(h.decode(t))}else o=t;if(void 0===o.asset||o.asset.version[0]<2)return void(a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new GLTFParser(o,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const i=this.pluginCallbacks[t](u);i.name,c[i.name]=i,l[i.name]=!0}if(o.extensionsUsed)for(let t=0;t<o.extensionsUsed.length;++t){const i=o.extensionsUsed[t],r=o.extensionsRequired||[];switch(i){case ea.KHR_MATERIALS_UNLIT:l[i]=new GLTFMaterialsUnlitExtension;break;case ea.KHR_DRACO_MESH_COMPRESSION:l[i]=new GLTFDracoMeshCompressionExtension(o,this.dracoLoader);break;case ea.KHR_TEXTURE_TRANSFORM:l[i]=new GLTFTextureTransformExtension;break;case ea.KHR_MESH_QUANTIZATION:l[i]=new GLTFMeshQuantizationExtension;break;default:r.indexOf(i)>=0&&c[i]}}u.setExtensions(l),u.setPlugins(c),u.parse(r,a)}parseAsync(t,i){const r=this;return new Promise((function(a,o){r.parse(t,i,a,o)}))}}function GLTFRegistry(){let t={};return{get:function(i){return t[i]},add:function(i,r){t[i]=r},remove:function(i){delete t[i]},removeAll:function(){t={}}}}const ea={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(t){this.parser=t,this.name=ea.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,i=this.parser.json.nodes||[];for(let r=0,a=i.length;r<a;r++){const a=i[r];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&t._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(t){const i=this.parser,r="light:"+t;let a=i.cache.get(r);if(a)return a;const o=i.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let c;const h=new gn(16777215);void 0!==l.color&&h.setRGB(l.color[0],l.color[1],l.color[2],_t);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new DirectionalLight(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new PointLight(h),c.distance=u;break;case"spot":c=new SpotLight(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,assignExtrasToUserData(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=i.createUniqueName(l.name||"light_"+t),a=Promise.resolve(c),i.cache.add(r,a),a}getDependency(t,i){if("light"===t)return this._loadLight(i)}createNodeAttachment(t){const i=this,r=this.parser,a=r.json.nodes[t],o=(a.extensions&&a.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(t){return r._getNodeRef(i.cache,o,t)}))}}class GLTFMaterialsUnlitExtension{constructor(){this.name=ea.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(t,i,r){const a=[];t.color=new gn(1,1,1),t.opacity=1;const o=i.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const i=o.baseColorFactor;t.color.setRGB(i[0],i[1],i[2],_t),t.opacity=i[3]}void 0!==o.baseColorTexture&&a.push(r.assignTexture(t,"map",o.baseColorTexture,bt))}return Promise.all(a)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return void 0!==a&&(i.emissiveIntensity=a),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];if(void 0!==l.clearcoatFactor&&(i.clearcoat=l.clearcoatFactor),void 0!==l.clearcoatTexture&&o.push(r.assignTexture(i,"clearcoatMap",l.clearcoatTexture)),void 0!==l.clearcoatRoughnessFactor&&(i.clearcoatRoughness=l.clearcoatRoughnessFactor),void 0!==l.clearcoatRoughnessTexture&&o.push(r.assignTexture(i,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),void 0!==l.clearcoatNormalTexture&&(o.push(r.assignTexture(i,"clearcoatNormalMap",l.clearcoatNormalTexture)),void 0!==l.clearcoatNormalTexture.scale)){const t=l.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new Vector2(t,t)}return Promise.all(o)}}class GLTFMaterialsDispersionExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_DISPERSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return i.dispersion=void 0!==a.dispersion?a.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];return void 0!==l.iridescenceFactor&&(i.iridescence=l.iridescenceFactor),void 0!==l.iridescenceTexture&&o.push(r.assignTexture(i,"iridescenceMap",l.iridescenceTexture)),void 0!==l.iridescenceIor&&(i.iridescenceIOR=l.iridescenceIor),void 0===i.iridescenceThicknessRange&&(i.iridescenceThicknessRange=[100,400]),void 0!==l.iridescenceThicknessMinimum&&(i.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),void 0!==l.iridescenceThicknessMaximum&&(i.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),void 0!==l.iridescenceThicknessTexture&&o.push(r.assignTexture(i,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class GLTFMaterialsSheenExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[];i.sheenColor=new gn(0,0,0),i.sheenRoughness=0,i.sheen=1;const l=a.extensions[this.name];if(void 0!==l.sheenColorFactor){const t=l.sheenColorFactor;i.sheenColor.setRGB(t[0],t[1],t[2],_t)}return void 0!==l.sheenRoughnessFactor&&(i.sheenRoughness=l.sheenRoughnessFactor),void 0!==l.sheenColorTexture&&o.push(r.assignTexture(i,"sheenColorMap",l.sheenColorTexture,bt)),void 0!==l.sheenRoughnessTexture&&o.push(r.assignTexture(i,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class GLTFMaterialsTransmissionExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];return void 0!==l.transmissionFactor&&(i.transmission=l.transmissionFactor),void 0!==l.transmissionTexture&&o.push(r.assignTexture(i,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class GLTFMaterialsVolumeExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];i.thickness=void 0!==l.thicknessFactor?l.thicknessFactor:0,void 0!==l.thicknessTexture&&o.push(r.assignTexture(i,"thicknessMap",l.thicknessTexture)),i.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return i.attenuationColor=(new gn).setRGB(c[0],c[1],c[2],_t),Promise.all(o)}}class GLTFMaterialsIorExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return i.ior=void 0!==a.ior?a.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];i.specularIntensity=void 0!==l.specularFactor?l.specularFactor:1,void 0!==l.specularTexture&&o.push(r.assignTexture(i,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return i.specularColor=(new gn).setRGB(c[0],c[1],c[2],_t),void 0!==l.specularColorTexture&&o.push(r.assignTexture(i,"specularColorMap",l.specularColorTexture,bt)),Promise.all(o)}}class GLTFMaterialsBumpExtension{constructor(t){this.parser=t,this.name=ea.EXT_MATERIALS_BUMP}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];return i.bumpScale=void 0!==l.bumpFactor?l.bumpFactor:1,void 0!==l.bumpTexture&&o.push(r.assignTexture(i,"bumpMap",l.bumpTexture)),Promise.all(o)}}class GLTFMaterialsAnisotropyExtension{constructor(t){this.parser=t,this.name=ea.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(t,i){const r=this.parser,a=r.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],l=a.extensions[this.name];return void 0!==l.anisotropyStrength&&(i.anisotropy=l.anisotropyStrength),void 0!==l.anisotropyRotation&&(i.anisotropyRotation=l.anisotropyRotation),void 0!==l.anisotropyTexture&&o.push(r.assignTexture(i,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class GLTFTextureBasisUExtension{constructor(t){this.parser=t,this.name=ea.KHR_TEXTURE_BASISU}loadTexture(t){const i=this.parser,r=i.json,a=r.textures[t];if(!a.extensions||!a.extensions[this.name])return null;const o=a.extensions[this.name],l=i.options.ktx2Loader;if(!l){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(t,o.source,l)}}class GLTFTextureWebPExtension{constructor(t){this.parser=t,this.name=ea.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const i=this.name,r=this.parser,a=r.json,o=a.textures[t];if(!o.extensions||!o.extensions[i])return null;const l=o.extensions[i],c=a.images[l.source];let h=r.textureLoader;if(c.uri){const t=r.options.manager.getHandler(c.uri);null!==t&&(h=t)}return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(t,l.source,h);if(a.extensionsRequired&&a.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){t(1===i.height)}}))),this.isSupported}}class GLTFTextureAVIFExtension{constructor(t){this.parser=t,this.name=ea.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const i=this.name,r=this.parser,a=r.json,o=a.textures[t];if(!o.extensions||!o.extensions[i])return null;const l=o.extensions[i],c=a.images[l.source];let h=r.textureLoader;if(c.uri){const t=r.options.manager.getHandler(c.uri);null!==t&&(h=t)}return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(t,l.source,h);if(a.extensionsRequired&&a.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){t(1===i.height)}}))),this.isSupported}}class GLTFMeshoptCompression{constructor(t){this.name=ea.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const i=this.parser.json,r=i.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const t=r.extensions[this.name],a=this.parser.getDependency("buffer",t.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then((function(i){const r=t.byteOffset||0,a=t.byteLength||0,l=t.count,c=t.byteStride,h=new Uint8Array(i,r,a);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(l,c,h,t.mode,t.filter).then((function(t){return t.buffer})):o.ready.then((function(){const i=new ArrayBuffer(l*c);return o.decodeGltfBuffer(new Uint8Array(i),l,c,h,t.mode,t.filter),i}))}))}return null}}class GLTFMeshGpuInstancing{constructor(t){this.name=ea.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const i=this.parser.json,r=i.nodes[t];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;const a=i.meshes[r.mesh];for(const t of a.primitives)if(t.mode!==sa.TRIANGLES&&t.mode!==sa.TRIANGLE_STRIP&&t.mode!==sa.TRIANGLE_FAN&&void 0!==t.mode)return null;const o=r.extensions[this.name].attributes,l=[],c={};for(const t in o)l.push(this.parser.getDependency("accessor",o[t]).then((i=>(c[t]=i,c[t]))));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then((t=>{const i=t.pop(),r=i.isGroup?i.children:[i],a=t[0].count,o=[];for(const t of r){const i=new Matrix4,r=new Vector3,l=new ri,h=new Vector3(1,1,1),u=new InstancedMesh(t.geometry,t.material,a);for(let t=0;t<a;t++)c.TRANSLATION&&r.fromBufferAttribute(c.TRANSLATION,t),c.ROTATION&&l.fromBufferAttribute(c.ROTATION,t),c.SCALE&&h.fromBufferAttribute(c.SCALE,t),u.setMatrixAt(t,i.compose(r,l,h));for(const i in c)if("_COLOR_0"===i){const t=c[i];u.instanceColor=new InstancedBufferAttribute(t.array,t.itemSize,t.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&t.geometry.setAttribute(i,c[i]);Object3D.prototype.copy.call(u,t),this.parser.assignFinalMaterial(u),o.push(u)}return i.isGroup?(i.clear(),i.add(...o),i):o[0]})))}}const ta="glTF",ia=1313821514,na=5130562;class GLTFBinaryExtension{constructor(t){this.name=ea.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(t,0,12),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==ta)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-12,o=new DataView(t,12);let l=0;for(;l<a;){const i=o.getUint32(l,!0);l+=4;const a=o.getUint32(l,!0);if(l+=4,a===ia){const a=new Uint8Array(t,12+l,i);this.content=r.decode(a)}else if(a===na){const r=12+l;this.body=t.slice(r,r+i)}l+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(t,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ea.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(t,i){const r=this.json,a=this.dracoLoader,o=t.extensions[this.name].bufferView,l=t.extensions[this.name].attributes,c={},h={},u={};for(const t in l){const i=ha[t]||t.toLowerCase();c[i]=l[t]}for(const i in t.attributes){const a=ha[i]||i.toLowerCase();if(void 0!==l[i]){const o=r.accessors[t.attributes[i]],l=aa[o.componentType];u[a]=l.name,h[a]=!0===o.normalized}}return i.getDependency("bufferView",o).then((function(t){return new Promise((function(i,r){a.decodeDracoFile(t,(function(t){for(const i in t.attributes){const r=t.attributes[i],a=h[i];void 0!==a&&(r.normalized=a)}i(t)}),c,u,_t,r)}))}))}}class GLTFTextureTransformExtension{constructor(){this.name=ea.KHR_TEXTURE_TRANSFORM}extendTexture(t,i){return void 0!==i.texCoord&&i.texCoord!==t.channel||void 0!==i.offset||void 0!==i.rotation||void 0!==i.scale?(t=t.clone(),void 0!==i.texCoord&&(t.channel=i.texCoord),void 0!==i.offset&&t.offset.fromArray(i.offset),void 0!==i.rotation&&(t.rotation=i.rotation),void 0!==i.scale&&t.repeat.fromArray(i.scale),t.needsUpdate=!0,t):t}}class GLTFMeshQuantizationExtension{constructor(){this.name=ea.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(t,i,r,a){super(t,i,r,a)}copySampleValue_(t){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=t*a*3+a;for(let t=0;t!==a;t++)i[t]=r[o+t];return i}interpolate_(t,i,r,a){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=2*c,u=3*c,d=a-i,p=(r-i)/d,m=p*p,g=m*p,y=t*u,v=y-u,x=-2*g+3*m,b=g-m,_=1-x,S=b-m+p;for(let t=0;t!==c;t++){const i=l[v+t+c],r=l[v+t+h]*d,a=l[y+t+c],u=l[y+t]*d;o[t]=_*i+S*r+x*a+b*u}return o}}const ra=new ri;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(t,i,r,a){const o=super.interpolate_(t,i,r,a);return ra.fromArray(o).normalize().toArray(o),o}}const sa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},aa={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},oa={9728:re,9729:oe,9984:1004,9985:le,9986:ae,9987:ce},la={33071:ie,33648:ne,10497:te},ca={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ha={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ua={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},da={CUBICSPLINE:void 0,LINEAR:pt,STEP:dt},pa="OPAQUE",ma="MASK",fa="BLEND";function addUnknownExtensionsToUserData(t,i,r){for(const a in r.extensions)void 0===t[a]&&(i.userData.gltfExtensions=i.userData.gltfExtensions||{},i.userData.gltfExtensions[a]=r.extensions[a])}function assignExtrasToUserData(t,i){void 0!==i.extras&&"object"==typeof i.extras&&Object.assign(t.userData,i.extras)}function updateMorphTargets(t,i){if(t.updateMorphTargets(),void 0!==i.weights)for(let r=0,a=i.weights.length;r<a;r++)t.morphTargetInfluences[r]=i.weights[r];if(i.extras&&Array.isArray(i.extras.targetNames)){const r=i.extras.targetNames;if(t.morphTargetInfluences.length===r.length){t.morphTargetDictionary={};for(let i=0,a=r.length;i<a;i++)t.morphTargetDictionary[r[i]]=i}}}function createPrimitiveKey(t){let i;const r=t.extensions&&t.extensions[ea.KHR_DRACO_MESH_COMPRESSION];if(i=r?"draco:"+r.bufferView+":"+r.indices+":"+createAttributesKey(r.attributes):t.indices+":"+createAttributesKey(t.attributes)+":"+t.mode,void 0!==t.targets)for(let r=0,a=t.targets.length;r<a;r++)i+=":"+createAttributesKey(t.targets[r]);return i}function createAttributesKey(t){let i="";const r=Object.keys(t).sort();for(let a=0,o=r.length;a<o;a++)i+=r[a]+":"+t[r[a]]+";";return i}function getNormalizedComponentScale(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const ga=new Matrix4;class GLTFParser{constructor(t={},i={}){this.json=t,this.extensions={},this.plugins={},this.options=i,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,a=-1,o=!1,l=-1;if("undefined"!=typeof navigator){const t=navigator.userAgent;r=!0===/^((?!chrome|android).)*safari/i.test(t);const i=t.match(/Version\/(\d+)/);a=r&&i?parseInt(i[1],10):-1,o=t.indexOf("Firefox")>-1,l=o?t.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||r&&a<17||o&&l<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,i){const r=this,a=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(i){const l={scene:i[0][a.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:a.asset,parser:r,userData:{}};return addUnknownExtensionsToUserData(o,l,a),assignExtrasToUserData(l,a),Promise.all(r._invokeAll((function(t){return t.afterRoot&&t.afterRoot(l)}))).then((function(){for(const t of l.scenes)t.updateMatrixWorld();t(l)}))})).catch(i)}_markDefs(){const t=this.json.nodes||[],i=this.json.skins||[],r=this.json.meshes||[];for(let r=0,a=i.length;r<a;r++){const a=i[r].joints;for(let i=0,r=a.length;i<r;i++)t[a[i]].isBone=!0}for(let i=0,a=t.length;i<a;i++){const a=t[i];void 0!==a.mesh&&(this._addNodeRef(this.meshCache,a.mesh),void 0!==a.skin&&(r[a.mesh].isSkinnedMesh=!0)),void 0!==a.camera&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,i){void 0!==i&&(void 0===t.refs[i]&&(t.refs[i]=t.uses[i]=0),t.refs[i]++)}_getNodeRef(t,i,r){if(t.refs[i]<=1)return r;const a=r.clone(),updateMappings=(t,i)=>{const r=this.associations.get(t);null!=r&&this.associations.set(i,r);for(const[r,a]of t.children.entries())updateMappings(a,i.children[r])};return updateMappings(r,a),a.name+="_instance_"+t.uses[i]++,a}_invokeOne(t){const i=Object.values(this.plugins);i.push(this);for(let r=0;r<i.length;r++){const a=t(i[r]);if(a)return a}return null}_invokeAll(t){const i=Object.values(this.plugins);i.unshift(this);const r=[];for(let a=0;a<i.length;a++){const o=t(i[a]);o&&r.push(o)}return r}getDependency(t,i){const r=t+":"+i;let a=this.cache.get(r);if(!a){switch(t){case"scene":a=this.loadScene(i);break;case"node":a=this._invokeOne((function(t){return t.loadNode&&t.loadNode(i)}));break;case"mesh":a=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(i)}));break;case"accessor":a=this.loadAccessor(i);break;case"bufferView":a=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(i)}));break;case"buffer":a=this.loadBuffer(i);break;case"material":a=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(i)}));break;case"texture":a=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(i)}));break;case"skin":a=this.loadSkin(i);break;case"animation":a=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(i)}));break;case"camera":a=this.loadCamera(i);break;default:if(a=this._invokeOne((function(r){return r!=this&&r.getDependency&&r.getDependency(t,i)})),!a)throw new Error("Unknown type: "+t)}this.cache.add(r,a)}return a}getDependencies(t){let i=this.cache.get(t);if(!i){const r=this,a=this.json[t+("mesh"===t?"es":"s")]||[];i=Promise.all(a.map((function(i,a){return r.getDependency(t,a)}))),this.cache.add(t,i)}return i}loadBuffer(t){const i=this.json.buffers[t],r=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===t)return Promise.resolve(this.extensions[ea.KHR_BINARY_GLTF].body);const a=this.options;return new Promise((function(t,o){r.load(LoaderUtils.resolveURL(i.uri,a.path),t,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))}))}))}loadBufferView(t){const i=this.json.bufferViews[t];return this.getDependency("buffer",i.buffer).then((function(t){const r=i.byteLength||0,a=i.byteOffset||0;return t.slice(a,a+r)}))}loadAccessor(t){const i=this,r=this.json,a=this.json.accessors[t];if(void 0===a.bufferView&&void 0===a.sparse){const t=ca[a.type],i=aa[a.componentType],r=!0===a.normalized,o=new i(a.count*t);return Promise.resolve(new BufferAttribute(o,t,r))}const o=[];return void 0!==a.bufferView?o.push(this.getDependency("bufferView",a.bufferView)):o.push(null),void 0!==a.sparse&&(o.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(o).then((function(t){const o=t[0],l=ca[a.type],c=aa[a.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=a.byteOffset||0,p=void 0!==a.bufferView?r.bufferViews[a.bufferView].byteStride:void 0,m=!0===a.normalized;let g,y;if(p&&p!==u){const t=Math.floor(d/p),r="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+t+":"+a.count;let u=i.cache.get(r);u||(g=new c(o,t*p,a.count*p/h),u=new InterleavedBuffer(g,p/h),i.cache.add(r,u)),y=new InterleavedBufferAttribute(u,l,d%p/h,m)}else g=null===o?new c(a.count*l):new c(o,d,a.count*l),y=new BufferAttribute(g,l,m);if(void 0!==a.sparse){const i=ca.SCALAR,r=aa[a.sparse.indices.componentType],h=a.sparse.indices.byteOffset||0,u=a.sparse.values.byteOffset||0,d=new r(t[1],h,a.sparse.count*i),p=new c(t[2],u,a.sparse.count*l);null!==o&&(y=new BufferAttribute(y.array.slice(),y.itemSize,y.normalized));for(let t=0,i=d.length;t<i;t++){const i=d[t];if(y.setX(i,p[t*l]),l>=2&&y.setY(i,p[t*l+1]),l>=3&&y.setZ(i,p[t*l+2]),l>=4&&y.setW(i,p[t*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y}))}loadTexture(t){const i=this.json,r=this.options,a=i.textures[t].source,o=i.images[a];let l=this.textureLoader;if(o.uri){const t=r.manager.getHandler(o.uri);null!==t&&(l=t)}return this.loadTextureImage(t,a,l)}loadTextureImage(t,i,r){const a=this,o=this.json,l=o.textures[t],c=o.images[i],h=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const u=this.loadImageSource(i,r).then((function(i){i.flipY=!1,i.name=l.name||c.name||"",""===i.name&&"string"==typeof c.uri&&!1===c.uri.startsWith("data:image/")&&(i.name=c.uri);const r=(o.samplers||{})[l.sampler]||{};return i.magFilter=oa[r.magFilter]||oe,i.minFilter=oa[r.minFilter]||ce,i.wrapS=la[r.wrapS]||te,i.wrapT=la[r.wrapT]||te,a.associations.set(i,{textures:t}),i})).catch((function(){return null}));return this.textureCache[h]=u,u}loadImageSource(t,i){const r=this,a=this.json,o=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const l=a.images[t],c=self.URL||self.webkitURL;let h=l.uri||"",u=!1;if(void 0!==l.bufferView)h=r.getDependency("bufferView",l.bufferView).then((function(t){u=!0;const i=new Blob([t],{type:l.mimeType});return h=c.createObjectURL(i),h}));else if(void 0===l.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(h).then((function(t){return new Promise((function(r,a){let l=r;!0===i.isImageBitmapLoader&&(l=function(t){const i=new Texture(t);i.needsUpdate=!0,r(i)}),i.load(LoaderUtils.resolveURL(t,o.path),l,void 0,a)}))})).then((function(t){return!0===u&&c.revokeObjectURL(h),assignExtrasToUserData(t,l),t.userData.mimeType=l.mimeType||function getImageURIMimeType(t){return t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"}(l.uri),t})).catch((function(t){throw t}));return this.sourceCache[t]=d,d}assignTexture(t,i,r,a){const o=this;return this.getDependency("texture",r.index).then((function(l){if(!l)return null;if(void 0!==r.texCoord&&r.texCoord>0&&((l=l.clone()).channel=r.texCoord),o.extensions[ea.KHR_TEXTURE_TRANSFORM]){const t=void 0!==r.extensions?r.extensions[ea.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const i=o.associations.get(l);l=o.extensions[ea.KHR_TEXTURE_TRANSFORM].extendTexture(l,t),o.associations.set(l,i)}}return void 0!==a&&(l.colorSpace=a),t[i]=l,l}))}assignFinalMaterial(t){const i=t.geometry;let r=t.material;const a=void 0===i.attributes.tangent,o=void 0!==i.attributes.color,l=void 0===i.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+r.uuid;let i=this.cache.get(t);i||(i=new PointsMaterial,Material.prototype.copy.call(i,r),i.color.copy(r.color),i.map=r.map,i.sizeAttenuation=!1,this.cache.add(t,i)),r=i}else if(t.isLine){const t="LineBasicMaterial:"+r.uuid;let i=this.cache.get(t);i||(i=new LineBasicMaterial,Material.prototype.copy.call(i,r),i.color.copy(r.color),i.map=r.map,this.cache.add(t,i)),r=i}if(a||o||l){let t="ClonedMaterial:"+r.uuid+":";a&&(t+="derivative-tangents:"),o&&(t+="vertex-colors:"),l&&(t+="flat-shading:");let i=this.cache.get(t);i||(i=r.clone(),o&&(i.vertexColors=!0),l&&(i.flatShading=!0),a&&(i.normalScale&&(i.normalScale.y*=-1),i.clearcoatNormalScale&&(i.clearcoatNormalScale.y*=-1)),this.cache.add(t,i),this.associations.set(i,this.associations.get(r))),r=i}t.material=r}getMaterialType(){return MeshStandardMaterial}loadMaterial(t){const i=this,r=this.json,a=this.extensions,o=r.materials[t];let l;const c={},h=[];if((o.extensions||{})[ea.KHR_MATERIALS_UNLIT]){const t=a[ea.KHR_MATERIALS_UNLIT];l=t.getMaterialType(),h.push(t.extendParams(c,o,i))}else{const r=o.pbrMetallicRoughness||{};if(c.color=new gn(1,1,1),c.opacity=1,Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;c.color.setRGB(t[0],t[1],t[2],_t),c.opacity=t[3]}void 0!==r.baseColorTexture&&h.push(i.assignTexture(c,"map",r.baseColorTexture,bt)),c.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,c.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(h.push(i.assignTexture(c,"metalnessMap",r.metallicRoughnessTexture)),h.push(i.assignTexture(c,"roughnessMap",r.metallicRoughnessTexture))),l=this._invokeOne((function(i){return i.getMaterialType&&i.getMaterialType(t)})),h.push(Promise.all(this._invokeAll((function(i){return i.extendMaterialParams&&i.extendMaterialParams(t,c)}))))}!0===o.doubleSided&&(c.side=2);const u=o.alphaMode||pa;if(u===fa?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,u===ma&&(c.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&l!==MeshBasicMaterial&&(h.push(i.assignTexture(c,"normalMap",o.normalTexture)),c.normalScale=new Vector2(1,1),void 0!==o.normalTexture.scale)){const t=o.normalTexture.scale;c.normalScale.set(t,t)}if(void 0!==o.occlusionTexture&&l!==MeshBasicMaterial&&(h.push(i.assignTexture(c,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(c.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&l!==MeshBasicMaterial){const t=o.emissiveFactor;c.emissive=(new gn).setRGB(t[0],t[1],t[2],_t)}return void 0!==o.emissiveTexture&&l!==MeshBasicMaterial&&h.push(i.assignTexture(c,"emissiveMap",o.emissiveTexture,bt)),Promise.all(h).then((function(){const r=new l(c);return o.name&&(r.name=o.name),assignExtrasToUserData(r,o),i.associations.set(r,{materials:t}),o.extensions&&addUnknownExtensionsToUserData(a,r,o),r}))}createUniqueName(t){const i=PropertyBinding.sanitizeNodeName(t||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(t){const i=this,r=this.extensions,a=this.primitiveCache;function createDracoPrimitive(t){return r[ea.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,i).then((function(r){return addPrimitiveAttributes(r,t,i)}))}const o=[];for(let r=0,l=t.length;r<l;r++){const l=t[r],c=createPrimitiveKey(l),h=a[c];if(h)o.push(h.promise);else{let t;t=l.extensions&&l.extensions[ea.KHR_DRACO_MESH_COMPRESSION]?createDracoPrimitive(l):addPrimitiveAttributes(new BufferGeometry,l,i),a[c]={primitive:l,promise:t},o.push(t)}}return Promise.all(o)}loadMesh(t){const i=this,r=this.json,a=this.extensions,o=r.meshes[t],l=o.primitives,c=[];for(let t=0,i=l.length;t<i;t++){const i=void 0===l[t].material?(void 0===(h=this.cache).DefaultMaterial&&(h.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:y})),h.DefaultMaterial):this.getDependency("material",l[t].material);c.push(i)}var h;return c.push(i.loadGeometries(l)),Promise.all(c).then((function(r){const c=r.slice(0,r.length-1),h=r[r.length-1],u=[];for(let r=0,d=h.length;r<d;r++){const d=h[r],p=l[r];let m;const g=c[r];if(p.mode===sa.TRIANGLES||p.mode===sa.TRIANGLE_STRIP||p.mode===sa.TRIANGLE_FAN||void 0===p.mode)m=!0===o.isSkinnedMesh?new SkinnedMesh(d,g):new Mesh(d,g),!0===m.isSkinnedMesh&&m.normalizeSkinWeights(),p.mode===sa.TRIANGLE_STRIP?m.geometry=toTrianglesDrawMode(m.geometry,1):p.mode===sa.TRIANGLE_FAN&&(m.geometry=toTrianglesDrawMode(m.geometry,2));else if(p.mode===sa.LINES)m=new LineSegments(d,g);else if(p.mode===sa.LINE_STRIP)m=new Line(d,g);else if(p.mode===sa.LINE_LOOP)m=new LineLoop(d,g);else{if(p.mode!==sa.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);m=new Points(d,g)}Object.keys(m.geometry.morphAttributes).length>0&&updateMorphTargets(m,o),m.name=i.createUniqueName(o.name||"mesh_"+t),assignExtrasToUserData(m,o),p.extensions&&addUnknownExtensionsToUserData(a,m,p),i.assignFinalMaterial(m),u.push(m)}for(let r=0,a=u.length;r<a;r++)i.associations.set(u[r],{meshes:t,primitives:r});if(1===u.length)return o.extensions&&addUnknownExtensionsToUserData(a,u[0],o),u[0];const d=new Group;o.extensions&&addUnknownExtensionsToUserData(a,d,o),i.associations.set(d,{meshes:t});for(let t=0,i=u.length;t<i;t++)d.add(u[t]);return d}))}loadCamera(t){let i;const r=this.json.cameras[t],a=r[r.type];if(a)return"perspective"===r.type?i=new PerspectiveCamera(Xt.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===r.type&&(i=new OrthographicCamera(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),r.name&&(i.name=this.createUniqueName(r.name)),assignExtrasToUserData(i,r),Promise.resolve(i)}loadSkin(t){const i=this.json.skins[t],r=[];for(let t=0,a=i.joints.length;t<a;t++)r.push(this._loadNodeShallow(i.joints[t]));return void 0!==i.inverseBindMatrices?r.push(this.getDependency("accessor",i.inverseBindMatrices)):r.push(null),Promise.all(r).then((function(t){const i=t.pop(),r=t,a=[],o=[];for(let t=0,l=r.length;t<l;t++){const l=r[t];if(l){a.push(l);const r=new Matrix4;null!==i&&r.fromArray(i.array,16*t),o.push(r)}}return new Skeleton(a,o)}))}loadAnimation(t){const i=this.json,r=this,a=i.animations[t],o=a.name?a.name:"animation_"+t,l=[],c=[],h=[],u=[],d=[];for(let t=0,i=a.channels.length;t<i;t++){const i=a.channels[t],r=a.samplers[i.sampler],o=i.target,p=o.node,m=void 0!==a.parameters?a.parameters[r.input]:r.input,g=void 0!==a.parameters?a.parameters[r.output]:r.output;void 0!==o.node&&(l.push(this.getDependency("node",p)),c.push(this.getDependency("accessor",m)),h.push(this.getDependency("accessor",g)),u.push(r),d.push(o))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(u),Promise.all(d)]).then((function(t){const i=t[0],a=t[1],l=t[2],c=t[3],h=t[4],u=[];for(let t=0,o=i.length;t<o;t++){const o=i[t],d=a[t],p=l[t],m=c[t],g=h[t];if(void 0===o)continue;o.updateMatrix&&o.updateMatrix();const y=r._createAnimationTracks(o,d,p,m,g);if(y)for(let t=0;t<y.length;t++)u.push(y[t])}return new AnimationClip(o,void 0,u)}))}createNodeMesh(t){const i=this.json,r=this,a=i.nodes[t];return void 0===a.mesh?null:r.getDependency("mesh",a.mesh).then((function(t){const i=r._getNodeRef(r.meshCache,a.mesh,t);return void 0!==a.weights&&i.traverse((function(t){if(t.isMesh)for(let i=0,r=a.weights.length;i<r;i++)t.morphTargetInfluences[i]=a.weights[i]})),i}))}loadNode(t){const i=this,r=this.json.nodes[t],a=i._loadNodeShallow(t),o=[],l=r.children||[];for(let t=0,r=l.length;t<r;t++)o.push(i.getDependency("node",l[t]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(o),c]).then((function(t){const i=t[0],r=t[1],a=t[2];null!==a&&i.traverse((function(t){t.isSkinnedMesh&&t.bind(a,ga)}));for(let t=0,a=r.length;t<a;t++)i.add(r[t]);return i}))}_loadNodeShallow(t){const i=this.json,r=this.extensions,a=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const o=i.nodes[t],l=o.name?a.createUniqueName(o.name):"",c=[],h=a._invokeOne((function(i){return i.createNodeMesh&&i.createNodeMesh(t)}));return h&&c.push(h),void 0!==o.camera&&c.push(a.getDependency("camera",o.camera).then((function(t){return a._getNodeRef(a.cameraCache,o.camera,t)}))),a._invokeAll((function(i){return i.createNodeAttachment&&i.createNodeAttachment(t)})).forEach((function(t){c.push(t)})),this.nodeCache[t]=Promise.all(c).then((function(i){let c;if(c=!0===o.isBone?new Bone:i.length>1?new Group:1===i.length?i[0]:new Object3D,c!==i[0])for(let t=0,r=i.length;t<r;t++)c.add(i[t]);if(o.name&&(c.userData.name=o.name,c.name=l),assignExtrasToUserData(c,o),o.extensions&&addUnknownExtensionsToUserData(r,c,o),void 0!==o.matrix){const t=new Matrix4;t.fromArray(o.matrix),c.applyMatrix4(t)}else void 0!==o.translation&&c.position.fromArray(o.translation),void 0!==o.rotation&&c.quaternion.fromArray(o.rotation),void 0!==o.scale&&c.scale.fromArray(o.scale);return a.associations.has(c)||a.associations.set(c,{}),a.associations.get(c).nodes=t,c})),this.nodeCache[t]}loadScene(t){const i=this.extensions,r=this.json.scenes[t],a=this,o=new Group;r.name&&(o.name=a.createUniqueName(r.name)),assignExtrasToUserData(o,r),r.extensions&&addUnknownExtensionsToUserData(i,o,r);const l=r.nodes||[],c=[];for(let t=0,i=l.length;t<i;t++)c.push(a.getDependency("node",l[t]));return Promise.all(c).then((function(t){for(let i=0,r=t.length;i<r;i++)o.add(t[i]);return a.associations=(t=>{const i=new Map;for(const[t,r]of a.associations)(t instanceof Material||t instanceof Texture)&&i.set(t,r);return t.traverse((t=>{const r=a.associations.get(t);null!=r&&i.set(t,r)})),i})(o),o}))}_createAnimationTracks(t,i,r,a,o){const l=[],c=t.name?t.name:t.uuid,h=[];let u;switch(ua[o.path]===ua.weights?t.traverse((function(t){t.morphTargetInfluences&&h.push(t.name?t.name:t.uuid)})):h.push(c),ua[o.path]){case ua.weights:u=NumberKeyframeTrack;break;case ua.rotation:u=QuaternionKeyframeTrack;break;case ua.position:case ua.scale:u=VectorKeyframeTrack;break;default:if(1===r.itemSize)u=NumberKeyframeTrack;else u=VectorKeyframeTrack}const d=void 0!==a.interpolation?da[a.interpolation]:pt,p=this._getArrayFromAccessor(r);for(let t=0,r=h.length;t<r;t++){const r=new u(h[t]+"."+ua[o.path],i.array,p,d);"CUBICSPLINE"===a.interpolation&&this._createCubicSplineTrackInterpolant(r),l.push(r)}return l}_getArrayFromAccessor(t){let i=t.array;if(t.normalized){const t=getNormalizedComponentScale(i.constructor),r=new Float32Array(i.length);for(let a=0,o=i.length;a<o;a++)r[a]=i[a]*t;i=r}return i}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function InterpolantFactoryMethodGLTFCubicSpline(t){return new(this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant)(this.times,this.values,this.getValueSize()/3,t)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function addPrimitiveAttributes(t,i,r){const a=i.attributes,o=[];function assignAttributeAccessor(i,a){return r.getDependency("accessor",i).then((function(i){t.setAttribute(a,i)}))}for(const i in a){const r=ha[i]||i.toLowerCase();r in t.attributes||o.push(assignAttributeAccessor(a[i],r))}if(void 0!==i.indices&&!t.index){const a=r.getDependency("accessor",i.indices).then((function(i){t.setIndex(i)}));o.push(a)}return ei.workingColorSpace,assignExtrasToUserData(t,i),function computeBounds(t,i,r){const a=i.attributes,o=new Box3;if(void 0===a.POSITION)return;{const t=r.json.accessors[a.POSITION],i=t.min,l=t.max;if(void 0===i||void 0===l)return;if(o.set(new Vector3(i[0],i[1],i[2]),new Vector3(l[0],l[1],l[2])),t.normalized){const i=getNormalizedComponentScale(aa[t.componentType]);o.min.multiplyScalar(i),o.max.multiplyScalar(i)}}const l=i.targets;if(void 0!==l){const t=new Vector3,i=new Vector3;for(let a=0,o=l.length;a<o;a++){const o=l[a];if(void 0!==o.POSITION){const a=r.json.accessors[o.POSITION],l=a.min,c=a.max;if(void 0!==l&&void 0!==c){if(i.setX(Math.max(Math.abs(l[0]),Math.abs(c[0]))),i.setY(Math.max(Math.abs(l[1]),Math.abs(c[1]))),i.setZ(Math.max(Math.abs(l[2]),Math.abs(c[2]))),a.normalized){const t=getNormalizedComponentScale(aa[a.componentType]);i.multiplyScalar(t)}t.max(i)}}}o.expandByVector(t)}t.boundingBox=o;const c=new Sphere;o.getCenter(c.center),c.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=c}(t,i,r),Promise.all(o).then((function(){return void 0!==i.targets?function addMorphTargets(t,i,r){let a=!1,o=!1,l=!1;for(let t=0,r=i.length;t<r;t++){const r=i[t];if(void 0!==r.POSITION&&(a=!0),void 0!==r.NORMAL&&(o=!0),void 0!==r.COLOR_0&&(l=!0),a&&o&&l)break}if(!a&&!o&&!l)return Promise.resolve(t);const c=[],h=[],u=[];for(let d=0,p=i.length;d<p;d++){const p=i[d];if(a){const i=void 0!==p.POSITION?r.getDependency("accessor",p.POSITION):t.attributes.position;c.push(i)}if(o){const i=void 0!==p.NORMAL?r.getDependency("accessor",p.NORMAL):t.attributes.normal;h.push(i)}if(l){const i=void 0!==p.COLOR_0?r.getDependency("accessor",p.COLOR_0):t.attributes.color;u.push(i)}}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(u)]).then((function(i){const r=i[0],c=i[1],h=i[2];return a&&(t.morphAttributes.position=r),o&&(t.morphAttributes.normal=c),l&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t}))}(t,i.targets,r):t}))}function createInlineWorkerFactory(t,i){var r;return function WorkerFactory(i){return r=r||function createURL(t,i){var r=function funcToSource(t){var i=[],r=t.toString();return r=r.replace(/(['"])__worker_loader_strict__(['"])/g,"$1use strict$2"),i.push("("+r+")()"),i}(t),a=new Blob(r,{type:"application/javascript"});return URL.createObjectURL(a)}(t),new Worker(r,i)}}var ya=createInlineWorkerFactory((function(){!function(){class Mat3{constructor(t){void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const i=this.elements;i[0]=t.x,i[4]=t.y,i[8]=t.z}getTrace(t){void 0===t&&(t=new Vec3);const i=this.elements;return t.x=i[0],t.y=i[4],t.z=i[8],t}vmult(t,i){void 0===i&&(i=new Vec3);const r=this.elements,a=t.x,o=t.y,l=t.z;return i.x=r[0]*a+r[1]*o+r[2]*l,i.y=r[3]*a+r[4]*o+r[5]*l,i.z=r[6]*a+r[7]*o+r[8]*l,i}smult(t){for(let i=0;i<this.elements.length;i++)this.elements[i]*=t}mmult(t,i){void 0===i&&(i=new Mat3);const r=this.elements,a=t.elements,o=i.elements,l=r[0],c=r[1],h=r[2],u=r[3],d=r[4],p=r[5],m=r[6],g=r[7],y=r[8],v=a[0],x=a[1],b=a[2],_=a[3],S=a[4],M=a[5],w=a[6],E=a[7],T=a[8];return o[0]=l*v+c*_+h*w,o[1]=l*x+c*S+h*E,o[2]=l*b+c*M+h*T,o[3]=u*v+d*_+p*w,o[4]=u*x+d*S+p*E,o[5]=u*b+d*M+p*T,o[6]=m*v+g*_+y*w,o[7]=m*x+g*S+y*E,o[8]=m*b+g*M+y*T,i}scale(t,i){void 0===i&&(i=new Mat3);const r=this.elements,a=i.elements;for(let i=0;3!==i;i++)a[3*i+0]=t.x*r[3*i+0],a[3*i+1]=t.y*r[3*i+1],a[3*i+2]=t.z*r[3*i+2];return i}solve(t,i){void 0===i&&(i=new Vec3);const r=[];let a,o;for(a=0;a<12;a++)r.push(0);for(a=0;a<3;a++)for(o=0;o<3;o++)r[a+4*o]=this.elements[a+3*o];r[3]=t.x,r[7]=t.y,r[11]=t.z;let l=3;const c=l;let h,u;do{if(a=c-l,0===r[a+4*a])for(o=a+1;o<c;o++)if(0!==r[a+4*o]){h=4;do{u=4-h,r[u+4*a]+=r[u+4*o]}while(--h);break}if(0!==r[a+4*a])for(o=a+1;o<c;o++){const t=r[a+4*o]/r[a+4*a];h=4;do{u=4-h,r[u+4*o]=u<=a?0:r[u+4*o]-r[u+4*a]*t}while(--h)}}while(--l);if(i.z=r[11]/r[10],i.y=(r[7]-r[6]*i.z)/r[5],i.x=(r[3]-r[2]*i.z-r[1]*i.y)/r[0],isNaN(i.x)||isNaN(i.y)||isNaN(i.z)||i.x===1/0||i.y===1/0||i.z===1/0)throw`Could not solve equation! Got x=[${i.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return i}e(t,i,r){if(void 0===r)return this.elements[i+3*t];this.elements[i+3*t]=r}copy(t){for(let i=0;i<t.elements.length;i++)this.elements[i]=t.elements[i];return this}toString(){let t="";for(let i=0;i<9;i++)t+=this.elements[i]+",";return t}reverse(i){void 0===i&&(i=new Mat3);const r=t;let a,o;for(a=0;a<3;a++)for(o=0;o<3;o++)r[a+6*o]=this.elements[a+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let l=3;const c=l;let h,u;do{if(a=c-l,0===r[a+6*a])for(o=a+1;o<c;o++)if(0!==r[a+6*o]){h=6;do{u=6-h,r[u+6*a]+=r[u+6*o]}while(--h);break}if(0!==r[a+6*a])for(o=a+1;o<c;o++){const t=r[a+6*o]/r[a+6*a];h=6;do{u=6-h,r[u+6*o]=u<=a?0:r[u+6*o]-r[u+6*a]*t}while(--h)}}while(--l);a=2;do{o=a-1;do{const t=r[a+6*o]/r[a+6*a];h=6;do{u=6-h,r[u+6*o]=r[u+6*o]-r[u+6*a]*t}while(--h)}while(o--)}while(--a);a=2;do{const t=1/r[a+6*a];h=6;do{u=6-h,r[u+6*a]=r[u+6*a]*t}while(--h)}while(a--);a=2;do{o=2;do{if(u=r[3+o+6*a],isNaN(u)||u===1/0)throw`Could not reverse! A=[${this.toString()}]`;i.e(a,o,u)}while(o--)}while(a--);return i}setRotationFromQuaternion(t){const i=t.x,r=t.y,a=t.z,o=t.w,l=i+i,c=r+r,h=a+a,u=i*l,d=i*c,p=i*h,m=r*c,g=r*h,y=a*h,v=o*l,x=o*c,b=o*h,_=this.elements;return _[0]=1-(m+y),_[1]=d-b,_[2]=p+x,_[3]=d+b,_[4]=1-(u+y),_[5]=g-v,_[6]=p-x,_[7]=g+v,_[8]=1-(u+m),this}transpose(t){void 0===t&&(t=new Mat3);const i=this.elements,r=t.elements;let a;return r[0]=i[0],r[4]=i[4],r[8]=i[8],a=i[1],r[1]=i[3],r[3]=a,a=i[2],r[2]=i[6],r[6]=a,a=i[5],r[5]=i[7],r[7]=a,t}}const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class Vec3{constructor(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=r}cross(t,i){void 0===i&&(i=new Vec3);const r=t.x,a=t.y,o=t.z,l=this.x,c=this.y,h=this.z;return i.x=c*o-h*a,i.y=h*r-l*o,i.z=l*a-c*r,i}set(t,i,r){return this.x=t,this.y=i,this.z=r,this}setZero(){this.x=this.y=this.z=0}vadd(t,i){if(!i)return new Vec3(this.x+t.x,this.y+t.y,this.z+t.z);i.x=t.x+this.x,i.y=t.y+this.y,i.z=t.z+this.z}vsub(t,i){if(!i)return new Vec3(this.x-t.x,this.y-t.y,this.z-t.z);i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z}crossmat(){return new Mat3([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,i=this.y,r=this.z,a=Math.sqrt(t*t+i*i+r*r);if(a>0){const t=1/a;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return a}unit(t){void 0===t&&(t=new Vec3);const i=this.x,r=this.y,a=this.z;let o=Math.sqrt(i*i+r*r+a*a);return o>0?(o=1/o,t.x=i*o,t.y=r*o,t.z=a*o):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,i=this.y,r=this.z;return Math.sqrt(t*t+i*i+r*r)}lengthSquared(){return this.dot(this)}distanceTo(t){const i=this.x,r=this.y,a=this.z,o=t.x,l=t.y,c=t.z;return Math.sqrt((o-i)*(o-i)+(l-r)*(l-r)+(c-a)*(c-a))}distanceSquared(t){const i=this.x,r=this.y,a=this.z,o=t.x,l=t.y,c=t.z;return(o-i)*(o-i)+(l-r)*(l-r)+(c-a)*(c-a)}scale(t,i){void 0===i&&(i=new Vec3);const r=this.x,a=this.y,o=this.z;return i.x=t*r,i.y=t*a,i.z=t*o,i}vmul(t,i){return void 0===i&&(i=new Vec3),i.x=t.x*this.x,i.y=t.y*this.y,i.z=t.z*this.z,i}addScaledVector(t,i,r){return void 0===r&&(r=new Vec3),r.x=this.x+t*i.x,r.y=this.y+t*i.y,r.z=this.z+t*i.z,r}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(t){return void 0===t&&(t=new Vec3),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,a){const o=this.length();if(o>0){const l=i,c=1/o;l.set(this.x*c,this.y*c,this.z*c);const h=r;Math.abs(l.x)<.9?(h.set(1,0,0),l.cross(h,t)):(h.set(0,1,0),l.cross(h,t)),l.cross(t,a)}else t.set(1,0,0),a.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,i,r){const a=this.x,o=this.y,l=this.z;r.x=a+(t.x-a)*i,r.y=o+(t.y-o)*i,r.z=l+(t.z-l)*i}almostEquals(t,i){return void 0===i&&(i=1e-6),!(Math.abs(this.x-t.x)>i||Math.abs(this.y-t.y)>i||Math.abs(this.z-t.z)>i)}almostZero(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,i){return this.negate(a),a.almostEquals(t,i)}clone(){return new Vec3(this.x,this.y,this.z)}}Vec3.ZERO=new Vec3(0,0,0),Vec3.UNIT_X=new Vec3(1,0,0),Vec3.UNIT_Y=new Vec3(0,1,0),Vec3.UNIT_Z=new Vec3(0,0,1);const i=new Vec3,r=new Vec3,a=new Vec3;class AABB{constructor(t){void 0===t&&(t={}),this.lowerBound=new Vec3,this.upperBound=new Vec3,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,i,r,a){const l=this.lowerBound,c=this.upperBound,h=r;l.copy(t[0]),h&&h.vmult(l,l),c.copy(l);for(let i=1;i<t.length;i++){let r=t[i];h&&(h.vmult(r,o),r=o),r.x>c.x&&(c.x=r.x),r.x<l.x&&(l.x=r.x),r.y>c.y&&(c.y=r.y),r.y<l.y&&(l.y=r.y),r.z>c.z&&(c.z=r.z),r.z<l.z&&(l.z=r.z)}return i&&(i.vadd(l,l),i.vadd(c,c)),a&&(l.x-=a,l.y-=a,l.z-=a,c.x+=a,c.y+=a,c.z+=a),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return(new AABB).copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const i=this.lowerBound,r=this.upperBound,a=t.lowerBound,o=t.upperBound,l=a.x<=r.x&&r.x<=o.x||i.x<=o.x&&o.x<=r.x,c=a.y<=r.y&&r.y<=o.y||i.y<=o.y&&o.y<=r.y,h=a.z<=r.z&&r.z<=o.z||i.z<=o.z&&o.z<=r.z;return l&&c&&h}volume(){const t=this.lowerBound,i=this.upperBound;return(i.x-t.x)*(i.y-t.y)*(i.z-t.z)}contains(t){const i=this.lowerBound,r=this.upperBound,a=t.lowerBound,o=t.upperBound;return i.x<=a.x&&r.x>=o.x&&i.y<=a.y&&r.y>=o.y&&i.z<=a.z&&r.z>=o.z}getCorners(t,i,r,a,o,l,c,h){const u=this.lowerBound,d=this.upperBound;t.copy(u),i.set(d.x,u.y,u.z),r.set(d.x,d.y,u.z),a.set(u.x,d.y,d.z),o.set(d.x,u.y,d.z),l.set(u.x,d.y,u.z),c.set(u.x,u.y,d.z),h.copy(d)}toLocalFrame(t,i){const r=l,a=r[0],o=r[1],c=r[2],h=r[3],u=r[4],d=r[5],p=r[6],m=r[7];this.getCorners(a,o,c,h,u,d,p,m);for(let i=0;8!==i;i++){const a=r[i];t.pointToLocal(a,a)}return i.setFromPoints(r)}toWorldFrame(t,i){const r=l,a=r[0],o=r[1],c=r[2],h=r[3],u=r[4],d=r[5],p=r[6],m=r[7];this.getCorners(a,o,c,h,u,d,p,m);for(let i=0;8!==i;i++){const a=r[i];t.pointToWorld(a,a)}return i.setFromPoints(r)}overlapsRay(t){const{direction:i,from:r}=t,a=1/i.x,o=1/i.y,l=1/i.z,c=(this.lowerBound.x-r.x)*a,h=(this.upperBound.x-r.x)*a,u=(this.lowerBound.y-r.y)*o,d=(this.upperBound.y-r.y)*o,p=(this.lowerBound.z-r.z)*l,m=(this.upperBound.z-r.z)*l,g=Math.max(Math.max(Math.min(c,h),Math.min(u,d)),Math.min(p,m)),y=Math.min(Math.min(Math.max(c,h),Math.max(u,d)),Math.max(p,m));return!(y<0||g>y)}}const o=new Vec3,l=[new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3];class ArrayCollisionMatrix{constructor(){this.matrix=[]}get(t,i){let{index:r}=t,{index:a}=i;if(a>r){const t=a;a=r,r=t}return this.matrix[(r*(r+1)>>1)+a-1]}set(t,i,r){let{index:a}=t,{index:o}=i;if(o>a){const t=o;o=a,a=t}this.matrix[(a*(a+1)>>1)+o-1]=r?1:0}reset(){for(let t=0,i=this.matrix.length;t!==i;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}class EventTarget{addEventListener(t,i){void 0===this._listeners&&(this._listeners={});const r=this._listeners;return void 0===r[t]&&(r[t]=[]),r[t].includes(i)||r[t].push(i),this}hasEventListener(t,i){if(void 0===this._listeners)return!1;const r=this._listeners;return!(void 0===r[t]||!r[t].includes(i))}hasAnyEventListener(t){return void 0!==this._listeners&&void 0!==this._listeners[t]}removeEventListener(t,i){if(void 0===this._listeners)return this;const r=this._listeners;if(void 0===r[t])return this;const a=r[t].indexOf(i);return-1!==a&&r[t].splice(a,1),this}dispatchEvent(t){if(void 0===this._listeners)return this;const i=this._listeners[t.type];if(void 0!==i){t.target=this;for(let r=0,a=i.length;r<a;r++)i[r].call(this,t)}return this}}let c=class Quaternion{constructor(t,i,r,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=1),this.x=t,this.y=i,this.z=r,this.w=a}set(t,i,r,a){return this.x=t,this.y=i,this.z=r,this.w=a,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,i){const r=Math.sin(.5*i);return this.x=t.x*r,this.y=t.y*r,this.z=t.z*r,this.w=Math.cos(.5*i),this}toAxisAngle(t){void 0===t&&(t=new Vec3),this.normalize();const i=2*Math.acos(this.w),r=Math.sqrt(1-this.w*this.w);return r<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/r,t.y=this.y/r,t.z=this.z/r),[t,i]}setFromVectors(t,i){if(t.isAntiparallelTo(i)){const i=h,r=u;t.tangents(i,r),this.setFromAxisAngle(i,Math.PI)}else{const r=t.cross(i);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(t.length()**2*i.length()**2)+t.dot(i),this.normalize()}return this}mult(t,i){void 0===i&&(i=new Quaternion);const r=this.x,a=this.y,o=this.z,l=this.w,c=t.x,h=t.y,u=t.z,d=t.w;return i.x=r*d+l*c+a*u-o*h,i.y=a*d+l*h+o*c-r*u,i.z=o*d+l*u+r*h-a*c,i.w=l*d-r*c-a*h-o*u,i}inverse(t){void 0===t&&(t=new Quaternion);const i=this.x,r=this.y,a=this.z,o=this.w;this.conjugate(t);const l=1/(i*i+r*r+a*a+o*o);return t.x*=l,t.y*=l,t.z*=l,t.w*=l,t}conjugate(t){return void 0===t&&(t=new Quaternion),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,i){void 0===i&&(i=new Vec3);const r=t.x,a=t.y,o=t.z,l=this.x,c=this.y,h=this.z,u=this.w,d=u*r+c*o-h*a,p=u*a+h*r-l*o,m=u*o+l*a-c*r,g=-l*r-c*a-h*o;return i.x=d*u+g*-l+p*-h-m*-c,i.y=p*u+g*-c+m*-l-d*-h,i.z=m*u+g*-h+d*-c-p*-l,i}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,i){let r,a,o;void 0===i&&(i="YZX");const l=this.x,c=this.y,h=this.z,u=this.w;if("YZX"!==i)throw new Error(`Euler order ${i} not supported yet.`);{const t=l*c+h*u;if(t>.499&&(r=2*Math.atan2(l,u),a=Math.PI/2,o=0),t<-.499&&(r=-2*Math.atan2(l,u),a=-Math.PI/2,o=0),void 0===r){const i=l*l,d=c*c,p=h*h;r=Math.atan2(2*c*u-2*l*h,1-2*d-2*p),a=Math.asin(2*t),o=Math.atan2(2*l*u-2*c*h,1-2*i-2*p)}}t.y=r,t.z=a,t.x=o}setFromEuler(t,i,r,a){void 0===a&&(a="XYZ");const o=Math.cos(t/2),l=Math.cos(i/2),c=Math.cos(r/2),h=Math.sin(t/2),u=Math.sin(i/2),d=Math.sin(r/2);return"XYZ"===a?(this.x=h*l*c+o*u*d,this.y=o*u*c-h*l*d,this.z=o*l*d+h*u*c,this.w=o*l*c-h*u*d):"YXZ"===a?(this.x=h*l*c+o*u*d,this.y=o*u*c-h*l*d,this.z=o*l*d-h*u*c,this.w=o*l*c+h*u*d):"ZXY"===a?(this.x=h*l*c-o*u*d,this.y=o*u*c+h*l*d,this.z=o*l*d+h*u*c,this.w=o*l*c-h*u*d):"ZYX"===a?(this.x=h*l*c-o*u*d,this.y=o*u*c+h*l*d,this.z=o*l*d-h*u*c,this.w=o*l*c+h*u*d):"YZX"===a?(this.x=h*l*c+o*u*d,this.y=o*u*c+h*l*d,this.z=o*l*d-h*u*c,this.w=o*l*c-h*u*d):"XZY"===a&&(this.x=h*l*c-o*u*d,this.y=o*u*c-h*l*d,this.z=o*l*d+h*u*c,this.w=o*l*c+h*u*d),this}clone(){return new Quaternion(this.x,this.y,this.z,this.w)}slerp(t,i,r){void 0===r&&(r=new Quaternion);const a=this.x,o=this.y,l=this.z,c=this.w;let h,u,d,p,m,g=t.x,y=t.y,v=t.z,x=t.w;return u=a*g+o*y+l*v+c*x,u<0&&(u=-u,g=-g,y=-y,v=-v,x=-x),1-u>1e-6?(h=Math.acos(u),d=Math.sin(h),p=Math.sin((1-i)*h)/d,m=Math.sin(i*h)/d):(p=1-i,m=i),r.x=p*a+m*g,r.y=p*o+m*y,r.z=p*l+m*v,r.w=p*c+m*x,r}integrate(t,i,r,a){void 0===a&&(a=new Quaternion);const o=t.x*r.x,l=t.y*r.y,c=t.z*r.z,h=this.x,u=this.y,d=this.z,p=this.w,m=.5*i;return a.x+=m*(o*p+l*d-c*u),a.y+=m*(l*p+c*h-o*d),a.z+=m*(c*p+o*u-l*h),a.w+=m*(-o*h-l*u-c*d),a}};const h=new Vec3,u=new Vec3;class Shape{constructor(t){void 0===t&&(t={}),this.id=Shape.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,a){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}Shape.idCounter=0,Shape.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class Transform{constructor(t){void 0===t&&(t={}),this.position=new Vec3,this.quaternion=new c,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,i){return Transform.pointToLocalFrame(this.position,this.quaternion,t,i)}pointToWorld(t,i){return Transform.pointToWorldFrame(this.position,this.quaternion,t,i)}vectorToWorldFrame(t,i){return void 0===i&&(i=new Vec3),this.quaternion.vmult(t,i),i}static pointToLocalFrame(t,i,r,a){return void 0===a&&(a=new Vec3),r.vsub(t,a),i.conjugate(d),d.vmult(a,a),a}static pointToWorldFrame(t,i,r,a){return void 0===a&&(a=new Vec3),i.vmult(r,a),a.vadd(t,a),a}static vectorToWorldFrame(t,i,r){return void 0===r&&(r=new Vec3),t.vmult(i,r),r}static vectorToLocalFrame(t,i,r,a){return void 0===a&&(a=new Vec3),i.w*=-1,i.vmult(r,a),i.w*=-1,a}}const d=new c;class ConvexPolyhedron extends Shape{constructor(t){void 0===t&&(t={});const{vertices:i=[],faces:r=[],normals:a=[],axes:o,boundingSphereRadius:l}=t;super({type:Shape.types.CONVEXPOLYHEDRON}),this.vertices=i,this.faces=r,this.faceNormals=a,0===this.faceNormals.length&&this.computeNormals(),l?this.boundingSphereRadius=l:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,i=this.vertices,r=this.uniqueEdges;r.length=0;const a=new Vec3;for(let o=0;o!==t.length;o++){const l=t[o],c=l.length;for(let t=0;t!==c;t++){const o=(t+1)%c;i[l[t]].vsub(i[l[o]],a),a.normalize();let h=!1;for(let t=0;t!==r.length;t++)if(r[t].almostEquals(a)||r[t].almostEquals(a)){h=!0;break}h||r.push(a.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let i=0;i<this.faces[t].length;i++)if(!this.vertices[this.faces[t][i]])throw new Error(`Vertex ${this.faces[t][i]} not found!`);const i=this.faceNormals[t]||new Vec3;this.getFaceNormal(t,i),i.negate(i),this.faceNormals[t]=i;const r=this.vertices[this.faces[t][0]];if(i.dot(r)<0)for(let i=0;i<this.faces[t].length;i++);}}getFaceNormal(t,i){const r=this.faces[t],a=this.vertices[r[0]],o=this.vertices[r[1]],l=this.vertices[r[2]];ConvexPolyhedron.computeNormal(a,o,l,i)}static computeNormal(t,i,r,a){const o=new Vec3,l=new Vec3;i.vsub(t,l),r.vsub(i,o),o.cross(l,a),a.isZero()||a.normalize()}clipAgainstHull(t,i,r,a,o,l,c,h,u){const d=new Vec3;let p=-1,m=-Number.MAX_VALUE;for(let t=0;t<r.faces.length;t++){d.copy(r.faceNormals[t]),o.vmult(d,d);const i=d.dot(l);i>m&&(m=i,p=t)}const g=[];for(let t=0;t<r.faces[p].length;t++){const i=r.vertices[r.faces[p][t]],l=new Vec3;l.copy(i),o.vmult(l,l),a.vadd(l,l),g.push(l)}p>=0&&this.clipFaceAgainstHull(l,t,i,g,c,h,u)}findSeparatingAxis(t,i,r,a,o,l,c,h){const u=new Vec3,d=new Vec3,p=new Vec3,m=new Vec3,g=new Vec3,y=new Vec3;let v=Number.MAX_VALUE;const x=this;if(x.uniqueAxes)for(let c=0;c!==x.uniqueAxes.length;c++){r.vmult(x.uniqueAxes[c],u);const h=x.testSepAxis(u,t,i,r,a,o);if(!1===h)return!1;h<v&&(v=h,l.copy(u))}else{const h=c?c.length:x.faces.length;for(let d=0;d<h;d++){const h=c?c[d]:d;u.copy(x.faceNormals[h]),r.vmult(u,u);const p=x.testSepAxis(u,t,i,r,a,o);if(!1===p)return!1;p<v&&(v=p,l.copy(u))}}if(t.uniqueAxes)for(let c=0;c!==t.uniqueAxes.length;c++){o.vmult(t.uniqueAxes[c],d);const h=x.testSepAxis(d,t,i,r,a,o);if(!1===h)return!1;h<v&&(v=h,l.copy(d))}else{const c=h?h.length:t.faces.length;for(let u=0;u<c;u++){const c=h?h[u]:u;d.copy(t.faceNormals[c]),o.vmult(d,d);const p=x.testSepAxis(d,t,i,r,a,o);if(!1===p)return!1;p<v&&(v=p,l.copy(d))}}for(let c=0;c!==x.uniqueEdges.length;c++){r.vmult(x.uniqueEdges[c],m);for(let c=0;c!==t.uniqueEdges.length;c++)if(o.vmult(t.uniqueEdges[c],g),m.cross(g,y),!y.almostZero()){y.normalize();const c=x.testSepAxis(y,t,i,r,a,o);if(!1===c)return!1;c<v&&(v=c,l.copy(y))}}return a.vsub(i,p),p.dot(l)>0&&l.negate(l),!0}testSepAxis(t,i,r,a,o,l){ConvexPolyhedron.project(this,t,r,a,p),ConvexPolyhedron.project(i,t,o,l,m);const c=p[0],h=p[1],u=m[0],d=m[1];if(c<d||u<h)return!1;const g=c-d,y=u-h;return g<y?g:y}calculateLocalInertia(t,i){const r=new Vec3,a=new Vec3;this.computeLocalAABB(a,r);const o=r.x-a.x,l=r.y-a.y,c=r.z-a.z;i.x=1/12*t*(2*l*2*l+2*c*2*c),i.y=1/12*t*(2*o*2*o+2*c*2*c),i.z=1/12*t*(2*l*2*l+2*o*2*o)}getPlaneConstantOfFace(t){const i=this.faces[t],r=this.faceNormals[t],a=this.vertices[i[0]];return-r.dot(a)}clipFaceAgainstHull(t,i,r,a,o,l,c){const h=new Vec3,u=new Vec3,d=new Vec3,p=new Vec3,m=new Vec3,g=new Vec3,y=new Vec3,v=new Vec3,x=this,b=a,_=[];let S=-1,M=Number.MAX_VALUE;for(let i=0;i<x.faces.length;i++){h.copy(x.faceNormals[i]),r.vmult(h,h);const a=h.dot(t);a<M&&(M=a,S=i)}if(S<0)return;const w=x.faces[S];w.connectedFaces=[];for(let t=0;t<x.faces.length;t++)for(let i=0;i<x.faces[t].length;i++)-1!==w.indexOf(x.faces[t][i])&&t!==S&&-1===w.connectedFaces.indexOf(t)&&w.connectedFaces.push(t);const E=w.length;for(let t=0;t<E;t++){const a=x.vertices[w[t]],o=x.vertices[w[(t+1)%E]];a.vsub(o,u),d.copy(u),r.vmult(d,d),i.vadd(d,d),p.copy(this.faceNormals[S]),r.vmult(p,p),i.vadd(p,p),d.cross(p,m),m.negate(m),g.copy(a),r.vmult(g,g),i.vadd(g,g);const l=w.connectedFaces[t];y.copy(this.faceNormals[l]);const c=this.getPlaneConstantOfFace(l);v.copy(y),r.vmult(v,v);const h=c-v.dot(i);for(this.clipFaceAgainstPlane(b,_,v,h);b.length;)b.shift();for(;_.length;)b.push(_.shift())}y.copy(this.faceNormals[S]);const T=this.getPlaneConstantOfFace(S);v.copy(y),r.vmult(v,v);const A=T-v.dot(i);for(let t=0;t<b.length;t++){let i=v.dot(b[t])+A;if(i<=o&&(i=o),i<=l){const r=b[t];if(i<=1e-6){const t={point:r,normal:v,depth:i};c.push(t)}}}}clipFaceAgainstPlane(t,i,r,a){let o,l;const c=t.length;if(c<2)return i;let h=t[t.length-1],u=t[0];o=r.dot(h)+a;for(let d=0;d<c;d++){if(u=t[d],l=r.dot(u)+a,o<0)if(l<0){const t=new Vec3;t.copy(u),i.push(t)}else{const t=new Vec3;h.lerp(u,o/(o-l),t),i.push(t)}else if(l<0){const t=new Vec3;h.lerp(u,o/(o-l),t),i.push(t),i.push(u)}h=u,o=l}return i}computeWorldVertices(t,i){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new Vec3);const r=this.vertices,a=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)i.vmult(r[o],a[o]),t.vadd(a[o],a[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,i){const r=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let a=0;a<this.vertices.length;a++){const o=r[a];o.x<t.x?t.x=o.x:o.x>i.x&&(i.x=o.x),o.y<t.y?t.y=o.y:o.y>i.y&&(i.y=o.y),o.z<t.z?t.z=o.z:o.z>i.z&&(i.z=o.z)}}computeWorldFaceNormals(t){const i=this.faceNormals.length;for(;this.worldFaceNormals.length<i;)this.worldFaceNormals.push(new Vec3);const r=this.faceNormals,a=this.worldFaceNormals;for(let o=0;o!==i;o++)t.vmult(r[o],a[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const i=this.vertices;for(let r=0;r!==i.length;r++){const a=i[r].lengthSquared();a>t&&(t=a)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,i,r,a){const o=this.vertices;let l,c,h,u,d,p,m=new Vec3;for(let r=0;r<o.length;r++){m.copy(o[r]),i.vmult(m,m),t.vadd(m,m);const a=m;(void 0===l||a.x<l)&&(l=a.x),(void 0===u||a.x>u)&&(u=a.x),(void 0===c||a.y<c)&&(c=a.y),(void 0===d||a.y>d)&&(d=a.y),(void 0===h||a.z<h)&&(h=a.z),(void 0===p||a.z>p)&&(p=a.z)}r.set(l,c,h),a.set(u,d,p)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){void 0===t&&(t=new Vec3);const i=this.vertices;for(let r=0;r<i.length;r++)t.vadd(i[r],t);return t.scale(1/i.length,t),t}transformAllPoints(t,i){const r=this.vertices.length,a=this.vertices;if(i){for(let t=0;t<r;t++){const r=a[t];i.vmult(r,r)}for(let t=0;t<this.faceNormals.length;t++){const r=this.faceNormals[t];i.vmult(r,r)}}if(t)for(let i=0;i<r;i++){const r=a[i];r.vadd(t,r)}}pointIsInside(t){const i=this.vertices,r=this.faces,a=this.faceNormals,o=new Vec3;this.getAveragePointLocal(o);for(let l=0;l<this.faces.length;l++){let c=a[l];const h=i[r[l][0]],u=new Vec3;t.vsub(h,u);const d=c.dot(u),p=new Vec3;o.vsub(h,p);const m=c.dot(p);if(d<0&&m>0||d>0&&m<0)return!1}return-1}static project(t,i,r,a,o){const l=t.vertices.length,c=g;let h=0,u=0;const d=y,p=t.vertices;d.setZero(),Transform.vectorToLocalFrame(r,a,i,c),Transform.pointToLocalFrame(r,a,d,d);const m=d.dot(c);u=h=p[0].dot(c);for(let t=1;t<l;t++){const i=p[t].dot(c);i>h&&(h=i),i<u&&(u=i)}if(u-=m,h-=m,u>h){const t=u;u=h,h=t}o[0]=h,o[1]=u}}const p=[],m=[],g=(new Vec3,new Vec3),y=new Vec3;class Box extends Shape{constructor(t){super({type:Shape.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,i=this.halfExtents.y,r=this.halfExtents.z,a=Vec3,o=[new a(-t,-i,-r),new a(t,-i,-r),new a(t,i,-r),new a(-t,i,-r),new a(-t,-i,r),new a(t,-i,r),new a(t,i,r),new a(-t,i,r)],l=[new a(0,0,1),new a(0,1,0),new a(1,0,0)],c=new ConvexPolyhedron({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:l});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(t,i){return void 0===i&&(i=new Vec3),Box.calculateInertia(this.halfExtents,t,i),i}static calculateInertia(t,i,r){const a=t;r.x=1/12*i*(2*a.y*2*a.y+2*a.z*2*a.z),r.y=1/12*i*(2*a.x*2*a.x+2*a.z*2*a.z),r.z=1/12*i*(2*a.y*2*a.y+2*a.x*2*a.x)}getSideNormals(t,i){const r=t,a=this.halfExtents;if(r[0].set(a.x,0,0),r[1].set(0,a.y,0),r[2].set(0,0,a.z),r[3].set(-a.x,0,0),r[4].set(0,-a.y,0),r[5].set(0,0,-a.z),void 0!==i)for(let t=0;t!==r.length;t++)i.vmult(r[t],r[t]);return r}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,i,r){const a=this.halfExtents,o=[[a.x,a.y,a.z],[-a.x,a.y,a.z],[-a.x,-a.y,a.z],[-a.x,-a.y,-a.z],[a.x,-a.y,-a.z],[a.x,a.y,-a.z],[-a.x,a.y,-a.z],[a.x,-a.y,a.z]];for(let a=0;a<o.length;a++)v.set(o[a][0],o[a][1],o[a][2]),i.vmult(v,v),t.vadd(v,v),r(v.x,v.y,v.z)}calculateWorldAABB(t,i,r,a){const o=this.halfExtents;x[0].set(o.x,o.y,o.z),x[1].set(-o.x,o.y,o.z),x[2].set(-o.x,-o.y,o.z),x[3].set(-o.x,-o.y,-o.z),x[4].set(o.x,-o.y,-o.z),x[5].set(o.x,o.y,-o.z),x[6].set(-o.x,o.y,-o.z),x[7].set(o.x,-o.y,o.z);const l=x[0];i.vmult(l,l),t.vadd(l,l),a.copy(l),r.copy(l);for(let o=1;o<8;o++){const l=x[o];i.vmult(l,l),t.vadd(l,l);const c=l.x,h=l.y,u=l.z;c>a.x&&(a.x=c),h>a.y&&(a.y=h),u>a.z&&(a.z=u),c<r.x&&(r.x=c),h<r.y&&(r.y=h),u<r.z&&(r.z=u)}}}const v=new Vec3,x=[new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3];class Body extends EventTarget{constructor(t){void 0===t&&(t={}),super(),this.id=Body.idCounter++,this.index=-1,this.world=null,this.vlambda=new Vec3,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof t.collisionResponse||t.collisionResponse,this.position=new Vec3,this.previousPosition=new Vec3,this.interpolatedPosition=new Vec3,this.initPosition=new Vec3,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new Vec3,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new Vec3,this.force=new Vec3;const i="number"==typeof t.mass?t.mass:0;this.mass=i,this.invMass=i>0?1/i:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=i<=0?Body.STATIC:Body.DYNAMIC,typeof t.type==typeof Body.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=Body.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new Vec3,this.quaternion=new c,this.initQuaternion=new c,this.previousQuaternion=new c,this.interpolatedQuaternion=new c,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new Vec3,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new Vec3,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new Vec3,this.invInertia=new Vec3,this.invInertiaWorld=new Mat3,this.invMassSolve=0,this.invInertiaSolve=new Vec3,this.invInertiaWorldSolve=new Mat3,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new Vec3(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new Vec3(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new AABB,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new Vec3,this.isTrigger=Boolean(t.isTrigger),t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=Body.AWAKE,this.wakeUpAfterNarrowphase=!1,t===Body.SLEEPING&&this.dispatchEvent(Body.wakeupEvent)}sleep(){this.sleepState=Body.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const i=this.sleepState,r=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),a=this.sleepSpeedLimit**2;i===Body.AWAKE&&r<a?(this.sleepState=Body.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(Body.sleepyEvent)):i===Body.SLEEPY&&r>a?this.wakeUp():i===Body.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Body.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Body.SLEEPING||this.type===Body.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,i){return void 0===i&&(i=new Vec3),t.vsub(this.position,i),this.quaternion.conjugate().vmult(i,i),i}vectorToLocalFrame(t,i){return void 0===i&&(i=new Vec3),this.quaternion.conjugate().vmult(t,i),i}pointToWorldFrame(t,i){return void 0===i&&(i=new Vec3),this.quaternion.vmult(t,i),i.vadd(this.position,i),i}vectorToWorldFrame(t,i){return void 0===i&&(i=new Vec3),this.quaternion.vmult(t,i),i}addShape(t,i,r){const a=new Vec3,o=new c;return i&&a.copy(i),r&&o.copy(r),this.shapes.push(t),this.shapeOffsets.push(a),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const i=this.shapes.indexOf(t);return-1===i||(this.shapes.splice(i,1),this.shapeOffsets.splice(i,1),this.shapeOrientations.splice(i,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null),this}updateBoundingRadius(){const t=this.shapes,i=this.shapeOffsets,r=t.length;let a=0;for(let o=0;o!==r;o++){const r=t[o];r.updateBoundingSphereRadius();const l=i[o].length(),c=r.boundingSphereRadius;l+c>a&&(a=l+c)}this.boundingRadius=a}updateAABB(){const t=this.shapes,i=this.shapeOffsets,r=this.shapeOrientations,a=t.length,o=b,l=_,c=this.quaternion,h=this.aabb,u=S;for(let d=0;d!==a;d++){const a=t[d];c.vmult(i[d],o),o.vadd(this.position,o),c.mult(r[d],l),a.calculateWorldAABB(o,l,u.lowerBound,u.upperBound),0===d?h.copy(u):h.extend(u)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const i=this.invInertia;if(i.x!==i.y||i.y!==i.z||t){const t=M,r=w;t.setRotationFromQuaternion(this.quaternion),t.transpose(r),t.scale(i,t),t.mmult(r,this.invInertiaWorld)}}applyForce(t,i){if(void 0===i&&(i=new Vec3),this.type!==Body.DYNAMIC)return;this.sleepState===Body.SLEEPING&&this.wakeUp();const r=E;i.cross(t,r),this.force.vadd(t,this.force),this.torque.vadd(r,this.torque)}applyLocalForce(t,i){if(void 0===i&&(i=new Vec3),this.type!==Body.DYNAMIC)return;const r=T,a=A;this.vectorToWorldFrame(t,r),this.vectorToWorldFrame(i,a),this.applyForce(r,a)}applyTorque(t){this.type===Body.DYNAMIC&&(this.sleepState===Body.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,i){if(void 0===i&&(i=new Vec3),this.type!==Body.DYNAMIC)return;this.sleepState===Body.SLEEPING&&this.wakeUp();const r=i,a=C;a.copy(t),a.scale(this.invMass,a),this.velocity.vadd(a,this.velocity);const o=P;r.cross(t,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(t,i){if(void 0===i&&(i=new Vec3),this.type!==Body.DYNAMIC)return;const r=R,a=I;this.vectorToWorldFrame(t,r),this.vectorToWorldFrame(i,a),this.applyImpulse(r,a)}updateMassProperties(){const t=D;this.invMass=this.mass>0?1/this.mass:0;const i=this.inertia,r=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Box.calculateInertia(t,this.mass,i),this.invInertia.set(i.x>0&&!r?1/i.x:0,i.y>0&&!r?1/i.y:0,i.z>0&&!r?1/i.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,i){const r=new Vec3;return t.vsub(this.position,r),this.angularVelocity.cross(r,i),this.velocity.vadd(i,i),i}integrate(t,i,r){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==Body.DYNAMIC&&this.type!==Body.KINEMATIC||this.sleepState===Body.SLEEPING)return;const a=this.velocity,o=this.angularVelocity,l=this.position,c=this.force,h=this.torque,u=this.quaternion,d=this.invMass,p=this.invInertiaWorld,m=this.linearFactor,g=d*t;a.x+=c.x*g*m.x,a.y+=c.y*g*m.y,a.z+=c.z*g*m.z;const y=p.elements,v=this.angularFactor,x=h.x*v.x,b=h.y*v.y,_=h.z*v.z;o.x+=t*(y[0]*x+y[1]*b+y[2]*_),o.y+=t*(y[3]*x+y[4]*b+y[5]*_),o.z+=t*(y[6]*x+y[7]*b+y[8]*_),l.x+=a.x*t,l.y+=a.y*t,l.z+=a.z*t,u.integrate(this.angularVelocity,t,this.angularFactor,u),i&&(r?u.normalizeFast():u.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}Body.idCounter=0,Body.COLLIDE_EVENT_NAME="collide",Body.DYNAMIC=1,Body.STATIC=2,Body.KINEMATIC=4,Body.AWAKE=0,Body.SLEEPY=1,Body.SLEEPING=2,Body.wakeupEvent={type:"wakeup"},Body.sleepyEvent={type:"sleepy"},Body.sleepEvent={type:"sleep"};const b=new Vec3,_=new c,S=new AABB,M=new Mat3,w=new Mat3,E=(new Mat3,new Vec3),T=new Vec3,A=new Vec3,C=new Vec3,P=new Vec3,R=new Vec3,I=new Vec3,D=new Vec3;class Broadphase{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,i,r){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,i){return!(!(t.collisionFilterGroup&i.collisionFilterMask&&i.collisionFilterGroup&t.collisionFilterMask)||(t.type&Body.STATIC||t.sleepState===Body.SLEEPING)&&(i.type&Body.STATIC||i.sleepState===Body.SLEEPING))}intersectionTest(t,i,r,a){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,i,r,a):this.doBoundingSphereBroadphase(t,i,r,a)}doBoundingSphereBroadphase(t,i,r,a){const o=L;i.position.vsub(t.position,o);const l=(t.boundingRadius+i.boundingRadius)**2;o.lengthSquared()<l&&(r.push(t),a.push(i))}doBoundingBoxBroadphase(t,i,r,a){t.aabbNeedsUpdate&&t.updateAABB(),i.aabbNeedsUpdate&&i.updateAABB(),t.aabb.overlaps(i.aabb)&&(r.push(t),a.push(i))}makePairsUnique(t,i){const r=N,a=O,o=U,l=t.length;for(let r=0;r!==l;r++)a[r]=t[r],o[r]=i[r];t.length=0,i.length=0;for(let t=0;t!==l;t++){const i=a[t].id,l=o[t].id,c=i<l?`${i},${l}`:`${l},${i}`;r[c]=t,r.keys.push(c)}for(let l=0;l!==r.keys.length;l++){const l=r.keys.pop(),c=r[l];t.push(a[c]),i.push(o[c]),delete r[l]}}setWorld(t){}static boundingSphereCheck(t,i){const r=new Vec3;t.position.vsub(i.position,r);const a=t.shapes[0],o=i.shapes[0];return Math.pow(a.boundingSphereRadius+o.boundingSphereRadius,2)>r.lengthSquared()}aabbQuery(t,i,r){return[]}}const L=new Vec3;new Vec3,new c,new Vec3;const N={keys:[]},O=[],U=[];new Vec3,new Vec3,new Vec3;class NaiveBroadphase extends Broadphase{constructor(){super()}collisionPairs(t,i,r){const a=t.bodies,o=a.length;let l,c;for(let t=0;t!==o;t++)for(let o=0;o!==t;o++)l=a[t],c=a[o],this.needBroadphaseCollision(l,c)&&this.intersectionTest(l,c,i,r)}aabbQuery(t,i,r){void 0===r&&(r=[]);for(let a=0;a<t.bodies.length;a++){const o=t.bodies[a];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(i)&&r.push(o)}return r}}class RaycastResult{constructor(){this.rayFromWorld=new Vec3,this.rayToWorld=new Vec3,this.hitNormalWorld=new Vec3,this.hitPointWorld=new Vec3,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,i,r,a,o,l,c){this.rayFromWorld.copy(t),this.rayToWorld.copy(i),this.hitNormalWorld.copy(r),this.hitPointWorld.copy(a),this.shape=o,this.body=l,this.distance=c}}let B,z,V,k,G,H,W;B=Shape.types.SPHERE,z=Shape.types.PLANE,V=Shape.types.BOX,k=Shape.types.CYLINDER,G=Shape.types.CONVEXPOLYHEDRON,H=Shape.types.HEIGHTFIELD,W=Shape.types.TRIMESH;class Ray{get[B](){return this._intersectSphere}get[z](){return this._intersectPlane}get[V](){return this._intersectBox}get[k](){return this._intersectConvex}get[G](){return this._intersectConvex}get[H](){return this._intersectHeightfield}get[W](){return this._intersectTrimesh}constructor(t,i){void 0===t&&(t=new Vec3),void 0===i&&(i=new Vec3),this.from=t.clone(),this.to=i.clone(),this.direction=new Vec3,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ray.ANY,this.result=new RaycastResult,this.hasHit=!1,this.callback=t=>{}}intersectWorld(t,i){return this.mode=i.mode||Ray.ANY,this.result=i.result||new RaycastResult,this.skipBackfaces=!!i.skipBackfaces,this.collisionFilterMask=void 0!==i.collisionFilterMask?i.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==i.collisionFilterGroup?i.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===i.checkCollisionResponse||i.checkCollisionResponse,i.from&&this.from.copy(i.from),i.to&&this.to.copy(i.to),this.callback=i.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(j),X.length=0,t.broadphase.aabbQuery(t,j,X),this.intersectBodies(X),this.hasHit}intersectBody(t,i){i&&(this.result=i,this.updateDirection());const r=this.checkCollisionResponse;if(r&&!t.collisionResponse)return;if(!(this.collisionFilterGroup&t.collisionFilterMask&&t.collisionFilterGroup&this.collisionFilterMask))return;const a=K,o=Z;for(let i=0,l=t.shapes.length;i<l;i++){const l=t.shapes[i];if((!r||l.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[i],o),t.quaternion.vmult(t.shapeOffsets[i],a),a.vadd(t.position,a),this.intersectShape(l,o,a,t),this.result.shouldStop))break}}intersectBodies(t,i){i&&(this.result=i,this.updateDirection());for(let i=0,r=t.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(t[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,i,r,a){const o=function distanceFromIntersection(t,i,r){r.vsub(t,ye);const a=ye.dot(i);i.scale(a,ve),ve.vadd(t,ve);return r.distanceTo(ve)}(this.from,this.direction,r);if(o>t.boundingSphereRadius)return;const l=this[t.type];l&&l.call(this,t,i,r,a,t)}_intersectBox(t,i,r,a,o){return this._intersectConvex(t.convexPolyhedronRepresentation,i,r,a,o)}_intersectPlane(t,i,r,a,o){const l=this.from,c=this.to,h=this.direction,u=new Vec3(0,0,1);i.vmult(u,u);const d=new Vec3;l.vsub(r,d);const p=d.dot(u);if(c.vsub(r,d),p*d.dot(u)>0)return;if(l.distanceTo(c)<p)return;const m=u.dot(h);if(Math.abs(m)<this.precision)return;const g=new Vec3,y=new Vec3,v=new Vec3;l.vsub(r,g);const x=-u.dot(g)/m;h.scale(x,y),l.vadd(y,v),this.reportIntersection(u,v,o,a,-1)}getAABB(t){const{lowerBound:i,upperBound:r}=t,a=this.to,o=this.from;i.x=Math.min(a.x,o.x),i.y=Math.min(a.y,o.y),i.z=Math.min(a.z,o.z),r.x=Math.max(a.x,o.x),r.y=Math.max(a.y,o.y),r.z=Math.max(a.z,o.z)}_intersectHeightfield(t,i,r,a,o){t.data,t.elementSize;const l=ne;l.from.copy(this.from),l.to.copy(this.to),Transform.pointToLocalFrame(r,i,l.from,l.from),Transform.pointToLocalFrame(r,i,l.to,l.to),l.updateDirection();const c=re;let h,u,d,p;h=u=0,d=p=t.data.length-1;const m=new AABB;l.getAABB(m),t.getIndexOfPosition(m.lowerBound.x,m.lowerBound.y,c,!0),h=Math.max(h,c[0]),u=Math.max(u,c[1]),t.getIndexOfPosition(m.upperBound.x,m.upperBound.y,c,!0),d=Math.min(d,c[0]+1),p=Math.min(p,c[1]+1);for(let c=h;c<d;c++)for(let h=u;h<p;h++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(c,h,m),m.overlapsRay(l)){if(t.getConvexTrianglePillar(c,h,!1),Transform.pointToWorldFrame(r,i,t.pillarOffset,ie),this._intersectConvex(t.pillarConvex,i,ie,a,o,te),this.result.shouldStop)return;t.getConvexTrianglePillar(c,h,!0),Transform.pointToWorldFrame(r,i,t.pillarOffset,ie),this._intersectConvex(t.pillarConvex,i,ie,a,o,te)}}}_intersectSphere(t,i,r,a,o){const l=this.from,c=this.to,h=t.radius,u=(c.x-l.x)**2+(c.y-l.y)**2+(c.z-l.z)**2,d=2*((c.x-l.x)*(l.x-r.x)+(c.y-l.y)*(l.y-r.y)+(c.z-l.z)*(l.z-r.z)),p=d**2-4*u*((l.x-r.x)**2+(l.y-r.y)**2+(l.z-r.z)**2-h**2),m=se,g=ae;if(!(p<0))if(0===p)l.lerp(c,p,m),m.vsub(r,g),g.normalize(),this.reportIntersection(g,m,o,a,-1);else{const t=(-d-Math.sqrt(p))/(2*u),i=(-d+Math.sqrt(p))/(2*u);if(t>=0&&t<=1&&(l.lerp(c,t,m),m.vsub(r,g),g.normalize(),this.reportIntersection(g,m,o,a,-1)),this.result.shouldStop)return;i>=0&&i<=1&&(l.lerp(c,i,m),m.vsub(r,g),g.normalize(),this.reportIntersection(g,m,o,a,-1))}}_intersectConvex(t,i,r,a,o,l){const c=oe,h=le,u=l&&l.faceList||null,d=t.faces,p=t.vertices,m=t.faceNormals,g=this.direction,y=this.from,v=this.to,x=y.distanceTo(v),b=u?u.length:d.length,_=this.result;for(let t=0;!_.shouldStop&&t<b;t++){const l=u?u[t]:t,v=d[l],b=m[l],S=i,M=r;h.copy(p[v[0]]),S.vmult(h,h),h.vadd(M,h),h.vsub(y,h),S.vmult(b,c);const w=g.dot(c);if(Math.abs(w)<this.precision)continue;const E=c.dot(h)/w;if(!(E<0)){g.scale(E,Q),Q.vadd(y,Q),J.copy(p[v[0]]),S.vmult(J,J),M.vadd(J,J);for(let t=1;!_.shouldStop&&t<v.length-1;t++){$.copy(p[v[t]]),ee.copy(p[v[t+1]]),S.vmult($,$),S.vmult(ee,ee),M.vadd($,$),M.vadd(ee,ee);const i=Q.distanceTo(y);!Ray.pointInTriangle(Q,J,$,ee)&&!Ray.pointInTriangle(Q,$,J,ee)||i>x||this.reportIntersection(c,Q,o,a,l)}}}}_intersectTrimesh(t,i,r,a,o,l){const c=ce,h=fe,u=ge,d=le,p=he,m=ue,g=de,y=me,v=pe,x=t.indices;t.vertices;const b=this.from,_=this.to,S=this.direction;u.position.copy(r),u.quaternion.copy(i),Transform.vectorToLocalFrame(r,i,S,p),Transform.pointToLocalFrame(r,i,b,m),Transform.pointToLocalFrame(r,i,_,g),g.x*=t.scale.x,g.y*=t.scale.y,g.z*=t.scale.z,m.x*=t.scale.x,m.y*=t.scale.y,m.z*=t.scale.z,g.vsub(m,p),p.normalize();const M=m.distanceSquared(g);t.tree.rayQuery(this,u,h);for(let l=0,u=h.length;!this.result.shouldStop&&l!==u;l++){const u=h[l];t.getNormal(u,c),t.getVertex(x[3*u],J),J.vsub(m,d);const g=p.dot(c),b=c.dot(d)/g;if(b<0)continue;p.scale(b,Q),Q.vadd(m,Q),t.getVertex(x[3*u+1],$),t.getVertex(x[3*u+2],ee);const _=Q.distanceSquared(m);!Ray.pointInTriangle(Q,$,J,ee)&&!Ray.pointInTriangle(Q,J,$,ee)||_>M||(Transform.vectorToWorldFrame(i,c,v),Transform.pointToWorldFrame(r,i,Q,y),this.reportIntersection(v,y,o,a,u))}h.length=0}reportIntersection(t,i,r,a,o){const l=this.from,c=this.to,h=l.distanceTo(i),u=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(u.hitFaceIndex=void 0!==o?o:-1,this.mode){case Ray.ALL:this.hasHit=!0,u.set(l,c,t,i,r,a,h),u.hasHit=!0,this.callback(u);break;case Ray.CLOSEST:(h<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(l,c,t,i,r,a,h));break;case Ray.ANY:this.hasHit=!0,u.hasHit=!0,u.set(l,c,t,i,r,a,h),u.shouldStop=!0}}static pointInTriangle(t,i,r,a){a.vsub(i,ye),r.vsub(i,q),t.vsub(i,Y);const o=ye.dot(ye),l=ye.dot(q),c=ye.dot(Y),h=q.dot(q),u=q.dot(Y);let d,p;return(d=h*c-l*u)>=0&&(p=o*u-l*c)>=0&&d+p<o*h-l*l}}Ray.CLOSEST=1,Ray.ANY=2,Ray.ALL=4;const j=new AABB,X=[],q=new Vec3,Y=new Vec3,K=new Vec3,Z=new c,Q=new Vec3,J=new Vec3,$=new Vec3,ee=new Vec3;new Vec3,new RaycastResult;const te={faceList:[0]},ie=new Vec3,ne=new Ray,re=[],se=new Vec3,ae=new Vec3,oe=new Vec3;new Vec3,new Vec3;const le=new Vec3,ce=new Vec3,he=new Vec3,ue=new Vec3,de=new Vec3,pe=new Vec3,me=new Vec3;new AABB;const fe=[],ge=new Transform,ye=new Vec3,ve=new Vec3;class Utils{static defaults(t,i){void 0===t&&(t={});for(let r in i)r in t||(t[r]=i[r]);return t}}class Constraint{constructor(t,i,r){void 0===r&&(r={}),r=Utils.defaults(r,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=i,this.id=Constraint.idCounter++,this.collideConnected=r.collideConnected,r.wakeUpBodies&&(t&&t.wakeUp(),i&&i.wakeUp())}update(){throw new Error("method update() not implmemented in this Constraint subclass!")}enable(){const t=this.equations;for(let i=0;i<t.length;i++)t[i].enabled=!0}disable(){const t=this.equations;for(let i=0;i<t.length;i++)t[i].enabled=!1}}Constraint.idCounter=0;class JacobianElement{constructor(){this.spatial=new Vec3,this.rotational=new Vec3}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,i){return t.dot(this.spatial)+i.dot(this.rotational)}}class Equation{constructor(t,i,r,a){void 0===r&&(r=-1e6),void 0===a&&(a=1e6),this.id=Equation.idCounter++,this.minForce=r,this.maxForce=a,this.bi=t,this.bj=i,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new JacobianElement,this.jacobianElementB=new JacobianElement,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,i,r){const a=i,o=t,l=r;this.a=4/(l*(1+4*a)),this.b=4*a/(1+4*a),this.eps=4/(l*l*o*(1+4*a))}computeB(t,i,r){const a=this.computeGW();return-this.computeGq()*t-a*i-this.computeGiMf()*r}computeGq(){const t=this.jacobianElementA,i=this.jacobianElementB,r=this.bi,a=this.bj,o=r.position,l=a.position;return t.spatial.dot(o)+i.spatial.dot(l)}computeGW(){const t=this.jacobianElementA,i=this.jacobianElementB,r=this.bi,a=this.bj,o=r.velocity,l=a.velocity,c=r.angularVelocity,h=a.angularVelocity;return t.multiplyVectors(o,c)+i.multiplyVectors(l,h)}computeGWlambda(){const t=this.jacobianElementA,i=this.jacobianElementB,r=this.bi,a=this.bj,o=r.vlambda,l=a.vlambda,c=r.wlambda,h=a.wlambda;return t.multiplyVectors(o,c)+i.multiplyVectors(l,h)}computeGiMf(){const t=this.jacobianElementA,i=this.jacobianElementB,r=this.bi,a=this.bj,o=r.force,l=r.torque,c=a.force,h=a.torque,u=r.invMassSolve,d=a.invMassSolve;return o.scale(u,xe),c.scale(d,be),r.invInertiaWorldSolve.vmult(l,_e),a.invInertiaWorldSolve.vmult(h,Se),t.multiplyVectors(xe,_e)+i.multiplyVectors(be,Se)}computeGiMGt(){const t=this.jacobianElementA,i=this.jacobianElementB,r=this.bi,a=this.bj,o=r.invMassSolve,l=a.invMassSolve,c=r.invInertiaWorldSolve,h=a.invInertiaWorldSolve;let u=o+l;return c.vmult(t.rotational,Me),u+=Me.dot(t.rotational),h.vmult(i.rotational,Me),u+=Me.dot(i.rotational),u}addToWlambda(t){const i=this.jacobianElementA,r=this.jacobianElementB,a=this.bi,o=this.bj,l=we;a.vlambda.addScaledVector(a.invMassSolve*t,i.spatial,a.vlambda),o.vlambda.addScaledVector(o.invMassSolve*t,r.spatial,o.vlambda),a.invInertiaWorldSolve.vmult(i.rotational,l),a.wlambda.addScaledVector(t,l,a.wlambda),o.invInertiaWorldSolve.vmult(r.rotational,l),o.wlambda.addScaledVector(t,l,o.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}Equation.idCounter=0;const xe=new Vec3,be=new Vec3,_e=new Vec3,Se=new Vec3,Me=new Vec3,we=new Vec3;class ContactEquation extends Equation{constructor(t,i,r){void 0===r&&(r=1e6),super(t,i,0,r),this.restitution=0,this.ri=new Vec3,this.rj=new Vec3,this.ni=new Vec3}computeB(t){const i=this.a,r=this.b,a=this.bi,o=this.bj,l=this.ri,c=this.rj,h=Ee,u=Te,d=a.velocity,p=a.angularVelocity;a.force,a.torque;const m=o.velocity,g=o.angularVelocity;o.force,o.torque;const y=Ae,v=this.jacobianElementA,x=this.jacobianElementB,b=this.ni;l.cross(b,h),c.cross(b,u),b.negate(v.spatial),h.negate(v.rotational),x.spatial.copy(b),x.rotational.copy(u),y.copy(o.position),y.vadd(c,y),y.vsub(a.position,y),y.vsub(l,y);const _=b.dot(y),S=this.restitution+1;return-_*i-(S*m.dot(b)-S*d.dot(b)+g.dot(u)-p.dot(h))*r-t*this.computeGiMf()}getImpactVelocityAlongNormal(){const t=Ce,i=Pe,r=Re,a=Ie,o=De;return this.bi.position.vadd(this.ri,r),this.bj.position.vadd(this.rj,a),this.bi.getVelocityAtWorldPoint(r,t),this.bj.getVelocityAtWorldPoint(a,i),t.vsub(i,o),this.ni.dot(o)}}const Ee=new Vec3,Te=new Vec3,Ae=new Vec3,Ce=new Vec3,Pe=new Vec3,Re=new Vec3,Ie=new Vec3,De=new Vec3;class PointToPointConstraint extends Constraint{constructor(t,i,r,a,o){void 0===i&&(i=new Vec3),void 0===a&&(a=new Vec3),void 0===o&&(o=1e6),super(t,r),this.pivotA=i.clone(),this.pivotB=a.clone();const l=this.equationX=new ContactEquation(t,r),c=this.equationY=new ContactEquation(t,r),h=this.equationZ=new ContactEquation(t,r);this.equations.push(l,c,h),l.minForce=c.minForce=h.minForce=-o,l.maxForce=c.maxForce=h.maxForce=o,l.ni.set(1,0,0),c.ni.set(0,1,0),h.ni.set(0,0,1)}update(){const t=this.bodyA,i=this.bodyB,r=this.equationX,a=this.equationY,o=this.equationZ;t.quaternion.vmult(this.pivotA,r.ri),i.quaternion.vmult(this.pivotB,r.rj),a.ri.copy(r.ri),a.rj.copy(r.rj),o.ri.copy(r.ri),o.rj.copy(r.rj)}}new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3;class FrictionEquation extends Equation{constructor(t,i,r){super(t,i,-r,r),this.ri=new Vec3,this.rj=new Vec3,this.t=new Vec3}computeB(t){this.a;const i=this.b;this.bi,this.bj;const r=this.ri,a=this.rj,o=Le,l=Ne,c=this.t;r.cross(c,o),a.cross(c,l);const h=this.jacobianElementA,u=this.jacobianElementB;return c.negate(h.spatial),o.negate(h.rotational),u.spatial.copy(c),u.rotational.copy(l),-this.computeGW()*i-t*this.computeGiMf()}}const Le=new Vec3,Ne=new Vec3;class ContactMaterial{constructor(t,i,r){r=Utils.defaults(r,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=ContactMaterial.idCounter++,this.materials=[t,i],this.friction=r.friction,this.restitution=r.restitution,this.contactEquationStiffness=r.contactEquationStiffness,this.contactEquationRelaxation=r.contactEquationRelaxation,this.frictionEquationStiffness=r.frictionEquationStiffness,this.frictionEquationRelaxation=r.frictionEquationRelaxation}}ContactMaterial.idCounter=0;class Material{constructor(t){void 0===t&&(t={});let i="";"string"==typeof t&&(i=t,t={}),this.name=i,this.id=Material.idCounter++,this.friction=void 0!==t.friction?t.friction:-1,this.restitution=void 0!==t.restitution?t.restitution:-1}}Material.idCounter=0,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Ray,new Vec3,new Vec3,new Vec3,new Vec3(1,0,0),new Vec3(0,1,0),new Vec3(0,0,1),new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3;class Sphere extends Shape{constructor(t){if(super({type:Shape.types.SPHERE}),this.radius=void 0!==t?t:1,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}calculateLocalInertia(t,i){void 0===i&&(i=new Vec3);const r=2*t*this.radius*this.radius/5;return i.x=r,i.y=r,i.z=r,i}volume(){return 4*Math.PI*Math.pow(this.radius,3)/3}updateBoundingSphereRadius(){this.boundingSphereRadius=this.radius}calculateWorldAABB(t,i,r,a){const o=this.radius,l=["x","y","z"];for(let i=0;i<l.length;i++){const c=l[i];r[c]=t[c]-o,a[c]=t[c]+o}}}new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3;class Cylinder extends ConvexPolyhedron{constructor(t,i,r,a){if(void 0===t&&(t=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=8),t<0)throw new Error("The cylinder radiusTop cannot be negative.");if(i<0)throw new Error("The cylinder radiusBottom cannot be negative.");const o=a,l=[],c=[],h=[],u=[],d=[],p=Math.cos,m=Math.sin;l.push(new Vec3(-i*m(0),.5*-r,i*p(0))),u.push(0),l.push(new Vec3(-t*m(0),.5*r,t*p(0))),d.push(1);for(let a=0;a<o;a++){const g=2*Math.PI/o*(a+1),y=2*Math.PI/o*(a+.5);a<o-1?(l.push(new Vec3(-i*m(g),.5*-r,i*p(g))),u.push(2*a+2),l.push(new Vec3(-t*m(g),.5*r,t*p(g))),d.push(2*a+3),h.push([2*a,2*a+1,2*a+3,2*a+2])):h.push([2*a,2*a+1,1,0]),(o%2==1||a<o/2)&&c.push(new Vec3(-m(y),0,p(y)))}h.push(u),c.push(new Vec3(0,1,0));const g=[];for(let t=0;t<d.length;t++)g.push(d[d.length-t-1]);h.push(g),super({vertices:l,faces:h,axes:c}),this.type=Shape.types.CYLINDER,this.radiusTop=t,this.radiusBottom=i,this.height=r,this.numSegments=a}}class Plane extends Shape{constructor(){super({type:Shape.types.PLANE}),this.worldNormal=new Vec3,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const i=this.worldNormal;i.set(0,0,1),t.vmult(i,i),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,i){return void 0===i&&(i=new Vec3),i}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,i,r,a){Fe.set(0,0,1),i.vmult(Fe,Fe);const o=Number.MAX_VALUE;r.set(-o,-o,-o),a.set(o,o,o),1===Fe.x?a.x=t.x:-1===Fe.x&&(r.x=t.x),1===Fe.y?a.y=t.y:-1===Fe.y&&(r.y=t.y),1===Fe.z?a.z=t.z:-1===Fe.z&&(r.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const Fe=new Vec3;new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new AABB,new Vec3,new AABB,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new AABB,new Vec3,new Transform,new AABB;class Solver{constructor(){this.equations=[]}solve(t,i){return 0}addEquation(t){!t.enabled||t.bi.isTrigger||t.bj.isTrigger||this.equations.push(t)}removeEquation(t){const i=this.equations,r=i.indexOf(t);-1!==r&&i.splice(r,1)}removeAllEquations(){this.equations.length=0}}class GSSolver extends Solver{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,i){let r=0;const a=this.iterations,o=this.tolerance*this.tolerance,l=this.equations,c=l.length,h=i.bodies,u=h.length,d=t;let p,m,g,y,v,x;if(0!==c)for(let t=0;t!==u;t++)h[t].updateSolveMassProperties();const b=Ue,_=Be,S=Oe;b.length=c,_.length=c,S.length=c;for(let t=0;t!==c;t++){const i=l[t];S[t]=0,_[t]=i.computeB(d),b[t]=1/i.computeC()}if(0!==c){for(let t=0;t!==u;t++){const i=h[t],r=i.vlambda,a=i.wlambda;r.set(0,0,0),a.set(0,0,0)}for(r=0;r!==a;r++){y=0;for(let t=0;t!==c;t++){const i=l[t];p=_[t],m=b[t],x=S[t],v=i.computeGWlambda(),g=m*(p-v-i.eps*x),x+g<i.minForce?g=i.minForce-x:x+g>i.maxForce&&(g=i.maxForce-x),S[t]+=g,y+=g>0?g:-g,i.addToWlambda(g)}if(y*y<o)break}for(let t=0;t!==u;t++){const i=h[t],r=i.velocity,a=i.angularVelocity;i.vlambda.vmul(i.linearFactor,i.vlambda),r.vadd(i.vlambda,r),i.wlambda.vmul(i.angularFactor,i.wlambda),a.vadd(i.wlambda,a)}let t=l.length;const i=1/d;for(;t--;)l[t].multiplier=S[t]*i}return r}}const Oe=[],Ue=[],Be=[];Body.STATIC;class Pool{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let i=0;i!==t;i++)this.objects.push(i<0||arguments.length<=i?void 0:arguments[i]);return this}get(){return 0===this.objects.length?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const i=this.objects;for(;i.length>t;)i.pop();for(;i.length<t;)i.push(this.constructObject());return this}}class Vec3Pool extends Pool{constructor(){super(...arguments),this.type=Vec3}constructObject(){return new Vec3}}const ze=Shape.types.SPHERE,Ve=Shape.types.SPHERE|Shape.types.PLANE,ke=Shape.types.BOX|Shape.types.BOX,Ge=Shape.types.SPHERE|Shape.types.BOX,He=Shape.types.PLANE|Shape.types.BOX,We=Shape.types.CONVEXPOLYHEDRON,je=Shape.types.SPHERE|Shape.types.CONVEXPOLYHEDRON,Xe=Shape.types.PLANE|Shape.types.CONVEXPOLYHEDRON,qe=Shape.types.BOX|Shape.types.CONVEXPOLYHEDRON,Ye=Shape.types.SPHERE|Shape.types.HEIGHTFIELD,Ke=Shape.types.BOX|Shape.types.HEIGHTFIELD,Ze=Shape.types.CONVEXPOLYHEDRON|Shape.types.HEIGHTFIELD,Qe=Shape.types.PARTICLE|Shape.types.SPHERE,Je=Shape.types.PLANE|Shape.types.PARTICLE,$e=Shape.types.BOX|Shape.types.PARTICLE,et=Shape.types.PARTICLE|Shape.types.CONVEXPOLYHEDRON,tt=Shape.types.CYLINDER,it=Shape.types.SPHERE|Shape.types.CYLINDER,nt=Shape.types.PLANE|Shape.types.CYLINDER,rt=Shape.types.BOX|Shape.types.CYLINDER,st=Shape.types.CONVEXPOLYHEDRON|Shape.types.CYLINDER,at=Shape.types.HEIGHTFIELD|Shape.types.CYLINDER,ot=Shape.types.PARTICLE|Shape.types.CYLINDER,lt=Shape.types.SPHERE|Shape.types.TRIMESH,ct=Shape.types.PLANE|Shape.types.TRIMESH;class Narrowphase{get[ze](){return this.sphereSphere}get[Ve](){return this.spherePlane}get[ke](){return this.boxBox}get[Ge](){return this.sphereBox}get[He](){return this.planeBox}get[We](){return this.convexConvex}get[je](){return this.sphereConvex}get[Xe](){return this.planeConvex}get[qe](){return this.boxConvex}get[Ye](){return this.sphereHeightfield}get[Ke](){return this.boxHeightfield}get[Ze](){return this.convexHeightfield}get[Qe](){return this.sphereParticle}get[Je](){return this.planeParticle}get[$e](){return this.boxParticle}get[et](){return this.convexParticle}get[tt](){return this.convexConvex}get[it](){return this.sphereConvex}get[nt](){return this.planeConvex}get[rt](){return this.boxConvex}get[st](){return this.convexConvex}get[at](){return this.heightfieldCylinder}get[ot](){return this.particleCylinder}get[lt](){return this.sphereTrimesh}get[ct](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new Vec3Pool,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,i,r,a,o,l){let c;this.contactPointPool.length?(c=this.contactPointPool.pop(),c.bi=t,c.bj=i):c=new ContactEquation(t,i),c.enabled=t.collisionResponse&&i.collisionResponse&&r.collisionResponse&&a.collisionResponse;const h=this.currentContactMaterial;c.restitution=h.restitution,c.setSpookParams(h.contactEquationStiffness,h.contactEquationRelaxation,this.world.dt);const u=r.material||t.material,d=a.material||i.material;return u&&d&&u.restitution>=0&&d.restitution>=0&&(c.restitution=u.restitution*d.restitution),c.si=o||r,c.sj=l||a,c}createFrictionEquationsFromContact(t,i){const r=t.bi,a=t.bj,o=t.si,l=t.sj,c=this.world,h=this.currentContactMaterial;let u=h.friction;const d=o.material||r.material,p=l.material||a.material;if(d&&p&&d.friction>=0&&p.friction>=0&&(u=d.friction*p.friction),u>0){const o=u*(c.frictionGravity||c.gravity).length();let l=r.invMass+a.invMass;l>0&&(l=1/l);const d=this.frictionEquationPool,p=d.length?d.pop():new FrictionEquation(r,a,o*l),m=d.length?d.pop():new FrictionEquation(r,a,o*l);return p.bi=m.bi=r,p.bj=m.bj=a,p.minForce=m.minForce=-o*l,p.maxForce=m.maxForce=o*l,p.ri.copy(t.ri),p.rj.copy(t.rj),m.ri.copy(t.ri),m.rj.copy(t.rj),t.ni.tangents(p.t,m.t),p.setSpookParams(h.frictionEquationStiffness,h.frictionEquationRelaxation,c.dt),m.setSpookParams(h.frictionEquationStiffness,h.frictionEquationRelaxation,c.dt),p.enabled=m.enabled=t.enabled,i.push(p,m),!0}return!1}createFrictionFromAverage(t){let i=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(i,this.frictionResult)||1===t)return;const r=this.frictionResult[this.frictionResult.length-2],a=this.frictionResult[this.frictionResult.length-1];ht.setZero(),ut.setZero(),dt.setZero();const o=i.bi;i.bj;for(let r=0;r!==t;r++)i=this.result[this.result.length-1-r],i.bi!==o?(ht.vadd(i.ni,ht),ut.vadd(i.ri,ut),dt.vadd(i.rj,dt)):(ht.vsub(i.ni,ht),ut.vadd(i.rj,ut),dt.vadd(i.ri,dt));const l=1/t;ut.scale(l,r.ri),dt.scale(l,r.rj),a.ri.copy(r.ri),a.rj.copy(r.rj),ht.normalize(),ht.tangents(r.t,a.t)}getContacts(t,i,r,a,o,l,c){this.contactPointPool=o,this.frictionEquationPool=c,this.result=a,this.frictionResult=l;const h=ft,u=gt,d=pt,p=mt;for(let a=0,o=t.length;a!==o;a++){const o=t[a],l=i[a];let c=null;o.material&&l.material&&(c=r.getContactMaterial(o.material,l.material)||null);const m=o.type&Body.KINEMATIC&&l.type&Body.STATIC||o.type&Body.STATIC&&l.type&Body.KINEMATIC||o.type&Body.KINEMATIC&&l.type&Body.KINEMATIC;for(let t=0;t<o.shapes.length;t++){o.quaternion.mult(o.shapeOrientations[t],h),o.quaternion.vmult(o.shapeOffsets[t],d),d.vadd(o.position,d);const i=o.shapes[t];for(let t=0;t<l.shapes.length;t++){l.quaternion.mult(l.shapeOrientations[t],u),l.quaternion.vmult(l.shapeOffsets[t],p),p.vadd(l.position,p);const a=l.shapes[t];if(!(i.collisionFilterMask&a.collisionFilterGroup&&a.collisionFilterMask&i.collisionFilterGroup))continue;if(d.distanceTo(p)>i.boundingSphereRadius+a.boundingSphereRadius)continue;let g=null;i.material&&a.material&&(g=r.getContactMaterial(i.material,a.material)||null),this.currentContactMaterial=g||c||r.defaultContactMaterial;const y=this[i.type|a.type];if(y){let t=!1;t=i.type<a.type?y.call(this,i,a,d,p,h,u,o,l,i,a,m):y.call(this,a,i,p,d,u,h,l,o,i,a,m),t&&m&&(r.shapeOverlapKeeper.set(i.id,a.id),r.bodyOverlapKeeper.set(o.id,l.id))}}}}}sphereSphere(t,i,r,a,o,l,c,h,u,d,p){if(p)return r.distanceSquared(a)<(t.radius+i.radius)**2;const m=this.createContactEquation(c,h,t,i,u,d);a.vsub(r,m.ni),m.ni.normalize(),m.ri.copy(m.ni),m.rj.copy(m.ni),m.ri.scale(t.radius,m.ri),m.rj.scale(-i.radius,m.rj),m.ri.vadd(r,m.ri),m.ri.vsub(c.position,m.ri),m.rj.vadd(a,m.rj),m.rj.vsub(h.position,m.rj),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}spherePlane(t,i,r,a,o,l,c,h,u,d,p){const m=this.createContactEquation(c,h,t,i,u,d);if(m.ni.set(0,0,1),l.vmult(m.ni,m.ni),m.ni.negate(m.ni),m.ni.normalize(),m.ni.scale(t.radius,m.ri),r.vsub(a,Ft),m.ni.scale(m.ni.dot(Ft),Ot),Ft.vsub(Ot,m.rj),-Ft.dot(m.ni)<=t.radius){if(p)return!0;const t=m.ri,i=m.rj;t.vadd(r,t),t.vsub(c.position,t),i.vadd(a,i),i.vsub(h.position,i),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}boxBox(t,i,r,a,o,l,c,h,u,d,p){return t.convexPolyhedronRepresentation.material=t.material,i.convexPolyhedronRepresentation.material=i.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i.convexPolyhedronRepresentation,r,a,o,l,c,h,t,i,p)}sphereBox(t,i,r,a,o,l,c,h,u,d,p){const m=this.v3pool,g=Wt;r.vsub(a,Vt),i.getSideNormals(g,l);const y=t.radius;let v=!1;const x=Xt,b=qt,_=Yt;let S=null,M=0,w=0,E=0,T=null;for(let t=0,i=g.length;t!==i&&!1===v;t++){const i=kt;i.copy(g[t]);const r=i.length();i.normalize();const a=Vt.dot(i);if(a<r+y&&a>0){const o=Gt,l=Ht;o.copy(g[(t+1)%3]),l.copy(g[(t+2)%3]);const c=o.length(),h=l.length();o.normalize(),l.normalize();const u=Vt.dot(o),d=Vt.dot(l);if(u<c&&u>-c&&d<h&&d>-h){const t=Math.abs(a-r-y);if((null===T||t<T)&&(T=t,w=u,E=d,S=r,x.copy(i),b.copy(o),_.copy(l),M++,p))return!0}}}if(M){v=!0;const o=this.createContactEquation(c,h,t,i,u,d);x.scale(-y,o.ri),o.ni.copy(x),o.ni.negate(o.ni),x.scale(S,x),b.scale(w,b),x.vadd(b,x),_.scale(E,_),x.vadd(_,o.rj),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.vadd(a,o.rj),o.rj.vsub(h.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}let A=m.get();const C=jt;for(let o=0;2!==o&&!v;o++)for(let l=0;2!==l&&!v;l++)for(let m=0;2!==m&&!v;m++)if(A.set(0,0,0),o?A.vadd(g[0],A):A.vsub(g[0],A),l?A.vadd(g[1],A):A.vsub(g[1],A),m?A.vadd(g[2],A):A.vsub(g[2],A),a.vadd(A,C),C.vsub(r,C),C.lengthSquared()<y*y){if(p)return!0;v=!0;const o=this.createContactEquation(c,h,t,i,u,d);o.ri.copy(C),o.ri.normalize(),o.ni.copy(o.ri),o.ri.scale(y,o.ri),o.rj.copy(A),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.vadd(a,o.rj),o.rj.vsub(h.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}m.release(A),A=null;const P=m.get(),R=m.get(),I=m.get(),D=m.get(),L=m.get(),N=g.length;for(let o=0;o!==N&&!v;o++)for(let l=0;l!==N&&!v;l++)if(o%3!=l%3){g[l].cross(g[o],P),P.normalize(),g[o].vadd(g[l],R),I.copy(r),I.vsub(R,I),I.vsub(a,I);const m=I.dot(P);P.scale(m,D);let x=0;for(;x===o%3||x===l%3;)x++;L.copy(r),L.vsub(D,L),L.vsub(R,L),L.vsub(a,L);const b=Math.abs(m),_=L.length();if(b<g[x].length()&&_<y){if(p)return!0;v=!0;const o=this.createContactEquation(c,h,t,i,u,d);R.vadd(D,o.rj),o.rj.copy(o.rj),L.negate(o.ni),o.ni.normalize(),o.ri.copy(o.rj),o.ri.vadd(a,o.ri),o.ri.vsub(r,o.ri),o.ri.normalize(),o.ri.scale(y,o.ri),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.vadd(a,o.rj),o.rj.vsub(h.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}m.release(P,R,I,D,L)}planeBox(t,i,r,a,o,l,c,h,u,d,p){return i.convexPolyhedronRepresentation.material=i.material,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,i.convexPolyhedronRepresentation.id=i.id,this.planeConvex(t,i.convexPolyhedronRepresentation,r,a,o,l,c,h,t,i,p)}convexConvex(t,i,r,a,o,l,c,h,u,d,p,m,g){const y=ci;if(!(r.distanceTo(a)>t.boundingSphereRadius+i.boundingSphereRadius)&&t.findSeparatingAxis(i,r,o,a,l,y,m,g)){const m=[],g=hi;t.clipAgainstHull(r,o,i,a,l,y,-100,100,m);let v=0;for(let o=0;o!==m.length;o++){if(p)return!0;const l=this.createContactEquation(c,h,t,i,u,d),x=l.ri,b=l.rj;y.negate(l.ni),m[o].normal.negate(g),g.scale(m[o].depth,g),m[o].point.vadd(g,x),b.copy(m[o].point),x.vsub(r,x),b.vsub(a,b),x.vadd(r,x),x.vsub(c.position,x),b.vadd(a,b),b.vsub(h.position,b),this.result.push(l),v++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(l,this.frictionResult)}this.enableFrictionReduction&&v&&this.createFrictionFromAverage(v)}}sphereConvex(t,i,r,a,o,l,c,h,u,d,p){const m=this.v3pool;r.vsub(a,Kt);const g=i.faceNormals,y=i.faces,v=i.vertices,x=t.radius;let b=!1;for(let o=0;o!==v.length;o++){const m=v[o],g=$t;l.vmult(m,g),a.vadd(g,g);const y=Jt;if(g.vsub(r,y),y.lengthSquared()<x*x){if(p)return!0;b=!0;const o=this.createContactEquation(c,h,t,i,u,d);return o.ri.copy(y),o.ri.normalize(),o.ni.copy(o.ri),o.ri.scale(x,o.ri),g.vsub(a,o.rj),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.vadd(a,o.rj),o.rj.vsub(h.position,o.rj),this.result.push(o),void this.createFrictionEquationsFromContact(o,this.frictionResult)}}for(let o=0,_=y.length;o!==_&&!1===b;o++){const _=g[o],S=y[o],M=ei;l.vmult(_,M);const w=ti;l.vmult(v[S[0]],w),w.vadd(a,w);const E=ii;M.scale(-x,E),r.vadd(E,E);const T=ni;E.vsub(w,T);const A=T.dot(M),C=ri;if(r.vsub(w,C),A<0&&C.dot(M)>0){const o=[];for(let t=0,i=S.length;t!==i;t++){const i=m.get();l.vmult(v[S[t]],i),a.vadd(i,i),o.push(i)}if(pointInPolygon(o,M,r)){if(p)return!0;b=!0;const l=this.createContactEquation(c,h,t,i,u,d);M.scale(-x,l.ri),M.negate(l.ni);const g=m.get();M.scale(-A,g);const y=m.get();M.scale(-x,y),r.vsub(a,l.rj),l.rj.vadd(y,l.rj),l.rj.vadd(g,l.rj),l.rj.vadd(a,l.rj),l.rj.vsub(h.position,l.rj),l.ri.vadd(r,l.ri),l.ri.vsub(c.position,l.ri),m.release(g),m.release(y),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult);for(let t=0,i=o.length;t!==i;t++)m.release(o[t]);return}for(let g=0;g!==S.length;g++){const y=m.get(),b=m.get();l.vmult(v[S[(g+1)%S.length]],y),l.vmult(v[S[(g+2)%S.length]],b),a.vadd(y,y),a.vadd(b,b);const _=Zt;b.vsub(y,_);const M=Qt;_.unit(M);const w=m.get(),E=m.get();r.vsub(y,E);const T=E.dot(M);M.scale(T,w),w.vadd(y,w);const A=m.get();if(w.vsub(r,A),T>0&&T*T<_.lengthSquared()&&A.lengthSquared()<x*x){if(p)return!0;const l=this.createContactEquation(c,h,t,i,u,d);w.vsub(a,l.rj),w.vsub(r,l.ni),l.ni.normalize(),l.ni.scale(x,l.ri),l.rj.vadd(a,l.rj),l.rj.vsub(h.position,l.rj),l.ri.vadd(r,l.ri),l.ri.vsub(c.position,l.ri),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult);for(let t=0,i=o.length;t!==i;t++)m.release(o[t]);return m.release(y),m.release(b),m.release(w),m.release(A),void m.release(E)}m.release(y),m.release(b),m.release(w),m.release(A),m.release(E)}for(let t=0,i=o.length;t!==i;t++)m.release(o[t])}}}planeConvex(t,i,r,a,o,l,c,h,u,d,p){const m=si,g=ai;g.set(0,0,1),o.vmult(g,g);let y=0;const v=oi;for(let o=0;o!==i.vertices.length;o++)if(m.copy(i.vertices[o]),l.vmult(m,m),a.vadd(m,m),m.vsub(r,v),g.dot(v)<=0){if(p)return!0;const o=this.createContactEquation(c,h,t,i,u,d),l=li;g.scale(g.dot(v),l),m.vsub(l,l),l.vsub(r,o.ri),o.ni.copy(g),m.vsub(a,o.rj),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.vadd(a,o.rj),o.rj.vsub(h.position,o.rj),this.result.push(o),y++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(o,this.frictionResult)}this.enableFrictionReduction&&y&&this.createFrictionFromAverage(y)}boxConvex(t,i,r,a,o,l,c,h,u,d,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i,r,a,o,l,c,h,t,i,p)}sphereHeightfield(t,i,r,a,o,l,c,h,u,d,p){const m=i.data,g=t.radius,y=i.elementSize,v=wi,x=Mi;Transform.pointToLocalFrame(a,l,r,x);let b=Math.floor((x.x-g)/y)-1,_=Math.ceil((x.x+g)/y)+1,S=Math.floor((x.y-g)/y)-1,M=Math.ceil((x.y+g)/y)+1;if(_<0||M<0||b>m.length||S>m[0].length)return;b<0&&(b=0),_<0&&(_=0),S<0&&(S=0),M<0&&(M=0),b>=m.length&&(b=m.length-1),_>=m.length&&(_=m.length-1),M>=m[0].length&&(M=m[0].length-1),S>=m[0].length&&(S=m[0].length-1);const w=[];i.getRectMinMax(b,S,_,M,w);const E=w[0],T=w[1];if(x.z-g>T||x.z+g<E)return;const A=this.result;for(let u=b;u<_;u++)for(let d=S;d<M;d++){const m=A.length;let g=!1;if(i.getConvexTrianglePillar(u,d,!1),Transform.pointToWorldFrame(a,l,i.pillarOffset,v),r.distanceTo(v)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(g=this.sphereConvex(t,i.pillarConvex,r,v,o,l,c,h,t,i,p)),p&&g)return!0;if(i.getConvexTrianglePillar(u,d,!0),Transform.pointToWorldFrame(a,l,i.pillarOffset,v),r.distanceTo(v)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(g=this.sphereConvex(t,i.pillarConvex,r,v,o,l,c,h,t,i,p)),p&&g)return!0;if(A.length-m>2)return}}boxHeightfield(t,i,r,a,o,l,c,h,u,d,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,i,r,a,o,l,c,h,t,i,p)}convexHeightfield(t,i,r,a,o,l,c,h,u,d,p){const m=i.data,g=i.elementSize,y=t.boundingSphereRadius,v=_i,x=Si,b=bi;Transform.pointToLocalFrame(a,l,r,b);let _=Math.floor((b.x-y)/g)-1,S=Math.ceil((b.x+y)/g)+1,M=Math.floor((b.y-y)/g)-1,w=Math.ceil((b.y+y)/g)+1;if(S<0||w<0||_>m.length||M>m[0].length)return;_<0&&(_=0),S<0&&(S=0),M<0&&(M=0),w<0&&(w=0),_>=m.length&&(_=m.length-1),S>=m.length&&(S=m.length-1),w>=m[0].length&&(w=m[0].length-1),M>=m[0].length&&(M=m[0].length-1);const E=[];i.getRectMinMax(_,M,S,w,E);const T=E[0],A=E[1];if(!(b.z-y>A||b.z+y<T))for(let u=_;u<S;u++)for(let d=M;d<w;d++){let m=!1;if(i.getConvexTrianglePillar(u,d,!1),Transform.pointToWorldFrame(a,l,i.pillarOffset,v),r.distanceTo(v)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(m=this.convexConvex(t,i.pillarConvex,r,v,o,l,c,h,null,null,p,x,null)),p&&m)return!0;if(i.getConvexTrianglePillar(u,d,!0),Transform.pointToWorldFrame(a,l,i.pillarOffset,v),r.distanceTo(v)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(m=this.convexConvex(t,i.pillarConvex,r,v,o,l,c,h,null,null,p,x,null)),p&&m)return!0}}sphereParticle(t,i,r,a,o,l,c,h,u,d,p){const m=mi;if(m.set(0,0,1),a.vsub(r,m),m.lengthSquared()<=t.radius*t.radius){if(p)return!0;const r=this.createContactEquation(h,c,i,t,u,d);m.normalize(),r.rj.copy(m),r.rj.scale(t.radius,r.rj),r.ni.copy(m),r.ni.negate(r.ni),r.ri.set(0,0,0),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}planeParticle(t,i,r,a,o,l,c,h,u,d,p){const m=ui;m.set(0,0,1),c.quaternion.vmult(m,m);const g=di;if(a.vsub(c.position,g),m.dot(g)<=0){if(p)return!0;const r=this.createContactEquation(h,c,i,t,u,d);r.ni.copy(m),r.ni.negate(r.ni),r.ri.set(0,0,0);const o=pi;m.scale(m.dot(a),o),a.vsub(o,o),r.rj.copy(o),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}boxParticle(t,i,r,a,o,l,c,h,u,d,p){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,i,r,a,o,l,c,h,t,i,p)}convexParticle(t,i,r,a,o,l,c,h,u,d,p){let m=-1;const g=yi,y=xi;let v=null;const x=gi;if(x.copy(a),x.vsub(r,x),o.conjugate(fi),fi.vmult(x,x),t.pointIsInside(x)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(r,o),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(o);for(let i=0,r=t.faces.length;i!==r;i++){const r=[t.worldVertices[t.faces[i][0]]],o=t.worldFaceNormals[i];a.vsub(r[0],vi);const l=-o.dot(vi);if(null===v||Math.abs(l)<Math.abs(v)){if(p)return!0;v=l,m=i,g.copy(o)}}if(-1!==m){const o=this.createContactEquation(h,c,i,t,u,d);g.scale(v,y),y.vadd(a,y),y.vsub(r,y),o.rj.copy(y),g.negate(o.ni),o.ri.set(0,0,0);const l=o.ri,p=o.rj;l.vadd(a,l),l.vsub(h.position,l),p.vadd(r,p),p.vsub(c.position,p),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}}heightfieldCylinder(t,i,r,a,o,l,c,h,u,d,p){return this.convexHeightfield(i,t,a,r,l,o,h,c,u,d,p)}particleCylinder(t,i,r,a,o,l,c,h,u,d,p){return this.convexParticle(i,t,a,r,l,o,h,c,u,d,p)}sphereTrimesh(t,i,r,a,o,l,c,h,u,d,p){const m=wt,g=Et,y=Tt,v=At,x=Ct,b=Pt,_=Lt,S=Mt,M=_t,w=Nt;Transform.pointToLocalFrame(a,l,r,x);const E=t.radius;_.lowerBound.set(x.x-E,x.y-E,x.z-E),_.upperBound.set(x.x+E,x.y+E,x.z+E),i.getTrianglesInAABB(_,w);const T=St,A=t.radius*t.radius;for(let o=0;o<w.length;o++)for(let m=0;m<3;m++)if(i.getVertex(i.indices[3*w[o]+m],T),T.vsub(x,M),M.lengthSquared()<=A){if(S.copy(T),Transform.pointToWorldFrame(a,l,S,T),T.vsub(r,M),p)return!0;let o=this.createContactEquation(c,h,t,i,u,d);o.ni.copy(M),o.ni.normalize(),o.ri.copy(o.ni),o.ri.scale(t.radius,o.ri),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),o.rj.copy(T),o.rj.vsub(h.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}for(let o=0;o<w.length;o++)for(let _=0;_<3;_++){i.getVertex(i.indices[3*w[o]+_],m),i.getVertex(i.indices[3*w[o]+(_+1)%3],g),g.vsub(m,y),x.vsub(g,b);const S=b.dot(y);x.vsub(m,b);let M=b.dot(y);if(M>0&&S<0&&(x.vsub(m,b),v.copy(y),v.normalize(),M=b.dot(v),v.scale(M,b),b.vadd(m,b),b.distanceTo(x)<t.radius)){if(p)return!0;const o=this.createContactEquation(c,h,t,i,u,d);b.vsub(x,o.ni),o.ni.normalize(),o.ni.scale(t.radius,o.ri),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),Transform.pointToWorldFrame(a,l,b,b),b.vsub(h.position,o.rj),Transform.vectorToWorldFrame(l,o.ni,o.ni),Transform.vectorToWorldFrame(l,o.ri,o.ri),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}const C=Rt,P=It,R=Dt,I=bt;for(let o=0,m=w.length;o!==m;o++){i.getTriangleVertices(w[o],C,P,R),i.getNormal(w[o],I),x.vsub(C,b);let m=b.dot(I);if(I.scale(m,b),x.vsub(b,b),m=b.distanceTo(x),Ray.pointInTriangle(b,C,P,R)&&m<t.radius){if(p)return!0;let o=this.createContactEquation(c,h,t,i,u,d);b.vsub(x,o.ni),o.ni.normalize(),o.ni.scale(t.radius,o.ri),o.ri.vadd(r,o.ri),o.ri.vsub(c.position,o.ri),Transform.pointToWorldFrame(a,l,b,b),b.vsub(h.position,o.rj),Transform.vectorToWorldFrame(l,o.ni,o.ni),Transform.vectorToWorldFrame(l,o.ri,o.ri),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}w.length=0}planeTrimesh(t,i,r,a,o,l,c,h,u,d,p){const m=new Vec3,g=yt;g.set(0,0,1),o.vmult(g,g);for(let o=0;o<i.vertices.length/3;o++){i.getVertex(o,m);const y=new Vec3;y.copy(m),Transform.pointToWorldFrame(a,l,y,m);const v=vt;if(m.vsub(r,v),g.dot(v)<=0){if(p)return!0;const r=this.createContactEquation(c,h,t,i,u,d);r.ni.copy(g);const a=xt;g.scale(v.dot(g),a),m.vsub(a,a),r.ri.copy(a),r.ri.vsub(c.position,r.ri),r.rj.copy(m),r.rj.vsub(h.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}}}const ht=new Vec3,ut=new Vec3,dt=new Vec3,pt=new Vec3,mt=new Vec3,ft=new c,gt=new c,yt=new Vec3,vt=new Vec3,xt=new Vec3,bt=new Vec3,_t=new Vec3;new Vec3;const St=new Vec3,Mt=new Vec3,wt=new Vec3,Et=new Vec3,Tt=new Vec3,At=new Vec3,Ct=new Vec3,Pt=new Vec3,Rt=new Vec3,It=new Vec3,Dt=new Vec3,Lt=new AABB,Nt=[],Ft=new Vec3,Ot=new Vec3,Ut=new Vec3,Bt=new Vec3,zt=new Vec3;function pointInPolygon(t,i,r){let a=null;const o=t.length;for(let l=0;l!==o;l++){const c=t[l],h=Ut;t[(l+1)%o].vsub(c,h);const u=Bt;h.cross(i,u);const d=zt;r.vsub(c,d);const p=u.dot(d);if(!(null===a||p>0&&!0===a||p<=0&&!1===a))return!1;null===a&&(a=p>0)}return!0}const Vt=new Vec3,kt=new Vec3,Gt=new Vec3,Ht=new Vec3,Wt=[new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3],jt=new Vec3,Xt=new Vec3,qt=new Vec3,Yt=new Vec3,Kt=new Vec3,Zt=new Vec3,Qt=new Vec3,Jt=new Vec3,$t=new Vec3,ei=new Vec3,ti=new Vec3,ii=new Vec3,ni=new Vec3,ri=new Vec3;new Vec3,new Vec3;const si=new Vec3,ai=new Vec3,oi=new Vec3,li=new Vec3,ci=new Vec3,hi=new Vec3,ui=new Vec3,di=new Vec3,pi=new Vec3,mi=new Vec3,fi=new c,gi=new Vec3;new Vec3;const yi=new Vec3,vi=new Vec3,xi=new Vec3,bi=new Vec3,_i=new Vec3,Si=[0],Mi=new Vec3,wi=new Vec3;class OverlapKeeper{constructor(){this.current=[],this.previous=[]}getKey(t,i){if(i<t){const r=i;i=t,t=r}return t<<16|i}set(t,i){const r=this.getKey(t,i),a=this.current;let o=0;for(;r>a[o];)o++;if(r!==a[o]){for(let t=a.length-1;t>=o;t--)a[t+1]=a[t];a[o]=r}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,i){const r=this.current,a=this.previous,o=r.length,l=a.length;let c=0;for(let i=0;i<o;i++){let o=!1;const l=r[i];for(;l>a[c];)c++;o=l===a[c],o||unpackAndPush(t,l)}c=0;for(let t=0;t<l;t++){let o=!1;const l=a[t];for(;l>r[c];)c++;o=r[c]===l,o||unpackAndPush(i,l)}}}function unpackAndPush(t,i){t.push((4294901760&i)>>16,65535&i)}const getKey=(t,i)=>t<i?`${t}-${i}`:`${i}-${t}`;class TupleDictionary{constructor(){this.data={keys:[]}}get(t,i){const r=getKey(t,i);return this.data[r]}set(t,i,r){const a=getKey(t,i);this.get(t,i)||this.data.keys.push(a),this.data[a]=r}delete(t,i){const r=getKey(t,i),a=this.data.keys.indexOf(r);-1!==a&&this.data.keys.splice(a,1),delete this.data[r]}reset(){const t=this.data,i=t.keys;for(;i.length>0;)delete t[i.pop()]}}class World extends EventTarget{constructor(t){void 0===t&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==t.quatNormalizeSkip?t.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==t.quatNormalizeFast&&t.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new Vec3,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new Vec3,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=void 0!==t.broadphase?t.broadphase:new NaiveBroadphase,this.bodies=[],this.hasActiveBodies=!1,this.solver=void 0!==t.solver?t.solver:new GSSolver,this.constraints=[],this.narrowphase=new Narrowphase(this),this.collisionMatrix=new ArrayCollisionMatrix,this.collisionMatrixPrevious=new ArrayCollisionMatrix,this.bodyOverlapKeeper=new OverlapKeeper,this.shapeOverlapKeeper=new OverlapKeeper,this.contactmaterials=[],this.contactMaterialTable=new TupleDictionary,this.defaultMaterial=new Material("default"),this.defaultContactMaterial=new ContactMaterial(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,i){return this.contactMaterialTable.get(t.id,i.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const i=this.constraints.indexOf(t);-1!==i&&this.constraints.splice(i,1)}rayTest(t,i,r){r instanceof RaycastResult?this.raycastClosest(t,i,{skipBackfaces:!0},r):this.raycastAll(t,i,{skipBackfaces:!0},r)}raycastAll(t,i,r,a){return void 0===r&&(r={}),r.mode=Ray.ALL,r.from=t,r.to=i,r.callback=a,Ei.intersectWorld(this,r)}raycastAny(t,i,r,a){return void 0===r&&(r={}),r.mode=Ray.ANY,r.from=t,r.to=i,r.result=a,Ei.intersectWorld(this,r)}raycastClosest(t,i,r,a){return void 0===r&&(r={}),r.mode=Ray.CLOSEST,r.from=t,r.to=i,r.result=a,Ei.intersectWorld(this,r)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof Body&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const i=this.bodies.length-1,r=this.bodies,a=r.indexOf(t);if(-1!==a){r.splice(a,1);for(let t=0;t!==r.length;t++)r[t].index=t;this.collisionMatrix.setNumObjects(i),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const i=this.bodies;for(let r=0;r<i.length;r++){const a=i[r].shapes;for(let i=0;i<a.length;i++){const r=a[i];if(r.id===t)return r}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const i=this.contactmaterials.indexOf(t);-1!==i&&(this.contactmaterials.splice(i,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,i){void 0===t&&(t=1/60),void 0===i&&(i=10);const r=Ti.now()/1e3;if(this.lastCallTime){const a=r-this.lastCallTime;this.step(t,a,i)}else this.step(t,void 0,i);this.lastCallTime=r}step(t,i,r){if(void 0===r&&(r=10),void 0===i)this.internalStep(t),this.time+=t;else{this.accumulator+=i;const a=Ti.now();let o=0;for(;this.accumulator>=t&&o<r&&(this.internalStep(t),this.accumulator-=t,o++,!(Ti.now()-a>1e3*t)););this.accumulator=this.accumulator%t;const l=this.accumulator/t;for(let t=0;t!==this.bodies.length;t++){const i=this.bodies[t];i.previousPosition.lerp(i.position,l,i.interpolatedPosition),i.previousQuaternion.slerp(i.quaternion,l,i.interpolatedQuaternion),i.previousQuaternion.normalize()}this.time+=i}}internalStep(t){this.dt=t;const i=this.contacts,r=Di,a=Li,o=this.bodies.length,l=this.bodies,c=this.solver,h=this.gravity,u=this.doProfiling,d=this.profile,p=Body.DYNAMIC;let m=-1/0;const g=this.constraints,y=Ii;h.length();const v=h.x,x=h.y,b=h.z;let _=0;for(u&&(m=Ti.now()),_=0;_!==o;_++){const t=l[_];if(t.type===p){const i=t.force,r=t.mass;i.x+=r*v,i.y+=r*x,i.z+=r*b}}for(let t=0,i=this.subsystems.length;t!==i;t++)this.subsystems[t].update();u&&(m=Ti.now()),r.length=0,a.length=0,this.broadphase.collisionPairs(this,r,a),u&&(d.broadphase=Ti.now()-m);let S=g.length;for(_=0;_!==S;_++){const t=g[_];if(!t.collideConnected)for(let i=r.length-1;i>=0;i-=1)(t.bodyA===r[i]&&t.bodyB===a[i]||t.bodyB===r[i]&&t.bodyA===a[i])&&(r.splice(i,1),a.splice(i,1))}this.collisionMatrixTick(),u&&(m=Ti.now());const M=Ri,w=i.length;for(_=0;_!==w;_++)M.push(i[_]);i.length=0;const E=this.frictionEquations.length;for(_=0;_!==E;_++)y.push(this.frictionEquations[_]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(r,a,this,i,M,this.frictionEquations,y),u&&(d.narrowphase=Ti.now()-m),u&&(m=Ti.now()),_=0;_<this.frictionEquations.length;_++)c.addEquation(this.frictionEquations[_]);const T=i.length;for(let t=0;t!==T;t++){const r=i[t],a=r.bi,o=r.bj,l=r.si,h=r.sj;let u;u=a.material&&o.material&&this.getContactMaterial(a.material,o.material)||this.defaultContactMaterial,u.friction,a.material&&o.material&&(a.material.friction>=0&&o.material.friction>=0&&(a.material.friction,o.material.friction),a.material.restitution>=0&&o.material.restitution>=0&&(r.restitution=a.material.restitution*o.material.restitution)),c.addEquation(r),a.allowSleep&&a.type===Body.DYNAMIC&&a.sleepState===Body.SLEEPING&&o.sleepState===Body.AWAKE&&o.type!==Body.STATIC&&o.velocity.lengthSquared()+o.angularVelocity.lengthSquared()>=2*o.sleepSpeedLimit**2&&(a.wakeUpAfterNarrowphase=!0),o.allowSleep&&o.type===Body.DYNAMIC&&o.sleepState===Body.SLEEPING&&a.sleepState===Body.AWAKE&&a.type!==Body.STATIC&&a.velocity.lengthSquared()+a.angularVelocity.lengthSquared()>=2*a.sleepSpeedLimit**2&&(o.wakeUpAfterNarrowphase=!0),this.collisionMatrix.set(a,o,!0),this.collisionMatrixPrevious.get(a,o)||(Pi.body=o,Pi.contact=r,a.dispatchEvent(Pi),Pi.body=a,o.dispatchEvent(Pi)),this.bodyOverlapKeeper.set(a.id,o.id),this.shapeOverlapKeeper.set(l.id,h.id)}for(this.emitContactEvents(),u&&(d.makeContactConstraints=Ti.now()-m,m=Ti.now()),_=0;_!==o;_++){const t=l[_];t.wakeUpAfterNarrowphase&&(t.wakeUp(),t.wakeUpAfterNarrowphase=!1)}for(S=g.length,_=0;_!==S;_++){const t=g[_];t.update();for(let i=0,r=t.equations.length;i!==r;i++){const r=t.equations[i];c.addEquation(r)}}c.solve(t,this),u&&(d.solve=Ti.now()-m),c.removeAllEquations();const A=Math.pow;for(_=0;_!==o;_++){const i=l[_];if(i.type&p){const r=A(1-i.linearDamping,t),a=i.velocity;a.scale(r,a);const o=i.angularVelocity;if(o){const r=A(1-i.angularDamping,t);o.scale(r,o)}}}this.dispatchEvent(Ci),u&&(m=Ti.now());const C=this.stepnumber%(this.quatNormalizeSkip+1)==0,P=this.quatNormalizeFast;for(_=0;_!==o;_++)l[_].integrate(t,C,P);this.clearForces(),this.broadphase.dirty=!0,u&&(d.integrate=Ti.now()-m),this.stepnumber+=1,this.dispatchEvent(Ai);let R=!0;if(this.allowSleep)for(R=!1,_=0;_!==o;_++){const t=l[_];t.sleepTick(this.time),t.sleepState!==Body.SLEEPING&&(R=!0)}this.hasActiveBodies=R}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),i=this.hasAnyEventListener("endContact");if((t||i)&&this.bodyOverlapKeeper.getDiff(Ni,Fi),t){for(let t=0,i=Ni.length;t<i;t+=2)Oi.bodyA=this.getBodyById(Ni[t]),Oi.bodyB=this.getBodyById(Ni[t+1]),this.dispatchEvent(Oi);Oi.bodyA=Oi.bodyB=null}if(i){for(let t=0,i=Fi.length;t<i;t+=2)Ui.bodyA=this.getBodyById(Fi[t]),Ui.bodyB=this.getBodyById(Fi[t+1]),this.dispatchEvent(Ui);Ui.bodyA=Ui.bodyB=null}Ni.length=Fi.length=0;const r=this.hasAnyEventListener("beginShapeContact"),a=this.hasAnyEventListener("endShapeContact");if((r||a)&&this.shapeOverlapKeeper.getDiff(Ni,Fi),r){for(let t=0,i=Ni.length;t<i;t+=2){const i=this.getShapeById(Ni[t]),r=this.getShapeById(Ni[t+1]);Bi.shapeA=i,Bi.shapeB=r,i&&(Bi.bodyA=i.body),r&&(Bi.bodyB=r.body),this.dispatchEvent(Bi)}Bi.bodyA=Bi.bodyB=Bi.shapeA=Bi.shapeB=null}if(a){for(let t=0,i=Fi.length;t<i;t+=2){const i=this.getShapeById(Fi[t]),r=this.getShapeById(Fi[t+1]);zi.shapeA=i,zi.shapeB=r,i&&(zi.bodyA=i.body),r&&(zi.bodyB=r.body),this.dispatchEvent(zi)}zi.bodyA=zi.bodyB=zi.shapeA=zi.shapeB=null}}clearForces(){const t=this.bodies,i=t.length;for(let r=0;r!==i;r++){const i=t[r];i.force,i.torque,i.force.set(0,0,0),i.torque.set(0,0,0)}}}new AABB;const Ei=new Ray,Ti=globalThis.performance||{};if(!Ti.now){let t=Date.now();Ti.timing&&Ti.timing.navigationStart&&(t=Ti.timing.navigationStart),Ti.now=()=>Date.now()-t}new Vec3;const Ai={type:"postStep"},Ci={type:"preStep"},Pi={type:Body.COLLIDE_EVENT_NAME,body:null,contact:null},Ri=[],Ii=[],Di=[],Li=[],Ni=[],Fi=[],Oi={type:"beginContact",bodyA:null,bodyB:null},Ui={type:"endContact",bodyA:null,bodyB:null},Bi={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},zi={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Vi={d2:{type:"Cylinder",radiusTop:1,radiusBottom:1,height:.1,numSegments:8,skipLastFaceIndex:!0,faceValues:[0,0,0,0,0,0,0,0,2,1]},d4:{type:"ConvexPolyhedron",vertices:[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],faces:[[1,0,2,1],[0,1,3,2],[0,3,2,3],[1,2,3,4]],skipLastFaceIndex:!0,faceValues:[2,4,3,1]},d6:{type:"ConvexPolyhedron",vertices:[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],faces:[[0,3,2,1,1],[1,2,6,5,2],[0,1,5,4,3],[3,7,6,2,4],[0,4,7,3,5],[4,5,6,7,6]],skipLastFaceIndex:!0,faceValues:[3,5,1,6,2,4]},d8:{type:"ConvexPolyhedron",vertices:[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],faces:[[0,2,4,1],[0,4,3,2],[0,3,5,3],[0,5,2,4],[1,3,4,5],[1,4,2,6],[1,2,5,7],[1,5,3,8]],skipLastFaceIndex:!0,faceValues:[5,3,1,7,2,8,6,4]},d10:{type:"ConvexPolyhedron",vertices:[[1,0,-.105],[.8090169943749475,.5877852522924731,.105],[.30901699437494745,.9510565162951535,-.105],[-.30901699437494734,.9510565162951536,.105],[-.8090169943749473,.5877852522924732,-.105],[-1,12246467991473532e-32,.105],[-.8090169943749476,-.587785252292473,-.105],[-.30901699437494756,-.9510565162951535,.105],[.30901699437494723,-.9510565162951536,-.105],[.8090169943749473,-.5877852522924734,.105],[0,0,-1],[0,0,1]],faces:[[5,6,7,11,0],[4,3,2,10,1],[1,2,3,11,2],[0,9,8,10,3],[7,8,9,11,4],[8,7,6,10,5],[9,0,1,11,6],[2,1,0,10,7],[3,4,5,11,8],[6,5,4,10,9]],skipLastFaceIndex:!0,faceValues:[1,2,5,10,7,4,3,8,9,6]},d12:{type:"ConvexPolyhedron",vertices:[[0,.6180339887498948,1.618033988749895],[0,.6180339887498948,-1.618033988749895],[0,-.6180339887498948,1.618033988749895],[0,-.6180339887498948,-1.618033988749895],[1.618033988749895,0,.6180339887498948],[1.618033988749895,0,-.6180339887498948],[-1.618033988749895,0,.6180339887498948],[-1.618033988749895,0,-.6180339887498948],[.6180339887498948,1.618033988749895,0],[.6180339887498948,-1.618033988749895,0],[-.6180339887498948,1.618033988749895,0],[-.6180339887498948,-1.618033988749895,0],[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]],faces:[[2,14,4,12,0,1],[15,9,11,19,3,2],[16,10,17,7,6,3],[6,7,19,11,18,4],[6,18,2,0,16,5],[18,11,9,14,2,6],[1,17,10,8,13,7],[1,13,5,15,3,8],[13,8,12,4,5,9],[5,4,14,9,15,10],[0,12,8,10,16,11],[3,19,7,17,1,12]],skipLastFaceIndex:!0,faceValues:[7,5,3,11,12,9,4,1,2,10,8,6]},d14:{type:"ConvexPolyhedron",vertices:[[-.005093127489089966,1.177548885345459,.002782404189929366],[-.9908595681190491,.061759304255247116,.22585006058216095],[-.9924551844596863,-.06095181778073311,-.23028047382831573],[-.7984917163848877,.061637163162231445,-.6402497291564941],[-.4453684985637665,-.06121010705828667,-.9239609241485596],[-.00504341721534729,.06129471957683563,-1.0241185426712036],[.437289297580719,-.06156954541802406,-.9219886660575867],[.7920035719871521,.06098949536681175,-.6366959810256958],[.9908595681190491,-.06175928935408592,-.22585000097751617],[.9924551844596863,.0609518401324749,.23028059303760529],[.7984917163848877,-.061637137085199356,.6402497291564941],[.4453684985637665,.061210136860609055,.9239609241485596],[.00504341721534729,-.06129469349980354,1.0241185426712036],[-.4372892379760742,.061569564044475555,.9219887852668762],[-.7920035719871521,-.060989461839199066,.6366960406303406],[.005093127489089966,-1.177548885345459,-.002782404189929366]],faces:[[0,3,2,1],[1,14,13,0],[12,11,0,13],[10,9,0,11],[8,7,0,9],[6,5,0,7],[4,3,0,5],[10,11,12,15],[14,15,12,13],[2,15,14,1],[2,3,4,15],[4,5,6,15],[6,7,8,15],[8,9,10,15]],skipLastFaceIndex:!1,faceValues:[1,2,3,4,5,6,7,8,9,10,11,12,13,14]},d16:{type:"ConvexPolyhedron",vertices:[[-1.0301814079284668,.002833150327205658,1.0244150161743164],[-.0018179342150688171,-.006610371172428131,-1.4427297115325928],[1.4587815999984741,.0028328225016593933,-.006545569747686386],[1.031739592552185,.0028328821063041687,-1.0375059843063354],[-1.4572231769561768,.0028332099318504333,-.006545361131429672],[-1.0301814079284668,.002833150327205658,-1.0375059843063354],[1.031739592552185,.0028328821063041687,1.0244150161743164],[-.0018179342150688171,-.006610371172428131,1.4732751846313477],[.0007793977856636047,1.4608354568481445,-.006545450538396835],[-.0018181726336479187,-1.4646127223968506,.015272742137312889]],faces:[[5,8,1],[5,4,8],[4,0,8],[0,7,8],[8,7,6],[8,6,2],[2,3,8],[3,1,8],[3,9,1],[2,9,3],[6,9,2],[6,7,9],[0,9,7],[4,9,0],[5,9,4],[5,1,9]],skipLastFaceIndex:!1,faceValues:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},d20:{type:"ConvexPolyhedron",vertices:[[-1,1.618033988749895,0],[1,1.618033988749895,0],[-1,-1.618033988749895,0],[1,-1.618033988749895,0],[0,-1,1.618033988749895],[0,1,1.618033988749895],[0,-1,-1.618033988749895],[0,1,-1.618033988749895],[1.618033988749895,0,-1],[1.618033988749895,0,1],[-1.618033988749895,0,-1],[-1.618033988749895,0,1]],faces:[[0,11,5,1],[0,5,1,2],[0,1,7,3],[0,7,10,4],[0,10,11,5],[1,5,9,6],[5,11,4,7],[11,10,2,8],[10,7,6,9],[7,1,8,10],[3,9,4,11],[3,4,2,12],[3,2,6,13],[3,6,8,14],[3,8,9,15],[4,9,5,16],[2,4,11,17],[6,2,10,18],[8,6,7,19],[9,8,1,20]],skipLastFaceIndex:!0,faceValues:[10,17,3,16,8,7,12,20,6,19,5,18,4,11,13,15,2,14,9,1]},d24:{type:"ConvexPolyhedron",vertices:[[.7070000171661377,-0,-.7070000171661377],[.7070000171661377,.7070000171661377,-0],[.5468999743461609,.5468999743461609,-.5468999743461609],[-0,-.7070000171661377,-.7070000171661377],[-0,.7070000171661377,-.7070000171661377],[-.5468999743461609,.5468999743461609,-.5468999743461609],[-.5468999743461609,-.5468999743461609,-.5468999743461609],[.5468999743461609,.5468999743461609,.5468999743461609],[-0,-0,-1],[1,-0,-0],[.5468999743461609,-.5468999743461609,-.5468999743461609],[-.5468999743461609,.5468999743461609,.5468999743461609],[-0,-0,1],[-0,.7070000171661377,.7070000171661377],[-0,1,-0],[-.7070000171661377,.7070000171661377,-0],[-.7070000171661377,-0,-.7070000171661377],[-.7070000171661377,-.7070000171661377,-0],[-0,-.7070000171661377,.7070000171661377],[-.5468999743461609,-.5468999743461609,.5468999743461609],[-1,0,-0],[.5468999743461609,-.5468999743461609,.5468999743461609],[.7070000171661377,-0,.7070000171661377],[-0,-1,-0],[.7070000171661377,-.7070000171661377,-0],[-.7070000171661377,-0,.7070000171661377]],faces:[[4,5,15,14],[3,10,24,23],[11,15,20,25],[10,3,8,0],[19,18,12,25],[7,22,9,1],[22,21,24,9],[7,13,12,22],[5,4,8,16],[20,17,19,25],[6,3,23,17],[2,4,14,1],[18,19,17,23],[13,7,1,14],[0,2,1,9],[18,21,22,12],[3,6,16,8],[15,5,16,20],[6,17,20,16],[4,2,0,8],[13,11,25,12],[24,10,0,9],[11,13,14,15],[21,18,23,24]],skipLastFaceIndex:!1,faceValues:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]},d30:{type:"ConvexPolyhedron",vertices:[[-1.6180000305175781,0,1],[-1.6180000305175781,.6179999709129333,-0],[-0,1.6180000305175781,.6179999709129333],[.6179999709129333,0,1.6180000305175781],[-1,-1.6180000305175781,-0],[1.6180000305175781,0,1],[-1.6180000305175781,-.6179999709129333,-0],[-.6179999709129333,0,1.6180000305175781],[-0,1,-1.6180000305175781],[-1,1,-1],[1.6180000305175781,.6179999709129333,-0],[1,-1.6180000305175781,-0],[-1,-1,-1],[1.6180000305175781,-.6179999709129333,-0],[-1,1.6180000305175781,-0],[1,1,-1],[1,1.6180000305175781,-0],[-0,1,1.6180000305175781],[1,-1,-1],[-.6179999709129333,0,-1.6180000305175781],[-0,-1,-1.6180000305175781],[-1,1,1],[.6179999709129333,0,-1.6180000305175781],[-0,-1,1.6180000305175781],[-1,-1,1],[-0,1.6180000305175781,.6179999709129333],[-1.6180000305175781,0,-1],[1,1,1],[-0,-1.6180000305175781,-.6179999709129333],[1.6180000305175781,0,-1],[1,-1,1],[-0,1.6180000305175781,-.6179999709129333],[-0,-1.6180000305175781,.6179999709129333]],faces:[[25,16,31,14],[7,0,24,23],[19,20,12,26],[13,5,30,11],[1,0,21,14],[10,29,15,16],[6,0,1,26],[22,29,18,20],[9,14,31,8],[28,4,12,20],[30,5,3,23],[12,4,6,26],[31,16,15,8],[21,17,25,14],[22,20,19,8],[3,17,7,23],[18,11,28,20],[32,23,24,4],[27,5,10,16],[9,8,19,26],[25,17,27,16],[30,23,32,11],[7,17,21,0],[10,5,13,29],[24,0,6,4],[13,11,18,29],[9,26,1,14],[3,5,27,17],[15,29,22,8],[28,11,32,4]],skipLastFaceIndex:!1,faceValues:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}};function clamp(t,i,r){return Math.max(i,Math.min(r,t))}class Quaternion{constructor(t=0,i=0,r=0,a=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=a}static slerpFlat(t,i,r,a,o,l,c){let h=r[a+0],u=r[a+1],d=r[a+2],p=r[a+3];const m=o[l+0],g=o[l+1],y=o[l+2],v=o[l+3];if(0===c)return t[i+0]=h,t[i+1]=u,t[i+2]=d,void(t[i+3]=p);if(1===c)return t[i+0]=m,t[i+1]=g,t[i+2]=y,void(t[i+3]=v);if(p!==v||h!==m||u!==g||d!==y){let t=1-c;const i=h*m+u*g+d*y+p*v,r=i>=0?1:-1,a=1-i*i;if(a>Number.EPSILON){const o=Math.sqrt(a),l=Math.atan2(o,i*r);t=Math.sin(t*l)/o,c=Math.sin(c*l)/o}const o=c*r;if(h=h*t+m*o,u=u*t+g*o,d=d*t+y*o,p=p*t+v*o,t===1-c){const t=1/Math.sqrt(h*h+u*u+d*d+p*p);h*=t,u*=t,d*=t,p*=t}}t[i]=h,t[i+1]=u,t[i+2]=d,t[i+3]=p}static multiplyQuaternionsFlat(t,i,r,a,o,l){const c=r[a],h=r[a+1],u=r[a+2],d=r[a+3],p=o[l],m=o[l+1],g=o[l+2],y=o[l+3];return t[i]=c*y+d*p+h*g-u*m,t[i+1]=h*y+d*m+u*p-c*g,t[i+2]=u*y+d*g+c*m-h*p,t[i+3]=d*y-c*p-h*m-u*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,r,a){return this._x=t,this._y=i,this._z=r,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const r=t._x,a=t._y,o=t._z,l=t._order,c=Math.cos,h=Math.sin,u=c(r/2),d=c(a/2),p=c(o/2),m=h(r/2),g=h(a/2),y=h(o/2);switch(l){case"XYZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"YXZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"ZXY":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"ZYX":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"YZX":this._x=m*d*p+u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p-m*g*y;break;case"XZY":this._x=m*d*p-u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p+m*g*y}return!0===i&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const r=i/2,a=Math.sin(r);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,r=i[0],a=i[4],o=i[8],l=i[1],c=i[5],h=i[9],u=i[2],d=i[6],p=i[10],m=r+c+p;if(m>0){const t=.5/Math.sqrt(m+1);this._w=.25/t,this._x=(d-h)*t,this._y=(o-u)*t,this._z=(l-a)*t}else if(r>c&&r>p){const t=2*Math.sqrt(1+r-c-p);this._w=(d-h)/t,this._x=.25*t,this._y=(a+l)/t,this._z=(o+u)/t}else if(c>p){const t=2*Math.sqrt(1+c-r-p);this._w=(o-u)/t,this._x=(a+l)/t,this._y=.25*t,this._z=(h+d)/t}else{const t=2*Math.sqrt(1+p-r-c);this._w=(l-a)/t,this._x=(o+u)/t,this._y=(h+d)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(clamp(this.dot(t),-1,1)))}rotateTowards(t,i){const r=this.angleTo(t);if(0===r)return this;const a=Math.min(1,i/r);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const r=t._x,a=t._y,o=t._z,l=t._w,c=i._x,h=i._y,u=i._z,d=i._w;return this._x=r*d+l*c+a*u-o*h,this._y=a*d+l*h+o*c-r*u,this._z=o*d+l*u+r*h-a*c,this._w=l*d-r*c-a*h-o*u,this._onChangeCallback(),this}slerp(t,i){if(0===i)return this;if(1===i)return this.copy(t);const r=this._x,a=this._y,o=this._z,l=this._w;let c=l*t._w+r*t._x+a*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=l,this._x=r,this._y=a,this._z=o,this;const h=1-c*c;if(h<=Number.EPSILON){const t=1-i;return this._w=t*l+i*this._w,this._x=t*r+i*this._x,this._y=t*a+i*this._y,this._z=t*o+i*this._z,this.normalize(),this}const u=Math.sqrt(h),d=Math.atan2(u,c),p=Math.sin((1-i)*d)/u,m=Math.sin(i*d)/u;return this._w=l*p+this._w*m,this._x=r*p+this._x*m,this._y=a*p+this._y*m,this._z=o*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,i,r){return this.copy(t).slerp(i,r)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),r=Math.random(),a=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(a*Math.sin(t),a*Math.cos(t),o*Math.sin(i),o*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(t=0,i=0,r=0){Vector3.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}set(t,i,r){return void 0===r&&(r=this.z),this.x=t,this.y=i,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(Gi.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Gi.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*i+o[3]*r+o[6]*a,this.y=o[1]*i+o[4]*r+o[7]*a,this.z=o[2]*i+o[5]*r+o[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,r=this.y,a=this.z,o=t.elements,l=1/(o[3]*i+o[7]*r+o[11]*a+o[15]);return this.x=(o[0]*i+o[4]*r+o[8]*a+o[12])*l,this.y=(o[1]*i+o[5]*r+o[9]*a+o[13])*l,this.z=(o[2]*i+o[6]*r+o[10]*a+o[14])*l,this}applyQuaternion(t){const i=this.x,r=this.y,a=this.z,o=t.x,l=t.y,c=t.z,h=t.w,u=2*(l*a-c*r),d=2*(c*i-o*a),p=2*(o*r-l*i);return this.x=i+h*u+l*p-c*d,this.y=r+h*d+c*u-o*p,this.z=a+h*p+o*d-l*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*i+o[4]*r+o[8]*a,this.y=o[1]*i+o[5]*r+o[9]*a,this.z=o[2]*i+o[6]*r+o[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const r=t.x,a=t.y,o=t.z,l=i.x,c=i.y,h=i.z;return this.x=a*h-o*c,this.y=o*l-r*h,this.z=r*c-a*l,this}projectOnVector(t){const i=t.lengthSq();if(0===i)return this.set(0,0,0);const r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return ki.copy(this).projectOnVector(t),this.sub(ki)}reflect(t){return this.sub(ki.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const r=this.dot(t)/i;return Math.acos(clamp(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,r=this.y-t.y,a=this.z-t.z;return i*i+r*r+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,r){const a=Math.sin(i)*t;return this.x=a*Math.sin(r),this.y=Math.cos(i)*t,this.z=a*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=a,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=2*Math.random()-1,r=Math.sqrt(1-i*i);return this.x=r*Math.cos(t),this.y=i,this.z=r*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ki=new Vector3,Gi=new Quaternion;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"167"}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__="167"));var Hi={exports:{}};function _arrayLikeToArray$1(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}var Wi=function(){function TinyEmitter(){!function _classCallCheck$1(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,TinyEmitter),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return function _createClass$1(t,i,r){return i&&function _defineProperties$1(t,i){for(var r=0;r<i.length;r++){var a=i[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(TinyEmitter,[{key:"emit",value:function emit(t){if(!this.__listeners[t])return this;for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o,l=function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function _unsupportedIterableToArray$1(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray$1(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(t,i):void 0}}(t))||i){r&&(t=r);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,h=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return c=t.done,t},e:function e(t){h=!0,l=t},f:function f(){try{c||null==r.return||r.return()}finally{if(h)throw l}}}}(this.__listeners[t]);try{for(l.s();!(o=l.n()).done;)o.value.apply(void 0,r)}catch(t){l.e(t)}finally{l.f()}return this}},{key:"once",value:function once(t,i){var r=this,once=function once(){r.off(t,once),i.apply(void 0,arguments)};return this.on(t,once)}},{key:"on",value:function on(t,i){return this.__listeners[t]||(this.__listeners[t]=[]),this.__listeners[t].push(i),this}},{key:"off",value:function off(t,i){return this.__listeners[t]=i?this.__listeners[t].filter((function(t){return t!==i})):[],this}}]),TinyEmitter}();function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,i):void 0}}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,a=new Array(i);r<i;r++)a[r]=t[r];return a}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _createClass(t,i,r){return i&&function _defineProperties(t,i){for(var r=0;r<i.length;r++){var a=i[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,i,r){var a=function _superPropBase(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=_getPrototypeOf(t)););return t}(t,i);if(a){var o=Object.getOwnPropertyDescriptor(a,i);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_get.apply(this,arguments)}function _setPrototypeOf(t,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,i){return t.__proto__=i,t},_setPrototypeOf(t,i)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var ji=Wi,Xi="main",qi=_createClass((function TransferableResponse(t,i){_classCallCheck(this,TransferableResponse),this.payload=t,this.transferable=i}));Hi.exports=function RegisterPromise(t){var i=function _defineProperty(t,i,r){return i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}({},Xi,t),r=self.postMessage.bind(self),a=new(function(t){!function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_setPrototypeOf(t,i)}(WorkerRegister,t);var a=function _createSuper(t){var i=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,a=_getPrototypeOf(t);if(i){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return function _possibleConstructorReturn(t,i){if(i&&("object"===_typeof(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}(WorkerRegister);function WorkerRegister(){return _classCallCheck(this,WorkerRegister),a.apply(this,arguments)}return _createClass(WorkerRegister,[{key:"emit",value:function emit(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return 1==a.length&&a[0]instanceof qi?r({eventName:t,args:a},a[0].transferable):r({eventName:t,args:a}),this}},{key:"emitLocally",value:function emitLocally(t){for(var i,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(i=_get(_getPrototypeOf(WorkerRegister.prototype),"emit",this)).call.apply(i,[this,t].concat(a))}},{key:"operation",value:function operation(t,r){return i[t]=r,this}}]),WorkerRegister}(ji)),o=function run(t,i,r){var a=function onSuccess(i){i&&i instanceof qi?c(t,1,i.payload,i.transferable):c(t,1,i)},o=function onError(i){c(t,0,{message:i.message,stack:i.stack})};try{var h=l(t,i,r);!function isPromise(t){return"object"===_typeof(t)&&null!==t&&"function"==typeof t.then&&"function"==typeof t.catch}(h)?a(h):h.then(a).catch(o)}catch(t){o(t)}},l=function runFn(t,r,a){var o=i[a||Xi];if(!o)throw new Error("Not found handler for this request");return o(r,h.bind(null,t))},c=function sendResult(t,i,a){r([0,t,i,a],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])},h=function sendEvent(t,i,a){if(!i)throw new Error("eventName is required");if("string"!=typeof i)throw new Error("eventName should be string");r([1,t,i,a])};return self.addEventListener("message",(function(t){var i=t.data;Array.isArray(i)?o.apply(void 0,_toConsumableArray(i)):i&&i.eventName&&a.emitLocally.apply(a,[i.eventName].concat(_toConsumableArray(i.args)))})),a},Hi.exports.TransferableResponse=qi;var Yi=function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Hi.exports);new class PhysicsWorker{constructor(){this.shapeList=new Map,this.host=Yi().operation("init",this.init.bind(this)).operation("addConstraint",this.addConstraint.bind(this)).operation("removeConstraint",this.removeConstraint.bind(this)).operation("updateConstraint",this.updateConstraint.bind(this)).operation("createShape",this.createShape.bind(this)).operation("getDiceValue",this.getDiceValue.bind(this)).operation("createDice",this.createDice.bind(this)).operation("removeDice",this.removeDice.bind(this)).operation("addDice",this.addDice.bind(this)).operation("playStep",this.playStep.bind(this)).operation("simulateThrow",this.simulateThrow.bind(this)).operation("getWorldInfo",this.getWorldInfo.bind(this))}init(t){this.world=new World,this.dice_body_material=new Material,this.desk_body_material=new Material,this.barrier_body_material=new Material,this.soundDelay=2,this.animstate="throw",this.mouseConstraint=null,this.diceList=new Map,this.world.gravity.set(0,0,800*-9.8),this.world.broadphase=new NaiveBroadphase,this.world.solver.iterations=14,this.world.allowSleep=!0,this.muteSoundSecretRolls=t.muteSoundSecretRolls,this.addContactMaterials(),this.addDesk(),this.addBarriers(t.height,t.width),this.addJointBody(),this.reset()}addContactMaterials(){const t=[{materials:[this.desk_body_material,this.dice_body_material],options:{friction:.01,restitution:.5}},{materials:[this.barrier_body_material,this.dice_body_material],options:{friction:0,restitution:.95}},{materials:[this.dice_body_material,this.dice_body_material],options:{friction:.01,restitution:.7}}];for(const{materials:i,options:r}of t){const t=new ContactMaterial(...i,r);this.world.addContactMaterial(t)}}addDesk(){const t=new Body({allowSleep:!1,mass:0,shape:new Plane,material:this.desk_body_material});this.world.addBody(t)}addBarriers(t,i){const r=[{axis:new Vec3(1,0,0),angle:Math.PI/2,position:new Vec3(0,.93*t,0)},{axis:new Vec3(1,0,0),angle:-Math.PI/2,position:new Vec3(0,.93*-t,0)},{axis:new Vec3(0,1,0),angle:-Math.PI/2,position:new Vec3(.93*i,0,0)},{axis:new Vec3(0,1,0),angle:Math.PI/2,position:new Vec3(.93*-i,0,0)}];for(const{axis:t,angle:i,position:a}of r){const r=new Body({allowSleep:!1,mass:0,shape:new Plane,material:this.barrier_body_material});r.quaternion.setFromAxisAngle(t,i),r.position.copy(a),this.world.addBody(r)}}addJointBody(){const t=new Sphere(.1);this.jointBody=new Body({mass:0}),this.jointBody.addShape(t),this.jointBody.collisionFilterGroup=0,this.jointBody.collisionFilterMask=0,this.world.addBody(this.jointBody)}createDice({id:t,shape:i,material:r,vectordata:a,mass:o,startAtIteration:l,options:c}){const h=new Body({allowSleep:!0,sleepSpeedLimit:75,sleepTimeLimit:.9,mass:o,shape:this.shapeList.get(i),material:this.dice_body_material});h.type=Body.DYNAMIC,h.position.set(a.pos.x,a.pos.y,a.pos.z),h.quaternion.setFromAxisAngle(new Vec3(a.axis.x,a.axis.y,a.axis.z),a.axis.a*Math.PI*2),h.angularVelocity.set(a.angle.x,a.angle.y,a.angle.z),h.velocity.set(a.velocity.x,a.velocity.y,a.velocity.z),h.linearDamping=.1,h.angularDamping=.1,h.addEventListener("collide",this.eventCollide.bind(this)),h.stepQuaternions=new Float32Array(4004),h.stepPositions=new Float32Array(3003),h.diceType=a.type,h.diceShape=i,h.diceMaterial=r,h.secretRoll=c?.secret??!1,h.startAtIteration=l,this.diceList.set(t,h)}addDice(t){const i=this.diceList.get(t);this.world.addBody(i)}removeDice(t){for(const i of t){const t=this.diceList.get(i);this.world.removeBody(t),this.diceList.delete(i)}}cleanAfterThrow(){for(const[t,i]of this.diceList)i.stepPositions=new Float32Array(3003),i.stepQuaternions=new Float32Array(4004),this.diceList.set(t,i)}eventCollide({body:t,target:i}){if(!t)return;const r=t.world.stepnumber,a=t.mass>0?"dice":"table";this.shouldSkipSound(r,a)||(t.mass>0?this.handleDiceCollision(t,i):this.handleTableCollision(t,i),this.updateLastSound(r))}shouldSkipSound(t,i){const r=this.lastSoundStep===t,a=this.lastSound>t;if(r||a){const t="dice"===i&&"dice"===this.lastSoundType;return!("dice"!==i)||t}return!1}handleDiceCollision(t,i){const r=t.velocity.length();if(r<250)return;const a=this.calculateStrength(r,550,.2),o=this.muteSoundSecretRolls&&(t.secretRoll||i.secretRoll)?0:a;"simulate"===this.animstate?this.detectedCollides[this.iteration]=["dice",t.diceType,t.diceMaterial,o]:this.host.emit("collide",{source:"dice",type:t.diceType,material:t.diceMaterial,strength:o}),this.lastSoundType="dice"}handleTableCollision(t,i){const r=i.velocity.length();if(r<100)return;const a=this.calculateStrength(r,500,.2),o=this.muteSoundSecretRolls&&(t.secretRoll||i.secretRoll)?0:a;"simulate"===this.animstate?this.detectedCollides[this.iteration]=["table",null,null,o]:this.host.emit("collide",{source:"table",type:null,material:null,strength:o}),this.lastSoundType="table"}calculateStrength(t,i,r){return Math.max(Math.min(t/i,1),r)}updateLastSound(t){this.lastSoundStep=t,this.lastSound=t+this.soundDelay}addConstraint({id:t,pos:i}){const r=this.diceList.get(t);let a=new Vec3(i.x,i.y,i.z).vsub(r.position),o=r.quaternion.inverse().vmult(a);this.jointBody.position.set(i.x,i.y,i.z+150),this.mouseConstraint=new PointToPointConstraint(r,o,this.jointBody,new Vec3(0,0,0)),this.world.addConstraint(this.mouseConstraint)}updateConstraint(t){this.mouseConstraint&&(this.jointBody.position.set(t.x,t.y,t.z+150),this.mouseConstraint.update())}removeConstraint(){this.mouseConstraint&&(this.world.removeConstraint(this.mouseConstraint),this.mouseConstraint=null)}createShape({type:t,radius:i}){const r=Vi[t];switch(r.type){case"ConvexPolyhedron":this.shapeList.set(t,this.loadGeom(r.vertices,r.faces,i,r.skipLastFaceIndex));break;case"Cylinder":this.shapeList.set(t,new Cylinder(i*r.radiusTop,i*r.radiusBottom,i*r.height,r.numSegments));break;default:throw new Error("Unknown shape type: "+r.type)}}loadShape(t,i,r,a=!1){const o=new Array(t.length),l=new Array(i.length);for(let i=0;i<t.length;++i){const a=t[i];o[i]=new Vec3(a.x*r,a.y*r,a.z*r)}for(let t=0;t<i.length;++t)l[t]=a?i[t].slice(0,i[t].length-1):i[t];return new ConvexPolyhedron({vertices:o,faces:l})}loadGeom(t,i,r,a=!1){const o=new Array(t.length);for(let i=0;i<t.length;++i)o[i]=(new Vector3).fromArray(t[i]).normalize();return this.loadShape(o,i,r,a)}getDiceValue(t){const i=this.diceList.get(t);if(!i)return null;if(i.result)return i.result;const r=new Vector3(0,0,"d4"==i.diceShape?-1:1),a=new Vector3;let o,l=2*Math.PI;for(let t=0,c=i.shapes[0].faceNormals.length;t<c;++t){if(0==Vi[i.diceShape].faceValues[t])continue;a.copy(i.shapes[0].faceNormals[t]);const c=a.applyQuaternion(i.quaternion).angleTo(r);c<l&&(l=c,o=t)}const c=Vi[i.diceShape].faceValues[o];return i.result=c,this.diceList.set(t,i),c}reset(){this.lastSoundType="",this.lastSoundStep=0,this.lastSound=0,this.detectedCollides=new Array(1e3),this.iterationsNeeded=0,this.animstate="simulate",this.iteration=0}simulateThrow({minIterations:t,nbIterationsBetweenRolls:i,framerate:r,canBeFlipped:a}){this.reset(),this.minIterations=t,this.nbIterationsBetweenRolls=i,this.framerate=r,this.canBeFlipped=a,this.runPhysicsSimulation();const o=[],l=[],c=[],h=[];for(const[t,i]of this.diceList)o.push(t),l.push(i.stepQuaternions),c.push(i.stepPositions),h.push(i.dead??!1);const u=l.map((t=>t.buffer)),d=c.map((t=>t.buffer));return this.animstate="throw",this.cleanAfterThrow(),new Yi.TransferableResponse({ids:o,quaternionsBuffers:u,positionsBuffers:d,detectedCollides:this.detectedCollides,deads:h,iterationsNeeded:this.iterationsNeeded},[...u,...d])}runPhysicsSimulation(){for(;!this.throwFinished();){if(++this.iteration,!(this.iteration%this.nbIterationsBetweenRolls))for(const[t,i]of this.diceList)i.startAtIteration==this.iteration&&this.world.addBody(i);this.world.step(this.framerate);for(let t=0;t<this.world.bodies.length;t++)this.world.bodies[t].stepPositions&&(this.world.bodies[t].stepQuaternions.set([this.world.bodies[t].quaternion.x,this.world.bodies[t].quaternion.y,this.world.bodies[t].quaternion.z,this.world.bodies[t].quaternion.w],4*this.iteration),this.world.bodies[t].stepPositions.set([this.world.bodies[t].position.x,this.world.bodies[t].position.y,this.world.bodies[t].position.z],3*this.iteration))}}throwFinished(){let t=!0;if(this.iteration<=this.minIterations)return!1;for(const[i,r]of this.diceList){if(r.sleepState<2){t=!1;break}r.asleepAtIteration=this.iteration}if(this.iteration>=1e3&&(t=!0),t){this.iterationsNeeded=this.iteration;for(const[t,i]of this.diceList)i.result=this.getDiceValue(t),this.canBeFlipped||(i.mass=0,i.dead=i.asleepAtIteration||!1,i.updateMassProperties()),this.diceList.set(t,i)}return t}playStep({time_diff:t}){if("simulate"==this.animstate)return;const i=[],r=new Float32Array(4*this.diceList.size),a=new Float32Array(3*this.diceList.size);let o=!0;for(let t=0;t<this.world.bodies.length;t++)if(this.world.bodies[t].allowSleep&&this.world.bodies[t].sleepState<2){o=!1;break}if(!o){this.world.step(this.framerate,t);for(const[t,o]of this.diceList)o.dead||(i.push(t),r.set([o.quaternion.x,o.quaternion.y,o.quaternion.z,o.quaternion.w],4*i.length-4),a.set([o.position.x,o.position.y,o.position.z],3*i.length-3))}return new Yi.TransferableResponse({ids:i,quaternionsBuffers:r.buffer,positionsBuffers:a.buffer,worldAsleep:o},[r.buffer,a.buffer])}getWorldInfo(){for(let t=0;t<this.world.bodies.length;t++);for(let t=0;t<this.world.constraints.length;t++);}}}()}));function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const va=class TinyEmitter{constructor(){Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}emit(t,...i){if(!this.__listeners[t])return this;for(const r of this.__listeners[t])r(...i);return this}once(t,i){const once=(...r)=>{this.off(t,once),i(...r)};return this.on(t,once)}on(t,i){return this.__listeners[t]||(this.__listeners[t]=[]),this.__listeners[t].push(i),this}off(t,i){return this.__listeners[t]=i?this.__listeners[t].filter((t=>t!==i)):[],this}};var xa=getDefaultExportFromCjs(class Worker extends va{constructor(t){super(),this._messageId=1,this._messages=new Map,this._worker=t,this._worker.onmessage=this._onMessage.bind(this),this._id=Math.ceil(1e7*Math.random())}terminate(){this._worker.terminate()}isFree(){return 0===this._messages.size}jobsLength(){return this._messages.size}exec(t,i=null,r=[],a){return new Promise(((o,l)=>{const c=this._messageId++;this._messages.set(c,[o,l,a]),this._worker.postMessage([c,i,t],r||[])}))}postMessage(t=null,i=[],r){return new Promise(((a,o)=>{const l=this._messageId++;this._messages.set(l,[a,o,r]),this._worker.postMessage([l,t],i||[])}))}emit(t,...i){this._worker.postMessage({eventName:t,args:i})}_onMessage(t){if(!Array.isArray(t.data)&&t.data.eventName)return super.emit(t.data.eventName,...t.data.args);const[i,...r]=t.data;if(1===i)this._onEvent(...r);else{if(0!==i)throw new Error(`Wrong message type '${i}'`);this._onResult(...r)}}_onResult(t,i,r){const[a,o]=this._messages.get(t);return this._messages.delete(t),1===i?a(r):o(r)}_onEvent(t,i,r){const[,,a]=this._messages.get(t);a&&a(i,r)}});class DiceFactory{constructor(){this.geometries={},this.physicsWorker=new xa(new ya),this.baseScale=50,this.preferredSystem="standard",this.preferredColorset="custom",this.cache_hits=0,this.cache_misses=0,this.realisticLighting=!0,this.loaderGLTF=new GLTFLoader,this.fontLoadingPromises=[],this.baseTextureCache={},this.systems=new Map,this.systems.set("standard",new t("standard",game.i18n.localize("DICESONICE.System.Standard"),null,"default")),this.systems.set("spectrum",new t("spectrum",game.i18n.localize("DICESONICE.System.SpectrumDice"),null,"default","Dice So Nice!")),this.systems.set("foundry_vtt",new t("foundry_vtt",game.i18n.localize("DICESONICE.System.FoundryVTT"),null,"default","Dice So Nice!")),this.systems.set("dot",new t("dot",game.i18n.localize("DICESONICE.System.Dot"),null,"default","Dice So Nice!")),this.systems.set("dot_b",new t("dot_b",game.i18n.localize("DICESONICE.System.DotBlack"),null,"default","Dice So Nice!")),r.forEach((t=>{this.register(t)})),a.forEach((t=>{this.addDicePreset(t)}));for(let t in CONFIG.Dice.terms){let i=CONFIG.Dice.terms[t];if(![foundry.dice.terms.Coin,foundry.dice.terms.FateDie,foundry.dice.terms.Die].includes(i)){let t=new i({});[2,3,4,6,8,10,12,14,16,20,24,30].includes(t.faces)&&this.internalAddDicePreset(t)}}}initializeMaterials(){this.realisticLighting?this.material_options={plastic:{type:"standard",options:{metalness:0,roughness:.6,envMapIntensity:1},scopedOptions:{roughnessMap:"roughnessMap_fingerprint",envMap:!0}},metal:{type:"standard",options:{roughness:.6,metalness:1},scopedOptions:{roughnessMap:"roughnessMap_metal",envMap:!0}},wood:{type:"standard",options:{roughness:1,metalness:0},scopedOptions:{roughnessMap:"roughnessMap_wood",envMap:!0}},glass:{type:"standard",options:{roughness:.3,metalness:0},scopedOptions:{roughnessMap:"roughnessMap_fingerprint",envMap:!0}},chrome:{type:"standard",options:{metalness:1,roughness:.1},scopedOptions:{roughnessMap:"roughnessMap_fingerprint",envMap:!0}},pristine:{type:"physical",options:{metalness:0,roughness:.8,envMapIntensity:1,clearcoat:1,clearcoatRoughness:.9},scopedOptions:{envMap:!0}},iridescent:{type:"physical",options:{metalness:1,roughness:.2,iridescence:1,iridescenceIOR:1.8,iridescenceThicknessRange:[485,515]},scopedOptions:{envMap:!0}},stone:{type:"standard",options:{metalness:0,roughness:1},scopedOptions:{roughnessMap:"roughnessMap_stone",envMap:!0}}}:this.material_options={plastic:{type:"phong",options:{specular:16777215,color:11908533,shininess:3,flatShading:!0}},metal:{type:"standard",options:{color:14540253,emissive:1118481,roughness:.6,metalness:1,envMapIntensity:2},scopedOptions:{envMap:!0}},wood:{type:"phong",options:{specular:16777215,color:11908533,shininess:1,flatShading:!0}},glass:{type:"phong",options:{specular:16777215,color:11908533,shininess:.3,reflectivity:.1,combine:V},scopedOptions:{envMap:!0}},chrome:{type:"phong",options:{specular:16777215,color:11908533,shininess:1,reflectivity:.7,combine:k},scopedOptions:{envMap:!0}},pristine:{type:"phong",options:{specular:16777215,color:11908533,shininess:3,flatShading:!0}},iridescent:{type:"standard",options:{color:14540253,emissive:1118481,roughness:.2,metalness:1,envMapIntensity:2,userData:{iridescent:!0}},scopedOptions:{envMap:!0}},stone:{type:"lambert",options:{color:11908533,reflectivity:.01},scopedOptions:{envMap:!0}}}}setScale(t){this.baseScale=t}setQualitySettings(t){this.realisticLighting=t.bumpMapping,this.aa=t.antialiasing,this.glow=t.glow,this.useHighDPI=t.useHighDPI,this.shadows="none"!=t.shadowQuality,this.shadowQuality=t.shadowQuality}register(t){const i=this.systems.get("standard").dice.has(t.type);i&&(this.systems.get("standard").dice.get(t.type).internalAdd||t.internalAdd)&&(this.systems.get("standard").dice.set(t.type,t),t.modelFile?t.loadModel(this.loaderGLTF):t.loadTextures()),"standard"==t.system?i||this.systems.get(t.system).dice.set(t.type,t):(i||(this.systems.get("standard").dice.set(t.type,t),t.modelFile?t.loadModel(this.loaderGLTF):t.loadTextures()),this.systems.get(t.system).dice.set(t.type,t))}async preloadPresets(t=!0,i=null,r={}){let a=[];const preloadPresetsByUser=t=>{let i=t.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(t.getFlag("dice-so-nice","appearance")):null;if(i||(i={global:{}},"standard"!=this.preferredSystem&&(i.global.system=this.preferredSystem),"custom"!=this.preferredColorset&&(i.global.colorset=this.preferredColorset)),this.systems.get("standard").dice.forEach((t=>{a.push(t)})),foundry.utils.mergeObject(i,r,{performDeletions:!0}),!foundry.utils.isEmpty(i))for(let t in i)i.hasOwnProperty(t)&&("global"!=t?a.push(this.getPresetBySystem(t,i[t].system)):this.systems.has(i[t].system)&&this.systems.get(i[t].system).dice.forEach((t=>{a.push(t)})))};i?preloadPresetsByUser(game.users.get(i)):game.users.forEach((t=>{preloadPresetsByUser(t)})),a=a.filter(((t,i,r)=>r.indexOf(t)===i));let o=[];a.forEach((t=>{t&&(t.modelFile?o.push(t.loadModel(this.loaderGLTF)):o.push(t.loadTextures()))})),t&&await Promise.all(o)}addSystem(i,r="default",a){"default"!=r&&"standard"==this.preferredSystem&&(this.preferredSystem=i.id),this.systems.set(i.id,new t(i.id,i.name,null,r,i.group))}addDicePreset(t,i=null){let r=this.systems.get("standard").dice.get(t.type);r&&r.internalAdd||(i||(i=t.type),r=this.systems.get("standard").dice.get(i));let a=new DicePreset(t.type,r.shape),o=t.type.substr(1);a.term=isNaN(o)?CONFIG.Dice.terms[o].name:"Die",a.setLabels(t.labels),a.setModel(t.modelFile),t.values?(null==t.values.min&&(t.values.min=1),null==t.values.max&&(t.values.max=r.values.length),null==t.values.step&&(t.values.step=1),a.setValues(t.values.min,t.values.max,t.values.step)):(a.values=r.values,a.valueMap=r.valueMap),t.valueMap&&(a.valueMap=t.valueMap),a.mass=r.mass,a.scale=r.scale,a.inertia=r.inertia,a.system=t.system,a.font=t.font,a.fontScale=t.fontScale||null,a.colorset=t.colorset||null,a.fontScale||["d2","d4","d6","d8","d10","d12","d14","d16","d20","d24","d30","d100"].includes(t.type)||!this.systems.get("standard").dice.has(t.type)||(a.fontScale=h[i]),t.bumpMaps&&t.bumpMaps.length&&a.setBumpMaps(t.bumpMaps),t.emissiveMaps&&t.emissiveMaps.length&&a.setEmissiveMaps(t.emissiveMaps),t.emissive&&(a.emissive=t.emissive),t.emissiveIntensity&&(a.emissiveIntensity=t.emissiveIntensity),t.atlas&&(a.atlas=t.atlas),this.register(a),t.font&&!FontConfig.getAvailableFonts().includes(t.font)&&this.fontLoadingPromises.push(FontConfig.loadFont(t.font,{editor:!1,fonts:[]}))}internalAddDicePreset(t){let i="d";[3,5,7].includes(t.faces)?i+=2*t.faces:i+=t.faces;let r="d"+t.constructor.DENOMINATION,a=this.systems.get("standard").dice.get(i),o=new DicePreset(r,a.shape);o.term=t.constructor.name;let l=[];for(let i=1;i<=t.faces;i++)l.push(t.getResultLabel({result:i}));o.setLabels(l),o.setValues(1,t.faces),o.mass=a.mass,o.inertia=a.inertia,o.scale=a.scale,o.internalAdd=!0,this.register(o)}disposeCachedMaterials(t=null){for(const i in this.baseTextureCache)null!=t&&i.substr(0,t.length)!=t||(this.baseTextureCache[i].map.dispose(),this.baseTextureCache[i].bumpMap&&this.baseTextureCache[i].bumpMap.dispose(),this.baseTextureCache[i].emissiveMap&&this.baseTextureCache[i].emissiveMap.dispose(),this.baseTextureCache[i].dispose(),delete this.baseTextureCache[i])}async _loadFonts(){const t=new Promise((t=>setTimeout(t,4500))),i=Promise.all(this.fontLoadingPromises).then((()=>document.fonts.ready));this.fontLoadingPromises=[],await Promise.race([i,t])}get(t){return this.getPresetBySystem(t)}getPresetBySystem(t,i="standard"){let r=this.systems.get("standard").dice.get(t);if(!r)return null;let a=null;return"standard"!=i&&this.systems.has(i)&&(a=this.systems.get(i).dice.get(t)?.shape==r.shape?this.systems.get(i).dice.get(t):null,a||["Coin","FateDie","Die"].includes(r.term)||(a=r.colorset?null:this.systems.get(i).getDiceByShapeAndValues(r.shape,r.values))),a||(a=this.systems.get("standard").dice.get(t)),a}async create(t,i,r){let a=this.getPresetBySystem(i,r.system);a.model&&r.isGhost&&(a=this.getPresetBySystem(i,"standard"));let o,l="board"==t.type?this.baseScale:60;if(!a)return null;let c=this.geometries[i+l];if(c||(c=await this.createGeometry(a.shape,a.scale,l),this.geometries[i+l]=c),!c)return null;if("board"==t.type&&await this.physicsWorker.exec("createShape",{type:a.shape,radius:a.scale*l}),a.model){o=a.model.scene.children[0].clone();let t=l/100;o.scale.set(t,t,t),o.geometry||(o.geometry={}),a.model.animations.length>0&&(o.mixer=new AnimationMixer(o),o.mixer.clipAction(a.model.animations[0]).play())}else{let l,h=this.generateMaterialData(a,r),u=t.type+i+h.cacheString;l=this.baseTextureCache[u]?this.baseTextureCache[u]:this.createMaterials(t,u,a,h),o=new Mesh(c,l),a.color&&(o.material[0].color=new gn(a.color),this.realisticLighting&&o.material[0].color.convertLinearToSRGB(),o.material[0].emissiveIntensity=a.emissiveIntensity?a.emissiveIntensity:1,o.material[0].needsUpdate=!0),o.layers.enableAll()}"d2"==a.shape&&o.lookAt(new Vector3(0,-1,0)),o.result=null,o.shape=a.shape;const h=o;return o.getValue=async()=>await this.physicsWorker.exec("getDiceValue",h.id),o}createMaterials(t,i,r,a){if(this.baseTextureCache[i])return this.baseTextureCache[i];let o=r.labels;"d4"==r.shape&&(o=r.labels[0]);let l=Array.isArray(a.texture)?a.texture[0]:a.texture;var c;let u=this.material_options[a.material]?this.material_options[a.material]:this.material_options.plastic;switch(this.realisticLighting||delete u.roughnessMap,u.type){case"phong":c=new MeshPhongMaterial(u.options);break;case"standard":c=new MeshStandardMaterial(u.options);break;case"lambert":c=new MeshLambertMaterial(u.options);break;case"physical":c=new MeshPhysicalMaterial(u.options);break;default:c=new MeshPhongMaterial(this.material_options.plastic.options)}u.scopedOptions&&(u.scopedOptions.envMap&&(c.envMap=t.textureCube),u.scopedOptions.roughnessMap&&(c.roughnessMap=t[u.scopedOptions.roughnessMap]));let d={type:r.font,scale:r.fontScale?r.fontScale:null};d.type||(d.type=a.font),d.scale||(a.fontScale[r.type]?d.scale=a.fontScale[r.type]:d.scale=h[r.shape]);let p=document.createElement("canvas"),m=p.getContext("2d",{alpha:!0});m.globalAlpha=0;let g=document.createElement("canvas"),y=g.getContext("2d",{alpha:!0});y.globalAlpha=0;let v=document.createElement("canvas"),x=v.getContext("2d"),b=o.length,_=["d3","d5","d7"].includes(r.type)||"df"==r.type&&"d6"==r.shape;_&&(b=2*b-2,"d2"!=r.shape&&"d10"!=r.shape||(b+=1));let S=Math.ceil(Math.sqrt(b)),M=256,w=this.calc_texture_size(Math.sqrt(b)*M,!0);p.width=p.height=g.width=g.height=v.width=v.height=w;let E=0,T=0,A=0;for(var C=0;C<o.length;++C){if(A==S&&(T+=M,E=0,A=0),0==C){let t={name:"none"};"source-over"!=l.composite&&(t=l),this.createTextMaterial(m,y,x,E,T,M,r,o,d,C,t,a)}else this.createTextMaterial(m,y,x,E,T,M,r,o,d,C,a.texture,a);A++,E+=M}if(_){let t=2;for("d2"!=r.shape&&"d10"!=r.shape||(t=1),C=t;C<o.length;C++)A==S&&(T+=M,E=0,A=0),this.createTextMaterial(m,y,x,E,T,M,r,o,d,C,a.texture,a),A++,E+=M}if(!this.baseTextureCache[i]){let t=new CanvasTexture(p);if(this.realisticLighting&&(t.colorSpace=bt),t.flipY=!1,c.map=t,c.map.anisotropy=game.dice3d.box.anisotropy,this.realisticLighting){let t=new CanvasTexture(g);t.flipY=!1,c.bumpMap=t;let i=new CanvasTexture(v);this.realisticLighting&&(i.colorSpace=bt),i.flipY=!1,c.emissiveMap=i,c.emissiveIntensity=r.emissiveIntensity?r.emissiveIntensity:1,c.emissive=new gn(r.emissive),this.realisticLighting&&c.emissive.convertLinearToSRGB()}}switch(a.material){case"chrome":case"iridescent":this.realisticLighting&&(c.metalnessMap=c.bumpMap)}return c.opacity=1,c.transparent=!0,c.depthTest=!0,c.needUpdate=!0,c.userData.diceobj=r,c.userData.materialData=a,c.userData.dice_texture=l,c.onBeforeCompile=ShaderUtils.applyDiceSoNiceShader,Hooks.callAll("diceSoNiceOnMaterialReady",c,i),this.baseTextureCache[i]=c,c}createTextMaterial(t,i,r,a,o,l,c,h,u,d,p,m){if(void 0===h[d])return null;let g=m.foreground,y=m.outline,v=d>0?m.background:""!=m.edge?m.edge:m.background;Array.isArray(p)&&(p=p[Math.floor(Math.random()*p.length)]);let x=h[d],b=c.bumps[d],_=c.emissiveMaps[d];if(t.fillStyle=v,t.fillRect(a,o,l,l),i.fillStyle="#FFFFFF",i.fillRect(a,o,l,l),r.fillStyle="#000000",r.fillRect(a,o,l,l),""!=p.name&&"none"!=p.name&&(t.save(),t.beginPath(),t.rect(a,o,l,l),t.clip(),t.globalCompositeOperation=p.composite||"source-over",t.drawImage(p.texture.source,p.texture.frame.x,p.texture.frame.y,p.texture.frame.w,p.texture.frame.h,a,o,l,l),t.restore(),""!=p.bump&&i.drawImage(p.bump.source,p.bump.frame.x,p.bump.frame.y,p.bump.frame.w,p.bump.frame.h,a,o,l,l)),t.globalCompositeOperation="source-over",t.textAlign="center",t.textBaseline="middle",i.textAlign="center",i.textBaseline="middle",i.shadowColor="#000000",i.shadowOffsetX=1,i.shadowOffsetY=1,i.shadowBlur=3,r.textAlign="center",r.textBaseline="middle","d4"!=c.shape)if(m.isGhost&&""!=h[d]&&(x="?"),x.source instanceof HTMLImageElement)t.drawImage(x.source,x.frame.x,x.frame.y,x.frame.w,x.frame.h,a,o,l,l),b&&i.drawImage(b.source,b.frame.x,b.frame.y,b.frame.w,b.frame.h,a,o,l,l),_&&r.drawImage(_.source,_.frame.x,_.frame.y,_.frame.w,_.frame.h,a,o,l,l);else{let h=l/3,d=l/2,p=l/2;switch(u.scale&&(h*=u.scale),c.shape){case"d10":d=1.3*p;break;case"d14":case"d16":d=1.4*p;break;case"d8":case"d6":d*=1.1;break;case"d12":d*=1.08;break;case"d20":d=1.2*p}t.font=h+"pt "+u.type,i.font=h+"pt "+u.type,r.font=h+"pt "+u.type;var S=h;let m=x.split("\n");if(m.length>1){h/=m.length,t.font=h+"pt "+u.type,i.font=h+"pt "+u.type,r.font=h+"pt "+u.type;let a=new PIXI.TextStyle({fontFamily:u.type,fontSize:h,stroke:"#0000FF",strokeThickness:"none"!=y&&y!=v?1:0});S=PIXI.TextMetrics.measureText(m.join(""),a).lineHeight,""!=m[0]?(d-=S*m.length/2,"d12"==c.shape&&(d*=1.08)):m.shift()}for(let l=0,c=m.length;l<c;l++){let c=m[l].trim();"none"!=y&&y!=v&&(t.strokeStyle=y,t.lineWidth=5,t.strokeText(m[l],p+a,d+o),i.strokeStyle="#555555",i.lineWidth=5,i.strokeText(m[l],p+a,d+o),r.strokeStyle="#999999",r.lineWidth=5,r.strokeText(m[l],p+a,d+o),"6"!=c&&"9"!=c||(t.strokeText("  .",p+a,d+o),i.strokeText("  .",p+a,d+o),r.strokeText("  .",p+a,d+o))),t.fillStyle=g,t.fillText(m[l],p+a,d+o),i.fillStyle="#555555",i.fillText(m[l],p+a,d+o),r.fillStyle="#999999",r.fillText(m[l],p+a,d+o),"6"!=c&&"9"!=c||(t.fillText("  .",p+a,d+o),i.fillText("  .",p+a,d+o),r.fillText("  .",p+a,d+o)),d+=1.5*S}}else{var M=l/2,w=l/2;let c=l/128*24;u.scale&&(c*=u.scale),t.font=c+"pt "+u.type,i.font=c+"pt "+u.type,r.font=c+"pt "+u.type;let h=1,d=1;for(let c=0;c<x.length;c++){switch(m.isGhost&&(x[c]="?"),c){case 0:d=1.13;break;case 1:d=.87,h=1.13;break;case 2:h=.87}let u=M*h+a,p=(w-.3*l)*d+o;if(x[c].source instanceof HTMLImageElement){let i=60/(x[c].frame.w/l);t.drawImage(x[c].source,x[c].frame.x,x[c].frame.y,x[c].frame.w,x[c].frame.h,u-i/2,p-i/2,i,i),_&&r.drawImage(x[c].source,x[c].frame.x,x[c].frame.y,x[c].frame.w,x[c].frame.h,u-i/2,p-i/2,i,i)}else"none"!=y&&y!=v&&(t.strokeStyle=y,t.lineWidth=5,t.strokeText(x[c],u,p),i.strokeStyle="#555555",i.lineWidth=5,i.strokeText(x[c],u,p),r.strokeStyle="#999999",r.lineWidth=5,r.strokeText(x[c],u,p)),t.fillStyle=g,t.fillText(x[c],u,p),i.fillStyle="#555555",i.fillText(x[c],u,p),r.fillStyle="#999999",r.fillText(x[c],u,p);t.translate(M+a,w+o),t.rotate(2*Math.PI/3),t.translate(-M-a,-w-o),i.translate(M+a,w+o),i.rotate(2*Math.PI/3),i.translate(-M-a,-w-o),r.translate(M+a,w+o),r.rotate(2*Math.PI/3),r.translate(-M-a,-w-o)}}}getAppearanceForDice(t,i,r=null){let a;a=t[i]?t[i]:t.global;let o={colorset:a.colorset?a.colorset:t.global.colorset?t.global.colorset:"custom",foreground:a.labelColor?a.labelColor:t.global.labelColor?t.global.labelColor:"#FFFFFF",background:a.diceColor?a.diceColor:t.global.diceColor?t.global.diceColor:"#000000",texture:a.texture?a.texture:t.global.texture?t.global.texture:"none",material:a.material?a.material:t.global.material?t.global.material:"auto",font:a.font?a.font:t.global.font?t.global.font:"Arial",system:a.system?a.system:t.global.system?t.global.system:"standard"};if("custom"==o.colorset?(o.outline=a.outlineColor?a.outlineColor:"",o.edge=a.edgeColor?a.edgeColor:""):(o.outline=a.outlineColor?a.outlineColor:t.global.outlineColor?t.global.outlineColor:"",o.edge=a.edgeColor?a.edgeColor:t.global.edgeColor?t.global.edgeColor:""),o.colorset&&"custom"!=o.colorset){let t=DiceColors.getColorSet(o.colorset);o.foreground=t.foreground,o.background=t.background,o.outline=t.outline,o.edge=t.edge?t.edge:""}let l=this.getPresetBySystem(i,o.system);if(l.colorset){let t={...DiceColors.getColorSet(l.colorset)};Object.entries(t).forEach((i=>{"custom"==i[1]&&delete t[i[0]]})),foundry.utils.mergeObject(o,t,{performDeletions:!0}),o.colorset=l.colorset}if(r){let t=null;if(r.options.colorset?t=r.options.colorset:r.options.flavor&&c[r.options.flavor]?t=r.options.flavor:r.options.appearance&&r.options.appearance.colorset&&(t=r.options.appearance.colorset),t){let i=DiceColors.getColorSet(t);i.edge=i.edge?i.edge:"",o=i}r.options.appearance&&foundry.utils.mergeObject(o,r.options.appearance,{performDeletions:!0}),r.options.ghost&&(o.isGhost=!0)}return o}generateMaterialData(t,i){let r,a={};i.texture&&!i.texture.name&&(i.texture=DiceColors.getTexture(i.texture));let o=DiceColors.getColorSet(i.colorset);"custom"==o.foreground&&(o.foreground=i.foreground),"custom"==o.background&&(o.background=i.background),"custom"==o.texture&&(o.texture=i.texture),"custom"==o.material&&(o.material=i.material),"custom"==o.font&&(o.font=i.font),Array.isArray(i.background)?(r=Math.floor(Math.random()*i.background.length),Array.isArray(i.foreground)&&i.foreground.length==i.background.length&&(a.foreground=i.foreground[r],Array.isArray(i.outline)&&i.outline.length==i.foreground.length&&(a.outline=i.outline[r])),Array.isArray(i.texture)&&i.texture.length==i.background.length&&(a.texture=i.texture[r]),Array.isArray(i.edge)&&i.edge.length==i.background.length&&(a.edge=i.edge[r]),a.background=i.background[r]):a.background=i.background,a.edge||(Array.isArray(i.edge)?(r=Math.floor(Math.random()*i.edge.length),a.edge=i.edge[r]):a.edge=i.edge),a.foreground||(Array.isArray(i.foreground)?(r=i.foreground[Math.floor(Math.random()*i.foreground.length)],Array.isArray(i.outline)&&i.outline.length==i.foreground.length&&(a.outline=i.outline[r]),a.foreground=i.foreground[r]):a.foreground=i.foreground),a.outline||(Array.isArray(i.outline)?(r=i.outline[Math.floor(Math.random()*i.outline.length)],a.outline=i.outline[r]):a.outline=i.outline),a.texture||(Array.isArray(i.texture)?a.texture=i.texture[Math.floor(Math.random()*i.texture.length)]:"none"==i.texture.name?Array.isArray(o.texture)?a.texture=o.texture[Math.floor(Math.random()*o.texture.length)]:a.texture=o.texture:a.texture=i.texture);let l=Array.isArray(a.texture)?a.texture[0]:a.texture;return"auto"==i.material||""==i.material?o.material?a.material=o.material:a.material=l.material:a.material=i.material,"auto"==i.font?t.font?a.font=t.font:a.font=o.font:a.font=i.font,i.fontScale?a.fontScale=i.fontScale:t.fontScale?a.fontScale=t.fontScale:a.fontScale=o.fontScale,a.isGhost=!!i.isGhost&&i.isGhost,a.cacheString=i.system+a.background+a.foreground+a.outline+a.texture.name+a.edge+a.material+a.font+a.isGhost,a}calc_texture_size(t,i=!1){let r=0;return r=i?Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))):Math.pow(2,Math.floor(Math.log(t)/Math.log(2))),r}async createGeometry(t,i,r){if(!["d2","d4","d6","d8","d10","d12","d14","d16","d20","d24","d30"].includes(t))throw new Error(`Invalid geometry type: ${t}`);return this.loadGeometry(t,r)}loadGeometry(t,i){const r=(new BufferGeometryLoader).parse(u[t]);return r.scale(i/100,i/100,i/100),r}}class PlayAnimationBright extends i{static id="PlayAnimationBright";static specialEffectName="DICESONICE.PlayAnimationBright";static brightColor=null;static duration=.6;static sound="modules/dice-so-nice/sfx/sounds/bright.mp3";static async init(){PlayAnimationBright.brightColor=new gn(.3,.3,.3),this.glowingMesh=null,game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationBright.sound)}.bind(this))}async play(){if(!this.dicemesh.material&&this.dicemesh.userData.glow)this.dicemesh.traverse((t=>{t.userData&&t.userData.name&&t.userData.name===this.dicemesh.userData.glow&&(this.glowingMesh=t)}));else{if(!this.dicemesh.material)return!1;this.glowingMesh=this.dicemesh}if(!this.glowingMesh.material.emissiveMap)return!1;this.clock=new Clock,this.baseColor=this.glowingMesh.material.emissive.clone(),this.baseMaterial=this.glowingMesh.material;let t=this.baseMaterial.userData;this.baseMaterial.userData={},this.glowingMesh.material=this.baseMaterial.clone(),this.glowingMesh.userData=t,this.glowingMesh.material.onBeforeCompile=ShaderUtils.applyDiceSoNiceShader,foundry.audio.AudioHelper.play({src:PlayAnimationBright.sound,volume:this.volume},!1),this.renderReady=!0}render(){if(!this.renderReady)return;let t=1-(PlayAnimationBright.duration-this.clock.getElapsedTime())/PlayAnimationBright.duration;if(t>1)this.destroy();else{let i=(Math.sin(2*Math.PI*(t-1/4))+1)/2;this.glowingMesh.material.emissive.copy(this.baseColor),this.glowingMesh.material.emissive.lerp(PlayAnimationBright.brightColor,i)}}destroy(){let t=this.glowingMesh.material;this.glowingMesh.material=this.baseMaterial,t.dispose(),this.destroyed=!0}}class PlayAnimationDark extends i{static id="PlayAnimationDark";static specialEffectName="DICESONICE.PlayAnimationDark";static darkColor=null;static duration=1.5;static sound="modules/dice-so-nice/sfx/sounds/darkness.mp3";static async init(){PlayAnimationDark.darkColor=new gn(.1,.1,.1),game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationDark.sound)}.bind(this))}async play(){if(!this.dicemesh.material&&this.dicemesh.userData.glow)this.dicemesh.traverse((t=>{t.userData&&t.userData.name&&t.userData.name===this.dicemesh.userData.glow&&(this.glowingMesh=t)}));else{if(!this.dicemesh.material)return!1;this.glowingMesh=this.dicemesh}this.clock=new Clock,this.baseColor=this.glowingMesh.material.color.clone(),this.baseMaterial=this.glowingMesh.material;let t=this.baseMaterial.userData;this.baseMaterial.userData={},this.glowingMesh.material=this.baseMaterial.clone(),this.glowingMesh.userData=t,this.glowingMesh.material.onBeforeCompile=ShaderUtils.applyDiceSoNiceShader,foundry.audio.AudioHelper.play({src:PlayAnimationDark.sound,volume:this.volume},!1),this.renderReady=!0}render(){if(!this.renderReady)return;let t=1-(PlayAnimationDark.duration-this.clock.getElapsedTime())/PlayAnimationDark.duration;if(t>1)this.destroy();else{let i=.05172144+9.269017*t-26.55545*t**2+26.19969*t**3-8.977907*t**4;i=Math.min(Math.max(i,0),1),this.glowingMesh.material.color.copy(this.baseColor),this.glowingMesh.material.color.lerp(PlayAnimationDark.darkColor,i)}}destroy(){let t=this.glowingMesh.material;this.glowingMesh.material=this.baseMaterial,t.dispose(),this.destroyed=!0}}class PlayAnimationImpact extends i{static id="PlayAnimationImpact";static specialEffectName="DICESONICE.PlayAnimationImpact";static sound="modules/dice-so-nice/sfx/sounds/hit_glass.mp3";static planeImpact=null;static duration=.1;constructor(t,i){super(t,i),this.enableGC=!0}static async init(){game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationImpact.sound)}.bind(this));let t=await this.loadAsset(Ua.TextureLoader,"modules/dice-so-nice/sfx/textures/glassimpact_color.webp");const i=new PlaneGeometry(730,730),r=new MeshStandardMaterial({map:t,transparent:!0,opacity:2});PlayAnimationImpact.planeImpact=new Mesh(i,r)}async play(){this.clock=new Clock,this.plane=PlayAnimationImpact.planeImpact.clone(),this.plane.receiveShadow=this.box.shadows;let t=this.box.dicefactory.baseScale/100;switch(this.dicemesh.shape){case"d2":case"d20":t*=1.3;break;case"d4":case"d8":t*=1.1;break;case"d6":case"d10":break;case"d12":t*=1.2}this.plane.scale.set(t,t,t),this.plane.position.x=this.dicemesh.parent.position.x,this.plane.position.y=this.dicemesh.parent.position.y,this.plane.rotation.z=Math.random()*Math.PI*2,this.box.scene.add(this.plane),foundry.audio.AudioHelper.play({src:PlayAnimationImpact.sound,volume:this.volume},!1),this.dicemesh.position.z-=1}destroy(){this.box.scene.remove(this.plane),this.destroyed=!0}}function Proton(t,i){this.preParticles=Proton.Util.initValue(t,Proton.POOL_MAX),this.integrationType=Proton.Util.initValue(i,Proton.EULER),this.emitters=[],this.renderers=[],this.pool=new Proton.Pool,Proton.integrator=new Proton.Integration(this.integrationType)}function EventDispatcher(){this.initialize()}
/*!
 * three.proton v0.2.0
 * https://github.com/drawcall/three.proton
 *
 * Copyright 2011-2020, ajiemath
 * Licensed under the MIT license
 * http://www.opensource.org/licenses/mit-license
 *
 */
Proton.POOL_MAX=500,Proton.TIME_STEP=60,Proton.PI=3.142,Proton.DR=Proton.PI/180,Proton.MEASURE=100,Proton.EULER="euler",Proton.RK2="runge-kutta2",Proton.RK4="runge-kutta4",Proton.VERLET="verlet",Proton.PARTICLE_CREATED="partilcleCreated",Proton.PARTICLE_UPDATE="partilcleUpdate",Proton.PARTICLE_SLEEP="particleSleep",Proton.PARTICLE_DEAD="partilcleDead",Proton.PROTON_UPDATE="protonUpdate",Proton.PROTON_UPDATE_AFTER="protonUpdateAfter",Proton.EMITTER_ADDED="emitterAdded",Proton.EMITTER_REMOVED="emitterRemoved",Proton.bindEmtterEvent=!1,Proton.prototype={addRender:function(t){this.renderers.push(t),t.init(this)},removeRender:function(t){this.renderers.splice(this.renderers.indexOf(t),1),t.remove(this)},addEmitter:function(t){this.emitters.push(t),t.parent=this,this.dispatchEvent("EMITTER_ADDED",t)},removeEmitter:function(t){t.parent==this&&(this.emitters.splice(this.emitters.indexOf(t),1),t.parent=null,this.dispatchEvent("EMITTER_REMOVED",t))},update:function(t){this.dispatchEvent("PROTON_UPDATE",this);var i=t||.0167;if(i>0)for(var r=this.emitters.length;r--;)this.emitters[r].update(i);this.dispatchEvent("PROTON_UPDATE_AFTER",this)},getCount:function(){var t,i=0,r=this.emitters.length;for(t=0;t<r;t++)i+=this.emitters[t].particles.length;return i},destroy:function(){for(var t=this.emitters.length;t--;)this.emitters[t].destroy();this.emitters.length=0,this.pool.destroy()}},EventDispatcher.initialize=function(t){t.addEventListener=ba.addEventListener,t.removeEventListener=ba.removeEventListener,t.removeAllEventListeners=ba.removeAllEventListeners,t.hasEventListener=ba.hasEventListener,t.dispatchEvent=ba.dispatchEvent};var ba=EventDispatcher.prototype;ba._listeners=null,ba.initialize=function(){},ba.addEventListener=function(t,i){return this._listeners?this.removeEventListener(t,i):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(i),i},ba.removeEventListener=function(t,i){if(this._listeners&&this._listeners[t])for(var r=this._listeners[t],a=0,o=r.length;a<o;a++)if(r[a]==i){1==o?delete this._listeners[t]:r.splice(a,1);break}},ba.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},ba.dispatchEvent=function(t,i){var r=!1,a=this._listeners;if(t&&a){var o=a[t];if(!o)return r;for(var l=(o=o.slice()).length;l--;){var c=o[l];r=r||c(i)}}return!!r},ba.hasEventListener=function(t){var i=this._listeners;return!(!i||!i[t])},EventDispatcher.initialize(Proton.prototype),Proton.EventDispatcher=EventDispatcher;var _a=_a||{initValue:function(t,i){return t=null!=t&&null!=t?t:i},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},destroyArray:function(t){t.length=0},destroyObject:function(t){for(var i in t)delete t[i]},isUndefined:function(){for(var t in arguments){if(void 0!==arguments[t])return!1}return!0},setVectorByObj:function(t,i){void 0!==i.x&&(t.p.x=i.x),void 0!==i.y&&(t.p.y=i.y),void 0!==i.z&&(t.p.z=i.z),void 0!==i.vx&&(t.v.x=i.vx),void 0!==i.vy&&(t.v.y=i.vy),void 0!==i.vz&&(t.v.z=i.vz),void 0!==i.ax&&(t.a.x=i.ax),void 0!==i.ay&&(t.a.y=i.ay),void 0!==i.az&&(t.a.z=i.az),void 0!==i.p&&t.p.copy(i.p),void 0!==i.v&&t.v.copy(i.v),void 0!==i.a&&t.a.copy(i.a),void 0!==i.position&&t.p.copy(i.position),void 0!==i.velocity&&t.v.copy(i.velocity),void 0!==i.accelerate&&t.a.copy(i.accelerate)},setPrototypeByObj:function(t,i,r){for(var a in i)t.hasOwnProperty(a)&&(r?r.indexOf(a)<0&&(t[a]=_a._getValue(i[a])):t[a]=_a._getValue(i[a]));return t},_getValue:function(t){return t instanceof Span?t.getValue():t},inherits:function(t,i){if(t._super_=i,Object.create)t.prototype=Object.create(i.prototype,{constructor:{value:t}});else{var F=function(){};F.prototype=i.prototype,t.prototype=new F,t.prototype.constructor=t}}};Proton.Util=_a;var Sa=Sa||{getRGB:function(t){var i={};if("number"==typeof t)a=Math.floor(t),i.r=(t>>16&255)/255,i.g=(t>>8&255)/255,i.b=(255&t)/255;else if("string"==typeof t){var r;if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t))i.r=Math.min(255,parseInt(r[1],10))/255,i.g=Math.min(255,parseInt(r[2],10))/255,i.b=Math.min(255,parseInt(r[3],10))/255;else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var a=r[1];i.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,i.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,i.b=parseInt(a.charAt(4)+a.charAt(5),16)/255}}else t instanceof gn&&(i.r=t.r,i.g=t.g,i.b=t.b);return i}};Proton.ColorUtil=Sa;var Ma,wa,Ea={toScreenPos:(wa=new Vector3,function(t,i,r){return wa.copy(t),wa.project(i),wa.x=Math.round((wa.x+1)*r.width/2),wa.y=Math.round((1-wa.y)*r.height/2),wa.z=0,wa}),toSpacePos:function(){var t,i=new Vector3,r=new Vector3;return function(a,o,l){return i.set(a.x/l.width*2-1,-a.y/l.height*2+1,.5),i.unproject(o),r.copy(i.sub(o.position).normalize()),t=-o.position.z/r.z,i.copy(o.position),i.add(r.multiplyScalar(t)),i}}(),getTexture:(Ma={},function(t){if(t instanceof Texture)return t;if("string"==typeof t){var i=Proton.PUID.hash(t);return Ma[i]||(Ma[i]=new Texture(t)),Ma[i]}return t instanceof Image?(i=Proton.PUID.hash(t.src),Ma[i]||(Ma[i]=new Texture(t)),Ma[i]):void 0})};Proton.THREEUtil=Ea;var Ta=Ta||{_id:0,_uids:{},id:function(t){for(var i in this._uids)if(this._uids[i]==t)return i;var r="PUID_"+this._id++;return this._uids[r]=t,r},hash:function(t){}};function Particle(t){this.id="particle_"+Particle.ID++,this.name="Particle",this.reset("init"),Proton.Util.setPrototypeByObj(this,t)}function Pool(){this.cID=0,this.list={}}Proton.PUID=Ta,Particle.ID=0,Particle.prototype={getDirection:function(){return Math.atan2(this.v.x,-this.v.y)*(180/Proton.PI)},reset:function(t){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.useColor=!1,this.useAlpha=!1,this.easing=Proton.ease.setEasingByName(Proton.ease.easeLinear),t?(this.p=new Proton.Vector3D,this.v=new Proton.Vector3D,this.a=new Proton.Vector3D,this.old={},this.old.p=this.p.clone(),this.old.v=this.v.clone(),this.old.a=this.a.clone(),this.behaviours=[],this.transform={},this.color={r:0,g:0,b:0},this.rotation=new Proton.Vector3D):(this.p.set(0,0,0),this.v.set(0,0,0),this.a.set(0,0,0),this.old.p.set(0,0,0),this.old.v.set(0,0,0),this.old.a.set(0,0,0),this.color.r=0,this.color.g=0,this.color.b=0,this.rotation.clear(),Proton.Util.destroyObject(this.transform),this.removeAllBehaviours()),this},update:function(t,i){if(!this.sleep){this.age+=t;for(var r=this.behaviours.length;r--;)this.behaviours[r]&&this.behaviours[r].applyBehaviour(this,t,i)}if(this.age>=this.life)this.destroy();else{var a=this.easing(this.age/this.life);this.energy=Math.max(1-a,0)}},addBehaviour:function(t){this.behaviours.push(t),t.initialize(this)},addBehaviours:function(t){for(var i=t.length;i--;)this.addBehaviour(t[i])},removeBehaviour:function(t){var i=this.behaviours.indexOf(t);i>-1&&this.behaviours.splice(i,1)},removeAllBehaviours:function(){Proton.Util.destroyArray(this.behaviours)},destroy:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}},Proton.Particle=Particle,Pool.prototype={create:function(t){return this.cID++,"function"==typeof t?new t:t.clone()},getCount:function(){var t=0;for(var i in this.list)t+=this.list[i].length;return t++},get:function(t){var i,r=t.__puid||Proton.PUID.id(t);return(i=this.list[r]&&this.list[r].length>0?this.list[r].pop():this.create(t)).__puid=t.__puid||r,i},expire:function(t){return this._getList(t.__puid).push(t)},destroy:function(){for(var t in this.list)this.list[t].length=0,delete this.list[t]},_getList:function(t){return t=t||"default",this.list[t]||(this.list[t]=[]),this.list[t]}},Proton.Pool=Pool;var Aa={randomAToB:function(t,i,r){return r?(Math.random()*(i-t)|0)+t:t+Math.random()*(i-t)},randomFloating:function(t,i,r){return Aa.randomAToB(t-i,t+i,r)},randomZone:function(t){},degreeTransform:function(t){return t*Proton.PI/180},toColor16:function getRGB(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()|0).toString(16)).slice(-6)},lerp:function(t,i,r){return i+(t-i)*r},getNormal:function(t,i){return 0==t.x&&0==t.y?0==t.z?i.set(1,0,1):i.set(1,1,-t.y/t.z):0==t.x?i.set(1,0,1):i.set(-t.y/t.x,1,1),i.normalize()},axisRotate:function(t,i,r,a){var o=Math.cos(a),l=Math.sin(a),c=r.dot(i)*(1-o);t.copy(r),t.cross(i).scalar(l),t.addValue(i.x*o,i.y*o,i.z*o),t.addValue(r.x*c,r.y*c,r.z*c)}};Proton.MathUtils=Aa;var Integration=function(t){this.type=Proton.Util.initValue(t,Proton.EULER)};Integration.prototype={integrate:function(t,i,r){this.euler(t,i,r)},euler:function(t,i,r){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.scalar(1/t.mass),t.v.add(t.a.scalar(i)),t.p.add(t.old.v.scalar(i)),r&&t.v.scalar(r),t.a.clear())}},Proton.Integration=Integration;var Ca,Vector3D=function(t,i,r){this.x=t||0,this.y=i||0,this.z=r||0};Vector3D.prototype={set:function(t,i,r){return this.x=t,this.y=i,this.z=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},getGradient:function(){return 0!=this.x?Math.atan2(this.y,this.x):this.y>0?Proton.PI/2:this.y<0?-Proton.PI/2:void 0},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?this.addVectors(t,i):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addValue:function(t,i,r){return this.x+=t,this.y+=i,this.z+=r,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},sub:function(t,i){return void 0!==i?this.subVectors(t,i):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},scalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return 0!==t?(this.x/=t,this.y/=t,this.z/=t):this.set(0,0,0),this},negate:function(){return this.scalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,r=this.y,a=this.z;return this.x=r*t.z-a*t.y,this.y=a*t.x-i*t.z,this.z=i*t.y-r*t.x,this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},crossVectors:function(t,i){var r=t.x,a=t.y,o=t.z,l=i.x,c=i.y,h=i.z;return this.x=a*h-o*c,this.y=o*l-r*h,this.z=r*c-a*l,this},eulerFromDir:function(t){},applyEuler:function applyEuler(t){return void 0===Ca&&(Ca=new Proton.Quaternion),this.applyQuaternion(Ca.setFromEuler(t)),this},applyAxisAngle:function(){var t;return function applyAxisAngle(i,r){return void 0===t&&(t=new Proton.Quaternion),this.applyQuaternion(t.setFromAxisAngle(i,r)),this}}(),applyQuaternion:function(t){var i=this.x,r=this.y,a=this.z,o=t.x,l=t.y,c=t.z,h=t.w,u=h*i+l*a-c*r,d=h*r+c*i-o*a,p=h*a+o*r-l*i,m=-o*i-l*r-c*a;return this.x=u*h+m*-o+d*-c-p*-l,this.y=d*h+m*-l+p*-o-u*-c,this.z=p*h+m*-c+u*-l-d*-o,this},distanceToSquared:function(t){var i=this.x-t.x,r=this.y-t.y,a=this.z-t.z;return i*i+r*r+a*a},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},clear:function(){return this.x=0,this.y=0,this.z=0,this},clone:function(){return new Proton.Vector3D(this.x,this.y,this.z)},toString:function(){return"x:"+this.x+"y:"+this.y+"z:"+this.z}},Proton.Vector3D=Vector3D;var Polar3D=function(t,i,r){this.radius=t||1,this.phi=r||0,this.theta=i||0};function Span(t,i,r){this._isArray=!1,Proton.Util.isArray(t)?(this._isArray=!0,this.a=t):(this.a=Proton.Util.initValue(t,1),this.b=Proton.Util.initValue(i,this.a),this._center=Proton.Util.initValue(r,!1))}function ArraySpan(t){this._arr=Proton.Util.isArray(t)?t:[t]}Polar3D.prototype={set:function(t,i,r){return this.radius=t||1,this.phi=r||0,this.theta=i||0,this},setRadius:function(t){return this.radius=t,this},setPhi:function(t){return this.phi=t,this},setTheta:function(t){return this.theta=t,this},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},toVector3D:function(){return new Proton.Vector3D(this.getX(),this.getY(),this.getZ())},getX:function(){return this.radius*Math.sin(this.theta)*Math.cos(this.phi)},getY:function(){return-this.radius*Math.sin(this.theta)*Math.sin(this.phi)},getZ:function(){return this.radius*Math.cos(this.theta)},normalize:function(){return this.radius=1,this},equals:function(t){return t.radius===this.radius&&t.phi===this.phi&&t.theta===this.theta},clear:function(){return this.radius=0,this.phi=0,this.theta=0,this},clone:function(){return new Polar3D(this.radius,this.phi,this.theta)}},Proton.Polar3D=Polar3D,Span.prototype={getValue:function(t){return this._isArray?this.a[this.a.length*Math.random()|0]:this._center?Proton.MathUtils.randomFloating(this.a,this.b,t):Proton.MathUtils.randomAToB(this.a,this.b,t)}},Proton.createSpan=function(t,i,r){return t instanceof Span?t:void 0===i?new Span(t):void 0===r?new Span(t,i):new Span(t,i,r)},Proton.Span=Span,Proton.Util.inherits(ArraySpan,Proton.Span),ArraySpan.prototype.getValue=function(){var t=this._arr[this._arr.length*Math.random()|0];return"random"==t||"Random"==t?Proton.MathUtils.randomColor():t},Proton.createArraySpan=function(t){return t?t instanceof Proton.ArraySpan?t:new Proton.ArraySpan(t):null},Proton.ArraySpan=ArraySpan;var Quaternion=function(t,i,r,a){this.x=t||0,this.y=i||0,this.z=r||0,this.w=void 0!==a?a:1};function Box(t,i,r,a,o,l){this.x=t,this.y=i,this.z=r,this.width=a,this.height=o,this.depth=l,this.bottom=this.y+this.height,this.right=this.x+this.width,this.right=this.x+this.width}function Behaviour(t,i){this.id="Behaviour_"+Behaviour.id++,this.life=Proton.Util.initValue(t,1/0),this.easing=Proton.Util.initValue(i,Proton.ease.setEasingByName(Proton.ease.easeLinear)),this.age=0,this.energy=1,this.dead=!1,this.name="Behaviour"}function Rate(t,i){this.numPan=Proton.createSpan(Proton.Util.initValue(t,1)),this.timePan=Proton.createSpan(Proton.Util.initValue(i,1)),this.startTime=0,this.nextTime=0,this.init()}function Initialize(){this.name="Initialize"}Quaternion.prototype={set:function(t,i,r,a){return this.x=t,this.y=i,this.z=r,this.w=a,this},clone:function(){return new Proton.Quaternion(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEuler:function(t){var i=Math.cos(t.x/2),r=Math.cos(t.y/2),a=Math.cos(t.z/2),o=Math.sin(t.x/2),l=Math.sin(t.y/2),c=Math.sin(t.z/2);return this.x=o*r*a+i*l*c,this.y=i*l*a-o*r*c,this.z=i*r*c+o*l*a,this.w=i*r*a-o*l*c,this},setFromAxisAngle:function(t,i){var r=i/2,a=Math.sin(r);return this.x=t.x*a,this.y=t.y*a,this.z=t.z*a,this.w=Math.cos(r),this},normalize:function(){var t=this.length();return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},Proton.Quaternion=Quaternion,Box.prototype={contains:function(t,i,r){return t<=this.right&&t>=this.x&&i<=this.bottom&&i>=this.y&&r<=this.depth&&r>=this.z}},Proton.Box=Box,Behaviour.id=0,Behaviour.prototype={reset:function(t,i){this.life=Proton.Util.initValue(t,1/0),this.easing=Proton.Util.initValue(i,Proton.ease.setEasingByName(Proton.ease.easeLinear))},normalizeForce:function(t){return t.scalar(Proton.MEASURE)},normalizeValue:function(t){return t*Proton.MEASURE},initialize:function(t){},applyBehaviour:function(t,i,r){if(!this.dead){if(this.age+=i,this.age>=this.life)return this.energy=0,void(this.dead=!0);var a=this.easing(t.age/t.life);this.energy=Math.max(1-a,0)}},destroy:function(){}},Proton.Behaviour=Behaviour,Rate.prototype={init:function(){this.startTime=0,this.nextTime=this.timePan.getValue()},getValue:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.init(),1==this.numPan.b?this.numPan.getValue("Float")>.5?1:0:this.numPan.getValue("Int")):0}},Proton.Rate=Rate,Initialize.prototype.reset=function(){},Initialize.prototype.init=function(t,i){i?this.initialize(i):this.initialize(t)},Initialize.prototype.initialize=function(t){},Proton.Initialize=Initialize;var Pa,Ra,Ia,Da={initialize:function(t,i,r){for(var a=r.length;a--;){var o=r[a];o instanceof Proton.Initialize?o.init(t,i):Da.init(t,i,o)}Da.bindEmitter(t,i)},init:function(t,i,r){Proton.Util.setPrototypeByObj(i,r),Proton.Util.setVectorByObj(i,r)},bindEmitter:function(t,i){t.bindEmitter&&(i.p.add(t.p),i.v.add(t.v),i.a.add(t.a),i.v.applyEuler(t.rotation))}};function Life(t,i,r){Life._super_.call(this),this.lifePan=Proton.createSpan(t,i,r)}function Position(){Position._super_.call(this),this.reset.apply(this,arguments)}function Velocity(t,i,r){Velocity._super_.call(this),this.reset(t,i,r),this.dirVec=new Proton.Vector3D(0,0,0),this.name="Velocity"}function Mass(t,i,r){Mass._super_.call(this),this.massPan=Proton.createSpan(t,i,r)}function Radius(t,i,r){Radius._super_.call(this),this.radius=Proton.createSpan(t,i,r)}function Body(t,i,r){Body._super_.call(this),this.body=Proton.createArraySpan(t),this.w=i,this.h=Proton.Util.initValue(r,this.w)}function Force(t,i,r,a,o){Force._super_.call(this,a,o),Force.prototype.reset.call(this,t,i,r),this.name="Force"}function Attraction(t,i,r,a,o){Attraction._super_.call(this,a,o),this.targetPosition=Proton.Util.initValue(t,new Proton.Vector3D),this.radius=Proton.Util.initValue(r,1e3),this.force=Proton.Util.initValue(this.normalizeValue(i),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new Proton.Vector3D,this.lengthSq=0,this.name="Attraction"}function RandomDrift(t,i,r,a,o,l){RandomDrift._super_.call(this,o,l),this.reset(t,i,r,a),this.time=0,this.name="RandomDrift"}function Repulsion(t,i,r,a,o){Repulsion._super_.call(this,t,i,r,a,o),this.force*=-1,this.name="Repulsion"}function Gravity(t,i,r){Gravity._super_.call(this,0,-t,0,i,r),this.name="Gravity"}function Collision(t,i,r,a,o){Collision._super_.call(this,a,o),this.reset(t,i,r),this.name="Collision"}function CrossZone(t,i,r,a){CrossZone._super_.call(this,r,a),this.reset(t,i),this.name="CrossZone"}function Alpha(t,i,r,a){Alpha._super_.call(this,r,a),this.reset(t,i),this.name="Alpha"}function Scale(t,i,r,a){Scale._super_.call(this,r,a),this.reset(t,i),this.name="Scale"}function Rotate(t,i,r,a,o){Rotate._super_.call(this,a,o),this.reset(t,i,r),this.name="Rotate"}function Color(t,i,r,a){Color._super_.call(this,r,a),this.reset(t,i),this.name="Color"}function Spring(t,i,r,a,o,l,c){Spring._super_.call(this,l,c),Spring.prototype.reset(t,i,r,a,o),this.name="Spring"}function Emitter(t){this.initializes=[],this.particles=[],this.behaviours=[],this.currentEmitTime=0,this.totalEmitTimes=-1,this.damping=.006,this.bindEmitter=!0,this.rate=new Proton.Rate(1,.1),Emitter._super_.call(this,t),this.id="emitter_"+Emitter.ID++,this.cID=0,this.name="Emitter"}function BehaviourEmitter(t){this.selfBehaviours=[],BehaviourEmitter._super_.call(this,t)}function FollowEmitter(t,i,r){this.mouseTarget=Proton.Util.initValue(t,window),this.ease=Proton.Util.initValue(i,.7),this._allowEmitting=!1,this.mouse=new Proton.Vector3D,this.initEventHandler(),FollowEmitter._super_.call(this,r)}Proton.InitializeUtil=Da,Proton.Util.inherits(Life,Proton.Initialize),Life.prototype.initialize=function(t){this.lifePan.a==1/0||"infi"==this.lifePan.a?t.life=1/0:t.life=this.lifePan.getValue()},Proton.Life=Life,Proton.Util.inherits(Position,Proton.Initialize),Position.prototype.reset=function(){this.zones?this.zones.length=0:this.zones=[];var t=Array.prototype.slice.call(arguments);this.zones=this.zones.concat(t)},Position.prototype.addZone=function(){var t=Array.prototype.slice.call(arguments);this.zones=this.zones.concat(t)},Position.prototype.initialize=function(t){var i=this.zones[Math.random()*this.zones.length|0];i.getPosition(),t.p.x=i.vector.x,t.p.y=i.vector.y,t.p.z=i.vector.z},Proton.Position=Position,Proton.P=Position,Proton.Util.inherits(Velocity,Proton.Initialize),Velocity.prototype.reset=function(t,i,r){t instanceof Proton.Vector3D?(this.radiusPan=Proton.createSpan(1),this.dir=t.clone(),this.tha=i*Proton.DR,this._useV=!0):t instanceof Proton.Polar3D?(this.tha=i*Proton.DR,this.dirVec=t.toVector3D(),this._useV=!1):(this.radiusPan=Proton.createSpan(t),this.dir=i.clone().normalize(),this.tha=r*Proton.DR,this._useV=!0)},Velocity.prototype.normalize=function(t){return t*Proton.MEASURE},Velocity.prototype.initialize=(Ra=new Proton.Vector3D(0,0,1),Ia=new Proton.Vector3D(0,0,0),function initialize(t){return Pa=this.tha*Math.random(),this._useV&&this.dirVec.copy(this.dir).scalar(this.radiusPan.getValue()),Proton.MathUtils.getNormal(this.dirVec,Ra),Ia.copy(this.dirVec).applyAxisAngle(Ra,Pa),Ia.applyAxisAngle(this.dirVec.normalize(),Math.random()*Proton.PI*2),t.v.copy(Ia),this}),Proton.Velocity=Velocity,Proton.V=Velocity,Proton.Util.inherits(Mass,Proton.Initialize),Mass.prototype.initialize=function(t){t.mass=this.massPan.getValue()},Proton.Mass=Mass,Proton.Util.inherits(Radius,Proton.Initialize),Radius.prototype.reset=function(t,i,r){this.radius=Proton.createSpan(t,i,r)},Radius.prototype.initialize=function(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius},Proton.Radius=Radius,Proton.Util.inherits(Body,Proton.Initialize),Body.prototype.initialize=function(t){var i=this.body.getValue();this.w?t.body={width:this.w,height:this.h,body:i}:t.body=i},Proton.Body=Body,Proton.Util.inherits(Force,Proton.Behaviour),Force.prototype.reset=function(t,i,r){this.force=this.normalizeForce(new Proton.Vector3D(t,i,r)),this.force.id=Math.random()},Force.prototype.applyBehaviour=function(t,i,r){Force._super_.prototype.applyBehaviour.call(this,t,i,r),t.a.add(this.force)},Proton.F=Proton.Force=Force,Proton.Util.inherits(Attraction,Proton.Behaviour),Attraction.prototype.reset=function(t,i,r,a,o){this.targetPosition=Proton.Util.initValue(t,new Proton.Vector3D),this.radius=Proton.Util.initValue(r,1e3),this.force=Proton.Util.initValue(this.normalizeValue(i),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new Proton.Vector3D,this.lengthSq=0,a&&Attraction._super_.prototype.reset.call(this,a,o)},Attraction.prototype.applyBehaviour=function(t,i,r){Attraction._super_.prototype.applyBehaviour.call(this,t,i,r),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.scalar(1-this.lengthSq/this.radiusSq),this.attractionForce.scalar(this.force),t.a.add(this.attractionForce))},Proton.Attraction=Attraction,Proton.Util.inherits(RandomDrift,Proton.Behaviour),RandomDrift.prototype.reset=function(t,i,r,a,o,l){this.randomFoce=this.normalizeForce(new Proton.Vector3D(t,i,r)),this.delayPan=Proton.createSpan(a||.03),this.time=0,o&&RandomDrift._super_.prototype.reset.call(this,o,l)},RandomDrift.prototype.applyBehaviour=function(t,i,r){if(RandomDrift._super_.prototype.applyBehaviour.call(this,t,i,r),this.time+=i,this.time>=this.delayPan.getValue()){var a=Proton.MathUtils.randomAToB(-this.randomFoce.x,this.randomFoce.x),o=Proton.MathUtils.randomAToB(-this.randomFoce.y,this.randomFoce.y),l=Proton.MathUtils.randomAToB(-this.randomFoce.z,this.randomFoce.z);t.a.addValue(a,o,l),this.time=0}},Proton.RandomDrift=RandomDrift,Proton.Util.inherits(Repulsion,Proton.Attraction),Repulsion.prototype.reset=function(t,i,r,a,o){Repulsion._super_.prototype.reset.call(this,t,i,r,a,o),this.force*=-1},Proton.Repulsion=Repulsion,Proton.Util.inherits(Gravity,Proton.Force),Gravity.prototype.reset=function(t,i,r){Gravity._super_.prototype.reset.call(this,0,-t,0,i,r)},Proton.Gravity=Gravity,Proton.G=Gravity,Proton.Util.inherits(Collision,Proton.Behaviour),Collision.prototype.reset=function(t,i,r,a,o){this.emitter=t,this.useMass=i,this.callback=r,this.particles=[],this.delta=new Proton.Vector3D,a&&Collision._super_.prototype.reset.call(this,a,o)},Collision.prototype.applyBehaviour=function(t,i,r){for(var a,o,l,c,h,u,d=this.emitter?this.emitter.particles.slice(r):this.particles.slice(r),p=d.length;p--;)(a=d[p])!=t&&(this.delta.copy(a.p).sub(t.p),(o=this.delta.lengthSq())<=(c=t.radius+a.radius)*c&&(l=c-Math.sqrt(o),l+=.5,h=this._getAverageMass(t,a),u=this._getAverageMass(a,t),t.p.add(this.delta.clone().normalize().scalar(l*-h)),a.p.add(this.delta.normalize().scalar(l*u)),this.callback&&this.callback(t,a)))},Collision.prototype._getAverageMass=function(t,i){return this.useMass?i.mass/(t.mass+i.mass):.5},Proton.Collision=Collision,Proton.Util.inherits(CrossZone,Proton.Behaviour),CrossZone.prototype.reset=function(t,i,r,a){var o,l;"string"==typeof t?(l=t,o=i):(l=i,o=t),this.zone=o,this.zone.crossType=Proton.Util.initValue(l,"dead"),r&&CrossZone._super_.prototype.reset.call(this,r,a)},CrossZone.prototype.applyBehaviour=function(t,i,r){CrossZone._super_.prototype.applyBehaviour.call(this,t,i,r),this.zone.crossing.call(this.zone,t)},Proton.CrossZone=CrossZone,Proton.Util.inherits(Alpha,Proton.Behaviour),Alpha.prototype.reset=function(t,i,r,a){this._same=null==i||null==i,this.a=Proton.createSpan(Proton.Util.initValue(t,1)),this.b=Proton.createSpan(i),r&&Alpha._super_.prototype.reset.call(this,r,a)},Alpha.prototype.initialize=function(t){t.useAlpha=!0,t.transform.alphaA=this.a.getValue(),this._same?t.transform.alphaB=t.transform.alphaA:t.transform.alphaB=this.b.getValue()},Alpha.prototype.applyBehaviour=function(t,i,r){Alpha._super_.prototype.applyBehaviour.call(this,t,i,r),t.alpha=Proton.MathUtils.lerp(t.transform.alphaA,t.transform.alphaB,this.energy),t.alpha<.002&&(t.alpha=0)},Proton.Alpha=Alpha,Proton.Util.inherits(Scale,Proton.Behaviour),Scale.prototype.reset=function(t,i,r,a){this._same=null==i||null==i,this.a=Proton.createSpan(Proton.Util.initValue(t,1)),this.b=Proton.createSpan(i),r&&Scale._super_.prototype.reset.call(this,r,a)},Scale.prototype.initialize=function(t){t.transform.scaleA=this.a.getValue(),t.transform.oldRadius=t.radius,this._same?t.transform.scaleB=t.transform.scaleA:t.transform.scaleB=this.b.getValue()},Scale.prototype.applyBehaviour=function(t,i,r){Scale._super_.prototype.applyBehaviour.call(this,t,i,r),t.scale=Proton.MathUtils.lerp(t.transform.scaleA,t.transform.scaleB,this.energy),t.scale<5e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale},Proton.Scale=Scale,Proton.Util.inherits(Rotate,Proton.Behaviour),Rotate.prototype.reset=function(t,i,r,a,o){this.a=t||0,this.b=i||0,this.c=r||0,void 0===t||"same"==t?this._type="same":null==i?this._type="set":void 0===r?this._type="to":(this._type="add",this.a=Proton.createSpan(this.a*Proton.DR),this.b=Proton.createSpan(this.b*Proton.DR),this.c=Proton.createSpan(this.c*Proton.DR)),a&&Rotate._super_.prototype.reset.call(this,a,o)},Rotate.prototype.initialize=function(t){switch(this._type){case"same":break;case"set":this._setRotation(t.rotation,this.a);break;case"to":t.transform.fR=t.transform.fR||new Proton.Vector3D,t.transform.tR=t.transform.tR||new Proton.Vector3D,this._setRotation(t.transform.fR,this.a),this._setRotation(t.transform.tR,this.b);break;case"add":this._setRotation(t.rotation,new Proton.Vector3D(0,0,Proton.MathUtils.randomAToB(-Proton.PI,Proton.PI))),t.transform.addR=new Proton.Vector3D(this.a.getValue(),this.b.getValue(),this.c.getValue())}},Rotate.prototype._setRotation=function(t,i){if(t=t||new Proton.Vector3D,"random"==i){var r=Proton.MathUtils.randomAToB(-Proton.PI,Proton.PI),a=Proton.MathUtils.randomAToB(-Proton.PI,Proton.PI),o=Proton.MathUtils.randomAToB(-Proton.PI,Proton.PI);t.set(r,a,o)}else i instanceof Proton.Vector3D&&t.copy(i)},Rotate.prototype.applyBehaviour=function(t,i,r){switch(Rotate._super_.prototype.applyBehaviour.call(this,t,i,r),this._type){case"same":t.rotation||(t.rotation=new Proton.Vector3D),t.rotation.eulerFromDir(t.v);break;case"set":break;case"to":t.rotation.x=Proton.MathUtils.lerp(t.transform.fR.x,t.transform.tR.x,this.energy),t.rotation.y=Proton.MathUtils.lerp(t.transform.fR.y,t.transform.tR.y,this.energy),t.rotation.z=Proton.MathUtils.lerp(t.transform.fR.z,t.transform.tR.z,this.energy);break;case"add":t.rotation.add(t.transform.addR)}},Proton.Rotate=Rotate,Proton.Util.inherits(Color,Proton.Behaviour),Color.prototype.reset=function(t,i,r,a){this._same=null==i||null==i,this.a=Proton.createArraySpan(t),this.b=Proton.createArraySpan(i),r&&Color._super_.prototype.reset.call(this,r,a)},Color.prototype.initialize=function(t){t.transform.colorA=Proton.ColorUtil.getRGB(this.a.getValue()),t.useColor=!0,this._same?t.transform.colorB=t.transform.colorA:t.transform.colorB=Proton.ColorUtil.getRGB(this.b.getValue())},Color.prototype.applyBehaviour=function(t,i,r){Color._super_.prototype.applyBehaviour.call(this,t,i,r),this._same?(t.color.r=t.transform.colorA.r,t.color.g=t.transform.colorA.g,t.color.b=t.transform.colorA.b):(t.color.r=Proton.MathUtils.lerp(t.transform.colorA.r,t.transform.colorB.r,this.energy),t.color.g=Proton.MathUtils.lerp(t.transform.colorA.g,t.transform.colorB.g,this.energy),t.color.b=Proton.MathUtils.lerp(t.transform.colorA.b,t.transform.colorB.b,this.energy))},Proton.Color=Color,Proton.Util.inherits(Spring,Proton.Behaviour),Spring.prototype.reset=function(t,i,r,a,o){this.pos?this.pos.set(t,i,r):this.pos=new Proton.Vector3D(t,i,r),this.spring=a||.1,this.friction=o||.98},Spring.prototype.applyBehaviour=function(t,i,r){Spring._super_.prototype.applyBehaviour.call(this,t,i,r),t.v.x+=(this.pos.x-t.p.x)*this.spring,t.v.y+=(this.pos.y-t.p.y)*this.spring,t.v.z+=(this.pos.z-t.p.z)*this.spring},Proton.Spring=Spring,Emitter.ID=0,Proton.Util.inherits(Emitter,Proton.Particle),Proton.EventDispatcher.initialize(Emitter.prototype),Emitter.prototype.emit=function(t,i){this.currentEmitTime=0,this.totalEmitTimes=Proton.Util.initValue(t,1/0),1==i||"life"==i||"destroy"==i?this.life="once"==t?1:this.totalEmitTimes:isNaN(i)||(this.life=i),this.rate.init()},Emitter.prototype.stopEmit=function(){this.totalEmitTimes=-1,this.currentEmitTime=0},Emitter.prototype.removeAllParticles=function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0,this.particles[t].target.parent.remove(this.particles[t].target)},Emitter.prototype.createParticle=function(t,i){var r=this.parent.pool.get(Proton.Particle);return this.setupParticle(r,t,i),this.parent&&this.parent.dispatchEvent("PARTICLE_CREATED",r),Proton.bindEmtterEvent&&this.dispatchEvent("PARTICLE_CREATED",r),r},Emitter.prototype.addSelfInitialize=function(t){t.init?t.init(this):this.initAll()},Emitter.prototype.addInitialize=function(){for(var t=arguments.length;t--;)this.initializes.push(arguments[t])},Emitter.prototype.removeInitialize=function(t){var i=this.initializes.indexOf(t);i>-1&&this.initializes.splice(i,1)},Emitter.prototype.removeInitializers=function(){Proton.Util.destroyArray(this.initializes)},Emitter.prototype.addBehaviour=function(){for(var t=arguments.length;t--;)this.behaviours.push(arguments[t])},Emitter.prototype.removeBehaviour=function(t){var i=this.behaviours.indexOf(t);i>-1&&this.behaviours.splice(i,1)},Emitter.prototype.removeAllBehaviours=function(){Proton.Util.destroyArray(this.behaviours)},Emitter.prototype.integrate=function(t){var i=1-this.damping;Proton.integrator.integrate(this,t,i);for(var r=this.particles.length;r--;){var a=this.particles[r];a.update(t,r),Proton.integrator.integrate(a,t,i),this.parent&&this.parent.dispatchEvent("PARTICLE_UPDATE",a),Proton.bindEmtterEvent&&this.dispatchEvent("PARTICLE_UPDATE",a)}},Emitter.prototype.emitting=function(t){if("once"==this.totalEmitTimes){for((i=this.rate.getValue(99999))>0&&(this.cID=i);i--;)this.createParticle();this.totalEmitTimes="none"}else if(!isNaN(this.totalEmitTimes)){var i;if(this.currentEmitTime+=t,this.currentEmitTime<this.totalEmitTimes)for((i=this.rate.getValue(t))>0&&(this.cID=i);i--;)this.createParticle()}},Emitter.prototype.update=function(t){this.age+=t,(this.dead||this.age>=this.life)&&this.destroy(),this.emitting(t),this.integrate(t);for(var i,r=this.particles.length;r--;)(i=this.particles[r]).dead&&(this.parent&&this.parent.dispatchEvent("PARTICLE_DEAD",i),Proton.bindEmtterEvent&&this.dispatchEvent("PARTICLE_DEAD",i),this.parent.pool.expire(i.reset()),this.particles.splice(r,1))},Emitter.prototype.setupParticle=function(t,i,r){var a=this.initializes,o=this.behaviours;i&&(a=Proton.Util.isArray(i)?i:[i]),r&&(o=Proton.Util.isArray(r)?r:[r]),Proton.InitializeUtil.initialize(this,t,a),t.addBehaviours(o),t.parent=this,this.particles.push(t)},Emitter.prototype.destroy=function(){this.dead=!0,this.energy=0,this.totalEmitTimes=-1,0==this.particles.length&&(this.removeInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this))},Proton.Emitter=Emitter,Proton.Util.inherits(BehaviourEmitter,Proton.Emitter),BehaviourEmitter.prototype.addSelfBehaviour=function(){var t,i=arguments.length;for(t=0;t<i;t++)this.selfBehaviours.push(arguments[t])},BehaviourEmitter.prototype.removeSelfBehaviour=function(t){var i=this.selfBehaviours.indexOf(t);i>-1&&this.selfBehaviours.splice(i,1)},BehaviourEmitter.prototype.update=function(t){if(BehaviourEmitter._super_.prototype.update.call(this,t),!this.sleep){var i,r=this.selfBehaviours.length;for(i=0;i<r;i++)this.selfBehaviours[i].applyBehaviour(this,t,i)}},Proton.BehaviourEmitter=BehaviourEmitter,Proton.Util.inherits(FollowEmitter,Proton.Emitter),FollowEmitter.prototype.initEventHandler=function(){var t=this;this.mousemoveHandler=function(i){t.mousemove.call(t,i)},this.mousedownHandler=function(i){t.mousedown.call(t,i)},this.mouseupHandler=function(i){t.mouseup.call(t,i)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)},FollowEmitter.prototype.emit=function(){this._allowEmitting=!0},FollowEmitter.prototype.stopEmit=function(){this._allowEmitting=!1},FollowEmitter.prototype.setCameraAndCanvas=function(t,i){this.camera=t,this.canvas=i},FollowEmitter.prototype.setCameraAndRenderer=function(t,i){this.camera=t,this.renderer=i,this.canvas=i.domElement},FollowEmitter.prototype.mousemove=function(t){var i=this.canvas.getBoundingClientRect(),r=t.clientX-i.left,a=t.clientY-i.top,o=this.renderer?this.renderer.getPixelRatio():1;r*=o,a*=o,this.mouse.x+=(r-this.mouse.x)*this.ease,this.mouse.y+=(a-this.mouse.y)*this.ease,this.p.copy(Proton.THREEUtil.toSpacePos(this.mouse,this.camera,this.canvas,this.renderer)),this._allowEmitting&&FollowEmitter._super_.prototype.emit.call(this,"once")},FollowEmitter.prototype.destroy=function(){FollowEmitter._super_.prototype.destroy.call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)},Proton.FollowEmitter=FollowEmitter;var La,Na=Na||{easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*(Proton.PI/2))},easeOutSine:function(t){return Math.sin(t*(Proton.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Proton.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){var i=1.70158;return t*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},setEasingByName:function(t){return Na[t]?Na[t]:Na.easeLinear}};for(var Fa in Na)"setEasingByName"!=Fa&&(Proton[Fa]=Na[Fa]);function BaseRender(){this.name="BaseRender"}function MeshRender(t){MeshRender._super_.call(this),this.container=t,this._targetPool=new Proton.Pool,this._materialPool=new Proton.Pool,this._body=new Mesh(new BoxGeometry(50,50,50),new MeshLambertMaterial({color:"#ff0000"})),this.name="MeshRender"}function PointsRender(t){PointsRender._super_.call(this),this.points=t,this.name="PointsRender"}function SpriteRender(t){SpriteRender._super_.call(this,t),this._body=new Sprite(new SpriteMaterial({color:16777215})),this.name="SpriteRender"}function CustomRender(){CustomRender._super_.call(this),this.targetPool=new Proton.Pool,this.materialPool=new Proton.Pool,this.name="CustomRender"}function Zone(){this.vector=new Proton.Vector3D(0,0,0),this.random=0,this.crossType="dead",this.log=!0}function LineZone(t,i,r,a,o,l){LineZone._super_.call(this),t instanceof Proton.Vector3D?(this.x1=t.x,this.y1=t.y,this.z1=t.z,this.x2=a.x,this.y2=a.y,this.z2=a.z):(this.x1=t,this.y1=i,this.z1=r,this.x2=a,this.y2=o,this.z2=l)}function SphereZone(t,i,r,a){var o,l;SphereZone._super_.call(this),Proton.Util.isUndefined(i,r,a)?(o=0,l=t||100):(o=t,l=a),this.x=o,this.y=o,this.z=o,this.radius=l,this.tha=this.phi=0}function MeshZone(t,i){MeshZone._super_.call(this),this.geometry=t.geometry.toBufferGeometry(),this.scale=i||1}function PointZone(t,i,r){var a,o,l;PointZone._super_.call(this),Proton.Util.isUndefined(t,i,r)?a=o=l=0:(a=t,o=i,l=r),this.x=a,this.y=o,this.z=l}function BoxZone(t,i,r,a,o,l){var c,h,u,d,p;BoxZone._super_.call(this),Proton.Util.isUndefined(i,r,a,o,l)?(c=h=u=0,d=p=a=t||100):Proton.Util.isUndefined(a,o,l)?(c=h=u=0,d=t,p=i,a=r):(c=t,h=i,u=r,d=a,p=o,a=l),this.x=c,this.y=h,this.z=u,this.width=d,this.height=p,this.depth=a,this.friction=.85,this.max=6}function ScreenZone(t,i,r,a){ScreenZone._super_.call(this),this.camera=t,this.renderer=i,this.dis=r||20,a=a||"1234";for(var o=1;o<5;o++)this["d"+o]=a.indexOf(o+"")>=0;this.name="ScreenZone"}Proton.ease=Na,BaseRender.prototype={init:function(t){var i=this;this.proton=t,this.proton.addEventListener("PROTON_UPDATE",(function(t){i.onProtonUpdate.call(i,t)})),this.proton.addEventListener("PARTICLE_CREATED",(function(t){i.onParticleCreated.call(i,t)})),this.proton.addEventListener("PARTICLE_UPDATE",(function(t){i.onParticleUpdate.call(i,t)})),this.proton.addEventListener("PARTICLE_DEAD",(function(t){i.onParticleDead.call(i,t)}))},remove:function(t){this.proton=null},onParticleCreated:function(t){},onParticleUpdate:function(t){},onParticleDead:function(t){},onProtonUpdate:function(t){}},Proton.BaseRender=BaseRender,Proton.Util.inherits(MeshRender,Proton.BaseRender),MeshRender.prototype.onProtonUpdate=function(){},MeshRender.prototype.onParticleCreated=function(t){t.target||(t.body||(t.body=this._body),t.target=this._targetPool.get(t.body),(t.useAlpha||t.useColor)&&(t.target.material.__puid=Proton.PUID.id(t.body.material),t.target.material=this._materialPool.get(t.target.material))),t.target&&(t.target.position.copy(t.p),this.container.add(t.target))},MeshRender.prototype.onParticleUpdate=function(t){t.target&&(t.target.position.copy(t.p),t.target.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),this.scale(t),t.useAlpha&&(t.target.material.opacity=t.alpha,t.target.material.transparent=!0),t.useColor&&t.target.material.color.copy(t.color))},MeshRender.prototype.scale=function(t){t.target.scale.set(t.scale*t.radius,t.scale*t.radius,t.scale*t.radius)},MeshRender.prototype.onParticleDead=function(t){t.target&&((t.useAlpha||t.useColor)&&this._materialPool.expire(t.target.material),this._targetPool.expire(t.target),this.container.remove(t.target),t.target=null)},Proton.MeshRender=MeshRender,Proton.Util.inherits(PointsRender,Proton.BaseRender),PointsRender.prototype.onProtonUpdate=function(){},PointsRender.prototype.onParticleCreated=function(t){t.target||(t.target=new Vector3),t.target.copy(t.p),this.points.geometry.vertices.push(t.target)},PointsRender.prototype.onParticleUpdate=function(t){t.target&&t.target.copy(t.p)},PointsRender.prototype.onParticleDead=function(t){if(t.target){var i=this.points.geometry.vertices.indexOf(t.target);i>-1&&this.points.geometry.vertices.splice(i,1),t.target=null}},Proton.PointsRender=PointsRender,Proton.Util.inherits(SpriteRender,Proton.MeshRender),SpriteRender.prototype.scale=function(t){t.target.scale.set(t.scale*t.radius,t.scale*t.radius,1)},Proton.SpriteRender=SpriteRender,Proton.Util.inherits(CustomRender,Proton.BaseRender),CustomRender.prototype.onProtonUpdate=function(){},CustomRender.prototype.onParticleCreated=function(t){},CustomRender.prototype.onParticleUpdate=function(t){},CustomRender.prototype.onParticleDead=function(t){},Proton.CustomRender=CustomRender,Zone.prototype={getPosition:function(){return null},crossing:function(t){switch(this.crossType){case"bound":this._bound(t);break;case"cross":this._cross(t);break;case"dead":this._dead(t)}},_dead:function(t){},_bound:function(t){},_cross:function(t){}},Proton.Zone=Zone,Proton.Util.inherits(LineZone,Proton.Zone),LineZone.prototype.getPosition=function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*(this.x2-this.x1),this.vector.y=this.y1+this.random*(this.y2-this.y1),this.vector.z=this.z1+this.random*(this.z2-this.z1),this.vector},LineZone.prototype.crossing=function(t){this.log&&(this.log=!1)},Proton.LineZone=LineZone,Proton.Util.inherits(SphereZone,Proton.Zone),SphereZone.prototype.getPosition=function(){var t,i,r;return function(){return this.random=Math.random(),r=this.random*this.radius,t=Proton.PI*Math.random(),i=2*Proton.PI*Math.random(),this.vector.x=this.x+r*Math.sin(t)*Math.cos(i),this.vector.y=this.y+r*Math.sin(i)*Math.sin(t),this.vector.z=this.z+r*Math.cos(t),this.vector}}(),SphereZone.prototype._dead=function(t){t.p.distanceTo(this)-t.radius>this.radius&&(t.dead=!0)},SphereZone.prototype._bound=function(){var t,i=new Proton.Vector3D,r=new Proton.Vector3D;return function(a){a.p.distanceTo(this)+a.radius>=this.radius&&(i.copy(a.p).sub(this).normalize(),r.copy(a.v),t=2*r.dot(i),a.v.sub(i.scalar(t)))}}(),SphereZone.prototype._cross=function(t){this.log&&(this.log=!1)},Proton.SphereZone=SphereZone,Proton.Util.inherits(MeshZone,Proton.Zone),MeshZone.prototype.getPosition=function(){var t=this.geometry.vertices,i=t[t.length*Math.random()|0];return this.vector.x=i.x*this.scale,this.vector.y=i.y*this.scale,this.vector.z=i.z*this.scale,this.vector},MeshZone.prototype.crossing=function(t){this.log&&(this.log=!1)},Proton.MeshZone=MeshZone,Proton.Util.inherits(PointZone,Proton.Zone),PointZone.prototype.getPosition=function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector.z=this.z,this.vector},PointZone.prototype.crossing=function(t){this.log&&(this.log=!1)},Proton.PointZone=PointZone,Proton.Util.inherits(BoxZone,Proton.Zone),BoxZone.prototype.getPosition=function(){return this.vector.x=this.x+Proton.MathUtils.randomAToB(-.5,.5)*this.width,this.vector.y=this.y+Proton.MathUtils.randomAToB(-.5,.5)*this.height,this.vector.z=this.z+Proton.MathUtils.randomAToB(-.5,.5)*this.depth,this.vector},BoxZone.prototype._dead=function(t){(t.p.x+t.radius<this.x-this.width/2||t.p.x-t.radius>this.x+this.width/2)&&(t.dead=!0),(t.p.y+t.radius<this.y-this.height/2||t.p.y-t.radius>this.y+this.height/2)&&(t.dead=!0),(t.p.z+t.radius<this.z-this.depth/2||t.p.z-t.radius>this.z+this.depth/2)&&(t.dead=!0)},BoxZone.prototype._bound=function(t){t.p.x-t.radius<this.x-this.width/2?(t.p.x=this.x-this.width/2+t.radius,t.v.x*=-this.friction,this._static(t,"x")):t.p.x+t.radius>this.x+this.width/2&&(t.p.x=this.x+this.width/2-t.radius,t.v.x*=-this.friction,this._static(t,"x")),t.p.y-t.radius<this.y-this.height/2?(t.p.y=this.y-this.height/2+t.radius,t.v.y*=-this.friction,this._static(t,"y")):t.p.y+t.radius>this.y+this.height/2&&(t.p.y=this.y+this.height/2-t.radius,t.v.y*=-this.friction,this._static(t,"y")),t.p.z-t.radius<this.z-this.depth/2?(t.p.z=this.z-this.depth/2+t.radius,t.v.z*=-this.friction,this._static(t,"z")):t.p.z+t.radius>this.z+this.depth/2&&(t.p.z=this.z+this.depth/2-t.radius,t.v.z*=-this.friction,this._static(t,"z"))},BoxZone.prototype._static=function(t,i){t.v[i]*t.a[i]>0||Math.abs(t.v[i])<.0167*Math.abs(t.a[i])*this.max&&(t.v[i]=0,t.a[i]=0)},BoxZone.prototype._cross=function(t){t.p.x+t.radius<this.x-this.width/2&&t.v.x<=0?t.p.x=this.x+this.width/2+t.radius:t.p.x-t.radius>this.x+this.width/2&&t.v.x>=0&&(t.p.x=this.x-this.width/2-t.radius),t.p.y+t.radius<this.y-this.height/2&&t.v.y<=0?t.p.y=this.y+this.height/2+t.radius:t.p.y-t.radius>this.y+this.height/2&&t.v.y>=0&&(t.p.y=this.y-this.height/2-t.radius),t.p.z+t.radius<this.z-this.depth/2&&t.v.z<=0?t.p.z=this.z+this.depth/2+t.radius:t.p.z-t.radius>this.z+this.depth/2&&t.v.z>=0&&(t.p.z=this.z-this.depth/2-t.radius)},Proton.BoxZone=BoxZone,Proton.Util.inherits(ScreenZone,Proton.Zone),ScreenZone.prototype.getPosition=function(){var t,i=new Proton.Vector3D;return function(){return t=this.renderer.domElement,i.x=Math.random()*t.width,i.y=Math.random()*t.height,this.vector.copy(Proton.THREEUtil.toSpacePos(i,this.camera,t)),this.vector}}(),ScreenZone.prototype._dead=function(t){var i=Proton.THREEUtil.toScreenPos(t.p,this.camera,this.renderer.domElement),r=this.renderer.domElement;(i.y+t.radius<-this.dis&&this.d1||i.y-t.radius>r.height+this.dis&&this.d3)&&(t.dead=!0),(i.x+t.radius<-this.dis&&this.d4||i.x-t.radius>r.width+this.dis&&this.d2)&&(t.dead=!0)},ScreenZone.prototype._cross=(La=new Proton.Vector3D,function(t){var i=Proton.THREEUtil.toScreenPos(t.p,this.camera,this.renderer.domElement),r=this.renderer.domElement;i.y+t.radius<-this.dis?(La.x=i.x,La.y=r.height+this.dis+t.radius,t.p.y=Proton.THREEUtil.toSpacePos(La,this.camera,r).y):i.y-t.radius>r.height+this.dis&&(La.x=i.x,La.y=-this.dis-t.radius,t.p.y=Proton.THREEUtil.toSpacePos(La,this.camera,r).y),i.x+t.radius<-this.dis?(La.y=i.y,La.x=r.width+this.dis+t.radius,t.p.x=Proton.THREEUtil.toSpacePos(La,this.camera,r).x):i.x-t.radius>r.width+this.dis&&(La.y=i.y,La.x=-this.dis-t.radius,t.p.x=Proton.THREEUtil.toSpacePos(La,this.camera,r).x)}),ScreenZone.prototype._bound=function(t){var i=Proton.THREEUtil.toScreenPos(t.p,this.camera,this.renderer.domElement),r=this.renderer.domElement;(i.y+t.radius<-this.dis||i.y-t.radius>r.height+this.dis)&&(t.v.y*=-1),(i.x+t.radius<-this.dis||i.x-t.radius>r.width+this.dis)&&(t.v.y*=-1)},Proton.ScreenZone=ScreenZone;var log=function(){if(window.console&&window.console.trace){var t=Array.prototype.slice.call(arguments);if(0==(arguments[0]+"").indexOf("+")){var i=parseInt(arguments[0]);log.once<i&&(t.shift(),log.once++)}else t.unshift("+15"),log.apply(console,t)}};log.once=0,Proton.log=log;var Oa=Oa||{addEventListener:function(t,i){t.addEventListener("PROTON_UPDATE",(function(t){i(t)}))},drawZone:function(t,i,r){var a,o,l;r instanceof Proton.PointZone?a=new SphereGeometry(15):r instanceof Proton.LineZone||(r instanceof Proton.BoxZone?a=new BoxGeometry(r.width,r.height,r.depth):r instanceof Proton.SphereZone?a=new SphereGeometry(r.radius,10,10):r instanceof Proton.MeshZone&&(a=r.geometry.geometry.toBufferGeometry(),a=new SphereGeometry(r.radius,10,10))),o=new MeshBasicMaterial({color:"#2194ce",wireframe:!0}),l=new Mesh(a,o),i.add(l),this.addEventListener(t,(function(t){l.position.set(r.x,r.y,r.z)}))},drawEmitter:function(t,i,r,a){var o=new OctahedronGeometry(15),l=new MeshBasicMaterial({color:a||"#aaa",wireframe:!0}),c=new Mesh(o,l);i.add(c),this.addEventListener(t,(function(){c.position.copy(r.p),c.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}))},renderInfo:function(){function getCreatedNumber(t,i){var r="material"==i?"_materialPool":"_targetPool";return t.renderers[0][r].cID}return function(t,i){this.addInfo(i);var r="";switch(this._infoType){case 2:r+="emitter:"+t.emitters.length+"<br>",r+="em speed:"+t.emitters[0].cID+"<br>",r+="pos:"+function getEmitterPos(t){var i=t.emitters[0];return Math.round(i.p.x)+","+Math.round(i.p.y)+","+Math.round(i.p.z)}(t);break;case 3:r+=t.renderers[0].name+"<br>",r+="target:"+getCreatedNumber(t,"target")+"<br>",r+="material:"+getCreatedNumber(t,"material");break;default:r+="particles:"+t.getCount()+"<br>",r+="pool:"+t.pool.getCount()+"<br>",r+="total:"+(t.getCount()+t.pool.getCount())}this._infoCon.innerHTML=r}}(),addInfo:function(t){var i=this;if(!this._infoCon){var r,a;switch(this._infoCon=document.createElement("div"),this._infoCon.style.cssText=["position:fixed;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this._infoType=1,this._infoCon.addEventListener("click",(function(t){i._infoType++,i._infoType>3&&(i._infoType=1)}),!1),t){case 2:r="#201",a="#f08";break;case 3:r="#020",a="#0f0";break;default:r="#002",a="#0ff"}this._infoCon.style["background-color"]=r,this._infoCon.style.color=a}this._infoCon.parentNode||document.body.appendChild(this._infoCon)}};Proton.Debug=Oa;class PlayAnimationParticleSparkles extends i{static id="PlayAnimationParticleSparkles";static specialEffectName="DICESONICE.PlayAnimationParticleSparkles";static sprite=null;static sound="modules/dice-so-nice/sfx/sounds/sparkles.mp3";static async init(){let t=await this.loadAsset(Ua.TextureLoader,"modules/dice-so-nice/sfx/textures/glow_point_red_gold.webp"),i=new SpriteMaterial({map:t,fog:!0,blending:2,depthWrite:!1,depthTest:!0});PlayAnimationParticleSparkles.sprite=new Sprite(i),game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationParticleSparkles.sound)}.bind(this))}async play(){this.proton=new Proton,this.emitter=new Proton.Emitter,this.emitter.rate=new Proton.Rate(new Proton.Span(350,450),.3),this.emitter.addInitialize(new Proton.Mass(1,.3)),this.emitter.addInitialize(new Proton.Life(1,3)),this.emitter.addInitialize(new Proton.Body(PlayAnimationParticleSparkles.sprite)),this.emitter.addInitialize(new Proton.Radius(100,60)),this.emitter.addInitialize(new Proton.Position(new Proton.SphereZone(0,0,0,30))),this.emitter.addInitialize(new Proton.Velocity(200,new Proton.Vector3D(0,0,0),0)),this.emitter.addBehaviour(new Proton.RandomDrift(10,10,5,.1,1/0,Proton.easeOutQuart)),this.emitter.addBehaviour(new Proton.Alpha(1,0)),this.emitter.addBehaviour(new Proton.Scale(1,.5)),this.emitter.addBehaviour(new Proton.Force(0,0,1));let t=null;this.dicemesh.isMesh?t=this.dicemesh.parent:(t=this.dicemesh.parent.clone(),delete t.children[0].geometry),this.emitter.p.x=t.position.x,this.emitter.p.y=t.position.y;let i=new Vector3;(new Box3).setFromObject(t).getSize(i),this.emitter.p.z=i.z/2,this.emitter.emit("once",!0),this.proton.addEmitter(this.emitter),this.proton.addRender(new Proton.SpriteRender(this.box.scene)),foundry.audio.AudioHelper.play({src:PlayAnimationParticleSparkles.sound,volume:this.volume},!1),this.renderReady=!0}render(){this.renderReady&&(this.proton.update(),0==this.proton.emitters.length&&this.destroy())}destroy(){this.emitter&&(this.emitter.stopEmit(),this.emitter.removeAllParticles()),this.proton.update(),this.proton.destroy(),this.destroyed=!0}}class PlayAnimationParticleSpiral extends i{static id="PlayAnimationParticleSpiral";static specialEffectName="DICESONICE.PlayAnimationParticleSpiral";static sprite=null;static dot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAKQWlDQ1BJQ0MgUHJvZmlsZQAAeAGdlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/ul8iYiAAAJwUlEQVR4AeWb2Xbktg5F7ZvOzfj/f5p5cLApbfURilKpyu68BGvRAElM55AsD528vvwL8vb29vpImdfX17dH/J/1rb5eHmrsaqETwPfqTYF/KUI+lIAJ6BnY2VryOiNgt/aRZHwIAQ14AjyyAZx7zHcg2zz3NvsjiHgXAQfABXZPA3omAryqX95DBAR8mnVxtnYBOOCTgD43vT6CZV0b7XDdPeZKtbN8wD5LxEMEWKyq23xqgV7RAkgt4Cs647AHEc+QIICe8GZ+AL6D/V8FstZ19+t1j0D/XbnY67r7l8tyex4hoTDdfwIBnCIC0e5AmR8NY1OTp4MRMKD7INZ9NTmUcROYXCXi9AkEeAoj2Tx2B/vVutZ1+pmDfIokdMB/lQNrXZODdcTYZbZ8HURcIeGUgDUjxRAbRycgbADPBvndzxhz1fYGIMEL+M/ax3aQQ9scxtXWEAhhD31XDgmI0yeJxdAC6YDJxRo6R/cjnjwpNOtJCxANATlcSyLM441gPsCD4d4tmBIQ4BO44AFEA4JFf12DXOi0Z0RIoCQIPglI0H9UTuZoBvFo48vc7CSB9btP4YaAi+CJ68D/X2uA71pCjLlHgOAF/HvlxKYegzng8UPSZv4QCTcEkKGks2vTaIF42gB2fLPaaslIEsxljbwBM/AA/m2ti+7xtTSE2HH1S0OCNnW0y9zLjoA4fbwIdFDUE/DkBY0GMOPbsF3rJBBPvk6A7ztPHsCCp9cEb2+1PCRBYmd+3sL082BHwJrIxGgLSgD+efKCBDjju1U7d98Y4gWSDXJi/fQF/2vteYPsxx5r6+Z0AS8Z+RxcI2aTjYB2+jhYxKLeAGI8fQACejaSBP2J9QaQF6FJhjeAK++1T/AZl+QJmBzYamz8NuCzW7ARUI6IoNUdvCfptffUv69YB2Rg521IAqhJ3gRB094ACQA8cdSU/B7XwXcCJKFSDNnIcGEQcHL6NElRGsCXIRhOPwn4oeaMJEISjDFHBzIjQPDESEAnjbiz4UFuwPstILmis5omBW8D3oAE74lLQCcBkvA3llwzAngCfgDy/vEX/Mw/gRPrIL97AD+9BUlA+Q6RAHSSgC9NeZpHJPxYPnkLniGgg6cPBDACRfts0M7dJwYixLPdglrb5FO7/jp38LAKAZIA+CRAwGpvgU/AG0C8t4kaSIICCLdAvzx5T1WA+qqNY04N/KYk5DOgECLwZfZ5TgKGBMxugJ8DPgVJQEvAvfecoGbgIQkC8EvAfGACnPw+H3q17xmu2v78nUECWEQMQJtE8PgyJCFvQZIA6Bz4dQLITQ2kgxPA0T5A/U5BbmyfjD1Ckv0npptn0AmouCkJJJMIih2RABE5aJC5MdTLxmq6EcAJCx4fpJMjeD4kk1gJyHhyJHjy3UgSkM7aNktiCSBGQBKRH4w0ZnOevDobpAYiSAiwadbzzXvtAW6t7IGeGPZp3+JIPW7B+tn3lgRU/CYZYDKTW8wGbEiQrndtg+bbipUh2E6Kb95cs1r2Y3/mTwxZa2cTrCMb2qlNaAG0Rbu20b6eseQzPzU5kT4nHvDmOcrrfs+fNcyNRtTjJpBgJhmELQmpJUJNrmxEO2O0zU9tGhnNrFof41MnYOvpn9r8aupMJQnAOcXg1FnkzLbp7pO5ZvW6/1Ge7ue855/VkOyBNQkQfAZpp8bOQfGcH9nkzz3mCGtI6vSb2Uc1e56ROHI73zSJ/tMyIyCviHZq7Bx8guf8yIbo3GOO9LWcH9lHNc2XutvMN8knQLGUWXG/Xd3T/mjb/bjOZ3W6/1Ge7ud81nPHlPPxbWa3sE56Iguk9nu0mh9WbDh1xvR3TjlrpR925tCmhnXUPY65OdW1NBduAE6Ip2OQ2gI2gbaRrv2FJNf5JPdDizrk7U+v18h47Fne9MnezGX/qa3P2pB8Aq6hM8iEFrGwTfmLib+ZuU7uI/CdkKxh/EzPatmP/ZkrMSS2nZ0EZIC2yUxusWwum5r9JcfTJif1mB8RQH5zm5ecDtfQ+qHtyz7tWxypy72ue/2XaCXTz4B0NhGa5L1BG8s/YM5O3jzkmN2Knh+A5CbvbFg3iaA38lsLnVhqeit5A9jNABMJXJZh3AZt0l+EZuDJKUD3IcEPRPapYR3zA/yXyZCQToL9dSISU6XbiwTghGRTNm7zJLY5CaCZ/EXl3uleJUBiIeDnGBKSJNCLN+EIfLkMkQznL5/Wt9CBd/CejiTQIGAAn6B83xQwh7ESdUYSBDOOCJAMiIAEbwEx9CYB1PQGCxo9JP/J3BvgHjoDTCIICgGAOAdzh0TO4t5LwE9VBwLyFkDAlRuwgS//nSQB6YQNCAABnpNFSwCFPW214I1N0vDnc0LSiOn+nqCAOGHBevJHJNAXg5oOD4F+ctT0swwC2jNgNwNIJBgap0FBqxOMDfhc8PcvOY8SIAmevETkE5AwCaQ+PSeGmi6S15+VvAHMCVKw+y2AZcB6gtgJXrJoAl+a8/S9AX4GkAMhxjhACIg4P+y8Can9DMC/3wBzJgmJrUIW2Qg4uQUkAySg0DQp8A4+gUgAfyD1/V+5AYKBgCTB2yAp7EkWPXnzOvjaWqSfPqsbAasPKpkiGSIBy2z5muC9LfjTTIL3Z4T8juENIpOxADDWeElQe+oJXsIkQQLQ5HaUeSs7AtotIBCxwWW2kKFtcn0kQCCc0Oz0ZwT0WEkgh4DVnrzgPX30FPjs9AGxI4CFVQCUJ0xShDXApST4PMV+8tTK99/zU8N4CZSEmdbHGOId9KSk7dqmbwiIW9ADJYFgirvPOjaaZhieDPkd/qzA6R/dAOPJ7yCXYNMWONra9kI/jtP/bPaGgAr0NyVOSJAsIxRAct1CNkGz5KVZtMDVCb62h5DDeEkQoESgXUsfbGIZ9qI+BV/+h08gScCPhAqFFBu3AUDaJDYEABjbk5eAfAI9j6AE3QG7b90OvsotBzmMky/TG9D8aa7fhl4wAdCcgAGQwDt4SxGfOQQm0K7dn/VBTnJdEk/h0Hn9R0T38TcGLaDUHbBzY1OTV/CpE2C3JSp15sG+e/VHwCP/21wQkQQkGOwkIufdj3lKgk/bE+46fbCRoY++3S0u+6/8Rag3svdoswMS8JoBPFtrmce0g7o3J+hp8CP4UQLWoCRNO7XAcdfOfdYR1wTBmnaCd90156kvXXkCUh6+AS1YACxrX9WZKu0kgPV786eAW/BdBEQSQbN0xe5+zAWKjeR8aj/y1peUt18/hADTxueDS0nG2Zp76ATr+m7tI4BviZ/5DDD4TE/I0H1GinvoHVg3PhK0OUexL0VAFlkL3QO+C/lSgHdFasIT+AcDVfh0vBU3zQAAAABJRU5ErkJggg==";static sound="modules/dice-so-nice/sfx/sounds/doublespiral.mp3";static async init(){let t=await this.loadAsset(Ua.TextureLoader,PlayAnimationParticleSpiral.dot),i=new SpriteMaterial({map:t,color:16711680,blending:5,blendSrc:A,blendDst:201,blendEquation:b,fog:!0});PlayAnimationParticleSpiral.sprite=new Sprite(i),game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationParticleSpiral.sound)}.bind(this))}async play(){this.proton=new Proton,this.R=70,this.tha=0,this.emitter1=this.createEmitter(this.R,this.R,"#4F1500","#0029FF"),this.emitter2=this.createEmitter(-this.R,-this.R,"#004CFE","#6600FF"),this.proton.addEmitter(this.emitter1),this.proton.addEmitter(this.emitter2),this.proton.addRender(new Proton.SpriteRender(this.box.scene)),foundry.audio.AudioHelper.play({src:PlayAnimationParticleSpiral.sound,volume:this.volume},!1),this.renderReady=!0}createEmitter(t,i,r,a){var o=new Proton.Emitter;return o.rate=new Proton.Rate(new Proton.Span(5,7),new Proton.Span(.01,.02)),o.addInitialize(new Proton.Mass(1)),o.addInitialize(new Proton.Life(1)),o.addInitialize(new Proton.Body(PlayAnimationParticleSpiral.sprite)),o.addInitialize(new Proton.Radius(30)),o.addInitialize(new Proton.V(200,new Proton.Vector3D(0,0,-1),0)),o.addBehaviour(new Proton.Alpha(1,0)),o.addBehaviour(new Proton.Color(r,a)),o.addBehaviour(new Proton.Scale(1.5,.1)),o.addBehaviour(new Proton.Force(0,0,17)),o.p.x=this.dicemesh.parent.position.x+t,o.p.y=this.dicemesh.parent.position.y+i,o.p.z=50,o.emit(.7,!0),o}animateEmitter(){this.tha+=.2,this.emitter1.p.x=this.dicemesh.parent.position.x+this.R*Math.cos(this.tha),this.emitter1.p.y=this.dicemesh.parent.position.y+this.R*Math.sin(this.tha),this.emitter2.p.x=this.dicemesh.parent.position.x-this.R*Math.cos(this.tha),this.emitter2.p.y=this.dicemesh.parent.position.y-this.R*Math.sin(this.tha)}render(){this.renderReady&&(this.animateEmitter(),this.proton.update(),0==this.proton.emitters.length&&this.destroy())}destroy(){this.emitter1&&(this.emitter1.stopEmit(),this.emitter1.removeAllParticles()),this.emitter2&&(this.emitter2.stopEmit(),this.emitter2.removeAllParticles()),this.proton.update(),this.proton.destroy(),this.destroyed=!0}}class PlayAnimationParticleVortex extends i{static id="PlayAnimationParticleVortex";static specialEffectName="DICESONICE.PlayAnimationParticleVortex";static sprite=null;static sound="modules/dice-so-nice/sfx/sounds/vortex.mp3";static async init(){let t=await this.loadAsset(Ua.TextureLoader,"modules/dice-so-nice/sfx/textures/magic01.webp"),i=new MeshBasicMaterial({map:t,blending:1,depthWrite:!1,depthTest:!0,transparent:!0}),r=new PlaneGeometry(140,140);PlayAnimationParticleVortex.sprite=new Mesh(r,i),game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationParticleVortex.sound)}.bind(this))}async play(){this.proton=new Proton,this.emitter=new Proton.Emitter,this.emitter.rate=new Proton.Rate(new Proton.Span(6,8),new Proton.Span(.1,.25)),this.emitter.addInitialize(new Proton.Mass(1)),this.emitter.addInitialize(new Proton.Life(.8,2.4)),this.emitter.addInitialize(new Proton.Body(PlayAnimationParticleVortex.sprite)),this.emitter.addInitialize(new Proton.Velocity(50,new Proton.Vector3D(0,0,1),0));let t=this.box.dicefactory.baseScale/100;switch(this.dicemesh.shape){case"d2":case"d12":t*=1.3;break;case"d4":case"d8":t*=1.2;break;case"d6":case"d10":break;case"d20":t*=1.4}this.emitter.addInitialize(new Proton.Radius(t)),this.emitter.addBehaviour(new Proton.Color(["#1f0e26","#462634","#290088"],"#060206")),this.emitter.addBehaviour(new Proton.Alpha(.7,0,1/0,Proton.easeInQuart)),this.emitter.addBehaviour(new Proton.Scale(.7,1.3,1/0,Proton.easeInSine)),this.emitter.addBehaviour(new Proton.Rotate(0,0,-3)),this.emitter.p.x=this.dicemesh.parent.position.x,this.emitter.p.y=this.dicemesh.parent.position.y,this.emitter.p.z=-5,this.emitter.emit(1.25,!0),this.proton.addEmitter(this.emitter),this.proton.addRender(new Proton.MeshRender(this.box.scene)),foundry.audio.AudioHelper.play({src:PlayAnimationParticleVortex.sound,volume:this.volume},!1),this.renderReady=!0}render(){this.renderReady&&(this.proton.update(),0==this.proton.emitters.length&&this.destroy())}destroy(){this.emitter&&(this.emitter.stopEmit(),this.emitter.removeAllParticles()),this.proton.update(),this.proton.destroy(),this.destroyed=!0}}class PlayAnimationThormund extends i{static id="PlayAnimationThormund";static specialEffectName="DICESONICE.PlayAnimationThormund";static file="modules/dice-so-nice/sfx/models/thormund.glb";static sound="modules/dice-so-nice/sfx/sounds/thormund.mp3";static model=null;static curve=null;static duration1=2.5;static duration2=2.5;static up=new Vector3(0,0,1);static async init(){game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlayAnimationThormund.sound)}.bind(this));let t=await this.loadAsset(Ua.GLTFLoader,PlayAnimationThormund.file);t.scene.traverse((function(t){t.isMesh&&(t.castShadow=!0,t.material.onBeforeCompile=ShaderUtils.applyDiceSoNiceShader)})),PlayAnimationThormund.model=t.scene.children[0]}async play(){this.step=1,this.clock=new Clock,this.thormund=PlayAnimationThormund.model.clone();let t=this.box.dicefactory.baseScale/100,i=new Vector3,r=null;this.dicemesh.isMesh?r=this.dicemesh.parent:(r=this.dicemesh.parent.clone(),delete r.children[0].geometry),(new Box3).setFromObject(r).getSize(i),this.thormund.scale.set(t,t,t),this.thormund.rotation.x=Math.PI/2,this.thormund.position.x=r.position.x,this.thormund.position.y=r.position.y,this.thormund.position.z=r.position.z+i.z/2,this.curve=new CatmullRomCurve3([new Vector3(this.thormund.position.x,this.thormund.position.y,-50),new Vector3(this.thormund.position.x+0,this.thormund.position.y-100,this.thormund.position.z+0),new Vector3(this.thormund.position.x+100,this.thormund.position.y-30,this.thormund.position.z+0),new Vector3(this.thormund.position.x+100,this.thormund.position.y+30,this.thormund.position.z+0),new Vector3(this.thormund.position.x+30,this.thormund.position.y+100,this.thormund.position.z+0),new Vector3(this.thormund.position.x-30,this.thormund.position.y+100,this.thormund.position.z+0),new Vector3(this.thormund.position.x-100,this.thormund.position.y+30,this.thormund.position.z+80),new Vector3(this.thormund.position.x/2,this.thormund.position.y/2,this.thormund.position.z+100)],!1,"chordal"),this.curve2=new CatmullRomCurve3([new Vector3(this.thormund.position.x/2,this.thormund.position.y/2,this.thormund.position.z+100),new Vector3(100,50,this.box.camera.position.z/4),new Vector3(-100,-50,this.box.camera.position.z/4*2),new Vector3(0,-50,this.box.camera.position.z/4*3),new Vector3(0,0,this.box.camera.position.z)],!1,"chordal"),this.axis=new Vector3,this.box.scene.add(this.thormund),foundry.audio.AudioHelper.play({src:PlayAnimationThormund.sound,volume:this.volume},!1),this.renderReady=!0}render(){if(!this.renderReady)return;let t=1==this.step?PlayAnimationThormund.duration1:PlayAnimationThormund.duration2,i=1-(t-this.clock.getElapsedTime())/t;if(i>1)1==this.step?(this.step++,i=0,this.clock.start(),this.render()):this.destroy();else{let t=1==this.step?this.curve:this.curve2,r=t.getPointAt(i),a=t.getTangentAt(i).normalize();this.axis.crossVectors(PlayAnimationThormund.up,a).normalize();let o=Math.acos(PlayAnimationThormund.up.dot(a));this.thormund.position.copy(r),this.thormund.quaternion.setFromAxisAngle(this.axis,o)}}destroy(){this.box.scene.remove(this.thormund),this.destroyed=!0}}class PlaySoundEpicFail extends i{static id="PlaySoundEpicFail";static specialEffectName="DICESONICE.PlaySoundEpicFail";static path="modules/dice-so-nice/sfx/sounds/epic_fail.mp3";static async init(){return game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlaySoundEpicFail.path)}.bind(this)),!0}async play(){foundry.audio.AudioHelper.play({src:PlaySoundEpicFail.path,volume:this.volume},!1)}}class PlaySoundEpicWin extends i{static id="PlaySoundEpicWin";static specialEffectName="DICESONICE.PlaySoundEpicWin";static path="modules/dice-so-nice/sfx/sounds/epic_win.mp3";static async init(){return game.audio.pending.push(function(){foundry.audio.AudioHelper.preloadSound(PlaySoundEpicWin.path)}.bind(this)),!0}async play(){foundry.audio.AudioHelper.play({src:PlaySoundEpicWin.path,volume:this.volume},!1)}}const Ua={SFX_MODE_CLASS:{PlayAnimationBright,PlayAnimationDark,PlayAnimationOutline:class PlayAnimationOutline extends i{static id="PlayAnimationOutline";static specialEffectName="DICESONICE.PlayAnimationOutline";async play(){this.box.outlinePass.selectedObjects.push(this.dicemesh)}destroy(){this.box.outlinePass.selectedObjects=this.box.outlinePass.selectedObjects.filter((t=>t!=this.dicemesh)),this.destroyed=!0}},PlayAnimationImpact,PlayConfettiStrength1:class PlayConfettiStrength1 extends i{static id="PlayConfettiStrength1";static specialEffectName="DICESONICE.PlayConfettiStrength1";async play(){const t=window.confetti.confettiStrength.low,i=window.confetti.getShootConfettiProps(t);window.confetti.handleShootConfetti(i)}},PlayConfettiStrength2:class PlayConfettiStrength2 extends i{static id="PlayConfettiStrength2";static specialEffectName="DICESONICE.PlayConfettiStrength2";async play(){const t=window.confetti.confettiStrength.med,i=window.confetti.getShootConfettiProps(t);window.confetti.handleShootConfetti(i)}},PlayConfettiStrength3:class PlayConfettiStrength3 extends i{static id="PlayConfettiStrength3";static specialEffectName="DICESONICE.PlayConfettiStrength3";async play(){const t=window.confetti.confettiStrength.high,i=window.confetti.getShootConfettiProps(t);window.confetti.handleShootConfetti(i)}},PlayAnimationThormund,PlayAnimationParticleSpiral,PlayAnimationParticleSparkles,PlayAnimationParticleVortex,PlaySoundEpicWin,PlaySoundEpicFail,PlaySoundCustom:class PlaySoundCustom extends i{static id="PlaySoundCustom";static specialEffectName="DICESONICE.PlaySoundCustom";async play(t){t&&t.path&&foundry.audio.AudioHelper.play({src:t.path,volume:this.volume},!1)}static getDialogContent(t,i){let r=super.getDialogContent(t,i);return r.content=r.content.concat('<div class="form-group">\n                                        <label>{{localize "DICESONICE.sfxOptionsCustomSound"}}</label>\n                                        <div class="form-fields">\n                                            <button type="button" class="file-picker" data-type="audio" data-target="sfxLine[{{id}}][options][path]" title="Browse Files" tabindex="-1">\n                                                <i class="fas fa-file-import fa-fw"></i>\n                                            </button>\n                                            <input class="image" type="text" name="sfxLine[{{id}}][options][path]" placeholder="path/audio.mp3" value="{{path}}">\n                                        </div>\n                                    </div>'),r.data.path=t.options?t.options.path:"",r}},PlayMacro:class PlayMacro extends i{static id="PlayMacro";static specialEffectName="DICESONICE.PlayMacro";async play(t){let i=game.macros.get(t.macroId);i&&i.execute()}static getDialogContent(t,i){let r=super.getDialogContent(t,i);return r.content=r.content.concat('<div class="form-group">\n                                        <label>{{localize "DICESONICE.sfxOptionsMacro"}}</label>\n                                        <div class="form-fields">\n                                            <select name="sfxLine[{{id}}][options][macroId]">\n                                                {{selectOptions macroList valueAttr="id" labelAttr="name" selected=macroId}}\n                                            </select>\n                                        </div>\n                                    </div>'),r.data.macroList=game.macros.filter((t=>t.canExecute)).map((t=>({id:t.id,name:t.name}))),r.data.macroList.sort(((t,i)=>t.name>i.name?1:-1)),r.data.macroId=t.options?t.options.macroId:null,r}}},SFX_MODE_LIST:null,SFX_CLASS:{},EXTRA_TRIGGER_TYPE:[],EXTRA_TRIGGER_RESULTS:{},renderQueue:[],garbageCollector:[],GLTFLoader:null,TextureLoader:null,init:function(){Ua.SFX_MODE_LIST||(Ua.SFX_MODE_LIST={},Object.values(Ua.SFX_MODE_CLASS).forEach((t=>{(!t.id.startsWith("PlayConfettiStrength")||game.modules.get("confetti")&&game.modules.get("confetti").active)&&(Ua.SFX_MODE_LIST[t.id]=t.specialEffectName)}))),Ua.GLTFLoader=new GLTFLoader,Ua.TextureLoader=new TextureLoader;let t=[];game.users.forEach((i=>{let r=i.getFlag("dice-so-nice","sfxList");r&&Object.values(r).forEach((i=>{i.specialEffect&&!Array.isArray(i.specialEffect)&&t.push(i.specialEffect)}))})),t=t.filter(((t,i,r)=>r.indexOf(t)===i)),t.forEach((t=>{(!t.startsWith("PlayConfettiStrength")||game.modules.get("confetti")&&game.modules.get("confetti").active)&&Ua.addSFXMode(Ua.SFX_MODE_CLASS[t])}))},addSFXMode:async function(t){t&&t.id&&t.specialEffectName&&!t.initialized&&(Ua.SFX_CLASS[t.id]=t,t.initialized=!0,await t.init())},playSFX:async function(t,i,r){let a=t.specialEffect;return new Promise((async o=>{if(!Ua.SFX_CLASS[a]){if(!Ua.SFX_MODE_CLASS[a])return;await Ua.addSFXMode(Ua.SFX_MODE_CLASS[a])}let l=new Ua.SFX_CLASS[a](i,r,t.options);setTimeout((()=>{l.play(t.options).then((t=>{!1!==t&&("function"==typeof l.render&&Ua.renderQueue.push(l),l.enableGC&&Ua.garbageCollector.push(l)),o()}))}),100)}))},renderSFX:function(){let t=[...Ua.renderQueue];for(let i=0;i<t.length;i++){let r=t[i];r.destroyed?Ua.endSFX(r):"function"==typeof r.render&&r.render()}},endSFX:function(t){let i=Ua.renderQueue.indexOf(t);-1!==i&&Ua.renderQueue.splice(i,1),0==Ua.renderQueue.length&&game.dice3d._afterShow()},clearQueue:function(){let t=[...Ua.renderQueue];for(let i=0;i<t.length;i++){let r=t[i];"function"==typeof r.destroy&&r.destroy(),Ua.endSFX(r)}for(let t=0;t<Ua.garbageCollector.length;t++)Ua.garbageCollector[t].destroy();Ua.garbageCollector=[]},registerSFXModeClass:function(t){Ua.SFX_MODE_CLASS[t.id]=t,Ua.SFX_MODE_LIST[t.id]=t.specialEffectName}};class SoundManager{constructor(){this.sounds_table={},this.sounds_dice={},this.sounds_coins=[],this.sounds=!0,this.volume=1,this.soundsSurface="felt",this.muteSoundSecretRolls=!1,this.preloaded=!1}update(t){this.sounds=t.sounds||this.sounds,this.volume=t.volume||this.volume,this.soundsSurface=t.soundsSurface||this.soundsSurface,this.muteSoundSecretRolls=t.muteSoundSecretRolls||this.muteSoundSecretRolls,this.preloaded||(this.preloaded=!0,game.audio.pending.push(this.preloadSounds.bind(this)))}preloadSounds(){this.fetchJsonResource("modules/dice-so-nice/sounds/surfaces.json").then((t=>{this.processSoundsData(this.sounds_table,t,"surface")})),this.fetchJsonResource("modules/dice-so-nice/sounds/dicehit.json").then((t=>{this.processSoundsData(this.sounds_dice,t,"dicehit")}))}fetchJsonResource(t){return fetch(t).then((t=>t.json()))}processSoundsData(t,i,r){new foundry.audio.Sound(`modules/dice-so-nice/sounds/${i.resources[0]}`,{forceBuffer:!0}).load().then((i=>t.source=i)),Object.entries(i.spritemap).forEach((i=>{let a=i[0].match(new RegExp(`${r}\\_([a-z\\_]*)`))[1];t[a]||(t[a]=[]),t[a].push(i[1])}))}playAudioSprite(t,i,r){if(!t)return!1;new foundry.audio.Sound(t.src,{forceBuffer:!0}).load().then((t=>t.play({loop:i.loop,loopStart:i.start,loopEnd:i.end,volume:r*this.volume})))}eventCollide({source:t,diceType:i,diceMaterial:r,strength:a}){if(!this.sounds||!this.sounds_dice.source)return;const o=this.selectSound(t,i,r),l=this.getSoundSource(t);this.playAudioSprite(l,o,a)}getSoundSource(t){return"dice"===t?this.sounds_dice.source:this.sounds_table.source}selectSound(t,i,r){let a;if("dice"===t)if("dc"!==i){let t=this.sounds_dice.plastic;this.sounds_dice[r]&&(t=this.sounds_dice[r]),a=t[Math.floor(Math.random()*t.length)]}else a=this.sounds_dice.coin[Math.floor(Math.random()*this.sounds_dice.coin.length)];else{const t=this.soundsSurface,i=this.sounds_table[t];a=i[Math.floor(Math.random()*i.length)]}return a}generateCollisionSounds(t){const i=new Array(1e3);if(!this.sounds||!this.sounds_dice.source)return i;for(let r=0;r<t.length;r++){const a=t[r];if(!a)continue;const[o,l,c,h]=a,u=this.selectSound(o,l,c),d=this.getSoundSource(o);i[r]=[d,u,h]}return i}}class RGBELoader extends DataTextureLoader{constructor(t){super(t),this.type=ye}parse(t){const rgbe_error=function(t,i){switch(t){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(i||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(i||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(i||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(i||""))}},fgets=function(t,i,r){i=i||1024;let a=t.pos,o=-1,l=0,c="",h=String.fromCharCode.apply(null,new Uint16Array(t.subarray(a,a+128)));for(;0>(o=h.indexOf("\n"))&&l<i&&a<t.byteLength;)c+=h,l+=h.length,a+=128,h+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(a,a+128)));return-1<o&&(t.pos+=l+o+1,c+h.slice(0,o))},RGBEByteToRGBFloat=function(t,i,r,a){const o=t[i+3],l=Math.pow(2,o-128)/255;r[a+0]=t[i+0]*l,r[a+1]=t[i+1]*l,r[a+2]=t[i+2]*l,r[a+3]=1},RGBEByteToRGBHalf=function(t,i,r,a){const o=t[i+3],l=Math.pow(2,o-128)/255;r[a+0]=bn.toHalfFloat(Math.min(t[i+0]*l,65504)),r[a+1]=bn.toHalfFloat(Math.min(t[i+1]*l,65504)),r[a+2]=bn.toHalfFloat(Math.min(t[i+2]*l,65504)),r[a+3]=bn.toHalfFloat(1)},i=new Uint8Array(t);i.pos=0;const r=function(t){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let c,h;for((t.pos>=t.byteLength||!(c=fgets(t)))&&rgbe_error(1,"no header found"),(h=c.match(/^#\?(\S+)/))||rgbe_error(3,"bad initial token"),l.valid|=1,l.programtype=h[1],l.string+=c+"\n";c=fgets(t),!1!==c;)if(l.string+=c+"\n","#"!==c.charAt(0)){if((h=c.match(i))&&(l.gamma=parseFloat(h[1])),(h=c.match(r))&&(l.exposure=parseFloat(h[1])),(h=c.match(a))&&(l.valid|=2,l.format=h[1]),(h=c.match(o))&&(l.valid|=4,l.height=parseInt(h[1],10),l.width=parseInt(h[2],10)),2&l.valid&&4&l.valid)break}else l.comments+=c+"\n";return 2&l.valid||rgbe_error(3,"missing format specifier"),4&l.valid||rgbe_error(3,"missing image size specifier"),l}(i),a=r.width,o=r.height,l=function(t,i,r){const a=i;if(a<8||a>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);a!==(t[2]<<8|t[3])&&rgbe_error(3,"wrong scanline width");const o=new Uint8Array(4*i*r);o.length||rgbe_error(4,"unable to allocate buffer space");let l=0,c=0;const h=4*a,u=new Uint8Array(4),d=new Uint8Array(h);let p=r;for(;p>0&&c<t.byteLength;){c+4>t.byteLength&&rgbe_error(1),u[0]=t[c++],u[1]=t[c++],u[2]=t[c++],u[3]=t[c++],2==u[0]&&2==u[1]&&(u[2]<<8|u[3])==a||rgbe_error(3,"bad rgbe scanline format");let i,r=0;for(;r<h&&c<t.byteLength;){i=t[c++];const a=i>128;if(a&&(i-=128),(0===i||r+i>h)&&rgbe_error(3,"bad scanline data"),a){const a=t[c++];for(let t=0;t<i;t++)d[r++]=a}else d.set(t.subarray(c,c+i),r),r+=i,c+=i}const m=a;for(let t=0;t<m;t++){let i=0;o[l]=d[t+i],i+=a,o[l+1]=d[t+i],i+=a,o[l+2]=d[t+i],i+=a,o[l+3]=d[t+i],l+=4}p--}return o}(i.subarray(i.pos),a,o);let c,h,u;switch(this.type){case ge:u=l.length/4;const t=new Float32Array(4*u);for(let i=0;i<u;i++)RGBEByteToRGBFloat(l,4*i,t,4*i);c=t,h=ge;break;case ye:u=l.length/4;const i=new Uint16Array(4*u);for(let t=0;t<u;t++)RGBEByteToRGBHalf(l,4*t,i,4*t);c=i,h=ye;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:a,height:o,data:c,header:r.string,gamma:r.gamma,exposure:r.exposure,type:h}}setDataType(t){return this.type=t,this}load(t,i,r,a){return super.load(t,(function onLoadCallback(t,r){switch(t.type){case ge:case ye:t.colorSpace=_t,t.minFilter=oe,t.magFilter=oe,t.generateMipmaps=!1,t.flipY=!0}i&&i(t,r)}),r,a)}}const Ba={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Pass{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}dispose(){}}const za=new OrthographicCamera(-1,1,1,-1,0,1);const Va=new class FullscreenTriangleGeometry extends BufferGeometry{constructor(){super(),this.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2))}};class FullScreenQuad{constructor(t){this._mesh=new Mesh(Va,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,za)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class ShaderPass extends Pass{constructor(t,i){super(),this.textureID=void 0!==i?i:"tDiffuse",t instanceof ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=qn.clone(t.uniforms),this.material=new ShaderMaterial({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new FullScreenQuad(this.material)}render(t,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(i),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class MaskPass extends Pass{constructor(t,i){super(),this.scene=t,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,i,r){const a=t.getContext(),o=t.state;let l,c;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(l=0,c=1):(l=1,c=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,l,4294967295),o.buffers.stencil.setClear(c),o.buffers.stencil.setLocked(!0),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.buffers.stencil.setLocked(!0)}}class ClearMaskPass extends Pass{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class EffectComposer{constructor(t,i){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===i){const r=t.getSize(new Vector2);this._width=r.width,this._height=r.height,(i=new WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:ye})).texture.name="EffectComposer.rt1"}else this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ShaderPass(Ba),this.copyPass.material.blending=0,this.clock=new Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,i){this.passes.splice(i,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const i=this.passes.indexOf(t);-1!==i&&this.passes.splice(i,1)}isLastEnabledPass(t){for(let i=t+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const i=this.renderer.getRenderTarget();let r=!1;for(let i=0,a=this.passes.length;i<a;i++){const a=this.passes[i];if(!1!==a.enabled){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),a.needsSwap){if(r){const i=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(i.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),r.setFunc(i.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==MaskPass&&(a instanceof MaskPass?r=!0:a instanceof ClearMaskPass&&(r=!1))}}this.renderer.setRenderTarget(i)}reset(t){if(void 0===t){const i=this.renderer.getSize(new Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,i){this._width=t,this._height=i;const r=this._width*this._pixelRatio,a=this._height*this._pixelRatio;this.renderTarget1.setSize(r,a),this.renderTarget2.setSize(r,a);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(r,a)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class OutlinePass extends Pass{constructor(t,i,r,a){super(),this.renderScene=i,this.renderCamera=r,this.selectedObjects=void 0!==a?a:[],this.visibleEdgeColor=new gn(1,1,1),this.hiddenEdgeColor=new gn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==t?new Vector2(t.x,t.y):new Vector2(256,256);const o=Math.round(this.resolution.x/this.downSampleRatio),l=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new WebGLRenderTarget(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new MeshDepthMaterial,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function replaceDepthToViewZ(t,i){const r=i.isPerspectiveCamera?"perspective":"orthographic";return t.replace(/DEPTH_TO_VIEW_Z/g,r+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new WebGLRenderTarget(this.resolution.x,this.resolution.y,{type:ye}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new WebGLRenderTarget(o,l,{type:ye}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new WebGLRenderTarget(o,l,{type:ye}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new WebGLRenderTarget(Math.round(o/2),Math.round(l/2),{type:ye}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new WebGLRenderTarget(o,l,{type:ye}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new WebGLRenderTarget(Math.round(o/2),Math.round(l/2),{type:ye}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(o,l),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(l/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const c=Ba;this.copyUniforms=qn.clone(c.uniforms),this.materialCopy=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:0,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new gn,this.oldClearAlpha=1,this.fsQuad=new FullScreenQuad(null),this.tempPulseColor1=new gn,this.tempPulseColor2=new gn,this.textureMatrix=new Matrix4}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(t,i){this.renderTargetMaskBuffer.setSize(t,i),this.renderTargetDepthBuffer.setSize(t,i);let r=Math.round(t/this.downSampleRatio),a=Math.round(i/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,a),this.renderTargetBlurBuffer1.setSize(r,a),this.renderTargetEdgeBuffer1.setSize(r,a),this.separableBlurMaterial1.uniforms.texSize.value.set(r,a),r=Math.round(r/2),a=Math.round(a/2),this.renderTargetBlurBuffer2.setSize(r,a),this.renderTargetEdgeBuffer2.setSize(r,a),this.separableBlurMaterial2.uniforms.texSize.value.set(r,a)}changeVisibilityOfSelectedObjects(t){const i=this._visibilityCache;function gatherSelectedMeshesCallBack(r){r.isMesh&&(!0===t?r.visible=i.get(r):(i.set(r,r.visible),r.visible=t))}for(let t=0;t<this.selectedObjects.length;t++){this.selectedObjects[t].traverse(gatherSelectedMeshesCallBack)}}changeVisibilityOfNonSelectedObjects(t){const i=this._visibilityCache,r=[];function gatherSelectedMeshesCallBack(t){t.isMesh&&r.push(t)}for(let t=0;t<this.selectedObjects.length;t++){this.selectedObjects[t].traverse(gatherSelectedMeshesCallBack)}this.renderScene.traverse((function VisibilityChangeCallBack(a){if(a.isMesh||a.isSprite){let o=!1;for(let t=0;t<r.length;t++){if(r[t].id===a.id){o=!0;break}}if(!1===o){const r=a.visible;!1!==t&&!0!==i.get(a)||(a.visible=t),i.set(a,r)}}else(a.isPoints||a.isLine)&&(!0===t?a.visible=i.get(a):(i.set(a,a.visible),a.visible=t))}))}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(t,i,r,a,o){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const i=t.autoClear;t.autoClear=!1,o&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const t=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(t),this.tempPulseColor2.multiplyScalar(t)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=OutlinePass.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=OutlinePass.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=OutlinePass.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(r),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=i}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=r.texture,t.setRenderTarget(null),this.fsQuad.render(t))}getPrepareMaskMaterial(){return new ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new Vector2(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new Vector2(.5,.5)},visibleEdgeColor:{value:new Vector3(1,1,1)},hiddenEdgeColor:{value:new Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(t){return new ShaderMaterial({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new Vector2(.5,.5)},direction:{value:new Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}OutlinePass.BlurDirectionX=new Vector2(1,0),OutlinePass.BlurDirectionY=new Vector2(0,1);class RenderPass extends Pass{constructor(t,i,r=null,a=null,o=null){super(),this.scene=t,this.camera=i,this.overrideMaterial=r,this.clearColor=a,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new gn}render(t,i,r){const a=t.autoClear;let o,l;t.autoClear=!1,null!==this.overrideMaterial&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),null!==this.clearAlpha&&(o=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:r),!0===this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),null!==this.clearColor&&t.setClearColor(this._oldClearColor),null!==this.clearAlpha&&t.setClearAlpha(o),null!==this.overrideMaterial&&(this.scene.overrideMaterial=l),t.autoClear=a}}const ka={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = sRGBTransferOETF( tex );\n\n\t\t}"},Ga={name:"SMAAEdgesShader",defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},Ha={name:"SMAAWeightsShader",defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},Wa={name:"SMAABlendShader",uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"};class SMAAPass extends Pass{constructor(t,i){super(),this.edgesRT=new WebGLRenderTarget(t,i,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new WebGLRenderTarget(t,i,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const r=this,a=new Image;a.crossOrigin="Anonymous",a.src=this.getAreaTexture(),a.onload=function(){r.areaTexture.needsUpdate=!0},this.areaTexture=new Texture,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=a,this.areaTexture.minFilter=oe,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const o=new Image;o.crossOrigin="Anonymous",o.src=this.getSearchTexture(),o.onload=function(){r.searchTexture.needsUpdate=!0},this.searchTexture=new Texture,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=o,this.searchTexture.magFilter=re,this.searchTexture.minFilter=re,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=qn.clone(Ga.uniforms),this.uniformsEdges.resolution.value.set(1/t,1/i),this.materialEdges=new ShaderMaterial({defines:Object.assign({},Ga.defines),uniforms:this.uniformsEdges,vertexShader:Ga.vertexShader,fragmentShader:Ga.fragmentShader}),this.uniformsWeights=qn.clone(Ha.uniforms),this.uniformsWeights.resolution.value.set(1/t,1/i),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new ShaderMaterial({defines:Object.assign({},Ha.defines),uniforms:this.uniformsWeights,vertexShader:Ha.vertexShader,fragmentShader:Ha.fragmentShader}),this.uniformsBlend=qn.clone(Wa.uniforms),this.uniformsBlend.resolution.value.set(1/t,1/i),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new ShaderMaterial({uniforms:this.uniformsBlend,vertexShader:Wa.vertexShader,fragmentShader:Wa.fragmentShader}),this.needsSwap=!1,this.fsQuad=new FullScreenQuad(null)}render(t,i,r){this.uniformsEdges.tDiffuse.value=r.texture,this.fsQuad.material=this.materialEdges,t.setRenderTarget(this.edgesRT),this.clear&&t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialWeights,t.setRenderTarget(this.weightsRT),this.clear&&t.clear(),this.fsQuad.render(t),this.uniformsBlend.tColor.value=r.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(i),this.clear&&t.clear(),this.fsQuad.render(t))}setSize(t,i){this.edgesRT.setSize(t,i),this.weightsRT.setSize(t,i),this.materialEdges.uniforms.resolution.value.set(1/t,1/i),this.materialWeights.uniforms.resolution.value.set(1/t,1/i),this.materialBlend.uniforms.resolution.value.set(1/t,1/i)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose()}}const ja={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new gn(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat v = luminance( texel.xyz );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class UnrealBloomPass extends Pass{constructor(t,i,r,a){super(),this.strength=void 0!==i?i:1,this.radius=r,this.threshold=a,this.resolution=void 0!==t?new Vector2(t.x,t.y):new Vector2(256,256),this.clearColor=new gn(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new WebGLRenderTarget(o,l,{type:ye}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let t=0;t<this.nMips;t++){const i=new WebGLRenderTarget(o,l,{type:ye});i.texture.name="UnrealBloomPass.h"+t,i.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(i);const r=new WebGLRenderTarget(o,l,{type:ye});r.texture.name="UnrealBloomPass.v"+t,r.texture.generateMipmaps=!1,this.renderTargetsVertical.push(r),o=Math.round(o/2),l=Math.round(l/2)}const c=ja;this.highPassUniforms=qn.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=a,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),this.separableBlurMaterials=[];const h=[3,5,7,9,11];o=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let t=0;t<this.nMips;t++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[t])),this.separableBlurMaterials[t].uniforms.invSize.value=new Vector2(1/o,1/l),o=Math.round(o/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=i,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const u=Ba;this.copyUniforms=qn.clone(u.uniforms),this.blendMaterial=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new gn,this.oldClearAlpha=1,this.basic=new MeshBasicMaterial,this.fsQuad=new FullScreenQuad(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,i){let r=Math.round(t/2),a=Math.round(i/2);this.renderTargetBright.setSize(r,a);for(let t=0;t<this.nMips;t++)this.renderTargetsHorizontal[t].setSize(r,a),this.renderTargetsVertical[t].setSize(r,a),this.separableBlurMaterials[t].uniforms.invSize.value=new Vector2(1/r,1/a),r=Math.round(r/2),a=Math.round(a/2)}render(t,i,r,a,o){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const l=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),o&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let c=this.renderTargetBright;for(let i=0;i<this.nMips;i++)this.fsQuad.material=this.separableBlurMaterials[i],this.separableBlurMaterials[i].uniforms.colorTexture.value=c.texture,this.separableBlurMaterials[i].uniforms.direction.value=UnrealBloomPass.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[i]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[i].uniforms.colorTexture.value=this.renderTargetsHorizontal[i].texture,this.separableBlurMaterials[i].uniforms.direction.value=UnrealBloomPass.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[i]),t.clear(),this.fsQuad.render(t),c=this.renderTargetsVertical[i];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=l}getSeperableBlurMaterial(t){const i=[];for(let r=0;r<t;r++)i.push(.39894*Math.exp(-.5*r*r/(t*t))/t);return new ShaderMaterial({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new Vector2(.5,.5)},direction:{value:new Vector2(.5,.5)},gaussianCoefficients:{value:i}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(t){return new ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}UnrealBloomPass.BlurDirectionX=new Vector2(1,0),UnrealBloomPass.BlurDirectionY=new Vector2(0,1);class DiceBox{constructor(t,i,r){this.known_types=["d4","d6","d8","d10","d12","d14","d16","d20","d24","d30","d100"],this.container=t,this.dimensions=r.dimensions,this.dicefactory=i,this.config=r,this.speed=1,this.isVisible=!1,this.last_time=0,this.running=!1,this.allowInteractivity=!1,this.raycaster=new Raycaster,this.blackColor=new gn(0,0,0),this.nbIterationsBetweenRolls=15,this.display={currentWidth:null,currentHeight:null,containerWidth:null,containerHeight:null,aspect:null,scale:null},this.mouse={pos:new Vector2,startDrag:void 0,startDragTime:void 0,constraintDown:!1,constraint:null},this.cameraHeight={max:null,close:null,medium:null,far:null},this.clock=new Clock,this.iteration,this.renderer,this.barrier,this.camera,this.light,this.light_amb,this.desk,this.pane,this.public_interface={},this.diceList=[],this.deadDiceList=[],this.framerate=1/60,this.throwingForce="medium",this.immersiveDarkness=!0,this.toneMappingExposureDefault=1,this.selector={animate:!0,rotate:!0,intersected:null,dice:[]},this.showExtraDice=!1,this.colors={ambient:16772785,spotlight:0,ground:526368},this.rethrowFunctions={},this.afterThrowFunctions={},this.soundManager=new SoundManager,this.layers={dice:0,bloom:1},this.bloomMaterials={},this.darkMaterial=new MeshBasicMaterial({color:"black"})}initialize(){return new Promise((async t=>{this.soundManager.update({sounds:this.config.sounds,volume:this.config.soundsVolume,soundsSurface:this.config.soundsSurface,muteSoundSecretRolls:this.config.muteSoundSecretRolls}),this.showExtraDice=this.config.showExtraDice,this.allowInteractivity="board"==this.config.boxType&&game.settings.get("dice-so-nice","allowInteractivity"),this.dicefactory.setQualitySettings(this.config);let i=game.settings.get("dice-so-nice","globalAnimationSpeed");if(this.speed="0"===i?this.config.speed:parseInt(i,10),this.throwingForce=this.config.throwingForce,this.immersiveDarkness=this.config.immersiveDarkness,this.scene=new Scene,null!=game.dice3d.dice3dRenderers[this.config.boxType])this.renderer=game.dice3d.dice3dRenderers[this.config.boxType],this.scene.environment=this.renderer.scopedTextureCache.textureCube,this.scene.traverse((t=>{"Mesh"===t.type&&(t.material.needsUpdate=!0)}));else{const t=game.user.getFlag("dice-so-nice","preserveDrawingBuffer")||!1;this.renderer=new WebGLRenderer({antialias:!1,alpha:!0,powerPreference:"high-performance",preserveDrawingBuffer:t}),this.dicefactory.useHighDPI&&this.renderer.setPixelRatio(window.devicePixelRatio),this.dicefactory.realisticLighting&&(this.renderer.toneMapping=X,this.renderer.toneMappingExposure=this.toneMappingExposureDefault);const i=this.renderer.capabilities;this.anisotropy=i.getMaxAnisotropy()<16?i.getMaxAnisotropy():16,await this.loadContextScopedTextures(this.config.boxType),this.dicefactory.initializeMaterials(),game.dice3d.dice3dRenderers[this.config.boxType]=this.renderer}this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=this.dicefactory.shadows,this.renderer.shadowMap.type="high"==this.dicefactory.shadowQuality?m:p,this.renderer.setClearColor(0,0),this.setScene(this.config.dimensions),"board"==this.config.boxType&&(this.physicsWorker=this.dicefactory.physicsWorker,await this.physicsWorker.exec("init",{muteSoundSecretRolls:this.muteSoundSecretRolls,height:this.display.containerHeight,width:this.display.containerWidth}),this.physicsWorker.off("collide"),this.physicsWorker.on("collide",(t=>{this.soundManager.eventCollide(t)}))),t()}))}loadContextScopedTextures(t){return new Promise((i=>{if(this.renderer.scopedTextureCache={type:t},this.dicefactory.realisticLighting){let t=new TextureLoader;this.renderer.scopedTextureCache.roughnessMap_fingerprint=t.load("modules/dice-so-nice/textures/roughnessMap_finger.webp"),this.renderer.scopedTextureCache.roughnessMap_wood=t.load("modules/dice-so-nice/textures/roughnessMap_wood.webp"),this.renderer.scopedTextureCache.roughnessMap_metal=t.load("modules/dice-so-nice/textures/roughnessMap_metal.webp"),this.renderer.scopedTextureCache.roughnessMap_stone=t.load("modules/dice-so-nice/textures/roughnessMap_stone.webp"),this.renderer.scopedTextureCache.roughnessMap_fingerprint.anisotropy=this.anisotropy,this.renderer.scopedTextureCache.roughnessMap_wood.anisotropy=this.anisotropy,this.renderer.scopedTextureCache.roughnessMap_metal.anisotropy=this.anisotropy,this.renderer.scopedTextureCache.roughnessMap_stone.anisotropy=this.anisotropy,this.pmremGenerator=new PMREMGenerator(this.renderer),this.pmremGenerator.compileEquirectangularShader(),(new RGBELoader).setDataType(ye).setPath("modules/dice-so-nice/textures/equirectangular/").load("blouberg_sunrise_2_1k.hdr",function(t){this.renderer.scopedTextureCache.textureCube=this.pmremGenerator.fromEquirectangular(t).texture,this.renderer.scopedTextureCache.textureCube.colorSpace=bt,this.scene.environment=this.renderer.scopedTextureCache.textureCube,t.dispose(),this.pmremGenerator.dispose(),i()}.bind(this))}else{let t=new CubeTextureLoader;t.setPath("modules/dice-so-nice/textures/cubemap/"),this.renderer.scopedTextureCache.textureCube=t.load(["px.webp","nx.webp","py.webp","ny.webp","pz.webp","nz.webp"]),i()}}))}setScene(t){if(this.display.currentWidth=this.container.clientWidth>0?this.container.clientWidth:parseInt(this.container.style.width),this.display.currentHeight=this.container.clientHeight>0?this.container.clientHeight:parseInt(this.container.style.height),this.display.currentWidth/=2,this.display.currentHeight/=2,t?(this.display.containerWidth=t.w,this.display.containerHeight=t.h,this.display.currentWidth&&this.display.currentHeight||(this.display.currentWidth=t.w/2,this.display.currentHeight=t.h/2)):(this.display.containerWidth=this.display.currentWidth,this.display.containerHeight=this.display.currentHeight),this.display.aspect=Math.min(this.display.currentWidth/this.display.containerWidth,this.display.currentHeight/this.display.containerHeight),this.config.autoscale?this.display.scale=Math.sqrt(this.display.containerWidth*this.display.containerWidth+this.display.containerHeight*this.display.containerHeight)/13:this.display.scale=this.config.scale,"board"==this.config.boxType&&this.dicefactory.setScale(this.display.scale),this.renderer.setSize(2*this.display.currentWidth,2*this.display.currentHeight),this.cameraHeight.max=this.display.currentHeight/this.display.aspect/Math.tan(10*Math.PI/180),this.cameraHeight.medium=this.cameraHeight.max/1.5,this.cameraHeight.far=this.cameraHeight.max,this.cameraHeight.close=this.cameraHeight.max/2,this.camera&&this.scene.remove(this.camera),this.camera=new PerspectiveCamera(20,this.display.currentWidth/this.display.currentHeight,1,1.3*this.cameraHeight.max),"showcase"===this.config.boxType)this.camera.position.z=this.selector.dice.length>9?this.cameraHeight.far:this.selector.dice.length<6?this.cameraHeight.close:this.cameraHeight.medium;else this.camera.position.z=this.cameraHeight.far;this.camera.near=10,this.camera.lookAt(new Vector3(0,0,0));const i=Math.max(this.display.containerWidth,this.display.containerHeight);let r,a;this.light&&this.scene.remove(this.light),this.light_amb&&this.scene.remove(this.light_amb),this.dicefactory.realisticLighting?(r=1.5,a=1):"board"==this.config.boxType?(r=1.2,a=1):(r=1.5,a=3),this.light_amb=new HemisphereLight(this.colors.ambient,this.colors.ground,a),this.scene.add(this.light_amb),this.light=new DirectionalLight(this.colors.spotlight,r),"board"==this.config.boxType?this.light.position.set(-this.display.containerWidth/10,this.display.containerHeight/10,i/2):this.light.position.set(0,this.display.containerHeight/10,i/2),this.light.target.position.set(0,0,0),this.light.distance=0,this.light.castShadow=this.dicefactory.shadows,this.light.shadow.camera.near=i/10,this.light.shadow.camera.far=5*i,this.light.shadow.camera.fov=50,this.light.shadow.bias=-1e-4;const o="high"==this.dicefactory.shadowQuality?2048:1024;this.light.shadow.mapSize.width=o,this.light.shadow.mapSize.height=o;const l=1e3;this.light.shadow.camera.left=-l,this.light.shadow.camera.right=l,this.light.shadow.camera.top=l,this.light.shadow.camera.bottom=-l,this.scene.add(this.light),this.desk&&this.scene.remove(this.desk);let c=new ShadowMaterial;if(c.opacity=.5,this.desk=new Mesh(new PlaneGeometry(6*this.display.containerWidth,6*this.display.containerHeight,1,1),c),this.desk.receiveShadow=this.dicefactory.shadows,this.desk.position.set(0,0,-1),this.scene.add(this.desk),this.dicefactory.realisticLighting){let t=new RenderPass(this.scene,this.camera);const i=new Vector2(2*this.display.currentWidth,2*this.display.currentHeight);this.bloomPass=new UnrealBloomPass(i,game.dice3d.uniforms.bloomStrength.value,game.dice3d.uniforms.bloomRadius.value,game.dice3d.uniforms.bloomThreshold.value),this.bloomLayer=new Layers,this.bloomLayer.set(this.layers.bloom),this.gammaPass=new ShaderPass(ka),this.outlinePass=new OutlinePass(i,this.scene,this.camera),this.outlinePass.pulsePeriod=1.5;let r=i.multiplyScalar(this.renderer.getPixelRatio()),a={type:game.canvas.app.renderer.context.extensions.floatTextureLinear?ge:ye,samples:"msaa"==this.dicefactory.aa?4:0,anisotropy:this.anisotropy};-1!=navigator.userAgent.indexOf("Mac OS X")&&-1!=navigator.userAgent.indexOf("Chrome")&&(a.stencilBuffer=!0),this.composerTarget=new WebGLRenderTarget(r.x,r.y,a),this.bloomComposer=new EffectComposer(this.renderer,this.composerTarget),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(t),this.bloomComposer.addPass(this.bloomPass),this.blendingPass=new ShaderPass(new ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:"\n\t\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t",fragmentShader:"\n\t\t\t\t\t\tuniform sampler2D baseTexture;\n\t\t\t\t\t\tuniform sampler2D bloomTexture;\n\t\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\tvec4 base_color = texture2D(baseTexture, vUv);\n\t\t\t\t\t\t\tvec4 bloom_color = texture2D(bloomTexture, vUv);\n\n\t\t\t\t\t\t\tfloat lum = 0.21 * bloom_color.r + 0.71 * bloom_color.g + 0.07 * bloom_color.b;\n\t\t\t\t\t\t\tgl_FragColor = vec4(base_color.rgb + bloom_color.rgb, max(base_color.a, lum));\n\t\t\t\t\t\t}\n\t\t\t\t\t",defines:{}}),"baseTexture"),this.blendingPass.needsSwap=!0,this.finalComposer=new EffectComposer(this.renderer,this.composerTarget),this.finalComposer.addPass(t),this.finalComposer.addPass(this.outlinePass),this.finalComposer.addPass(this.blendingPass),"smaa"==this.dicefactory.aa&&(this.AAPass=new SMAAPass(r.x,r.y),this.AAPass.renderToScreen=!0,this.finalComposer.addPass(this.AAPass)),this.finalComposer.addPass(this.gammaPass)}this.renderScene()}async update(t){this.showExtraDice=t.showExtraDice,this.soundManager.update({muteSoundSecretRolls:t.muteSoundSecretRolls,sounds:t.sounds,volume:t.volume,soundsSurface:t.soundsSurface}),"board"==this.config.boxType&&(t.autoscale?this.display.scale=Math.sqrt(this.display.containerWidth*this.display.containerWidth+this.display.containerHeight*this.display.containerHeight)/13:this.display.scale=t.scale,this.dicefactory.setScale(this.display.scale)),this.dicefactory.setQualitySettings(t);let i=game.settings.get("dice-so-nice","globalAnimationSpeed");this.speed="0"===i?parseInt(t.speed,10):parseInt(i,10),this.light.castShadow=this.dicefactory.shadows,this.desk.receiveShadow=this.dicefactory.shadows,this.renderer.shadowMap.enabled=this.dicefactory.shadows,this.renderer.shadowMap.type="high"==this.dicefactory.shadowQuality?m:p,await this.dicefactory.preloadPresets(!0,null,t.appearance),this.throwingForce=t.throwingForce,this.immersiveDarkness=t.immersiveDarkness,this.scene.traverse((t=>{"Mesh"===t.type&&(t.material.needsUpdate=!0)}))}vectorRand({x:t,y:i}){let r=Math.random()*Math.PI/5-Math.PI/5/2,a={x:t*Math.cos(r)-i*Math.sin(r),y:t*Math.sin(r)+i*Math.cos(r)};return 0==a.x&&(a.x=.01),0==a.y&&(a.y=.01),a}getVectors(t,i,r,a){for(let o=0;o<t.dice.length;o++){const l=this.dicefactory.get(t.dice[o].type);let c=this.vectorRand(i);c.x/=a,c.y/=a;let h={x:this.display.containerWidth*(c.x>0?-1:1)*.9+Math.floor(201*Math.random())-100,y:this.display.containerHeight*(c.y>0?-1:1)*.9+Math.floor(201*Math.random())-100,z:200*Math.random()+200},u=Math.abs(c.x/c.y);u>1?h.y/=u:h.x*=u;let d,p,m,g=this.vectorRand(i);g.x/=a,g.y/=a,"d2"!=l.shape?(d={x:g.x*r,y:g.y*r,z:-10},p={x:-(Math.random()*c.y*5+l.inertia*c.y),y:Math.random()*c.x*5+l.inertia*c.x,z:0},m={x:Math.random(),y:Math.random(),z:Math.random(),a:Math.random()},m={x:0,y:0,z:0,a:0}):(d={x:g.x*r/10,y:g.y*r/10,z:3e3},p={x:12*l.inertia,y:1*l.inertia,z:0},m={x:1,y:1,z:Math.random(),a:Math.random()}),t.dice[o].vectors={type:l.type,pos:h,velocity:d,angle:p,axis:m}}return t}async swapDiceFace(t){const i=this.dicefactory.get(t.notation.type);let r=parseInt(await t.getValue()),a=parseInt(t.forcedResult);if("d10"==i.shape&&0==a&&(a=10),i.valueMap&&(a=i.valueMap[a]),r==a)return;let o=r>a?a+","+r:r+","+a,l=u[t.shape].rotationCombinations[o];l||(l=[0,0,0]);let c=new Euler(Xt.degToRad(l[0]),Xt.degToRad(l[1]),Xt.degToRad(l[2])),h=(new ri).setFromEuler(c);r>a&&h.invert(),t.applyQuaternion(h)}async spawnDice(t,i){let r=t.vectors;const a=this.dicefactory.get(r.type);if(!a)return;let o=await this.dicefactory.create(this.renderer.scopedTextureCache,a.type,i);if(!o)return;let l=a.mass;switch(i.material){case"metal":l*=7;break;case"wood":l*=.65;break;case"glass":l*=2;break;case"stone":l*=1.5}o.notation=r,o.result=null,o.forcedResult=t.result,o.startAtIteration=t.startAtIteration,o.stopped=0,o.castShadow=this.dicefactory.shadows,o.receiveShadow=this.dicefactory.shadows,o.specialEffects=t.specialEffects,o.options=t.options,await this.physicsWorker.exec("createDice",{id:o.id,shape:a.shape,material:i.material,vectordata:r,mass:l,startAtIteration:t.startAtIteration,options:t.options}),o.userData.glowingInDarkness&&(canvas.darknessLevel>.5?(o.material.emissiveIntensity=.3,o.material.emissive=new gn(16777215)):(o.material.emissiveIntensity=0,o.material.emissive=new gn(0)));let c=new Group;c.add(o),this.diceList.push(o),0==o.startAtIteration&&(this.scene.add(c),await this.physicsWorker.exec("addDice",o.id))}throwFinished(){let t=!0;if(this.iteration<=this.minIterations)return!1;if(t=this.iteration>=this.iterationsNeeded,t&&this.rolling)for(let t=0,i=this.diceList.length;t<i;++t)this.diceList[t].sim&&(this.diceList[t].sim.stepPositions=new Float32Array(3003),this.diceList[t].sim.stepQuaternions=new Float32Array(4004),this.diceList[t].dead>0&&(this.diceList[t].static=!0));return t}async simulateThrow(){this.rolling=!0;const t={minIterations:this.minIterations,nbIterationsBetweenRolls:this.nbIterationsBetweenRolls,framerate:this.framerate,canBeFlipped:game.settings.get("dice-so-nice","diceCanBeFlipped")},{ids:i,quaternionsBuffers:r,positionsBuffers:a,detectedCollides:o,deads:l,iterationsNeeded:c}=await this.physicsWorker.exec("simulateThrow",t),h=r.map((t=>new Float32Array(t))),u=a.map((t=>new Float32Array(t)));this.iterationsNeeded=c;const d=new Map;i.forEach(((t,i)=>{d.set(t,i)}));[...this.diceList,...this.deadDiceList].forEach((t=>{const i=d.get(t.id);void 0!==i&&(t.sim={dead:l[i],stepQuaternions:h[i],stepPositions:u[i]})})),this.detectedCollides=this.soundManager.generateCollisionSounds(o)}animateThrow(){let t=(new Date).getTime();this.last_time=this.last_time||t-1e3*this.framerate;let i=(t-this.last_time)/1e3,r=Math.floor(i/this.framerate);if(this.animatedDiceDetected){let t=this.clock.getDelta();for(const i of this.scene.children){let r=i.children&&i.children.length&&null!=i.children[0].sim?i.children[0]:null;r&&r.mixer&&r.mixer.update(t)}}if(this.iteration,this.iteration,r&&this.rolling){for(let t=0;t<r*this.speed;t++)if(++this.iteration,!(this.iteration%this.nbIterationsBetweenRolls))for(let t=0;t<this.diceList.length;t++)this.diceList[t].startAtIteration==this.iteration&&this.scene.add(this.diceList[t].parent);this.iteration>this.iterationsNeeded&&(this.iteration=this.iterationsNeeded);for(const t of this.scene.children){let i=t.children&&t.children.length&&null!=t.children[0].sim&&(!t.children[0].sim.dead||t.children[0].sim.dead>this.iteration)?t.children[0]:null;i&&i.sim.stepPositions[3*this.iteration]&&(t.position.fromArray(i.sim.stepPositions,3*this.iteration),t.quaternion.fromArray(i.sim.stepQuaternions,4*this.iteration))}this.detectedCollides[this.iteration]&&this.soundManager.playAudioSprite(...this.detectedCollides[this.iteration])}else this.rolling||this.physicsWorker.exec("playStep",{time_diff:i}).then((({ids:t,quaternionsBuffers:i,positionsBuffers:r,worldAsleep:a})=>{if(!t)return;if(a)return;const o=new Float32Array(i),l=new Float32Array(r),c=new Map;t.forEach(((t,i)=>{c.set(t,i)}));for(const t of this.scene.children){let i=t.children&&t.children.length&&null!=t.children[0].sim&&!t.children[0].sim.dead?t.children[0]:null;i&&(t.position.fromArray(l,3*c.get(i.id)),t.quaternion.fromArray(o,4*c.get(i.id)))}}));if(this.isVisible&&(this.allowInteractivity||this.animatedDiceDetected||r||Ua.renderQueue.length)){if(Ua.renderSFX(),this.dicefactory.realisticLighting&&this.immersiveDarkness){let t=canvas.darknessLevel||0;this.renderer.toneMappingExposure=.4*this.toneMappingExposureDefault+(.6*this.toneMappingExposureDefault-.6*t)}this.renderScene()}this.rendererStats&&this.rendererStats.update(this.renderer),this.last_time=this.last_time+r*this.framerate*1e3,this.throwFinished()&&(this.running&&this.handleSpecialEffectsInit().then((()=>{this.callback(this.throws),this.callback=null,this.throws=null,this.rolling=!1,this.animatedDiceDetected||this.allowInteractivity&&this.deadDiceList.length+this.diceList.length>0||Ua.renderQueue.length||this.removeTicker(this.animateThrow)})),this.running=!1)}async start_throw(t,i){if(this.rolling)return;let r=0;t.forEach((t=>{let i={x:(2*Math.random()-.5)*this.display.currentWidth,y:-(2*Math.random()-.5)*this.display.currentHeight},a=Math.sqrt(i.x*i.x+i.y*i.y),o=.8;switch(this.throwingForce){case"weak":o=.5;break;case"strong":o=1.8}let l=(Math.random()+3)*o*a;t=this.getVectors(t,i,l,a),r+=t.dice.length}));let a=game.settings.get("dice-so-nice","maxDiceNumber");this.deadDiceList.length+this.diceList.length+r>a&&this.clearAll(),this.isVisible=!0,await this.rollDice(t,i)}clearDice(){this.running=!1,this.deadDiceList=this.deadDiceList.concat(this.diceList),this.diceList=[]}async clearAll(){this.clearDice();const t=[];let i;for(;i=this.deadDiceList.pop();)this.scene.remove("Scene"==i.parent.type?i:i.parent),t.push(i.id);this.pane&&this.scene.remove(this.pane),"board"==this.config.boxType?(this.physicsWorker&&await this.physicsWorker.exec("removeDice",t),Ua.clearQueue(),this.removeTicker(this.animateThrow)):this.removeTicker(this.animateSelector),this.renderScene(),this.isVisible=!1}darkenNonBloomed(t){t.isMesh&&!1===this.bloomLayer.test(t.layers)&&(this.bloomMaterials[t.uuid]=t.material,t.material=this.darkMaterial)}restoreMaterial(t){this.bloomMaterials[t.uuid]&&(t.material=this.bloomMaterials[t.uuid],delete this.bloomMaterials[t.uuid])}renderScene(){if(game.dice3d.uniforms.time.value=performance.now()/1e3,this.dicefactory.realisticLighting){if(game.dice3d.uniforms.globalBloom.value=1,!this.finalComposer)return;let t=!1,i=this.blackColor;this.scene.traverseVisible((function(r){!r.material||null==r.material.emissive||r.material.emissive.equals(i)||(t=!0)})),t&&this.dicefactory.glow?(this.scene.traverseVisible(this.darkenNonBloomed.bind(this)),this.bloomComposer.render(),this.scene.traverseVisible(this.restoreMaterial.bind(this)),this.blendingPass.enabled=!0):this.blendingPass.enabled=!1,game.dice3d.uniforms.globalBloom.value=0,this.finalComposer.render()}else this.renderer.render(this.scene,this.camera)}clearScene(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.desk.material.dispose(),this.desk.geometry.dispose(),this.composerTarget&&this.composerTarget.dispose(),this.bloomPass&&this.bloomPass.dispose(),this.AAPass&&this.AAPass.dispose(),this.bloomComposer&&(this.bloomComposer.renderTarget1.dispose(),this.bloomComposer.renderTarget2.dispose()),this.finalComposer&&(this.finalComposer.renderTarget1.dispose(),this.finalComposer.renderTarget2.dispose()),this.dicefactory.shadows&&this.light.shadow.map.dispose(),"board"==this.config.boxType?this.removeTicker(this.animateThrow):this.removeTicker(this.animateSelector)}removeTicker(t){let i=canvas.app.ticker,r=i._head.next;for(;r;)r=r.fn===t?r.destroy():r.next;return i._head.next||i._cancelIfNeeded(),i}async rollDice(t,i){this.camera.position.z=this.cameraHeight.far,this.clearDice(),this.minIterations=(t.length-1)*this.nbIterationsBetweenRolls;for(let i=0;i<t.length;i++){let r=t[i];for(let t=0,a=r.dice.length;t<a;++t){r.dice[t].startAtIteration=i*this.nbIterationsBetweenRolls;let a=this.dicefactory.getAppearanceForDice(r.dsnConfig.appearance,r.dice[t].type,r.dice[t]);await this.spawnDice(r.dice[t],a)}}await this.simulateThrow(),this.iteration=0,this.animatedDiceDetected=!1;for(let t=0,i=this.diceList.length;t<i;++t){let i=this.diceList[t];i&&(await this.swapDiceFace(i),i.mixer&&(this.animatedDiceDetected=!0))}for(let t=0,i=this.diceList.length;t<i;++t)this.diceList[t]&&(this.diceList[t].result=null);this.rolling=!0,this.running=(new Date).getTime(),this.last_time=0,this.callback=i,this.throws=t,this.removeTicker(this.animateThrow),canvas.app.ticker.add(this.animateThrow,this)}async showcase(t){this.clearAll();let i=[...this.dicefactory.systems.get("standard").dice.keys()];const r=["d3","d5","d7","d14","d16","d24","d30"];this.showExtraDice||(i=i.filter((t=>!r.includes(t))));let a=this.display.containerWidth/this.display.containerHeight,o=Math.min(i.length,Math.round(Math.sqrt(a*i.length))),l=Math.floor((i.length+o-1)/o);if(this.camera.position.z=this.cameraHeight.medium,this.camera.position.x=this.display.containerWidth/2-this.display.containerWidth/o/2,this.camera.position.y=-this.display.containerHeight/2+this.display.containerHeight/l/2,this.camera.fov=2*Math.atan(this.display.containerHeight/(2*this.camera.position.z))*(180/Math.PI),this.camera.updateProjectionMatrix(),this.pane&&this.scene.remove(this.pane),this.desk&&this.scene.remove(this.desk),this.dicefactory.shadows){let t=new ShadowMaterial;t.opacity=.5,this.pane=new Mesh(new PlaneGeometry(2*this.display.containerWidth,2*this.display.containerHeight,1,1),t),this.pane.receiveShadow=this.dicefactory.shadows,this.pane.position.set(0,0,-70),this.scene.add(this.pane)}let c=0;for(let r=0;r<l;r++)for(let a=0;a<o&&!(c>=i.length);a++){let h=this.dicefactory.getAppearanceForDice(t.appearance,i[c]),u=await this.dicefactory.create(this.renderer.scopedTextureCache,i[c],h);u.scale.set(Math.min(5*u.scale.x/o,2*u.scale.x/l),Math.min(5*u.scale.y/o,2*u.scale.y/l),Math.min(5*u.scale.z/o,2*u.scale.z/l)),u.position.set(a*this.display.containerWidth/o,-r*this.display.containerHeight/l,0),u.castShadow=this.dicefactory.shadows,u.userData=i[c],this.diceList.push(u),this.scene.add(u),c++}this.last_time=0,this.selector.animate?(this.container.style.opacity=0,this.last_time=window.performance.now(),this.start_time=this.last_time,this.framerate=1e3/60,this.removeTicker(this.animateSelector),canvas.app.ticker.add(this.animateSelector,this)):this.renderScene(),setTimeout((()=>{this.scene.traverse((t=>{"Mesh"===t.type&&(t.material.needsUpdate=!0)}))}),2e3)}animateSelector(){let t=window.performance.now(),i=t-this.last_time;if(i>this.framerate){if(this.last_time=t-i%this.framerate,"1"!=this.container.style.opacity&&(this.container.style.opacity=Math.min(1,parseFloat(this.container.style.opacity)+.05)),this.selector.rotate){let t=.005*Math.PI;for(let i=0;i<this.diceList.length;i++)this.diceList[i].rotation.y+=t,this.diceList[i].rotation.x+=t/4,this.diceList[i].rotation.z+=t/10}this.renderScene()}}findRootObject(t){return t.hasOwnProperty("shape")?t:t.parent?this.findRootObject(t.parent):null}findShowcaseDie(t){this.raycaster.setFromCamera(t,this.camera);const i=this.raycaster.intersectObjects([...this.diceList,...this.deadDiceList],!0);return i.length?i[0]:null}findHoveredDie(){if(this.isVisible&&!this.running&&!this.mouse.constraintDown){this.raycaster.setFromCamera(this.mouse.pos,this.camera);const t=this.raycaster.intersectObjects([...this.diceList,...this.deadDiceList],!0);t.length?this.hoveredDie=t[0]:this.hoveredDie=null}}async onMouseMove(t,i){if(this.mouse.pos.x=i.x,this.mouse.pos.y=i.y,this.mouse.constraint){this.raycaster.setFromCamera(this.mouse.pos,this.camera);const t=this.raycaster.intersectObjects([this.desk]);if(t.length){let i=t[0].point;await this.physicsWorker.exec("updateConstraint",i)}}}async onMouseDown(t,i){this.mouse.pos.x=i.x,this.mouse.pos.y=i.y,this.hoveredDie=null,this.findHoveredDie();let r=this.hoveredDie;if(!r)return;let a=r.point;if(a){this.mouse.constraintDown=!0,t.stopPropagation(),t.preventDefault(),canvas.mouseInteractionManager&&(canvas.mouseInteractionManager.object.interactive=!1);let i=this.findRootObject(r.object);try{return await this.physicsWorker.exec("addConstraint",{id:i.id,pos:a}),this.mouse.constraint=!0,!0}catch(t){}}return!1}async onMouseUp(t){return!!this.mouse.constraintDown&&(this.mouse.constraintDown=!1,this.mouse.constraint=!1,await this.physicsWorker.exec("removeConstraint"),canvas.mouseInteractionManager&&canvas.mouseInteractionManager.activate(),!0)}async handleSpecialEffectsInit(){let t=[];return this.diceList.forEach((i=>{i.specialEffects&&i.specialEffects.forEach((r=>{t.push(Ua.playSFX(r,this,i))}))})),Promise.all(t)}}class DiceNotation{constructor(t,i=null){this.throws=[{dice:[]}],this.userConfig=i,t.dice.forEach((t=>{if([2,3,4,5,6,7,8,10,12,14,16,20,24,30,100].includes(t.faces)){let i=t.number,r=0,a=0;for(let o=0;o<t.results.length;o++)a>=this.throws.length&&this.throws.push({dice:[]}),t.results[o].exploded&&r++,t.results[o].indexThrow=a,t.results[o].discarded||--i<=0&&(a++,i=r,r=0)}}));let r=0,a=game.settings.get("dice-so-nice","maxDiceNumber");t.dice.some((i=>{if([2,3,4,5,6,7,8,10,12,14,16,20,24,30,100].includes(i.faces)){let o={};for(let l=0;l<i.results.length;l++){if(++r>=a)return!0;i.results[l].hidden||(t.ghost?o.ghost=!0:t.secret&&(o.secret=!0),i.modifiers.length&&(o.modifiers=i.modifiers),this.addDie({fvttDie:i,index:l,options:o}),100==i.faces&&this.addDie({fvttDie:i,index:l,isd10of100:!0,options:o}))}}}))}addDie({fvttDie:t,index:i,isd10of100:r=!1,options:a={}}){let o={},l=t.results[i].result;100==t.faces?(r?(l%=10,o.resultLabel=t.getResultLabel({result:l})):(l=parseInt(l/10),o.resultLabel=t.getResultLabel({result:10*l}),10==l&&(l=0)),o.d100Result=t.results[i].result):o.resultLabel=t.getResultLabel({result:l}),o.result=l,t.results[i].discarded&&(o.discarded=!0),o.type=t.constructor.DENOMINATION,t.constructor.name==CONFIG.Dice.terms.d.name?o.type+=r?"10":t.faces:o.type="d"+o.type,o.vectors=[],o.options=foundry.utils.duplicate(t.options),foundry.utils.mergeObject(o.options,a),this.userConfig&&!this.userConfig.enableFlavorColorset&&o.options.flavor&&delete o.options.flavor,this.throws[t.results[i].indexThrow].dice.push(o)}static mergeQueuedRollCommands(t){let i=[];t.forEach((t=>{for(let r=0;r<t.params.throws.length;r++)i[r]||i.push([]),t.params.throws[r].dsnConfig=t.params.dsnConfig,i[r].push(t.params.throws[r])}));for(let t=0;t<i.length;t++)for(let r=0;r<i[t].length;r++){let a=i[t][r].dsnConfig.specialEffects;for(let o=0;o<i[t][r].dice.length;o++){const l=i[t][r].dice[o];let c=Object.values(a).filter((t=>{if(l.discarded)return!1;if(l.options.ghost)return!1;let i=!1;if(t.onResult.includes("kh")&&(i=l.options?.modifiers?.includes("kh")),t.onResult.includes("kl")&&(i=l.options?.modifiers?.includes("kl")),i)return!0;if("d100"==t.diceType){if(l.d100Result&&t.onResult.includes(l.d100Result.toString()))return!0}else if(t.diceType==l.type&&t.onResult.includes(l.result.toString()))return!0;return!(!l.options.sfx||l.options.sfx.id!=t.diceType||!t.onResult.includes(l.options.sfx.result.toString()))}));l.options.sfx&&l.options.sfx.specialEffect&&c.push({specialEffect:l.options.sfx.specialEffect,options:l.options.sfx.options}),c.length&&(c=c.filter(((t,i,r)=>r.indexOf(t)===i)),i[t][r].dice[o].specialEffects=c)}}return i}}class Accumulator{constructor(t,i){this._timeout=null,this._delay=t,this._onEnd=i,this._items=[]}async addItem(t){this._items.push(t),this._timeout&&clearTimeout(this._timeout);let callback=async()=>{await this._onEnd(this._items),this._timeout=null,this._items=[]};this._delay?this._timeout=setTimeout(callback,this._delay):await callback()}}class Utils{static DATA_FORMAT_VERSION="4.2";static async migrateOldSettings(){let t=game.settings.get("dice-so-nice","settings");t.hasOwnProperty("enabled")&&(await game.user.setFlag("dice-so-nice","settings",t),await game.settings.set("dice-so-nice","settings",{}));let i=game.settings.get("dice-so-nice","formatVersion");if(""==i||i!=Utils.DATA_FORMAT_VERSION){if(!game.user.isGM)return ui.notifications.warn(game.i18n.localize("DICESONICE.migrateMessageNeedGM")),!1}else if("4.1"==i){if(game.user.isGM)await Promise.all(game.users.map((async t=>{let i=t.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(t.getFlag("dice-so-nice","appearance")):null;if(i&&i.hasOwnProperty("labelColor")){let i={"-=colorset":null,"-=diceColor":null,"-=edgeColor":null,"-=font":null,"-=labelColor":null,"-=material":null,"-=outlineColor":null,"-=system":null,"-=texture":null};await t.setFlag("dice-so-nice","appearance",i)}})));else{let t=game.user.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(game.user.getFlag("dice-so-nice","appearance")):null;if(t&&t.hasOwnProperty("labelColor")){let t={"-=colorset":null,"-=diceColor":null,"-=edgeColor":null,"-=font":null,"-=labelColor":null,"-=material":null,"-=outlineColor":null,"-=system":null,"-=texture":null};await game.user.setFlag("dice-so-nice","appearance",t)}}return!0}let r=!1;if(""==i){let t=game.user.getFlag("dice-so-nice","settings")?foundry.utils.duplicate(game.user.getFlag("dice-so-nice","settings")):{};if(t.diceColor||t.labelColor){let i=foundry.utils.mergeObject(game.dice3d.constructor.DEFAULT_OPTIONS,t,{insertKeys:!1,insertValues:!1,performDeletions:!0}),a=foundry.utils.mergeObject(game.dice3d.constructor.DEFAULT_APPEARANCE(),t,{insertKeys:!1,insertValues:!1,performDeletions:!0});await game.settings.set("dice-so-nice","settings",foundry.utils.mergeObject(i,{"-=dimensions":null,"-=fxList":null},{performDeletions:!0})),await game.user.setFlag("dice-so-nice","appearance",a),r=!0}await Promise.all(game.users.map((async t=>{let i=t.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(t.getFlag("dice-so-nice","appearance")):null;if(i&&i.hasOwnProperty("labelColor")){let a={global:i};await t.unsetFlag("dice-so-nice","appearance"),await t.setFlag("dice-so-nice","appearance",a),r=!0}let a=t.getFlag("dice-so-nice","sfxList")?foundry.utils.duplicate(t.getFlag("dice-so-nice","sfxList")):null;a&&(Array.isArray(a)||(a=Object.values(a)),a.forEach((t=>{t.onResult=[t.onResult]})),await t.unsetFlag("dice-so-nice","sfxList"),await t.setFlag("dice-so-nice","sfxList",a),r=!0)})))}return await Promise.all(game.users.map((async t=>{let i=t.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(t.getFlag("dice-so-nice","appearance")):null;if(i&&i.hasOwnProperty("labelColor")){let i={"-=colorset":null,"-=diceColor":null,"-=edgeColor":null,"-=font":null,"-=labelColor":null,"-=material":null,"-=outlineColor":null,"-=system":null,"-=texture":null};await t.setFlag("dice-so-nice","appearance",i)}}))),await game.settings.set("dice-so-nice","showGhostDice",game.settings.get("dice-so-nice","showGhostDice")?"1":"0"),game.settings.set("dice-so-nice","formatVersion",Utils.DATA_FORMAT_VERSION),r&&ui.notifications.info(game.i18n.localize("DICESONICE.migrateMessage")),!0}static localize(t){return Object.keys(t).reduce(((i,r)=>(i[r]=game.i18n.localize(t[r]),i)),{})}static contrastOf(t){"#"===t.slice(0,1)&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((function(t){return t+t})).join(""));return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"#000000":"#FFFFFF"}static prepareTextureList(){return Object.keys(l).reduce(((t,i)=>(t[i]=game.i18n.localize(l[i].name),t)),{})}static prepareFontList(){let t={auto:game.i18n.localize("DICESONICE.FontAuto")};return foundry.utils.mergeObject(t,FontConfig.getAvailableFontChoices())}static prepareColorsetList(){let t=Object.entries(c).reduce(((t,[i,r])=>("hidden"!==r.visibility&&(t[i]=Object.assign({},r,{label:game.i18n.localize(r.description),group:game.i18n.localize(r.category)})),t)),{});return Object.fromEntries(Object.entries(t).sort(((t,i)=>t[1].label.localeCompare(i[1].label))))}static prepareSystemList(){return[...game.dice3d.box.dicefactory.systems.values()].sort(((t,i)=>"standard"===t.id?-1:"standard"===i.id?1:t.group===i.group?t.name.localeCompare(i.name):null===t.group?1:null===i.group?-1:t.group.localeCompare(i.group))).reduce(((t,i)=>(t[i.id]={label:game.i18n.localize(i.name),group:i.group},t)),{})}static filterObject(t,i){return Object.keys(t).filter((r=>i(t[r]))).reduce(((i,r)=>(i[r]=t[r],i)),{})}static actionSaveAs(t){let i,r=game.user.getFlag("dice-so-nice","saves");i=r?new Map(Object.entries(r)):new Map;let a={appearance:game.user.getFlag("dice-so-nice","appearance"),sfxList:game.user.getFlag("dice-so-nice","sfxList"),settings:game.settings.get("dice-so-nice","settings")};i.set(t,a),game.user.unsetFlag("dice-so-nice","saves").then((()=>{game.user.setFlag("dice-so-nice","saves",Object.fromEntries(i))}))}static async actionDeleteSave(t){let i=game.user.getFlag("dice-so-nice","saves"),r=new Map(Object.entries(i));r.delete(t),game.user.unsetFlag("dice-so-nice","saves").then((async()=>{await game.user.setFlag("dice-so-nice","saves",Object.fromEntries(r)),ui.notifications.info(game.i18n.localize("DICESONICE.saveMessage"))}))}static async actionLoadSave(t){let i=game.user.getFlag("dice-so-nice","saves"),r=new Map(Object.entries(i)).get(t);r.appearance&&(await game.user.unsetFlag("dice-so-nice","appearance"),await game.user.setFlag("dice-so-nice","appearance",r.appearance)),r.sfxList&&(await game.user.unsetFlag("dice-so-nice","sfxList"),await game.user.setFlag("dice-so-nice","sfxList",r.sfxList)),r.settings&&(await game.user.unsetFlag("dice-so-nice","settings"),await game.user.setFlag("dice-so-nice","settings",r.settings))}}class ThinFilmFresnelMap extends DataTexture{constructor(t=480,i=1.3,r=3,a=64){const o=new Uint8Array(a*a*4);super(o,a,a,we,he,300,te,te,oe,1008),this._filmThickness=t,this._refractiveIndexFilm=i,this._refractiveIndexBase=r,this._size=a,this._data=o,this._updateData(),this.generateMipmaps=!0,this.needsUpdate=!0}get filmThickness(){return this._filmThickness}set filmThickness(t){this._filmThickness=t,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}get refractiveIndexFilm(){return this._refractiveIndexFilm}set refractiveIndexFilm(t){this._refractiveIndexFilm=t,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}get refractiveIndexBase(){return this._refractiveIndexBase}set refractiveIndexBase(t){this._refractiveIndexBase=t,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}updateSettings(t,i,r){this._filmThickness=t||380,this._refractiveIndexFilm=i||2,this._refractiveIndexBase=r||3,this._updateData()}_fresnelRefl(t,i,r,a,o,l){var c=1-r*r,h=t/i;if(h*h*c>1){o.x=1,o.y=1;var u=h*h;l.x=2*Math.atan(-u*Math.sqrt(c-1/u)/r),l.y=2*Math.atan(-Math.sqrt(c-1/u)/r)}else{var d=(i*r-t*a)/(i*r+t*a),p=(t*r-i*a)/(t*r+i*a);l.x=d<0?Math.PI:0,l.y=p<0?Math.PI:0,o.x=d*d,o.y=p*p}}_updateData(){this._filmThickness;var t=this._refractiveIndexFilm,i=this._refractiveIndexBase,r=this._size;function yFit_1931(t){var i=(t-568.8)*(t<568.8?.0213:.0247),r=(t-530.9)*(t<530.9?.0613:.0322);return.821*Math.exp(-.5*i*i)+.286*Math.exp(-.5*r*r)}function zFit_1931(t){var i=(t-437)*(t<437?.0845:.0278),r=(t-459)*(t<459?.0385:.0725);return 1.217*Math.exp(-.5*i*i)+.681*Math.exp(-.5*r*r)}for(var a,o,l,c,h=this._data,u=new Vector2,d=new Vector2,p=new Vector2,m=new Vector2,g=new Vector2,y=new Vector2,v=new Vector2,x=new Vector2,b=new Vector2,_=new Vector2,S=new Vector2,M=new Vector2,w=1/(t*t),E=t*t/(i*i),T=0;T<r;++T)for(var A=0;A<r;++A){var C=T/r,P=Math.sqrt(1-w*(1-C*C)),R=Math.sqrt(1-E*(1-P*P)),I=2*t*(400/r*A+280)*P,D=2*Math.PI*I;this._fresnelRefl(1,t,C,P,m,u),g.x=1-m.x,g.y=1-m.y,d.x=Math.PI-u.x,d.y=Math.PI-u.y,this._fresnelRefl(t,i,P,R,y,p),v.x=Math.sqrt(y.x*m.x),v.y=Math.sqrt(y.y*m.y),x.x=Math.sqrt(g.x*g.x),x.y=Math.sqrt(g.y*g.y),b.x=g.x*g.x*y.x/(1-y.x*m.x),b.y=g.y*g.y*y.y/(1-y.y*m.y),_.x=v.x*v.x,_.y=v.y*v.y,S.x=m.x+b.x,S.y=m.y+b.y,M.x=b.x-x.x,M.y=b.y-x.y;for(var L=0,N=0,O=0,U=0,B=0,z=0,V=0;V<64;++V){var k=380+V/63*400,G=D/k,H=Math.cos(G+p.x+d.x),W=Math.cos(G+p.y+d.y),j=.5*(S.x+2*(v.x*H-_.x)/(1-2*v.x*H+_.x)*M.x+(S.y+2*(v.y*W-_.y)/(1-2*v.y*W+_.y)*M.y)),X=(o=void 0,l=void 0,c=void 0,o=((a=k)-442)*(a<442?.0624:.0374),l=(a-599.8)*(a<599.8?.0264:.0323),c=(a-501.1)*(a<501.1?.049:.0382),.362*Math.exp(-.5*o*o)+1.056*Math.exp(-.5*l*l)-.065*Math.exp(-.5*c*c)),q=yFit_1931(k),Y=zFit_1931(k);U+=X,B+=q,z+=Y,L+=X*j,N+=q*j,O+=Y*j}var K=3.2406*(L/=U)-1.5372*(N/=B)-.4986*(O/=z),Z=-.9689*L+1.8758*N+.0415*O,Q=.0557*L-.204*N+1.057*O;K=Xt.clamp(K,0,1),Z=Xt.clamp(Z,0,1),Q=Xt.clamp(Q,0,1),K=Math.pow(K,.7),Z=Math.pow(Z,.7),Q=Math.pow(Q,.7);var J=4*T+A*r*4;h[J]=Math.floor(255*K),h[J+1]=Math.floor(255*Z),h[J+2]=Math.floor(255*Q),h[J+3]=255}this.needsUpdate=!0}}class DiceTour extends Tour{async waitForElement(t){return new Promise(((i,r)=>{if(document.querySelector(t))return void i();new MutationObserver(((r,a)=>{document.querySelectorAll(t).forEach((t=>{i(t),a.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){await super._preStep(),await this.waitForElement(this.currentStep.selector)}async _postStep(){if(await super._postStep(),this.stepIndex<0||!this.hasNext)return;if(!this.currentStep.action)return;if(this.triggerReset)return void(this.triggerReset=!1);let t=this.currentStep.target?this.currentStep.target:this.currentStep.selector;switch(this.currentStep.action){case"click":document.querySelector(t).click();break;case"scrollTo":document.querySelector(t).scrollIntoView({block:"start",inline:"nearest"})}}async reset(){"completed"!=this.status&&(this.triggerReset=!0),await super.reset()}}class DiceTourMain extends DiceTour{constructor(){super({title:"How to use Dice So Nice!",description:"Learn how to customize your 3D dice in this short tour of the module",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'[data-tab="settings"]',title:game.i18n.localize("DICESONICE.TourMainTitleGotoSettings"),content:game.i18n.localize("DICESONICE.TourMainContentGotoSettings"),action:"click"},{id:"goto-configure",selector:'[data-action="configure"]',title:game.i18n.localize("DICESONICE.TourMainTitleGotoConfigure"),content:game.i18n.localize("DICESONICE.TourMainContentGotoConfigure"),action:"click"},{id:"goto-modulessettings",title:game.i18n.localize("DICESONICE.TourMainTitleGotoModulesSettings"),selector:'.category-filter [data-category="dice-so-nice"]',content:game.i18n.localize("DICESONICE.TourMainContentGotoModulesSettings"),action:"click"},{id:"goto-dicesonice",title:game.i18n.localize("DICESONICE.TourMainTitleGotoDiceSoNice"),selector:"#client-settings form.categories div.scrollable",content:game.i18n.localize("DICESONICE.TourMainContentGotoDiceSoNice")},{id:"goto-dicesonice-settings",title:game.i18n.localize("DICESONICE.TourMainTitleGotoDiceSoNiceSettings"),selector:'[data-key="dice-so-nice.dice-so-nice"]',content:game.i18n.localize("DICESONICE.TourMainContentGotoDiceSoNiceSettings"),action:"click"},{id:"show-3d-dice",title:game.i18n.localize("DICESONICE.TourMainTitleShow3DDice"),selector:"#dice-configuration-canvas",content:game.i18n.localize("DICESONICE.TourMainContentShow3DDice")},{id:"show-appearance",title:game.i18n.localize("DICESONICE.TourMainTitleShowAppearance"),selector:"#dsn-appearance-content",content:game.i18n.localize("DICESONICE.TourMainContentShowAppearance"),action:"click",target:'.dice-so-nice a[data-tab="preferences"]'},{id:"show-preferences",title:game.i18n.localize("DICESONICE.TourMainTitleShowPreferences"),selector:'.dice-so-nice div.tab.active[data-tab="preferences"]',content:game.i18n.localize("DICESONICE.TourMainContentShowPreferences"),action:"click",target:'.dice-so-nice a[data-tab="sfx"]'},{id:"show-sfx",title:game.i18n.localize("DICESONICE.TourMainTitleShowSFX"),selector:'.dice-so-nice div.tab.active[data-tab="sfx"]',content:game.i18n.localize("DICESONICE.TourMainContentShowSFX"),action:"click",target:'.dice-so-nice a[data-tab="performance"]'},{id:"show-performance",title:game.i18n.localize("DICESONICE.TourMainTitleShowPerformance"),selector:'.dice-so-nice div.tab.active[data-tab="performance"]',content:game.i18n.localize("DICESONICE.TourMainContentShowPerformance"),action:"click",target:'.dice-so-nice a[data-tab="backup"]'},{id:"show-backup",title:game.i18n.localize("DICESONICE.TourMainTitleShowBackup"),selector:'.dice-so-nice div.tab.active[data-tab="backup"]',content:game.i18n.localize("DICESONICE.TourMainContentShowBackup")},{id:"end-tour",title:game.i18n.localize("DICESONICE.TourMainTitleEndTour"),selector:'.dice-so-nice div.tab.active[data-tab="backup"]',content:game.i18n.localize("DICESONICE.TourMainContentEndTour")}]})}async _preStep(){switch(this.currentStep.id){case"goto-settings":document.querySelector('a[data-tab="chat"]').click();break;case"goto-dicesonice":$("[data-tab=\"modules\"] h2:contains('Dice So Nice!')").addClass("dice-tour")}await super._preStep()}async _postStep(){if(this.currentStep){if("end-tour"===this.currentStep.id)document.querySelector(".dice-so-nice button[data-test]").click();await super._postStep()}}}class Dice3D{static get DEFAULT_OPTIONS(){const t={};switch(game.settings.get("core","performanceMode")){case 0:t.bumpMapping=!1,t.shadowQuality="low",t.glow=!1,t.antialiasing="none",t.useHighDPI=!1,t.imageQuality="low";break;case 1:t.bumpMapping=!0,t.shadowQuality="low",t.glow=!1,t.antialiasing="none",t.useHighDPI=!1,t.imageQuality="medium";break;case 2:case 3:t.bumpMapping=!0,t.shadowQuality="high",t.glow=!0,t.antialiasing=2===game.canvas.app.renderer.context.webGLVersion?"msaa":"smaa",t.useHighDPI=!0,t.imageQuality="high"}return{enabled:!0,showExtraDice:!(!game.dice3d||!game.dice3d.hasOwnProperty("defaultShowExtraDice"))&&game.dice3d.defaultShowExtraDice,onlyShowOwnDice:!1,hideAfterRoll:!0,timeBeforeHide:2e3,hideFX:"fadeOut",autoscale:!0,scale:75,speed:1,imageQuality:t.imageQuality,shadowQuality:t.shadowQuality,bumpMapping:t.bumpMapping,sounds:!0,soundsSurface:"felt",soundsVolume:.5,canvasZIndex:"over",throwingForce:"medium",useHighDPI:t.useHighDPI,antialiasing:t.antialiasing,glow:t.glow,showOthersSFX:!0,immersiveDarkness:!0,muteSoundSecretRolls:!1,enableFlavorColorset:!0,rollingArea:!1}}static DEFAULT_APPEARANCE(t=game.user){return{global:{labelColor:Utils.contrastOf(t.color.toString()),diceColor:t.color.toString(),outlineColor:t.color.toString(),edgeColor:t.color.toString(),texture:"none",material:"auto",font:"auto",colorset:"custom",system:"standard"}}}static ALL_DEFAULT_OPTIONS(t=game.user){let i=foundry.utils.mergeObject(Dice3D.DEFAULT_OPTIONS,{appearance:Dice3D.DEFAULT_APPEARANCE(t)},{performDeletions:!0});return i.appearance.global.system=game.dice3d.DiceFactory.preferredSystem,i.appearance.global.colorset=game.dice3d.DiceFactory.preferredColorset,i}static CONFIG(t=game.user){let i=t.getFlag("dice-so-nice","settings")?foundry.utils.duplicate(t.getFlag("dice-so-nice","settings")):null,r=foundry.utils.mergeObject(Dice3D.DEFAULT_OPTIONS,i,{performDeletions:!0});return foundry.utils.mergeObject(r,{"-=appearance":null,"-=sfxLine":null},{performDeletions:!0}),r}static APPEARANCE(t=game.user){let i=t.getFlag("dice-so-nice","appearance")?foundry.utils.duplicate(t.getFlag("dice-so-nice","appearance")):null,r=foundry.utils.mergeObject(Dice3D.DEFAULT_APPEARANCE(t),i,{performDeletions:!0});return foundry.utils.mergeObject(r,{"-=dimensions":null},{performDeletions:!0})}static SFX(t=game.user){let i;return i=(Dice3D.CONFIG().showOthersSFX||t.id==game.user.id)&&t.getFlag("dice-so-nice","sfxList")?foundry.utils.duplicate(t.getFlag("dice-so-nice","sfxList")):[],Array.isArray(i)||(i=[]),i}static ALL_CUSTOMIZATION(t=game.user,i=null){let r=Dice3D.SFX(t)||[];game.users.forEach((i=>{if(i.isGM&&i.id!=t.id){let t=Dice3D.SFX(i);Array.isArray(t)&&(t=t.filter((t=>t.options&&t.options.isGlobal)),r=r.concat(t))}}));let a=foundry.utils.mergeObject({appearance:Dice3D.APPEARANCE(t)},{specialEffects:r},{performDeletions:!0});return i&&!game.user.getFlag("dice-so-nice","appearance")&&("standard"!=i.preferredSystem&&(a.appearance.global.system=i.preferredSystem),"custom"!=i.preferredColorset&&(a.appearance.global.colorset=i.preferredColorset)),a}static ALL_CONFIG(t=game.user){let i=foundry.utils.mergeObject(Dice3D.CONFIG(t),{appearance:Dice3D.APPEARANCE(t)},{performDeletions:!0});return i.specialEffects=Dice3D.SFX(t),i}addSystem(t,i="default",r=null){"boolean"==typeof i&&(i=i?"preferred":"default"),this.DiceFactory.addSystem(t,i,r)}addDicePreset(t,i=null){this.DiceFactory.addDicePreset(t,i)}addTexture(t,i){return i.bump||(i.bump=""),new Promise((r=>{let a={};a[t]=i,l[t]=i,DiceColors.loadTextures(a,(t=>{r()}))}))}async addColorset(t,i="default"){t=foundry.utils.mergeObject({foreground:"custom",background:"custom",outline:"",edge:"",texture:"custom",material:"custom",font:"custom",visibility:"visible"},t,{performDeletions:!0}),c[t.name]=t,DiceColors.initColorSets(t),t.font&&!FontConfig.getAvailableFonts().includes(t.font)&&await FontConfig.loadFont(t.font,{editor:!1,fonts:[]}),"preferred"==i&&(this.DiceFactory.preferredColorset=t.name)}addSFXTrigger(t,i,r){Ua.EXTRA_TRIGGER_RESULTS[t]||(Ua.EXTRA_TRIGGER_TYPE.push({id:t,name:i}),Ua.EXTRA_TRIGGER_RESULTS[t]=[],r.forEach((i=>{Ua.EXTRA_TRIGGER_RESULTS[t].push({id:i,name:i})})))}addSFXMode(t){Ua.registerSFXModeClass(t)}async loadSaveFile(t){game.user.getFlag("dice-so-nice","saves").hasOwnProperty(t)&&await Utils.actionLoadSave(t)}constructor(){Hooks.call("diceSoNiceInit",this),this.dice3dRenderers={board:null,showcase:null},this.exports={Utils,DiceColors,TEXTURELIST:l,COLORSETS:c},this.uniforms={globalBloom:{value:1},bloomStrength:{value:1.1},bloomRadius:{value:.2},bloomThreshold:{value:0},iridescenceLookUp:{value:new ThinFilmFresnelMap},iridescenceNoise:{value:(new TextureLoader).load("modules/dice-so-nice/textures/noise-thin-film.webp")},boost:{value:1.5},time:{value:0}},this.hiddenAnimationQueue=[],this.defaultShowExtraDice=Dice3D.DEFAULT_OPTIONS.showExtraDice}init(){this._buildCanvas(),this._initListeners(),this._buildDiceBox(),DiceColors.loadTextures(l,(async t=>{DiceColors.initColorSets(),Hooks.call("diceSoNiceReady",this),await this.DiceFactory._loadFonts(),await this.DiceFactory.preloadPresets()})),Ua.init(),this._startQueueHandler(),this._nextAnimationHandler(),this._welcomeMessage(),this._registerTours()}get canInteract(){return!this.box.running}_buildCanvas(){const t=Dice3D.CONFIG(),i=$("#sidebar").width(),r=i>window.innerWidth/2?0:i,a=t.rollingArea?t.rollingArea:{left:0,top:0,width:window.innerWidth-r,height:window.innerHeight-1};t.enabled||(a.width=1,a.height=1),this.canvas=$(`<div id="dice-box-canvas" style="position: absolute; left: ${a.left}px; top: ${a.top}px; pointer-events: none;"></div>`),"over"===t.canvasZIndex?(this.canvas.css("z-index",1e3),this.canvas.appendTo($("body"))):$("#board").after(this.canvas),this.canvas.width(a.width+"px"),this.canvas.height(a.height+"px")}_buildDiceBox(){this.DiceFactory=new DiceFactory;let t=Dice3D.ALL_CONFIG();t.boxType="board",this.box=new DiceBox(this.canvas[0],this.DiceFactory,t),this.box.initialize()}_initListeners(){this._rtime,this._timeout=!1,$(window).resize((()=>{this._rtime=new Date,!1===this._timeout&&(this._timeout=!0,setTimeout(resizeEnd.bind(this),1e3))}));const resizeEnd=()=>{new Date-this._rtime<1e3?setTimeout(resizeEnd.bind(this),1e3):(this._timeout=!1,this.resizeAndRebuild())};this.resizeAndRebuild=()=>{this.canvas[0].remove(),this.box.clearScene(),this._buildCanvas();let t=Dice3D.ALL_CONFIG();t.boxType="board",this.box=new DiceBox(this.canvas[0],this.DiceFactory,t),this.box.initialize(),this.box.soundManager.preloadSounds()},$(document).on("click",".dice-so-nice-btn-settings",(t=>{t.preventDefault();return(new(game.settings.menus.get(t.currentTarget.dataset.key).type)).render(!0)})),$(document).on("click",".dice-so-nice-btn-tour",(t=>{t.preventDefault(),game.tours.get("dice-so-nice.dice-so-nice-tour").start()})),game.socket.on("module.dice-so-nice",(t=>{switch(t.type){case"show":t.users&&!t.users.includes(game.user.id)||this.show(t.data,game.users.get(t.user));break;case"update":(t.user==game.user.id||Dice3D.CONFIG().showOthersSFX)&&Ua.init(),t.user!=game.user.id&&this.DiceFactory.preloadPresets(!1,t.user)}}));const hideCanvasAndClear=()=>{Dice3D.CONFIG().hideAfterRoll||!this.canvas.is(":visible")||this.box.rolling||(this.canvas.hide(),this.box.clearAll())},mouseNDC=t=>{let i=this.canvas[0].getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1;return r>1&&(r=1),{x:r,y:-(t.clientY-i.top)/i.height*2+1}};game.settings.get("dice-so-nice","allowInteractivity")?($(document).on("mousemove.dicesonice","body",(async t=>{this.canInteract&&await this.box.onMouseMove(t,mouseNDC(t))})),$(document).on("mousedown.dicesonice","body",(async t=>{if(!this.canInteract)return;await this.box.onMouseDown(t,mouseNDC(t))?this._beforeShow():hideCanvasAndClear()})),$(document).on("mouseup.dicesonice","body",(async t=>{if(!this.canInteract)return;await this.box.onMouseUp(t)&&this._afterShow()}))):$(document).on("mousedown.dicesonice","body",(async t=>{hideCanvasAndClear()}))}_welcomeMessage(){if(!game.user.getFlag("dice-so-nice","welcomeMessageShown")){const t=[`\n            <div class="dice-so-nice">\n                <h3 class="nue">${game.i18n.localize("DICESONICE.WelcomeTitle")}</h3>\n                <p class="nue">${game.i18n.localize("DICESONICE.WelcomeMessage1")}</p>\n                <p class="nue">${game.i18n.localize("DICESONICE.WelcomeMessage2")}</p>\n                <p>\n                    <button type="button" class="dice-so-nice-btn-settings" data-key="dice-so-nice.dice-so-nice">\n                        <i class="fas fa-dice-d20"></i> ${game.i18n.localize("DICESONICE.configTitle")}\n                    </button>\n                </p>\n                <p class="nue">${game.i18n.localize("DICESONICE.WelcomeMessage3")}</p>\n                <p class="nue">${game.i18n.localize("DICESONICE.WelcomeMessageTour")}</p>\n                <p>\n                    <button type="button" class="dice-so-nice-btn-tour" data-tour="dice-so-nice-tour">\n                        <i class="fas fa-hiking"></i> ${game.i18n.localize("DICESONICE.WelcomeMessageTourBtn")}\n                    </button>\n                </p>\n                <p class="nue">${game.i18n.localize("DICESONICE.WelcomeMessage4")}</p>\n                <footer class="nue">${game.i18n.localize("NUE.FirstLaunchHint")}</footer>\n            </div>\n            `].map((t=>({whisper:[game.user.id],speaker:{alias:"Dice So Nice!"},flags:{core:{canPopout:!0}},content:t})));ChatMessage.implementation.createDocuments(t),game.user.setFlag("dice-so-nice","welcomeMessageShown",!0)}}_registerTours(){game.tours.register("dice-so-nice","dice-so-nice-tour",new DiceTourMain)}isEnabled(){let t=!game.combat||!game.combat.started||game.combat&&game.combat.started&&!game.settings.get("dice-so-nice","disabledDuringCombat");return Dice3D.CONFIG().enabled&&t}update(t){this.box.update(t)}renderRolls(t,i){const showMessage=()=>{delete t._dice3danimating,window.ui.chat.element.find(`.message[data-message-id="${t.id}"]`).removeClass("dsn-hide").find(".dice-roll").removeClass("dsn-hide"),window.ui.sidebar.popouts.chat&&window.ui.sidebar.popouts.chat.element.find(`.message[data-message-id="${t.id}"]`).removeClass("dsn-hide").find(".dice-roll").removeClass("dsn-hide"),Hooks.callAll("diceSoNiceRollComplete",t.id),(window.ui.chat.isAtBottom||t.user.id===game.user.id)&&window.ui.chat.scrollBottom({popout:!1}),window.ui.sidebar.popouts.chat&&(window.ui.sidebar.popouts.chat.isAtBottom||t.user.id===game.user.id)&&window.ui.sidebar.popouts.chat.scrollBottom()};if("stream"!=game.view||game.modules.get("0streamutils")?.active){let r=[[]];i.forEach((t=>{t.dice.forEach((t=>{let i=0;!game.settings.get("dice-so-nice","enabledSimultaneousRollForMessage")&&t.options.hasOwnProperty("rollOrder")&&(i=t.options.rollOrder,null==r[i]&&(r[i]=[])),r[i].push(t)}))})),r=r.filter((t=>null!=t));let a=[];const o=new foundry.dice.terms.OperatorTerm({operator:"+"}).evaluate();r.forEach((t=>{if(Array.isArray(t)&&t.length){let i=[...t].map(((i,r)=>r<t.length-1?[i,o]:[i])).reduce(((t,i)=>t.concat(i)));a.push(CONFIG.Dice.rolls[0].fromTerms(i))}}));const recursShowForRoll=(i,r)=>{this.showForRoll(i[r],t.author,!1,null,!1,t.id,t.speaker).then((()=>{r++,null!=i[r]?recursShowForRoll(i,r):showMessage()}))};recursShowForRoll(a,0)}else setTimeout(showMessage,2500,t)}showForRoll(t,i=game.user,r,a=null,o,l=null,c=null,h={ghost:!1,secret:!1}){let u={roll:t,user:i,users:a,blind:o};if(h.ghost&&(u.roll.ghost=!0),h.secret&&(u.roll.secret=!0),c){let t=game.actors.get(c.actor);if(!!t&&"npc"===t.type&&game.settings.get("dice-so-nice","hideNpcRolls"))return Promise.resolve(!1)}if(Dice3D.CONFIG().onlyShowOwnDice&&i!==game.user)return Promise.resolve(!1);let d=game.messages.get(l);d&&(d.whisper.length>0&&(u.roll.secret=!0),d.isContentVisible||(u.roll.ghost=!0)),Hooks.callAll("diceSoNiceRollStart",l,u);let p=u.dsnRoll||u.roll,m=new DiceNotation(p,Dice3D.ALL_CONFIG(i));return this.show(m,u.user,r,u.users,u.blind)}show(t,i=game.user,r=!1,a=null,o){return new Promise(((l,c)=>{if(!t.throws)throw new Error("Roll data should be not null");t.throws.length&&this.isEnabled()?(r&&(a=a&&a.length>0&&a[0]?.id?a.map((t=>t.id)):a,game.socket.emit("module.dice-so-nice",{type:"show",data:t,user:i.id,users:a})),o?l(!1):document.hidden?this.hiddenAnimationQueue.push({data:t,config:Dice3D.ALL_CUSTOMIZATION(i,this.DiceFactory),timestamp:(new Date).getTime(),resolve:l}):this._showAnimation(t,Dice3D.ALL_CUSTOMIZATION(i,this.DiceFactory)).then((t=>{l(t)}))):l(!1),game.settings.get("dice-so-nice","immediatelyDisplayChatMessages")&&l()}))}showExtraDiceByDefault(t=!0){this.defaultShowExtraDice=t}waitFor3DAnimationByMessageID(t){function buildHook(i){Hooks.once("diceSoNiceRollComplete",(r=>{t===r?i(!0):buildHook(i)}))}return new Promise(((t,i)=>{game.dice3d&&Dice3D.CONFIG().enabled&&!game.settings.get("dice-so-nice","immediatelyDisplayChatMessages")?buildHook(t):t(!0)}))}_showAnimation(t,i){return t.dsnConfig=i,new Promise(((i,r)=>{this.nextAnimation.addItem({params:t,resolve:i})}))}_startQueueHandler(){this.queue=[],setInterval((()=>{this._processQueue()}),100)}_processQueue(){if(this.queue.length>0&&!this.box.rolling){this.queue.shift()()}}async _nextAnimationHandler(){let t=game.settings.get("dice-so-nice","enabledSimultaneousRolls")?400:0;this.nextAnimation=new Accumulator(t,(async t=>{let i=DiceNotation.mergeQueuedRollCommands(t);if(this.isEnabled()&&this.queue.length<10){let r=i.length;for(const a of i)this.queue.push((async()=>{this._beforeShow(),await this.box.start_throw(a,(()=>{if(! --r){for(let i of t)i.resolve(!0);this._afterShow()}this._processQueue()}))}))}else for(let i of t)i.resolve(!1)}))}_beforeShow(){this.timeoutHandle&&clearTimeout(this.timeoutHandle),this.canvas.stop(!0),this.canvas.show()}_afterShow(){if(Dice3D.CONFIG().hideAfterRoll){if(Ua.renderQueue.length)return void clearTimeout(this.timeoutHandle);this.timeoutHandle=setTimeout((()=>{this.box.rolling||("none"===Dice3D.CONFIG().hideFX&&(this.canvas.hide(),this.box.clearAll()),"fadeOut"===Dice3D.CONFIG().hideFX&&this.canvas.fadeOut({duration:1e3,complete:()=>{this.box.clearAll()},fail:()=>{this.canvas.fadeIn(0)}}))}),Dice3D.CONFIG().timeBeforeHide)}}}class DiceConfig extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("DICESONICE.configTitle"),id:"dice-config",template:"modules/dice-so-nice/templates/dice-config.html",width:650,height:"auto",closeOnSubmit:!0,tabs:[{navSelector:".tabs",contentSelector:"#config-tabs",initial:"general"},{navSelector:".dsn-appearance-tabs",contentSelector:"#dsn-appearance-content",initial:"global"}]})}async getData(t){let i=foundry.utils.mergeObject({fxList:Utils.localize({none:"DICESONICE.None",fadeOut:"DICESONICE.FadeOut"}),speedList:Utils.localize({1:"DICESONICE.NormalSpeed",2:"DICESONICE.2xSpeed",3:"DICESONICE.3xSpeed"}),textureList:Utils.prepareTextureList(),materialList:Utils.localize({auto:"DICESONICE.MaterialAuto",chrome:"DICESONICE.MaterialChrome",glass:"DICESONICE.MaterialGlass",iridescent:"DICESONICE.MaterialIridescent",metal:"DICESONICE.MaterialMetal",plastic:"DICESONICE.MaterialPlastic",pristine:"DICESONICE.MaterialPristine",stone:"DICESONICE.MaterialStone",wood:"DICESONICE.MaterialWood"}),fontList:Utils.prepareFontList(),colorsetList:Utils.prepareColorsetList(),imageQualityList:Utils.localize({low:"DICESONICE.Low",medium:"DICESONICE.Medium",high:"DICESONICE.High",custom:"DICESONICE.Custom"}),shadowQualityList:Utils.localize({none:"DICESONICE.None",low:"DICESONICE.Low",high:"DICESONICE.High"}),antialiasingList:Utils.localize({none:"DICESONICE.None",smaa:"DICESONICE.SMAA",msaa:"DICESONICE.MSAA"}),systemList:Utils.prepareSystemList(),soundsSurfaceList:Utils.localize({felt:"DICESONICE.SurfaceFelt",wood_table:"DICESONICE.SurfaceWoodTable",wood_tray:"DICESONICE.SurfaceWoodTray",metal:"DICESONICE.SurfaceMetal"}),canvasZIndexList:Utils.localize({over:"DICESONICE.CanvasZIndexOver",under:"DICESONICE.CanvasZIndexUnder"}),throwingForceList:Utils.localize({weak:"DICESONICE.ThrowingForceWeak",medium:"DICESONICE.ThrowingForceMedium",strong:"DICESONICE.ThrowingForceStrong"})},this.reset?Dice3D.ALL_DEFAULT_OPTIONS():Dice3D.ALL_CONFIG());if(delete i.sfxLine,game.canvas.app.renderer.context.webGLVersion<2&&delete i.antialiasingList.msaa,i.specialEffects)for(let[t,r]of Object.entries(i.specialEffects))(Array.isArray(r.diceType)||Array.isArray(r.onResult)||Array.isArray(r.specialEffect))&&delete i.specialEffects[t];this.canvas=$('<div id="dice-configuration-canvas"></div>')[0];let r=foundry.utils.mergeObject(this.reset?Dice3D.ALL_DEFAULT_OPTIONS():Dice3D.ALL_CONFIG(),{dimensions:{w:634,h:245},autoscale:!1,scale:60,boxType:"showcase"});this.box=new DiceBox(this.canvas,game.dice3d.box.dicefactory,r),await this.box.initialize(),game.user.getFlag("dice-so-nice","appearance")||("standard"!=this.box.dicefactory.preferredSystem&&(r.appearance.global.system=this.box.dicefactory.preferredSystem),"standard"!=this.box.dicefactory.preferredColorset&&(r.appearance.global.colorset=this.box.dicefactory.preferredColorset)),await this.box.showcase(r),this.navOrder={};let a=[{id:"",name:""}];this.possibleResultList={};let o=0;this.box.diceList.forEach((t=>{this.navOrder[t.userData]=o++,a.push({id:t.userData,name:t.userData}),this.possibleResultList[t.userData]=[];let i=this.box.dicefactory.systems.get("standard").dice.get(t.userData),r=Object.values(CONFIG.Dice.terms).find((t=>t.name==i.term))||foundry.dice.terms.Die,l=new r({});if("d100"==t.userData)for(let i=1;i<=100;i++){let r={id:i+"",name:l.getResultLabel({result:i})};this.possibleResultList[t.userData].push(r)}else i.values.forEach((i=>{let r={id:i+"",name:l.getResultLabel({result:i})};this.possibleResultList[t.userData].push(r)}));this.possibleResultList[t.userData].push({id:"kh",name:"Keep Highest"}),this.possibleResultList[t.userData].push({id:"kl",name:"Keep Lowest"})}));let l=[],c=[],h=Dice3D.SFX();if(this.reset&&(h=[]),this.triggerTypeList=[...a,...Ua.EXTRA_TRIGGER_TYPE],foundry.utils.mergeObject(this.possibleResultList,Ua.EXTRA_TRIGGER_RESULTS,{performDeletions:!0}),h){let t=this.triggerTypeList.map((t=>t.id));h=h.filter((i=>t.includes(i.diceType)))}h&&(h.forEach(((t,i)=>{let r=Ua.SFX_MODE_CLASS[t.specialEffect].getDialogContent(t,i),a=Handlebars.compile(r.content);c.push(renderTemplate("modules/dice-so-nice/templates/partial-sfx.html",{id:i,diceType:t.diceType,onResult:t.onResult,specialEffect:t.specialEffect,specialEffectsMode:Ua.SFX_MODE_LIST,triggerTypeList:this.triggerTypeList,possibleResultList:this.possibleResultList[t.diceType],options:a(r.data)}).then((t=>{l.push(t)})))})),await Promise.all(c)),i.specialEffectsList=l.join("");let u=[];for(let t in i.appearance)i.appearance.hasOwnProperty(t)&&(u.push(t),"global"!=t&&(i.appearance[t].labelColor||(i.appearance[t].labelColor=i.appearance.global.labelColor),i.appearance[t].diceColor||(i.appearance[t].diceColor=i.appearance.global.diceColor),i.appearance[t].outlineColor||(i.appearance[t].outlineColor=i.appearance.global.outlineColor),i.appearance[t].edgeColor||(i.appearance[t].edgeColor=i.appearance.global.edgeColor)));let d=[],p=[];i.navAppearance={},u.forEach((t=>{p.push(renderTemplate("modules/dice-so-nice/templates/partial-appearance.html",{dicetype:t,appearance:i.appearance[t],systemList:i.systemList,colorsetList:i.colorsetList,textureList:i.textureList,materialList:i.materialList,fontList:i.fontList}).then((t=>{d.push(t)}))),"global"!=t&&(i.navAppearance[t]=t.toUpperCase())})),await Promise.all(p),d.length>1?i.displayHint="style='display:none;'":i.displayHint="",i.tabsAppearance=d.join(""),this.lastActiveAppearanceTab="global",this.initializationData=i,this.currentGlobalAppearance=i.appearance.global,this.sfxDialogList=[];const templateSelect2=t=>{if(t.element){let i=this.possibleResultList[t.element.parentElement.dataset.sfxResultDicetype].find((i=>i.id==t.text)).name;return i!=t.text?`${i} (${t.text})`:t.text}return t.text};return this.select2Options={dropdownCssClass:"dice-so-nice",escapeMarkup:function(t){return t},dropdownParent:"form.dice-so-nice",templateResult:templateSelect2,templateSelection:templateSelect2,width:"306px"},i}activateListeners(t){super.activateListeners(t),$(t).find("#dice-configuration-canvas-container").append(this.canvas),this.toggleHideAfterRoll(),this.toggleAutoScale(),this.toggleCustomization(),this.filterSystems(),this.setPreferredOptions(),select2dsn.call($(this.element).find("[data-sfx-result]"),this.select2Options),this.reset||($(this.element).on("change","[data-showExtraDice]",(t=>{this.onApply(t)})),$(this.element).on("change","[data-hideAfterRoll]",(t=>{this.toggleHideAfterRoll(t)})),$(this.element).on("change","[data-sounds]",(t=>{this.toggleSounds(t)})),$(this.element).on("change","[data-autoscale]",(t=>{this.toggleAutoScale(t)})),$(this.element).on("change","[data-colorset]",(t=>{this.toggleCustomColors($(t.target).data("dicetype"))})),$(this.element).on("change","[data-system]",(t=>{this.toggleCustomization($(t.target).data("dicetype"))})),$(this.element).on("change","input,select",(t=>{this.onApply(t)})),$(this.element).on("click","[data-reset]",(t=>{this.onReset(t)})),$(this.element).on("click","[data-cancel]",(t=>{this.close()})),$(this.element).on("click","[data-close-tab]",(t=>{let i=$(t.target).parent().data("tab");this.closeAppearanceTab(i)})),$(this.element).on("click","[data-test]",(t=>{let i=this.getShowcaseAppearance(),r=[];this.box.diceList.forEach((t=>{"d10"!=t.userData&&r.push(t.userData)})),new Roll(r.join("+")).evaluate().then((t=>{let r=new DiceNotation(t),a=this.getShowcaseSFX(),o=foundry.utils.mergeObject({appearance:i.appearance},{specialEffects:a},{performDeletions:!0});game.dice3d._showAnimation(r,o)}))})),$(this.element).on("click","[data-sfx-create]",(t=>{let i=$(this.element).find(".sfx-line").length,r=Object.keys(Ua.SFX_MODE_LIST)[0],a=Ua.SFX_MODE_CLASS[r].getDialogContent({},i),o=Handlebars.compile(a.content);renderTemplate("modules/dice-so-nice/templates/partial-sfx.html",{id:i,diceType:"",onResult:[],specialEffect:"",specialEffectsMode:Ua.SFX_MODE_LIST,triggerTypeList:this.triggerTypeList,possibleResultList:[],options:o(a.data)}).then((t=>{$(this.element).find("#sfxs-list").append(t),select2dsn.call($("[data-sfx-result]"),this.select2Options),this.setPosition()}))})),$(this.element).on("click","[data-sfx-delete]",(t=>{$(t.target).parents(".sfx-line").remove(),$(this.element).find(".sfx-line").each((function(t){$(this).find("input, select").each((function(){let i=$(this).attr("name");$(this).attr("name",i.replace(/(\w+\[)(\d+)(\]\[\w+\])/,"$1"+t+"$3"))}))})),this.setPosition()})),$(this.element).on("click","[data-sfx-options]",(t=>{let i=$(t.target).parents(".sfx-line").find("[data-sfx-hidden-options]");if(i.length<1)return;let r=new Dialog({title:game.i18n.localize("DICESONICE.Options"),content:'<form autocomplete="off" onsubmit="event.preventDefault();"></form>',buttons:{ok:{icon:'<i class="fas fa-check-circle"></i>',label:"OK"}},default:"ok",render:t=>{i.detach().appendTo($(t).find("form"))},close:i=>{$(i).find("[data-sfx-hidden-options]").detach().appendTo($(t.target).parents(".sfx-line").find(".sfx-hidden")),this.sfxDialogList=this.sfxDialogList.filter((t=>t.appId!=r.appId))}});r.render(!0),this.sfxDialogList.push(r)})),$(this.element).on("change","[data-sfx-dicetype]",(t=>{let i=$(t.target).val(),r=$([]);""!=i?(this.possibleResultList[i].forEach((t=>{let i=$("<option></option>");i.html(t.id),i.attr("value",t.id),r=r.add(i)})),$(t.target).parents(".sfx-line").find("[data-sfx-result]").html(r).attr("data-sfx-result-dicetype",i).trigger("change")):$(t.target).parents(".sfx-line").find("[data-sfx-result]").empty().trigger("change")})),$(this.element).on("change","[data-sfx-result]",(t=>{this.setPosition()})),$(this.element).on("change","[data-sfx-specialeffect]",(t=>{this.sfxDialogList.forEach((t=>{t.close()})),this.sfxDialogList=[];let i=$(t.target).parents(".sfx-line"),r=i.prevAll(".sfx-line").length,a=Ua.SFX_MODE_CLASS[$(t.target).val()].getDialogContent({},r),o=Handlebars.compile(a.content);i.find(".sfx-hidden [data-sfx-hidden-options]").html(o(a.data));for(let t of i.find(".sfx-hidden [data-sfx-hidden-options] button.file-picker"))t.onclick=this._activateFilePicker.bind(this)})),$(this.element).on("click","[data-saveas]",(async t=>{let i=game.user.getFlag("dice-so-nice","saves"),r=new Map;i&&(r=new Map(Object.entries(i)));let a=new Dialog({title:game.i18n.localize("DICESONICE.SaveAs"),width:550,content:await renderTemplate("modules/dice-so-nice/templates/dialog-saveas.html",{saveList:r.keys()}),buttons:{},render:t=>{r.size?($(t).on("click","[data-overwrite]",(i=>{let r=$(t).find("[data-save-list]").val();this.actionSaveAs(r),a.close()})),$(t).on("click","[data-delete]",(async i=>{let a=$(t).find("[data-save-list]").val();await this.actionDeleteSave(a),r.delete(a),$(t).find("[data-save-list] option:selected").remove(),r.size||($(t).find("[data-overwrite]").prop("disabled",!0),$(t).find("[data-delete]").prop("disabled",!0))}))):($(t).find("[data-overwrite]").prop("disabled",!0),$(t).find("[data-delete]").prop("disabled",!0)),$(t).on("click","[data-add-new]",(i=>{let o=$(t).find("[data-save-name]").val();o?r.has(o)?ui.notifications.error(game.i18n.localize("DICESONICE.SaveAsErrorAlreadyExist")):(this.actionSaveAs(o),a.close()):ui.notifications.error(game.i18n.localize("DICESONICE.SaveAsErrorName"))}))}},{width:450,classes:["dice-so-nice"]}).render(!0)})),$(this.element).on("click","[data-load]",(async t=>{let i=game.user.getFlag("dice-so-nice","saves"),r=[];i&&(r=new Map(Object.entries(i))),new Dialog({title:game.i18n.localize("DICESONICE.Load"),content:await renderTemplate("modules/dice-so-nice/templates/dialog-load.html",{saveList:r.keys()}),buttons:{load:{icon:'<i class="fas fa-box-open"></i>',label:game.i18n.localize("DICESONICE.Load"),callback:async t=>{let i=$(t).find("[data-save-list]").val();await this.actionLoadSave(i),this.close()}},no:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("DICESONICE.Cancel")}},render:t=>{r.size||$(t).find('[data-button="load"]').prop("disabled",!0)},default:"no"},{width:550}).render(!0)})),$(this.element).on("click","[data-import]",(async t=>{new Dialog({title:game.i18n.localize("DICESONICE.Import"),content:await renderTemplate("modules/dice-so-nice/templates/dialog-import.html"),buttons:{import:{icon:'<i class="fas fa-file-import"></i>',label:game.i18n.localize("DICESONICE.Import"),callback:t=>{const i=t.find("form")[0];if(!i.data.files.length)return ui.notifications.error(game.i18n.localize("DICESONICE.ImportNoFile"));readTextFromFile(i.data.files[0]).then((async t=>{await this.actionImportFromJSON(t),this.close()}))}},no:{icon:'<i class="fas fa-ban"></i>',label:"Cancel"}},default:"import"},{width:400}).render(!0)})),$(this.element).on("click","[data-export]",(async t=>{const i=`fvtt-dicesonice-${Date.now()}.json`;this.actionExportToJSON().then((t=>{saveDataToFile(t,"text/json",i)}))})),$(this.element).on("click","[data-exportSFX]",(async t=>{const i=`fvtt-dicesonice-SFX-${Date.now()}.json`;this.actionExportSFXToJSON().then((t=>{saveDataToFile(t,"text/json",i)}))})),$(this.element).on("click","#dice-configuration-canvas",(t=>{let i=t.target.getBoundingClientRect(),r=(t.clientX-i.left)/i.width*2-1;r>1&&(r=1);let a={x:r,y:-(t.clientY-i.top)/i.height*2+1},o=this.box.findShowcaseDie(a);if(o){let t=this.box.findRootObject(o.object).userData;game.user.getFlag("dice-so-nice","appearance")||"standard"==this.box.dicefactory.preferredSystem&&"custom"==this.box.dicefactory.preferredColorset||this.getShowcaseAppearance(),$(this.element).find(`.dsn-appearance-tabs [data-tab="${t}"]`).length?this.activateAppearanceTab(t):($(this.element).find(".dsn-appearance-hint").hide(),renderTemplate("modules/dice-so-nice/templates/partial-appearance.html",{dicetype:t,appearance:this.currentGlobalAppearance,systemList:this.initializationData.systemList,colorsetList:this.initializationData.colorsetList,textureList:this.initializationData.textureList,materialList:this.initializationData.materialList,fontList:this.initializationData.fontList}).then((i=>{let r=t.toUpperCase(),a=null;$(this.element).find(".dsn-appearance-tabs .item").each(((i,r)=>{if(this.navOrder[$(r).data("tab")]>=this.navOrder[t])return a=$(r).data("tab"),!1}));let o=`<span class="item" data-group="dsn-dice" data-tab="${t}">${r} <i class="fas fa-times" data-close-tab></i></span>`;a?($(i).insertBefore($(this.element).find(`.tabAppearance[data-tab="${a}"]`)),$(o).insertBefore($(this.element).find(`.dsn-appearance-tabs .item[data-tab="${a}"]`))):($(this.element).find("#dsn-appearance-content").append(i),$(this.element).find(".dsn-appearance-tabs").append(o)),this.activateAppearanceTab(t),this.toggleCustomization(t),this.filterSystems(t)})))}})),$(this.element).on("change","[data-imageQuality]",(t=>{let i={bumpMapping:!0,shadowQuality:"high",glow:!0,antialiasing:2===game.canvas.app.renderer.context.webGLVersion?"msaa":"smaa",useHighDPI:!0};switch(t.target.value){case"low":i.bumpMapping=!1,i.shadowQuality="low",i.glow=!1,i.antialiasing="none",i.useHighDPI=!1;break;case"medium":i.bumpMapping=!0,i.shadowQuality="low",i.glow=!1,i.antialiasing="none",i.useHighDPI=!1;break;case"high":i.bumpMapping=!0,i.shadowQuality="high",i.glow=!0,i.antialiasing=2===game.canvas.app.renderer.context.webGLVersion?"msaa":"smaa",i.useHighDPI=!0}$(this.element).find("[data-bumpMapping]").prop("checked",i.bumpMapping),$(this.element).find("[data-shadowQuality]").val(i.shadowQuality),$(this.element).find("[data-glow]").prop("checked",i.glow),$(this.element).find("[data-antialiasing]").val(i.antialiasing),$(this.element).find("[data-useHighDPI]").prop("checked",i.useHighDPI)})),$(this.element).on("change","[data-bumpMapping],[data-shadowQuality],[data-glow],[data-antialiasing],[data-useHighDPI]",(t=>{$(this.element).find("[data-imageQuality]").val("custom")})))}async actionSaveAs(t){await this.submit({preventClose:!0,preventRender:!0}),Utils.actionSaveAs(t)}async actionDeleteSave(t){await Utils.actionDeleteSave(t)}async actionLoadSave(t){await Utils.actionLoadSave(t)}async actionExportToJSON(){await this.submit({preventClose:!0,preventRender:!0});let t={appearance:game.user.getFlag("dice-so-nice","appearance"),sfxList:game.user.getFlag("dice-so-nice","sfxList"),settings:game.user.getFlag("dice-so-nice","settings")};return JSON.stringify(t,null,2)}async actionExportSFXToJSON(){await this.submit({preventClose:!0,preventRender:!0});let t={sfxList:game.user.getFlag("dice-so-nice","sfxList")};return JSON.stringify(t,null,2)}async actionImportFromJSON(t){let i=JSON.parse(t);i.appearance&&(await game.user.unsetFlag("dice-so-nice","appearance"),await game.user.setFlag("dice-so-nice","appearance",i.appearance)),i.sfxList&&(await game.user.unsetFlag("dice-so-nice","sfxList"),await game.user.setFlag("dice-so-nice","sfxList",i.sfxList)),i.settings&&(await game.user.unsetFlag("dice-so-nice","settings"),await game.user.setFlag("dice-so-nice","settings",i.settings))}activateAppearanceTab(t){let i=this._tabs[1];i.active!=t&&i.activate(t,{triggerCallback:!0})}closeAppearanceTab(t){if("global"==t)return;let i=this._tabs[1];this._tabs[1].active==t&&i.activate("global",{triggerCallback:!0}),$(this.element).find(`.tabAppearance[data-tab="${t}"]`).remove(),$(this.element).find(`.dsn-appearance-tabs [data-tab="${t}"]`).remove(),this.onApply()}_onChangeTab(t,i,r){if(super._onChangeTab(t,i,r),"#dsn-appearance-content"==i._contentSelector){if("global"!=this.lastActiveAppearanceTab){let t=[];if($(this.element).find(`.tabAppearance[data-tab="global"],.tabAppearance[data-tab="${this.lastActiveAppearanceTab}"]`).each(((i,r)=>{let a={labelColor:$(r).find("[data-labelColor]").val(),diceColor:$(r).find("[data-diceColor]").val(),outlineColor:$(r).find("[data-outlineColor]").val(),edgeColor:$(r).find("[data-edgeColor]").val(),colorset:$(r).find("[data-colorset]").val(),texture:$(r).find("[data-texture]").val(),material:$(r).find("[data-material]").val(),font:$(r).find("[data-font]").val(),system:$(r).find("[data-system]").val()};null==a.system&&(a.system=this.currentGlobalAppearance.system),t.push(a)})),t.length>1){let i=foundry.utils.diffObject(t[0],t[1]);foundry.utils.isEmpty(i)&&this.closeAppearanceTab(this.lastActiveAppearanceTab)}}this.lastActiveAppearanceTab=r}}toggleHideAfterRoll(){let t=$(this.element).find("[data-hideAfterRoll]")[0].checked;$(this.element).find("[data-timeBeforeHide]").prop("disabled",!t),$(this.element).find("[data-hideFX]").prop("disabled",!t)}toggleSounds(){let t=$(this.element).find("[data-sounds]")[0].checked;$(this.element).find("[data-soundsSurface]").prop("disabled",!t),$(this.element).find("[data-soundsVolume]").prop("disabled",!t)}toggleAutoScale(){let t=$(this.element).find("[data-autoscale]")[0].checked;$(this.element).find("[data-scale]").prop("disabled",t)}toggleCustomColors(t){let i=$(this.element).find(".tabAppearance");t&&(i=i.filter(`[data-tab="${t}"]`)),i.each(((t,i)=>{let r=$(i).find("[data-colorset]"),a="custom"!==r.val()||r.prop("disabled");$(i).find("[data-labelColor]").prop("disabled",a),$(i).find("[data-diceColor]").prop("disabled",a),$(i).find("[data-outlineColor]").prop("disabled",a),$(i).find("[data-edgeColor]").prop("disabled",a),$(i).find("[data-labelColorSelector]").prop("disabled",a),$(i).find("[data-diceColorSelector]").prop("disabled",a),$(i).find("[data-outlineColorSelector]").prop("disabled",a),$(i).find("[data-edgeColorSelector]").prop("disabled",a)}))}toggleCustomization(t=null){let i;i=t?$(this.element).find(`.tabAppearance[data-tab="${t}"]`):$(this.element).find(".tabAppearance"),i.each(((t,i)=>{let r=$(i).data("tab");if("global"!=r){let t=$(i).find("[data-system]").val(),a=$(i).find("[data-colorset],[data-texture],[data-material],[data-font]");if("standard"!=t){let i=this.box.dicefactory.systems.get(t).dice.get(r);if(i){let t={};i.colorset&&(t=DiceColors.getColorSet(i.colorset)),a.each(((r,a)=>{let o=!1;($(a).is("[data-colorset]")&&!foundry.utils.isEmpty(t)||$(a).is("[data-texture]")&&!foundry.utils.isEmpty(t)&&"custom"!=t.texture||$(a).is("[data-material]")&&!foundry.utils.isEmpty(t)&&"custom"!=t.material||$(a).is("[data-font]")&&(!foundry.utils.isEmpty(t)&&"custom"!=t.font||i.font))&&(o=!0),$(a).prop("disabled",i.modelFile||o)}))}}else a.prop("disabled",!1)}})),this.toggleCustomColors(t)}filterSystems(t=null){let i;i=t?$(this.element).find(`.tabAppearance[data-tab="${t}"] [data-system]`):$(this.element).find(".tabAppearance [data-system]"),i.each(((t,i)=>{let r=$(i).data("dicetype");"global"!=r&&$(i).find("option").each(((t,i)=>{let a=this.box.dicefactory.systems.get("standard").dice.get(r);this.box.dicefactory.systems.get($(i).val()).dice.has(r)&&this.box.dicefactory.systems.get($(i).val()).getDiceByShapeAndValues(a.shape,a.values)||$(i).attr("disabled","disabled")}))}))}setPreferredOptions(){game.user.getFlag("dice-so-nice","appearance")||("standard"!=this.box.dicefactory.preferredSystem&&$(this.element).find('.tabAppearance[data-tab="global"] [data-system]').val(this.box.dicefactory.preferredSystem),"custom"!=this.box.dicefactory.preferredColorset&&$(this.element).find('.tabAppearance[data-tab="global"] [data-colorset]').val(this.box.dicefactory.preferredColorset))}getShowcaseAppearance(){let t={autoscale:!1,scale:60,shadowQuality:$("[data-shadowQuality]").val(),imageQuality:$("[data-imageQuality]").val(),antialiasing:$("[data-antialiasing]").val(),bumpMapping:$("[data-bumpMapping]").is(":checked"),glow:$("[data-glow]").is(":checked"),sounds:$("[data-sounds]").is(":checked"),throwingForce:$("[data-throwingForce]").val(),useHighDPI:$("[data-useHighDPI]").is(":checked"),showExtraDice:$("[data-showExtraDice]").is(":checked"),muteSoundSecretRolls:$("[data-muteSoundSecretRolls]").is(":checked"),enableFlavorColorset:$("[data-enableFlavorColorset]").is(":checked"),immersiveDarkness:$("[data-immersiveDarkness]").is(":checked"),appearance:{}};return $(this.element).find(".tabAppearance").each(((i,r)=>{t.appearance[$(r).data("tab")]={labelColor:$(r).find("[data-labelColor]").val(),diceColor:$(r).find("[data-diceColor]").val(),outlineColor:$(r).find("[data-outlineColor]").val(),edgeColor:$(r).find("[data-edgeColor]").val(),colorset:$(r).find("[data-colorset]").val(),texture:$(r).find("[data-texture]").val(),material:$(r).find("[data-material]").val(),font:$(r).find("[data-font]").val(),system:$(r).find("[data-system]").val()}})),this.currentGlobalAppearance=t.appearance.global,t}getShowcaseSFX(){let t=[];return $(this.element).find(".sfx-line").each(((i,r)=>{let a={diceType:$(r).find("[data-sfx-dicetype]").val(),onResult:$(r).find("[data-sfx-result]").val(),specialEffect:$(r).find("[data-sfx-specialeffect]").val(),options:{}};$(r).find("[data-sfx-hidden-options]").find("input,select").each(((t,i)=>{let r=$(i).attr("name").match(/.*\[(.*)\]$/)[1];"checkbox"==$(i).attr("type")?a.options[r]=$(i).prop("checked"):a.options[r]=$(i).val()})),a.diceType&&a.onResult&&a.specialEffect&&t.push(a)})),t}onApply(t=null){t&&t.preventDefault(),setTimeout((()=>{let t=this.getShowcaseAppearance();this.box.dicefactory.disposeCachedMaterials("showcase"),this.box.update(t).then((()=>{this.box.showcase(t)}))}),100)}onReset(){this.reset=!0,this.render(),this._tabs[0].activate("general")}parseInputs(t){var i={};e:for(var r in t){var a=t[r],o=r.split("["),l=i;for(var c in o){var h=o[c];if("]"==h.substr(-1)&&(h=h.substr(0,h.length-1)),c==o.length-1){l[h]=a;continue e}l.hasOwnProperty(h)||(l[h]={}),l=l[h]}}return i}async _updateObject(t,i){let r=(i=this.parseInputs(i)).sfxLine;if(r){r=Object.values(r);for(let t=r.length-1;t>=0;t--)(null==r[t].diceType||""==r[t].diceType||""==r[t].onResult||Array.isArray(r[t].diceType)||Array.isArray(r[t].specialEffect))&&r.splice(t,1);let t=r.map((t=>[JSON.stringify(t),t]));r=[...new Map(t).values()],delete i.sfxLine}for(let t in i.appearance)i.appearance.hasOwnProperty(t)&&"custom"!=i.appearance[t].colorset&&(delete i.appearance[t].labelColor,delete i.appearance[t].diceColor,delete i.appearance[t].outlineColor,delete i.appearance[t].edgeColor);let a=Dice3D.CONFIG();await game.user.unsetFlag("dice-so-nice","sfxList"),await game.user.unsetFlag("dice-so-nice","appearance"),await game.user.unsetFlag("dice-so-nice","settings");let o=foundry.utils.mergeObject(Dice3D.APPEARANCE(),i.appearance,{insertKeys:!0,insertValues:!1,performDeletions:!0});delete i.appearance;let l=foundry.utils.mergeObject(Dice3D.CONFIG(),i,{insertKeys:!1,insertValues:!1,performDeletions:!0});l.rollingArea=a.rollingArea,await game.user.setFlag("dice-so-nice","settings",l),await game.user.setFlag("dice-so-nice","appearance",o),await game.user.setFlag("dice-so-nice","sfxList",r),game.socket.emit("module.dice-so-nice",{type:"update",user:game.user.id}),Ua.init(),ui.notifications.info(game.i18n.localize("DICESONICE.saveMessage"));["canvasZIndex","bumpMapping","useHighDPI","glow","antialiasing","enabled"].some((t=>l[t]!=a[t]))?window.location.reload():game.dice3d.update(l)}close(t){super.close(t),this.box.clearScene(),this.box.dicefactory.disposeCachedMaterials("showcase")}async _onSubmit(t,i){this.sfxDialogList.forEach((t=>{t.close()})),await super._onSubmit(t,i)}}class RollableAreaConfig extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("DICESONICE.RollableAreaConfigTitle"),template:"modules/dice-so-nice/templates/rollable-area-config.html",width:280,top:70,left:window.innerWidth-290})}render(t,i={}){this.area=$(`\n            <div class='dice-so-nice rollable-area'>\n                <div class='resizers'>\n                    <div class='resizer nw'></div>\n                    <div class='resizer ne'></div>\n                    <div class='resizer sw'></div>\n                    <div class='resizer se'></div>\n                    <div class="info">${game.i18n.localize("DICESONICE.RollableAreaText")}</div> \n                </div>\n            </div>\n        `);let r=Dice3D.CONFIG().rollingArea;if(!r){const t=$("#dice-box-canvas");r={top:t.position().top,left:t.position().left,width:t.width(),height:t.height()}}return this.area.appendTo($("body")),this.area.css(r),super.render(t,i)}activateListeners(t){super.activateListeners(t),t.find('button[name="restore"]').click(this._onRestore.bind(this));let i=$(this.area).get(0),r=!1;this.area.mousedown((function(t){let a=t.clientX,o=t.clientY;function onMouseMove(t){if(!r){let r=a-t.clientX,l=o-t.clientY;const c=i.getBoundingClientRect();i.style.left=c.left-r+"px",i.style.top=c.top-l+"px",a=t.clientX,o=t.clientY}}window.addEventListener("mousemove",onMouseMove),window.addEventListener("mouseup",(function onMouseUp(){window.removeEventListener("mousemove",onMouseMove),window.removeEventListener("mouseup",onMouseUp)}))}));const a=$(".rollable-area > .resizers > .resizer");for(let t of a)$(t).mousedown((function(a){r=!0;let o=a.clientX,l=a.clientY;function onMouseMove(r){const a=i.getBoundingClientRect();t.classList.contains("se")?(i.style.width=a.width-(o-r.clientX)+"px",i.style.height=a.height-(l-r.clientY)+"px"):t.classList.contains("sw")?(i.style.width=a.width+(o-r.clientX)+"px",i.style.height=a.height-(l-r.clientY)+"px",i.style.left=a.left-(o-r.clientX)+"px"):t.classList.contains("ne")?(i.style.width=a.width-(o-r.clientX)+"px",i.style.height=a.height+(l-r.clientY)+"px",i.style.top=a.top-(l-r.clientY)+"px"):(i.style.width=a.width+(o-r.clientX)+"px",i.style.height=a.height+(l-r.clientY)+"px",i.style.left=a.left-(o-r.clientX)+"px",i.style.top=a.top-(l-r.clientY)+"px"),o=r.clientX,l=r.clientY}window.addEventListener("mousemove",onMouseMove),window.addEventListener("mouseup",(function onMouseUp(){window.removeEventListener("mousemove",onMouseMove),window.removeEventListener("mouseup",onMouseUp),r=!1}))}))}async _onRestore(){await this.saveSettingsAndRebuild(!1),await this.close()}async _updateObject(){await this.saveSettingsAndRebuild({top:this.area.position().top,left:this.area.position().left,width:this.area.width(),height:this.area.height()})}async saveSettingsAndRebuild(t){let i=foundry.utils.mergeObject(Dice3D.CONFIG(),{rollingArea:t},{performDeletions:!0});await game.user.setFlag("dice-so-nice","settings",i),game.dice3d.resizeAndRebuild()}async close(t={}){return this.area.remove(),super.close(t)}}Hooks.once("init",(()=>{const t=foundry.utils.debounce((()=>{window.location.reload()}),100);game.settings.registerMenu("dice-so-nice","dice-so-nice",{name:"DICESONICE.config",label:"DICESONICE.configTitle",hint:"DICESONICE.configHint",icon:"fas fa-dice-d20",type:DiceConfig,restricted:!1}),game.settings.registerMenu("dice-so-nice","rollable-area",{name:"DICESONICE.RollableAreaConfig",label:"DICESONICE.RollableAreaConfigTitle",hint:"DICESONICE.RollableAreaConfigHint",icon:"fas fa-crop-alt",type:RollableAreaConfig,restricted:!1}),game.settings.register("dice-so-nice","settings",{name:"3D Dice Settings",scope:"client",default:{},type:Object,config:!1}),game.settings.register("dice-so-nice","maxDiceNumber",{name:"DICESONICE.maxDiceNumber",hint:"DICESONICE.maxDiceNumberHint",scope:"world",type:Number,default:20,range:{min:20,max:100,step:5},config:!0}),game.settings.register("dice-so-nice","globalAnimationSpeed",{name:"DICESONICE.globalAnimationSpeed",hint:"DICESONICE.globalAnimationSpeedHint",scope:"world",type:String,choices:Utils.localize({0:"DICESONICE.PlayerSpeed",1:"DICESONICE.NormalSpeed",2:"DICESONICE.2xSpeed",3:"DICESONICE.3xSpeed"}),default:"0",config:!0,onChange:t}),game.settings.register("dice-so-nice","resetWelcomeMessage",{name:"DICESONICE.resetWelcomeMessage",hint:"DICESONICE.resetWelcomeMessageHint",scope:"world",type:Boolean,default:!1,config:!0,onChange:t=>{t&&(game.users.forEach((t=>{t.setFlag("dice-so-nice","welcomeMessageShown",!1)})),game.settings.set("dice-so-nice","resetWelcomeMessage",!1))}}),game.settings.register("dice-so-nice","enabledSimultaneousRolls",{name:"DICESONICE.enabledSimultaneousRolls",hint:"DICESONICE.enabledSimultaneousRollsHint",scope:"world",type:Boolean,default:!0,config:!0,onChange:t}),game.settings.register("dice-so-nice","enabledSimultaneousRollForMessage",{name:"DICESONICE.enabledSimultaneousRollForMessage",hint:"DICESONICE.enabledSimultaneousRollForMessageHint",scope:"world",type:Boolean,default:!0,config:!0}),game.settings.register("dice-so-nice","diceCanBeFlipped",{name:"DICESONICE.diceCanBeFlipped",hint:"DICESONICE.diceCanBeFlippedHint",scope:"world",type:Boolean,default:!0,config:!0}),game.settings.register("dice-so-nice","formatVersion",{scope:"world",type:String,default:"",config:!1}),game.settings.register("dice-so-nice","disabledDuringCombat",{name:"DICESONICE.disabledDuringCombat",hint:"DICESONICE.disabledDuringCombatHint",scope:"world",type:Boolean,default:!1,config:!0}),game.settings.register("dice-so-nice","disabledForInitiative",{name:"DICESONICE.disabledForInitiative",hint:"DICESONICE.disabledForInitiativeHint",scope:"world",type:Boolean,default:!1,config:!0}),game.settings.register("dice-so-nice","immediatelyDisplayChatMessages",{name:"DICESONICE.immediatelyDisplayChatMessages",hint:"DICESONICE.immediatelyDisplayChatMessagesHint",scope:"world",type:Boolean,default:!1,config:!0}),game.settings.register("dice-so-nice","animateRollTable",{name:"DICESONICE.animateRollTable",hint:"DICESONICE.animateRollTableHint",scope:"world",type:Boolean,default:!1,config:!0}),game.settings.register("dice-so-nice","animateInlineRoll",{name:"DICESONICE.animateInlineRoll",hint:"DICESONICE.animateInlineRollHint",scope:"world",type:Boolean,default:!0,config:!0}),game.settings.register("dice-so-nice","hideNpcRolls",{name:"DICESONICE.hideNpcRolls",hint:"DICESONICE.hideNpcRollsHint",scope:"world",type:Boolean,default:!1,config:!0}),game.settings.register("dice-so-nice","allowInteractivity",{name:"DICESONICE.allowInteractivity",hint:"DICESONICE.allowInteractivityHint",scope:"world",type:Boolean,default:!0,config:!0,onChange:t}),game.settings.register("dice-so-nice","showGhostDice",{name:"DICESONICE.showGhostDice",hint:"DICESONICE.showGhostDiceHint",scope:"world",type:String,choices:Utils.localize({0:"DICESONICE.ghostDiceDisabled",1:"DICESONICE.ghostDiceForAll",2:"DICESONICE.ghostDiceForRollAuthor"}),default:!1,config:!0})})),Hooks.once("ready",(()=>{Utils.migrateOldSettings().then((t=>{t&&(game.settings.get("core","noCanvas")?logger.warn("Dice So Nice! is disabled because the user has activated the 'No-Canvas' mode"):(game.dice3d=new Dice3D,game.dice3d.init()))}))}));const shouldInterceptMessage=(t,i={dsnCountAddedRoll:0})=>{const r=game.settings.get("dice-so-nice","animateInlineRoll")&&t.content.includes("inline-roll"),a=game.settings.get("dice-so-nice","showGhostDice"),o="1"===a||"2"===a&&game.user.id===t.author.id,l=t.isContentVisible,c=game.settings.get("dice-so-nice","animateRollTable"),h=t.getFlag("core","RollTable"),u=h&&game.tables.get(h).displayRoll;return(t.isRoll||r)&&(l||o)&&game.dice3d&&!game.dice3d.messageHookDisabled&&(!h||c&&u)&&t.rolls.slice(i.dsnCountAddedRoll).some((t=>t.dice.length>0))};Hooks.on("createChatMessage",(t=>{if(!shouldInterceptMessage(t))return;let i=t.isRoll?t.rolls:null,r=i?0:-1;if(game.settings.get("dice-so-nice","animateInlineRoll")&&t.content.includes("inline-roll")){let a=$($.parseHTML(`<div>${t.content}</div>`)).find(".inline-roll.inline-result:not(.inline-dsn-hidden)");if(0==a.length&&!t.isRoll)return;let o=[];if(a.each(((t,i)=>{let a=CONFIG.Dice.rolls[0].fromJSON(unescape(i.dataset.roll));r++,a.dice.forEach((t=>{t.options.hasOwnProperty("rollOrder")||(t.options.rollOrder=r)})),o.push(a)})),o.length){t.isRoll&&(o=[...t.rolls,...o]);let r=foundry.dice.terms.PoolTerm.fromRolls(o);i=[CONFIG.Dice.rolls[0].fromTerms([r])]}else if(!t.isRoll)return}if(!i.length||!i[0].dice.length)return;t.getFlag("core","initiativeRoll")&&game.settings.get("dice-so-nice","disabledForInitiative")||(Dice3D.CONFIG().enabled&&"sounds/dice.wav"==t.sound&&foundry.utils.mergeObject(t,{"-=sound":null},{performDeletions:!0}),t._dice3danimating=!0,game.dice3d.renderRolls(t,i))})),Hooks.on("renderChatMessage",((t,i,r)=>{game.dice3d&&game.dice3d.messageHookDisabled||t._dice3danimating&&!game.settings.get("dice-so-nice","immediatelyDisplayChatMessages")&&(t._countNewRolls?i.find(`.dice-roll:nth-last-child(-n+${t._countNewRolls})`).addClass("dsn-hide"):i.addClass("dsn-hide"))})),Hooks.on("preUpdateChatMessage",((t,i,r)=>{"rolls"in i&&(r.dsnCountAddedRoll=i.rolls.length-t.toObject().rolls.length)})),Hooks.on("updateChatMessage",((t,i,r)=>{shouldInterceptMessage(t,r)&&r.dsnCountAddedRoll>0&&(t._dice3danimating=!0,t._countNewRolls=r.dsnCountAddedRoll,game.dice3d.renderRolls(t,t.rolls.slice(-r.dsnCountAddedRoll)))})),document.addEventListener("visibilitychange",(function(){if(!document.hidden&&game.dice3d&&game.dice3d.hiddenAnimationQueue&&game.dice3d.hiddenAnimationQueue.length){let t=(new Date).getTime();for(let i=0;i<game.dice3d.hiddenAnimationQueue.length;i++){let r=game.dice3d.hiddenAnimationQueue[i];t-r.timestamp>1e4?r.resolve(!1):game.dice3d._showAnimation(r.data,r.config).then((t=>{r.resolve(t)}))}game.dice3d.hiddenAnimationQueue=[]}}));
